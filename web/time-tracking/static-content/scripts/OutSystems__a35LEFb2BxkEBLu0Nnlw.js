/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.3.6 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, https://github.com/requirejs/requirejs/blob/master/LICENSE
 */
var requirejs,require,define;!function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.6",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){var i;if(e)for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}function eachReverse(e,t){var i;if(e)for(i=e.length-1;i>-1&&(!e[i]||!t(e[i],i,e));i-=1);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var i;for(i in e)if(hasProp(e,i)&&t(e[i],i))break}function mixin(e,t,i,r){return t&&eachProp(t,(function(t,n){!i&&hasProp(e,n)||(!r||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[n]=t:(e[n]||(e[n]={}),mixin(e[n],t,i,r)))})),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),(function(e){t=t[e]})),t}function makeError(e,t,i,r){var n=new Error(t+"\nhttps://requirejs.org/docs/errors.html#"+e);return n.requireType=e,n.requireModules=r,i&&(n.originalError=i),n}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,i,r){var n,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=i,i=r):e=[]),o&&o.context&&(a=o.context),(n=getOwn(contexts,a))||(n=contexts[a]=req.s.newContext(a)),o&&n.configure(o),n.require(e,t,i)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],(function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}})),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,i){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,i){var r,n=e&&e.config||{};if(isBrowser)return(r=req.createNode(n,t,i)).setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=i,n.onNodeCreated&&n.onNodeCreated(r,n,t,i),currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{setTimeout((function(){}),0),importScripts(i),e.completeLoad(t)}catch(r){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+i,r,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),(function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0})),define=function(e,t,i){var r,n;"string"!=typeof e&&(i=t,t=e,e=null),isArray(t)||(i=t,t=null),!t&&isFunction(i)&&(t=[],i.length&&(i.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,(function(e,i){t.push(i)})),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript())&&(e||(e=r.getAttribute("data-requiremodule")),n=contexts[r.getAttribute("data-requirecontext")]),n?(n.defQueue.push([e,t,i]),n.defQueueMap[e]=!0):globalDefQueue.push([e,t,i])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(e){var t,i,r,n,o,a={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},s={},u={},c={},d=[],p={},f={},l={},h=1,m=1;function g(e,t,i){var r,n,o,s,u,c,d,p,f,l,h=t&&t.split("/"),m=a.map,g=m&&m["*"];if(e&&(c=(e=e.split("/")).length-1,a.nodeIdCompat&&jsSuffixRegExp.test(e[c])&&(e[c]=e[c].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&h&&(e=h.slice(0,h.length-1).concat(e)),function(e){var t,i;for(t=0;t<e.length;t++)if("."===(i=e[t]))e.splice(t,1),t-=1;else if(".."===i){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}(e),e=e.join("/")),i&&m&&(h||g)){e:for(o=(n=e.split("/")).length;o>0;o-=1){if(u=n.slice(0,o).join("/"),h)for(s=h.length;s>0;s-=1)if((r=getOwn(m,h.slice(0,s).join("/")))&&(r=getOwn(r,u))){d=r,p=o;break e}!f&&g&&getOwn(g,u)&&(f=getOwn(g,u),l=o)}!d&&f&&(d=f,p=l),d&&(n.splice(0,p,d),e=n.join("/"))}return getOwn(a.pkgs,e)||e}function v(e){isBrowser&&each(scripts(),(function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),!0}))}function x(e){var t=getOwn(a.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),r.require.undef(e),r.makeRequire(null,{skipMap:!0})([e]),!0}function b(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function q(e,t,i,n){var o,a,s,u,c=null,d=t?t.name:null,f=e,l=!0,v="";return e||(l=!1,e="_@r"+(h+=1)),c=(u=b(e))[0],e=u[1],c&&(c=g(c,d,n),a=getOwn(p,c)),e&&(c?v=i?e:a&&a.normalize?a.normalize(e,(function(e){return g(e,d,n)})):-1===e.indexOf("!")?g(e,d,n):e:(c=(u=b(v=g(e,d,n)))[0],v=u[1],i=!0,o=r.nameToUrl(v))),{prefix:c,name:v,parentMap:t,unnormalized:!!(s=!c||a||i?"":"_unnormalized"+(m+=1)),url:o,originalName:f,isDefine:l,id:(c?c+"!"+v:v)+s}}function E(e){var t=e.id,i=getOwn(s,t);return i||(i=s[t]=new r.Module(e)),i}function w(e,t,i){var r=e.id,n=getOwn(s,r);!hasProp(p,r)||n&&!n.defineEmitComplete?(n=E(e)).error&&"error"===t?i(n.error):n.on(t,i):"defined"===t&&i(p[r])}function y(e,t){var i=e.requireModules,r=!1;t?t(e):(each(i,(function(t){var i=getOwn(s,t);i&&(i.error=e,i.events.error&&(r=!0,i.emit("error",e)))})),r||req.onError(e))}function S(){globalDefQueue.length&&(each(globalDefQueue,(function(e){var t=e[0];"string"==typeof t&&(r.defQueueMap[t]=!0),d.push(e)})),globalDefQueue=[])}function k(e){delete s[e],delete u[e]}function M(){var e,i,n=1e3*a.waitSeconds,c=n&&r.startTime+n<(new Date).getTime(),d=[],f=[],l=!1,h=!0;if(!t){if(t=!0,eachProp(u,(function(e){var t=e.map,r=t.id;if(e.enabled&&(t.isDefine||f.push(e),!e.error))if(!e.inited&&c)x(r)?(i=!0,l=!0):(d.push(r),v(r));else if(!e.inited&&e.fetched&&t.isDefine&&(l=!0,!t.prefix))return h=!1})),c&&d.length)return(e=makeError("timeout","Load timeout for modules: "+d,null,d)).contextName=r.contextName,y(e);h&&each(f,(function(e){!function e(t,i,r){var n=t.map.id;t.error?t.emit("error",t.error):(i[n]=!0,each(t.depMaps,(function(n,o){var a=n.id,u=getOwn(s,a);!u||t.depMatched[o]||r[a]||(getOwn(i,a)?(t.defineDep(o,p[a]),t.check()):e(u,i,r))})),r[n]=!0)}(e,{},{})})),c&&!i||!l||!isBrowser&&!isWebWorker||o||(o=setTimeout((function(){o=0,M()}),50)),t=!1}}function O(e){hasProp(p,e[0])||E(q(e[0],null,!0)).init(e[1],e[2])}function j(e,t,i,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(i,t,!1)}function P(e){var t=e.currentTarget||e.srcElement;return j(t,r.onScriptLoad,"load","onreadystatechange"),j(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function R(){var e;for(S();d.length;){if(null===(e=d.shift())[0])return y(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));O(e)}r.defQueueMap={}}return n={require:function(e){return e.require?e.require:e.require=r.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?p[e.map.id]=e.exports:e.exports=p[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(a.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},(i=function(e){this.events=getOwn(c,e.id)||{},this.map=e,this.shim=getOwn(a.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,i,r){r=r||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=bind(this,(function(e){this.emit("error",e)}))),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();r.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,(function(){return e.prefix?this.callPlugin():this.load()})))}},load:function(){var e=this.map.url;f[e]||(f[e]=!0,r.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,i=this.map.id,n=this.depExports,o=this.exports,a=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(a)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{o=r.execCb(i,a,n,o)}catch(t){e=t}else o=r.execCb(i,a,n,o);if(this.map.isDefine&&void 0===o&&((t=this.module)?o=t.exports:this.usingExports&&(o=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",y(this.error=e)}else o=a;if(this.exports=o,this.map.isDefine&&!this.ignore&&(p[i]=o,req.onResourceLoad)){var s=[];each(this.depMaps,(function(e){s.push(e.normalizedMap||e)})),req.onResourceLoad(r,this.map,s)}k(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(r.defQueueMap,i)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=q(e.prefix);this.depMaps.push(i),w(i,"defined",bind(this,(function(i){var n,o,u,c=getOwn(l,this.map.id),d=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,f=r.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(d=i.normalize(d,(function(e){return g(e,p,!0)}))||""),w(o=q(e.prefix+"!"+d,this.map.parentMap,!0),"defined",bind(this,(function(e){this.map.normalizedMap=o,this.init([],(function(){return e}),null,{enabled:!0,ignore:!0})}))),void((u=getOwn(s,o.id))&&(this.depMaps.push(o),this.events.error&&u.on("error",bind(this,(function(e){this.emit("error",e)}))),u.enable()))):c?(this.map.url=r.nameToUrl(c),void this.load()):((n=bind(this,(function(e){this.init([],(function(){return e}),null,{enabled:!0})}))).error=bind(this,(function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(s,(function(e){0===e.map.id.indexOf(t+"_unnormalized")&&k(e.map.id)})),y(e)})),n.fromText=bind(this,(function(i,o){var s=e.name,u=q(s),c=useInteractive;o&&(i=o),c&&(useInteractive=!1),E(u),hasProp(a.config,t)&&(a.config[s]=a.config[t]);try{req.exec(i)}catch(e){return y(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}c&&(useInteractive=!0),this.depMaps.push(u),r.completeLoad(s),f([s],n)})),void i.load(e.name,f,n,a))}))),r.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){u[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,(function(e,t){var i,o,a;if("string"==typeof e){if(e=q(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,a=getOwn(n,e.id))return void(this.depExports[t]=a(this));this.depCount+=1,w(e,"defined",bind(this,(function(e){this.undefed||(this.defineDep(t,e),this.check())}))),this.errback?w(e,"error",bind(this,this.errback)):this.events.error&&w(e,"error",bind(this,(function(e){this.emit("error",e)})))}i=e.id,o=s[i],hasProp(n,i)||!o||o.enabled||r.enable(e,this)}))),eachProp(this.pluginMaps,bind(this,(function(e){var t=getOwn(s,e.id);t&&!t.enabled&&r.enable(e,this)}))),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){each(this.events[e],(function(e){e(t)})),"error"===e&&delete this.events[e]}},(r={config:a,contextName:e,registry:s,defined:p,urlFetched:f,defQueue:d,defQueueMap:{},Module:i,makeModuleMap:q,nextTick:req.nextTick,onError:y,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,i){return(-1===i.indexOf("?")?"?":"&")+t}}var i=a.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,(function(e,t){n[t]?(a[t]||(a[t]={}),mixin(a[t],e,!0,!0)):a[t]=e})),e.bundles&&eachProp(e.bundles,(function(e,t){each(e,(function(e){e!==t&&(l[e]=t)}))})),e.shim&&(eachProp(e.shim,(function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=r.makeShimExports(e)),i[t]=e})),a.shim=i),e.packages&&each(e.packages,(function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(a.paths[t]=e.location),a.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")})),eachProp(s,(function(e,t){e.inited||e.map.unnormalized||(e.map=q(t,null,!0))})),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}},makeRequire:function(t,i){function o(a,u,c){var d,f;return i.enableBuildCallback&&u&&isFunction(u)&&(u.__requireJsBuild=!0),"string"==typeof a?isFunction(u)?y(makeError("requireargs","Invalid require call"),c):t&&hasProp(n,a)?n[a](s[t.id]):req.get?req.get(r,a,t,o):(d=q(a,t,!1,!0).id,hasProp(p,d)?p[d]:y(makeError("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(R(),r.nextTick((function(){R(),(f=E(q(null,t))).skipMap=i.skipMap,f.init(a,u,c,{enabled:!0}),M()})),o)}return i=i||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var i,n=e.lastIndexOf("."),o=e.split("/")[0];return-1!==n&&(!("."===o||".."===o)||n>1)&&(i=e.substring(n,e.length),e=e.substring(0,n)),r.nameToUrl(g(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(p,q(e,t,!1,!0).id)},specified:function(e){return e=q(e,t,!1,!0).id,hasProp(p,e)||hasProp(s,e)}}),t||(o.undef=function(e){S();var i=q(e,t,!0),n=getOwn(s,e);n.undefed=!0,v(e),delete p[e],delete f[i.url],delete c[e],eachReverse(d,(function(t,i){t[0]===e&&d.splice(i,1)})),delete r.defQueueMap[e],n&&(n.events.defined&&(c[e]=n.events),k(e))}),o},enable:function(e){getOwn(s,e.id)&&E(e).enable()},completeLoad:function(e){var t,i,n,o=getOwn(a.shim,e)||{},u=o.exports;for(S();d.length;){if(null===(i=d.shift())[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);O(i)}if(r.defQueueMap={},n=getOwn(s,e),!t&&!hasProp(p,e)&&n&&!n.inited){if(!(!a.enforceDefine||u&&getGlobal(u)))return x(e)?void 0:y(makeError("nodefine","No define call for "+e,null,[e]));O([e,o.deps||[],o.exportsFn])}M()},nameToUrl:function(e,t,i){var n,o,s,u,c,d,p=getOwn(a.pkgs,e);if(p&&(e=p),d=getOwn(l,e))return r.nameToUrl(d,t,i);if(req.jsExtRegExp.test(e))u=e+(t||"");else{for(n=a.paths,s=(o=e.split("/")).length;s>0;s-=1)if(c=getOwn(n,o.slice(0,s).join("/"))){isArray(c)&&(c=c[0]),o.splice(0,s,c);break}u=o.join("/"),u=("/"===(u+=t||(/^data\:|^blob\:|\?/.test(u)||i?"":".js")).charAt(0)||u.match(/^[\w\+\.\-]+:/)?"":a.baseUrl)+u}return a.urlArgs&&!/^blob\:/.test(u)?u+a.urlArgs(e,u):u},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,i,r){return t.apply(r,i)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=P(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=P(e);if(!x(t.id)){var i=[];return eachProp(s,(function(e,r){0!==r.indexOf("_@r")&&each(e.depMaps,(function(e){if(e.id===t.id)return i.push(r),!0}))})),y(makeError("scripterror",'Script error for "'+t.id+(i.length?'", needed by: '+i.join(", "):'"'),e,[t.id]))}}}).require=r.makeRequire(),r}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),(function(e){if("interactive"===e.readyState)return interactiveScript=e})),interactiveScript}}(this,"undefined"==typeof setTimeout?void 0:setTimeout);
define("requireLib", function(){});

var __extends,__assign,__rest,__decorate,__param,__esDecorate,__runInitializers,__propKey,__setFunctionName,__metadata,__awaiter,__generator,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__createBinding;!function(e){var t="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:{};function r(e,r){return e!==t&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(t,n){return e[t]=r?r(t,n):n}}"function"==typeof define&&define.amd?define("tslib",["exports"],(function(n){e(r(t,r(n)))})):"object"==typeof module&&"object"==typeof module.exports?e(r(t,r(module.exports))):e(r(t))}((function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])};__extends=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)},__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__rest=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},__decorate=function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},__param=function(e,t){return function(r,n){t(r,n,e)}},__esDecorate=function(e,t,r,n,o,a){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var c,_=n.kind,l="getter"===_?"get":"setter"===_?"set":"value",u=!t&&e?n.static?e:e.prototype:null,s=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f=!1,p=r.length-1;p>=0;p--){var y={};for(var d in n)y[d]="access"===d?{}:n[d];for(var d in n.access)y.access[d]=n.access[d];y.addInitializer=function(e){if(f)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(e||null))};var v=(0,r[p])("accessor"===_?{get:s.get,set:s.set}:s[l],y);if("accessor"===_){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(c=i(v.get))&&(s.get=c),(c=i(v.set))&&(s.set=c),(c=i(v.init))&&o.unshift(c)}else(c=i(v))&&("field"===_?o.unshift(c):s[l]=c)}u&&Object.defineProperty(u,n.name,s),f=!0},__runInitializers=function(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0},__propKey=function(e){return"symbol"==typeof e?e:"".concat(e)},__setFunctionName=function(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})},__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{_(n.next(e))}catch(e){a(e)}}function c(e){try{_(n.throw(e))}catch(e){a(e)}}function _(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}_((n=n.apply(e,t||[])).next())}))},__generator=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(_){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,_])}}},__exportStar=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||__createBinding(t,e,r)},__createBinding=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},__values=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e},__spreadArrays=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,c=a.length;i<c;i++,o++)n[o]=a[i];return n},__spreadArray=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},__await=function(e){return this instanceof __await?(this.v=e,this):new __await(e)},__asyncGenerator=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){a.push([e,t,r,n])>1||c(e,t)}))})}function c(e,t){try{(r=o[e](t)).value instanceof __await?Promise.resolve(r.value.v).then(_,l):u(a[0][2],r)}catch(e){u(a[0][3],e)}var r}function _(e){c("next",e)}function l(e){c("throw",e)}function u(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}},__asyncDelegator=function(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:__await(e[n](t)),done:!1}:o?o(t):t}:o}},__asyncValues=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,o,(t=e[r](t)).done,t.value)}))}}},__makeTemplateObject=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var r=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return r(t,e),t},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},__classPrivateFieldSet=function(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},__classPrivateFieldIn=function(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)},e("__extends",__extends),e("__assign",__assign),e("__rest",__rest),e("__decorate",__decorate),e("__param",__param),e("__esDecorate",__esDecorate),e("__runInitializers",__runInitializers),e("__propKey",__propKey),e("__setFunctionName",__setFunctionName),e("__metadata",__metadata),e("__awaiter",__awaiter),e("__generator",__generator),e("__exportStar",__exportStar),e("__createBinding",__createBinding),e("__values",__values),e("__read",__read),e("__spread",__spread),e("__spreadArrays",__spreadArrays),e("__spreadArray",__spreadArray),e("__await",__await),e("__asyncGenerator",__asyncGenerator),e("__asyncDelegator",__asyncDelegator),e("__asyncValues",__asyncValues),e("__makeTemplateObject",__makeTemplateObject),e("__importStar",__importStar),e("__importDefault",__importDefault),e("__classPrivateFieldGet",__classPrivateFieldGet),e("__classPrivateFieldSet",__classPrivateFieldSet),e("__classPrivateFieldIn",__classPrivateFieldIn)}));
define("@outsystems/communication-js",["exports"],(function(e){"use strict";var t;function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=v(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function l(e){var t=h();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return f(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)})(e)}function f(e,t,n){return(f=h()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&d(o,n.prototype),o}).apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function k(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function E(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}function C(e,t){return function(){return e.apply(t,arguments)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=e.NativeHttpClient=e.HttpClient=e.ErrorCodes=e.DebuggerHttpClient=e.ContentType=e.CommunicationError=void 0,"function"==typeof SuppressedError&&SuppressedError;var T,O=Object.prototype.toString,P=Object.getPrototypeOf,A=(T=Object.create(null),function(e){var t=O.call(e);return T[t]||(T[t]=t.slice(8,-1).toLowerCase())}),R=function(e){return e=e.toLowerCase(),function(t){return A(t)===e}},j=function(e){return function(t){return w(t)===e}},I=Array.isArray,x=j("undefined"),D=R("ArrayBuffer"),L=j("string"),N=j("function"),U=j("number"),H=function(e){return null!==e&&"object"===w(e)},F=function(e){if("object"!==A(e))return!1;var t=P(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},M=R("Date"),W=R("File"),B=R("Blob"),q=R("FileList"),z=R("URLSearchParams");function V(e,t){var n,r,o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,i=void 0!==o&&o;if(null!=e)if("object"!==w(e)&&(e=[e]),I(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var a,s=i?Object.getOwnPropertyNames(e):Object.keys(e),c=s.length;for(n=0;n<c;n++)a=s[n],t.call(null,e[a],a,e)}}function J(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),o=r.length;o-- >0;)if(t===(n=r[o]).toLowerCase())return n;return null}var G="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,K=function(e){return!x(e)&&e!==G},$=function(e){return function(t){return e&&t instanceof e}}("undefined"!=typeof Uint8Array&&P(Uint8Array)),Q=R("HTMLFormElement"),X=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),Z=R("RegExp"),Y=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};V(n,(function(n,o){!1!==t(n,o,e)&&(r[o]=n)})),Object.defineProperties(e,r)},ee="abcdefghijklmnopqrstuvwxyz",te="0123456789",ne={DIGIT:te,ALPHA:ee,ALPHA_DIGIT:ee+ee.toUpperCase()+te},re=R("AsyncFunction"),oe={isArray:I,isArrayBuffer:D,isBuffer:function(e){return null!==e&&!x(e)&&null!==e.constructor&&!x(e.constructor)&&N(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"==typeof FormData&&e instanceof FormData||N(e.append)&&("formdata"===(t=A(e))||"object"===t&&N(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&D(e.buffer)},isString:L,isNumber:U,isBoolean:function(e){return!0===e||!1===e},isObject:H,isPlainObject:F,isUndefined:x,isDate:M,isFile:W,isBlob:B,isRegExp:Z,isFunction:N,isStream:function(e){return H(e)&&N(e.pipe)},isURLSearchParams:z,isTypedArray:$,isFileList:q,forEach:V,merge:function e(){for(var t=(K(this)&&this||{}).caseless,n={},r=function(r,o){var i=t&&J(n,o)||o;F(n[i])&&F(r)?n[i]=e(n[i],r):F(r)?n[i]=e({},r):I(r)?n[i]=r.slice():n[i]=r},o=0,i=arguments.length;o<i;o++)arguments[o]&&V(arguments[o],r);return n},extend:function(e,t,n){return V(t,(function(t,r){n&&N(t)?e[r]=C(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var o,i,a,s={};if(t=t||{},null==e)return t;do{for(i=(o=Object.getOwnPropertyNames(e)).length;i-- >0;)a=o[i],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&P(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:A,kindOfTest:R,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(I(e))return e;var t=e.length;if(!U(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var o=n.value;t.call(e,o[0],o[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Q,hasOwnProperty:X,hasOwnProp:X,reduceDescriptors:Y,freezeMethods:function(e){Y(e,(function(t,n){if(N(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];N(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return I(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:J,global:G,isContextDefined:K,ALPHABET:ne,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&N(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(H(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var o=I(n)?[]:{};return V(n,(function(t,n){var i=e(t,r+1);!x(i)&&(o[n]=i)})),t[r]=void 0,o}}return n}(e,0)},isAsyncFn:re,isThenable:function(e){return e&&(H(e)||N(e))&&N(e.then)&&N(e.catch)}};function ie(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}oe.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var ae=ie.prototype,se={};function ce(e){return oe.isPlainObject(e)||oe.isArray(e)}function le(e){return oe.endsWith(e,"[]")?e.slice(0,-2):e}function ue(e,t,n){return e?e.concat(t).map((function(e,t){return e=le(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){se[e]={value:e}})),Object.defineProperties(ie,se),Object.defineProperty(ae,"isAxiosError",{value:!0}),ie.from=function(e,t,n,r,o,i){var a=Object.create(ae);return oe.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),ie.call(a,e.message,t,n,r,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};var fe=oe.toFlatObject(oe,{},null,(function(e){return/^is[A-Z]/.test(e)}));function he(e,t,n){if(!oe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=oe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!oe.isUndefined(t[e])}))).metaTokens,o=n.visitor||l,i=n.dots,a=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&oe.isSpecCompliantForm(t);if(!oe.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(oe.isDate(e))return e.toISOString();if(!s&&oe.isBlob(e))throw new ie("Blob is not supported. Use a Buffer instead.");return oe.isArrayBuffer(e)||oe.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,o){var s=e;if(e&&!o&&"object"===w(e))if(oe.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(oe.isArray(e)&&function(e){return oe.isArray(e)&&!e.some(ce)}(e)||(oe.isFileList(e)||oe.endsWith(n,"[]"))&&(s=oe.toArray(e)))return n=le(n),s.forEach((function(e,r){!oe.isUndefined(e)&&null!==e&&t.append(!0===a?ue([n],r,i):null===a?n:n+"[]",c(e))})),!1;return!!ce(e)||(t.append(ue(o,n,i),c(e)),!1)}var u=[],f=Object.assign(fe,{defaultVisitor:l,convertValue:c,isVisitable:ce});if(!oe.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!oe.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),oe.forEach(n,(function(n,i){!0===(!(oe.isUndefined(n)||null===n)&&o.call(t,n,oe.isString(i)?i.trim():i,r,f))&&e(n,r?r.concat(i):[i])})),u.pop()}}(e),t}function de(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function pe(e,t){this._pairs=[],e&&he(e,this,t)}var ye=pe.prototype;function ve(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ge(e,t,n){if(!t)return e;var r,o=n&&n.encode||ve,i=n&&n.serialize;if(r=i?i(t,n):oe.isURLSearchParams(t)?t.toString():new pe(t,n).toString(o)){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}ye.append=function(e,t){this._pairs.push([e,t])},ye.toString=function(e){var t=e?function(t){return e.call(this,t,de)}:de;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var me,be=function(){function e(){m(this,e),this.handlers=[]}return _(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){oe.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),_e={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},we={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:pe,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:("undefined"==typeof navigator||"ReactNative"!==(me=navigator.product)&&"NativeScript"!==me&&"NS"!==me)&&"undefined"!=typeof window&&"undefined"!=typeof document,isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};function Se(e){if(oe.isFormData(e)&&oe.isFunction(e.entries)){var t={};return oe.forEachEntry(e,(function(e,n){!function e(t,n,r,o){var i=t[o++],a=Number.isFinite(+i),s=o>=t.length;return i=!i&&oe.isArray(r)?r.length:i,s?(oe.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!a):(r[i]&&oe.isObject(r[i])||(r[i]=[]),e(t,n,r[i],o)&&oe.isArray(r[i])&&(r[i]=function(e){var t,n,r={},o=Object.keys(e),i=o.length;for(t=0;t<i;t++)r[n=o[t]]=e[n];return r}(r[i])),!a)}(function(e){return oe.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),n,t,0)})),t}return null}var ke={"Content-Type":void 0},Ee={transitional:_e,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",o=r.indexOf("application/json")>-1,i=oe.isObject(e);if(i&&oe.isHTMLForm(e)&&(e=new FormData(e)),oe.isFormData(e))return o&&o?JSON.stringify(Se(e)):e;if(oe.isArrayBuffer(e)||oe.isBuffer(e)||oe.isStream(e)||oe.isFile(e)||oe.isBlob(e))return e;if(oe.isArrayBufferView(e))return e.buffer;if(oe.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return he(e,new we.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return we.isNode&&oe.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=oe.isFileList(e))||r.indexOf("multipart/form-data")>-1){var a=this.env&&this.env.FormData;return he(n?{"files[]":e}:e,a&&new a,this.formSerializer)}}return i||o?(t.setContentType("application/json",!1),function(e,t,n){if(oe.isString(e))try{return(0,JSON.parse)(e),oe.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Ee.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&oe.isString(e)&&(n&&!this.responseType||r)){var o=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw ie.from(e,ie.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:we.classes.FormData,Blob:we.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};oe.forEach(["delete","get","head"],(function(e){Ee.headers[e]={}})),oe.forEach(["post","put","patch"],(function(e){Ee.headers[e]=oe.merge(ke)}));var Ce=Ee,Te=oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Oe=Symbol("internals");function Pe(e){return e&&String(e).trim().toLowerCase()}function Ae(e){return!1===e||null==e?e:oe.isArray(e)?e.map(Ae):String(e)}function Re(e,t,n,r,o){return oe.isFunction(r)?r.call(this,t,n):(o&&(t=n),oe.isString(t)?oe.isString(r)?-1!==t.indexOf(r):oe.isRegExp(r)?r.test(t):void 0:void 0)}var je=function(e,t){function n(e){m(this,n),e&&this.set(e)}return _(n,[{key:"set",value:function(e,t,n){var r=this;function o(e,t,n){var o=Pe(t);if(!o)throw new Error("header name must be a non-empty string");var i=oe.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=Ae(e))}var i,a,s,c,l,u=function(e,t){return oe.forEach(e,(function(e,n){return o(e,n,t)}))};return oe.isPlainObject(e)||e instanceof this.constructor?u(e,t):oe.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?u((l={},(i=e)&&i.split("\n").forEach((function(e){c=e.indexOf(":"),a=e.substring(0,c).trim().toLowerCase(),s=e.substring(c+1).trim(),!a||l[a]&&Te[a]||("set-cookie"===a?l[a]?l[a].push(s):l[a]=[s]:l[a]=l[a]?l[a]+", "+s:s)})),l),t):null!=e&&o(t,e,n),this}},{key:"get",value:function(e,t){if(e=Pe(e)){var n=oe.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(oe.isFunction(t))return t.call(this,r,n);if(oe.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=Pe(e)){var n=oe.findKey(this,e);return!(!n||void 0===this[n]||t&&!Re(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function o(e){if(e=Pe(e)){var o=oe.findKey(n,e);!o||t&&!Re(0,n[o],o,t)||(delete n[o],r=!0)}}return oe.isArray(e)?e.forEach(o):o(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var o=t[n];e&&!Re(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return oe.forEach(this,(function(r,o){var i=oe.findKey(n,o);if(i)return t[i]=Ae(r),void delete t[o];var a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(o):String(o).trim();a!==o&&delete t[o],t[a]=Ae(r),n[a]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return oe.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&oe.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=y(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[Oe]=this[Oe]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=Pe(e);t[r]||(function(e,t){var n=oe.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return oe.isArray(e)?e.forEach(r):r(e),this}}]),n}();je.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),oe.freezeMethods(je.prototype),oe.freezeMethods(je);var Ie=je;function xe(e,t){var n=this||Ce,r=t||n,o=Ie.from(r.headers),i=r.data;return oe.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function De(e){return!(!e||!e.__CANCEL__)}function Le(e,t,n){ie.call(this,null==e?"canceled":e,ie.ERR_CANCELED,t,n),this.name="CanceledError"}oe.inherits(Le,ie,{__CANCEL__:!0});var Ne=we.isStandardBrowserEnv?{write:function(e,t,n,r,o,i){var a=[];a.push(e+"="+encodeURIComponent(t)),oe.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),oe.isString(r)&&a.push("path="+r),oe.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Ue(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var He=we.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=oe.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function Fe(e,t){var n=0,r=function(e,t){e=e||10;var n,r=new Array(e),o=new Array(e),i=0,a=0;return t=void 0!==t?t:1e3,function(s){var c=Date.now(),l=o[a];n||(n=c),r[i]=s,o[i]=c;for(var u=a,f=0;u!==i;)f+=r[u++],u%=e;if((i=(i+1)%e)===a&&(a=(a+1)%e),!(c-n<t)){var h=l&&c-l;return h?Math.round(1e3*f/h):void 0}}}(50,250);return function(o){var i=o.loaded,a=o.lengthComputable?o.total:void 0,s=i-n,c=r(s);n=i;var l={loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&i<=a?(a-i)/c:void 0,event:o};l[t?"download":"upload"]=!0,e(l)}}var Me={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,o=e.data,i=Ie.from(e.headers).normalize(),a=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}oe.isFormData(o)&&(we.isStandardBrowserEnv||we.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));var c=new XMLHttpRequest;if(e.auth){var l=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(l+":"+u))}var f=Ue(e.baseURL,e.url);function h(){if(c){var r=Ie.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new ie("Request failed with status code "+n.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:a&&"text"!==a&&"json"!==a?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:e,request:c}),c=null}}if(c.open(e.method.toUpperCase(),ge(f,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(h)},c.onabort=function(){c&&(n(new ie("Request aborted",ie.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new ie("Network Error",ie.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||_e;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ie(t,r.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,e,c)),c=null},we.isStandardBrowserEnv){var d=(e.withCredentials||He(f))&&e.xsrfCookieName&&Ne.read(e.xsrfCookieName);d&&i.set(e.xsrfHeaderName,d)}void 0===o&&i.setContentType(null),"setRequestHeader"in c&&oe.forEach(i.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),oe.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&"json"!==a&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",Fe(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Fe(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){c&&(n(!t||t.type?new Le(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p,y=(p=/^([-+\w]{1,25})(:?\/\/|:)/.exec(f))&&p[1]||"";y&&-1===we.protocols.indexOf(y)?n(new ie("Unsupported protocol "+y+":",ie.ERR_BAD_REQUEST,e)):c.send(o||null)}))}};oe.forEach(Me,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));function We(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Le(null,e)}function Be(e){return We(e),e.headers=Ie.from(e.headers),e.data=xe.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),function(e){for(var t,n,r=(e=oe.isArray(e)?e:[e]).length,o=0;o<r&&(t=e[o],!(n=oe.isString(t)?Me[t.toLowerCase()]:t));o++);if(!n){if(!1===n)throw new ie("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(oe.hasOwnProp(Me,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!oe.isFunction(n))throw new TypeError("adapter is not a function");return n}(e.adapter||Ce.adapter)(e).then((function(t){return We(e),t.data=xe.call(e,e.transformResponse,t),t.headers=Ie.from(t.headers),t}),(function(t){return De(t)||(We(e),t&&t.response&&(t.response.data=xe.call(e,e.transformResponse,t.response),t.response.headers=Ie.from(t.response.headers))),Promise.reject(t)}))}var qe=function(e){return e instanceof Ie?e.toJSON():e};function ze(e,t){t=t||{};var n={};function r(e,t,n){return oe.isPlainObject(e)&&oe.isPlainObject(t)?oe.merge.call({caseless:n},e,t):oe.isPlainObject(t)?oe.merge({},t):oe.isArray(t)?t.slice():t}function o(e,t,n){return oe.isUndefined(t)?oe.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function i(e,t){if(!oe.isUndefined(t))return r(void 0,t)}function a(e,t){return oe.isUndefined(t)?oe.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}var c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:function(e,t){return o(qe(e),qe(t),!0)}};return oe.forEach(Object.keys(Object.assign({},e,t)),(function(r){var i=c[r]||o,a=i(e[r],t[r],r);oe.isUndefined(a)&&i!==s||(n[r]=a)})),n}var Ve={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Ve[e]=function(n){return w(n)===e||"a"+(t<1?"n ":" ")+e}}));var Je={};Ve.transitional=function(e,t,n){function r(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,o,i){if(!1===e)throw new ie(r(o," has been removed"+(t?" in "+t:"")),ie.ERR_DEPRECATED);return t&&!Je[o]&&(Je[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}};var Ge={assertOptions:function(e,t,n){if("object"!==w(e))throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),o=r.length;o-- >0;){var i=r[o],a=t[i];if(a){var s=e[i],c=void 0===s||a(s,i,e);if(!0!==c)throw new ie("option "+i+" must be "+c,ie.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new ie("Unknown option "+i,ie.ERR_BAD_OPTION)}},validators:Ve},Ke=Ge.validators,$e=function(){function e(t){m(this,e),this.defaults=t,this.interceptors={request:new be,response:new be}}return _(e,[{key:"request",value:function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{};var n,r=t=ze(this.defaults,t),o=r.transitional,i=r.paramsSerializer,a=r.headers;void 0!==o&&Ge.assertOptions(o,{silentJSONParsing:Ke.transitional(Ke.boolean),forcedJSONParsing:Ke.transitional(Ke.boolean),clarifyTimeoutError:Ke.transitional(Ke.boolean)},!1),null!=i&&(oe.isFunction(i)?t.paramsSerializer={serialize:i}:Ge.assertOptions(i,{encode:Ke.function,serialize:Ke.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=a&&oe.merge(a.common,a[t.method]))&&oe.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete a[e]})),t.headers=Ie.concat(n,a);var s=[],c=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(c=c&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));var l,u=[];this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)}));var f,h=0;if(!c){var d=[Be.bind(this),void 0];for(d.unshift.apply(d,s),d.push.apply(d,u),f=d.length,l=Promise.resolve(t);h<f;)l=l.then(d[h++],d[h++]);return l}f=s.length;var p=t;for(h=0;h<f;){var y=s[h++],v=s[h++];try{p=y(p)}catch(e){v.call(this,e);break}}try{l=Be.call(this,p)}catch(e){return Promise.reject(e)}for(h=0,f=u.length;h<f;)l=l.then(u[h++],u[h++]);return l}},{key:"getUri",value:function(e){return ge(Ue((e=ze(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();oe.forEach(["delete","get","head","options"],(function(e){$e.prototype[e]=function(t,n){return this.request(ze(n||{},{method:e,url:t,data:(n||{}).data}))}})),oe.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(ze(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}$e.prototype[e]=t(),$e.prototype[e+"Form"]=t(!0)}));var Qe=$e,Xe=function(){function e(t){if(m(this,e),"function"!=typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,o){r.reason||(r.reason=new Le(e,t,o),n(r.reason))}))}return _(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}]),e}(),Ze={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ze).forEach((function(e){var t=y(e,2),n=t[0],r=t[1];Ze[r]=n}));var Ye=Ze,et=function e(t){var n=new Qe(t),r=C(Qe.prototype.request,n);return oe.extend(r,Qe.prototype,n,{allOwnKeys:!0}),oe.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(ze(t,n))},r}(Ce);et.Axios=Qe,et.CanceledError=Le,et.CancelToken=Xe,et.isCancel=De,et.VERSION="1.4.0",et.toFormData=he,et.AxiosError=ie,et.Cancel=et.CanceledError,et.all=function(e){return Promise.all(e)},et.spread=function(e){return function(t){return e.apply(null,t)}},et.isAxiosError=function(e){return oe.isObject(e)&&!0===e.isAxiosError},et.mergeConfig=ze,et.AxiosHeaders=Ie,et.formToJSON=function(e){return Se(oe.isHTMLForm(e)?new FormData(e):e)},et.HttpStatusCode=Ye,et.default=et;var tt,nt=et,rt=(nt.Axios,nt.AxiosError,nt.CanceledError,nt.isCancel,nt.CancelToken,nt.VERSION,nt.all,nt.Cancel,nt.isAxiosError,nt.spread,nt.toFormData,nt.AxiosHeaders),ot=(nt.HttpStatusCode,nt.formToJSON,nt.mergeConfig,function(e){c(n,e);var t=l(n);function n(e,r,o,i,a){var s;return m(this,n),(s=t.call(this,e)).errorCode=r,s.status=o?"".concat(o):"",s.response=i,s.category=a,s}return _(n)}(u(Error)));e.CommunicationError=ot,e.ErrorCodes=tt,function(e){e.Communication_Default="OS-CLRT-60900",e.Communication_Bad_Request="OS-CLRT-60901",e.Communication_Unauthorized="OS-CLRT-60902",e.Communication_Forbidden="OS-CLRT-60903",e.Communication_Not_Found="OS-CLRT-60904",e.Communication_Timeout="OS-CLRT-60905",e.Communication_Internal_Server_Error="OS-CLRT-60906",e.Communication_Unavailable="OS-CLRT-60907"}(tt||(e.ErrorCodes=tt={}));var it,at=(s(t={},"400",tt.Communication_Bad_Request),s(t,"401",tt.Communication_Unauthorized),s(t,"403",tt.Communication_Forbidden),s(t,"404",tt.Communication_Not_Found),s(t,"408",tt.Communication_Timeout),s(t,"500",tt.Communication_Internal_Server_Error),s(t,"503",tt.Communication_Unavailable),t),st=function(e){var t;return null!==(t=at["".concat(e)])&&void 0!==t?t:tt.Communication_Default},ct="traceparent",lt="tracestate",ut="baggage",ft=["code.function","outsystems.function.key","outsystems.function.type","outsystems.runtime.screen","outsystems.otel.access.visibility"];function ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return S(this,void 0,void 0,(function*(){if(!t)return e;var n=yield t();return n?function(e,t){var n=Object.assign(Object.assign({},t),s({},ct,function(e){return"00-".concat(e.traceId,"-").concat(e.spanId,"-").concat(e.sampled?"01":"00")}(e)));if(e.attributes){var r=function(e){return ft.map((function(t){return e[t]?"".concat(t,"=").concat(e[t]):void 0})).filter((function(e){return void 0!==e})).join(",")}(e.attributes);n[r.length>512?ut:lt]=r}return n}(n,e):e}))}!function(e){e.FormUrlEncoded="application/x-www-form-urlencoded",e.Json="application/json"}(it||(it={}));var dt,pt=it;e.ContentType=pt,function(e){e[e.Unknown=0]="Unknown",e[e.Timeout=1]="Timeout",e[e.Unauthorized=2]="Unauthorized"}(dt||(dt={}));var yt=dt;var vt,gt="undefined"!=typeof Symbol&&Symbol,mt={foo:{}},bt=Object,_t=Array.prototype.slice,wt=Object.prototype.toString,St=Function.prototype.bind||function(e){var t=this;if("function"!=typeof t||"[object Function]"!==wt.call(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n,r=_t.call(arguments,1),o=Math.max(0,t.length-r.length),i=[],a=0;a<o;a++)i.push("$"+a);if(n=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof n){var o=t.apply(this,r.concat(_t.call(arguments)));return Object(o)===o?o:this}return t.apply(e,r.concat(_t.call(arguments)))})),t.prototype){var s=function(){};s.prototype=t.prototype,n.prototype=new s,s.prototype=null}return n},kt=St.call(Function.call,Object.prototype.hasOwnProperty),Et=SyntaxError,Ct=Function,Tt=TypeError,Ot=function(e){try{return Ct('"use strict"; return ('+e+").constructor;")()}catch(e){}},Pt=Object.getOwnPropertyDescriptor;if(Pt)try{Pt({},"")}catch(e){Pt=null}var At=function(){throw new Tt},Rt=Pt?function(){try{return At}catch(e){try{return Pt(arguments,"callee").get}catch(e){return At}}}():At,jt="function"==typeof gt&&"function"==typeof Symbol&&"symbol"===w(gt("foo"))&&"symbol"===w(Symbol("bar"))&&function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"===w(Symbol.iterator))return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}(),It={__proto__:mt}.foo===mt.foo&&!({__proto__:null}instanceof bt),xt=Object.getPrototypeOf||(It?function(e){return e.__proto__}:null),Dt={},Lt="undefined"!=typeof Uint8Array&&xt?xt(Uint8Array):vt,Nt={"%AggregateError%":"undefined"==typeof AggregateError?vt:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?vt:ArrayBuffer,"%ArrayIteratorPrototype%":jt&&xt?xt([][Symbol.iterator]()):vt,"%AsyncFromSyncIteratorPrototype%":vt,"%AsyncFunction%":Dt,"%AsyncGenerator%":Dt,"%AsyncGeneratorFunction%":Dt,"%AsyncIteratorPrototype%":Dt,"%Atomics%":"undefined"==typeof Atomics?vt:Atomics,"%BigInt%":"undefined"==typeof BigInt?vt:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?vt:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?vt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?vt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?vt:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?vt:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?vt:FinalizationRegistry,"%Function%":Ct,"%GeneratorFunction%":Dt,"%Int8Array%":"undefined"==typeof Int8Array?vt:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?vt:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?vt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":jt&&xt?xt(xt([][Symbol.iterator]())):vt,"%JSON%":"object"===("undefined"==typeof JSON?"undefined":w(JSON))?JSON:vt,"%Map%":"undefined"==typeof Map?vt:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&jt&&xt?xt((new Map)[Symbol.iterator]()):vt,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?vt:Promise,"%Proxy%":"undefined"==typeof Proxy?vt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?vt:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?vt:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&jt&&xt?xt((new Set)[Symbol.iterator]()):vt,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?vt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":jt&&xt?xt(""[Symbol.iterator]()):vt,"%Symbol%":jt?Symbol:vt,"%SyntaxError%":Et,"%ThrowTypeError%":Rt,"%TypedArray%":Lt,"%TypeError%":Tt,"%Uint8Array%":"undefined"==typeof Uint8Array?vt:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?vt:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?vt:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?vt:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?vt:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?vt:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?vt:WeakSet};if(xt)try{null.error}catch(e){var Ut=xt(xt(e));Nt["%Error.prototype%"]=Ut}var Ht={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ft=St,Mt=kt,Wt=Ft.call(Function.call,Array.prototype.concat),Bt=Ft.call(Function.apply,Array.prototype.splice),qt=Ft.call(Function.call,String.prototype.replace),zt=Ft.call(Function.call,String.prototype.slice),Vt=Ft.call(Function.call,RegExp.prototype.exec),Jt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Gt=/\\(\\)?/g,Kt=function(e,t){var n,r=e;if(Mt(Ht,r)&&(r="%"+(n=Ht[r])[0]+"%"),Mt(Nt,r)){var o=Nt[r];if(o===Dt&&(o=function e(t){var n;if("%AsyncFunction%"===t)n=Ot("async function () {}");else if("%GeneratorFunction%"===t)n=Ot("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=Ot("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&xt&&(n=xt(o.prototype))}return Nt[t]=n,n}(r)),void 0===o&&!t)throw new Tt("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new Et("intrinsic "+e+" does not exist!")},$t=function(e,t){if("string"!=typeof e||0===e.length)throw new Tt("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new Tt('"allowMissing" argument must be a boolean');if(null===Vt(/^%?[^%]*%?$/,e))throw new Et("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=zt(e,0,1),n=zt(e,-1);if("%"===t&&"%"!==n)throw new Et("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new Et("invalid intrinsic syntax, expected opening `%`");var r=[];return qt(e,Jt,(function(e,t,n,o){r[r.length]=n?qt(o,Gt,"$1"):t||e})),r}(e),r=n.length>0?n[0]:"",o=Kt("%"+r+"%",t),i=o.name,a=o.value,s=!1,c=o.alias;c&&(r=c[0],Bt(n,Wt([0,1],c)));for(var l=1,u=!0;l<n.length;l+=1){var f=n[l],h=zt(f,0,1),d=zt(f,-1);if(('"'===h||"'"===h||"`"===h||'"'===d||"'"===d||"`"===d)&&h!==d)throw new Et("property names with quotes must have matching quotes");if("constructor"!==f&&u||(s=!0),Mt(Nt,i="%"+(r+="."+f)+"%"))a=Nt[i];else if(null!=a){if(!(f in a)){if(!t)throw new Tt("base intrinsic for "+e+" exists, but the property is not available.");return}if(Pt&&l+1>=n.length){var p=Pt(a,f);a=(u=!!p)&&"get"in p&&!("originalValue"in p.get)?p.get:a[f]}else u=Mt(a,f),a=a[f];u&&!s&&(Nt[i]=a)}}return a},Qt={exports:{}};!function(e){var t=St,n=$t,r=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),i=n("%Reflect.apply%",!0)||t.call(o,r),a=n("%Object.getOwnPropertyDescriptor%",!0),s=n("%Object.defineProperty%",!0),c=n("%Math.max%");if(s)try{s({},"a",{value:1})}catch(e){s=null}e.exports=function(e){var n=i(t,o,arguments);return a&&s&&a(n,"length").configurable&&s(n,"length",{value:1+c(0,e.length-(arguments.length-1))}),n};var l=function(){return i(t,r,arguments)};s?s(e.exports,"apply",{value:l}):e.exports.apply=l}(Qt);var Xt=$t,Zt=Qt.exports,Yt=Zt(Xt("String.prototype.indexOf")),en=function(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}(Object.freeze({__proto__:null,default:{}})),tn="function"==typeof Map&&Map.prototype,nn=Object.getOwnPropertyDescriptor&&tn?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,rn=tn&&nn&&"function"==typeof nn.get?nn.get:null,on=tn&&Map.prototype.forEach,an="function"==typeof Set&&Set.prototype,sn=Object.getOwnPropertyDescriptor&&an?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,cn=an&&sn&&"function"==typeof sn.get?sn.get:null,ln=an&&Set.prototype.forEach,un="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,fn="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,hn="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,dn=Boolean.prototype.valueOf,pn=Object.prototype.toString,yn=Function.prototype.toString,vn=String.prototype.match,gn=String.prototype.slice,mn=String.prototype.replace,bn=String.prototype.toUpperCase,_n=String.prototype.toLowerCase,wn=RegExp.prototype.test,Sn=Array.prototype.concat,kn=Array.prototype.join,En=Array.prototype.slice,Cn=Math.floor,Tn="function"==typeof BigInt?BigInt.prototype.valueOf:null,On=Object.getOwnPropertySymbols,Pn="function"==typeof Symbol&&"symbol"===w(Symbol.iterator)?Symbol.prototype.toString:null,An="function"==typeof Symbol&&"object"===w(Symbol.iterator),Rn="function"==typeof Symbol&&Symbol.toStringTag&&(w(Symbol.toStringTag),1)?Symbol.toStringTag:null,jn=Object.prototype.propertyIsEnumerable,In=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function xn(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||wn.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var r=e<0?-Cn(-e):Cn(e);if(r!==e){var o=String(r),i=gn.call(t,o.length+1);return mn.call(o,n,"$&_")+"."+mn.call(mn.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return mn.call(t,n,"$&_")}var Dn=en,Ln=Dn.custom,Nn=Wn(Ln)?Ln:null;function Un(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function Hn(e){return mn.call(String(e),/"/g,"&quot;")}function Fn(e){return!("[object Array]"!==zn(e)||Rn&&"object"===w(e)&&Rn in e)}function Mn(e){return!("[object RegExp]"!==zn(e)||Rn&&"object"===w(e)&&Rn in e)}function Wn(e){if(An)return e&&"object"===w(e)&&e instanceof Symbol;if("symbol"===w(e))return!0;if(!e||"object"!==w(e)||!Pn)return!1;try{return Pn.call(e),!0}catch(e){}return!1}var Bn=Object.prototype.hasOwnProperty||function(e){return e in this};function qn(e,t){return Bn.call(e,t)}function zn(e){return pn.call(e)}function Vn(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function Jn(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+bn.call(t.toString(16))}function Gn(e){return"Object("+e+")"}function Kn(e){return e+" { ? }"}function $n(e,t,n,r){return e+" ("+t+") {"+(r?Qn(n,r):kn.call(n,", "))+"}"}function Qn(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+kn.call(e,","+n)+"\n"+t.prev}function Xn(e,t){var n=Fn(e),r=[];if(n){r.length=e.length;for(var o=0;o<e.length;o++)r[o]=qn(e,o)?t(e[o],e):""}var i,a="function"==typeof On?On(e):[];if(An){i={};for(var s=0;s<a.length;s++)i["$"+a[s]]=a[s]}for(var c in e)qn(e,c)&&(n&&String(Number(c))===c&&c<e.length||An&&i["$"+c]instanceof Symbol||(wn.call(/[^\w$]/,c)?r.push(t(c,e)+": "+t(e[c],e)):r.push(c+": "+t(e[c],e))));if("function"==typeof On)for(var l=0;l<a.length;l++)jn.call(e,a[l])&&r.push("["+t(a[l])+"]: "+t(e[a[l]],e));return r}var Zn=$t,Yn=function(e,t){var n=Xt(e,!!t);return"function"==typeof n&&Yt(e,".prototype.")>-1?Zt(n):n},er=function e(t,n,r,o){var i=n||{};if(qn(i,"quoteStyle")&&"single"!==i.quoteStyle&&"double"!==i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(qn(i,"maxStringLength")&&("number"==typeof i.maxStringLength?i.maxStringLength<0&&i.maxStringLength!==1/0:null!==i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=!qn(i,"customInspect")||i.customInspect;if("boolean"!=typeof a&&"symbol"!==a)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(qn(i,"indent")&&null!==i.indent&&"\t"!==i.indent&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(qn(i,"numericSeparator")&&"boolean"!=typeof i.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=i.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,n){if(t.length>n.maxStringLength){var r=t.length-n.maxStringLength,o="... "+r+" more character"+(r>1?"s":"");return e(gn.call(t,0,n.maxStringLength),n)+o}return Un(mn.call(mn.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Jn),"single",n)}(t,i);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var c=String(t);return s?xn(t,c):c}if("bigint"==typeof t){var l=String(t)+"n";return s?xn(t,l):l}var u=void 0===i.depth?5:i.depth;if(void 0===r&&(r=0),r>=u&&u>0&&"object"===w(t))return Fn(t)?"[Array]":"[Object]";var f=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=kn.call(Array(e.indent+1)," ")}return{base:n,prev:kn.call(Array(t+1),n)}}(i,r);if(void 0===o)o=[];else if(Vn(o,t)>=0)return"[Circular]";function h(t,n,a){if(n&&(o=En.call(o)).push(n),a){var s={depth:i.depth};return qn(i,"quoteStyle")&&(s.quoteStyle=i.quoteStyle),e(t,s,r+1,o)}return e(t,i,r+1,o)}if("function"==typeof t&&!Mn(t)){var d=function(e){if(e.name)return e.name;var t=vn.call(yn.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),p=Xn(t,h);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+kn.call(p,", ")+" }":"")}if(Wn(t)){var y=An?mn.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Pn.call(t);return"object"!==w(t)||An?y:Gn(y)}if(function(e){return!(!e||"object"!==w(e))&&("undefined"!=typeof HTMLElement&&e instanceof HTMLElement||"string"==typeof e.nodeName&&"function"==typeof e.getAttribute)}(t)){for(var v="<"+_n.call(String(t.nodeName)),g=t.attributes||[],m=0;m<g.length;m++)v+=" "+g[m].name+"="+Un(Hn(g[m].value),"double",i);return v+=">",t.childNodes&&t.childNodes.length&&(v+="..."),v+"</"+_n.call(String(t.nodeName))+">"}if(Fn(t)){if(0===t.length)return"[]";var b=Xn(t,h);return f&&!function(e){for(var t=0;t<e.length;t++)if(Vn(e[t],"\n")>=0)return!1;return!0}(b)?"["+Qn(b,f)+"]":"[ "+kn.call(b,", ")+" ]"}if(function(e){return!("[object Error]"!==zn(e)||Rn&&"object"===w(e)&&Rn in e)}(t)){var _=Xn(t,h);return"cause"in Error.prototype||!("cause"in t)||jn.call(t,"cause")?0===_.length?"["+String(t)+"]":"{ ["+String(t)+"] "+kn.call(_,", ")+" }":"{ ["+String(t)+"] "+kn.call(Sn.call("[cause]: "+h(t.cause),_),", ")+" }"}if("object"===w(t)&&a){if(Nn&&"function"==typeof t[Nn]&&Dn)return Dn(t,{depth:u-r});if("symbol"!==a&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!rn||!e||"object"!==w(e))return!1;try{rn.call(e);try{cn.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var S=[];return on&&on.call(t,(function(e,n){S.push(h(n,t,!0)+" => "+h(e,t))})),$n("Map",rn.call(t),S,f)}if(function(e){if(!cn||!e||"object"!==w(e))return!1;try{cn.call(e);try{rn.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var k=[];return ln&&ln.call(t,(function(e){k.push(h(e,t))})),$n("Set",cn.call(t),k,f)}if(function(e){if(!un||!e||"object"!==w(e))return!1;try{un.call(e,un);try{fn.call(e,fn)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Kn("WeakMap");if(function(e){if(!fn||!e||"object"!==w(e))return!1;try{fn.call(e,fn);try{un.call(e,un)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Kn("WeakSet");if(function(e){if(!hn||!e||"object"!==w(e))return!1;try{return hn.call(e),!0}catch(e){}return!1}(t))return Kn("WeakRef");if(function(e){return!("[object Number]"!==zn(e)||Rn&&"object"===w(e)&&Rn in e)}(t))return Gn(h(Number(t)));if(function(e){if(!e||"object"!==w(e)||!Tn)return!1;try{return Tn.call(e),!0}catch(e){}return!1}(t))return Gn(h(Tn.call(t)));if(function(e){return!("[object Boolean]"!==zn(e)||Rn&&"object"===w(e)&&Rn in e)}(t))return Gn(dn.call(t));if(function(e){return!("[object String]"!==zn(e)||Rn&&"object"===w(e)&&Rn in e)}(t))return Gn(h(String(t)));if(!function(e){return!("[object Date]"!==zn(e)||Rn&&"object"===w(e)&&Rn in e)}(t)&&!Mn(t)){var E=Xn(t,h),C=In?In(t)===Object.prototype:t instanceof Object||t.constructor===Object,T=t instanceof Object?"":"null prototype",O=!C&&Rn&&Object(t)===t&&Rn in t?gn.call(zn(t),8,-1):T?"Object":"",P=(C||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(O||T?"["+kn.call(Sn.call([],O||[],T||[]),": ")+"] ":"");return 0===E.length?P+"{}":f?P+"{"+Qn(E,f)+"}":P+"{ "+kn.call(E,", ")+" }"}return String(t)},tr=Zn("%TypeError%"),nr=Zn("%WeakMap%",!0),rr=Zn("%Map%",!0),or=Yn("WeakMap.prototype.get",!0),ir=Yn("WeakMap.prototype.set",!0),ar=Yn("WeakMap.prototype.has",!0),sr=Yn("Map.prototype.get",!0),cr=Yn("Map.prototype.set",!0),lr=Yn("Map.prototype.has",!0),ur=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},fr=String.prototype.replace,hr=/%20/g,dr="RFC3986",pr={default:dr,formatters:{RFC1738:function(e){return fr.call(e,hr,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:dr},yr=pr,vr=Object.prototype.hasOwnProperty,gr=Array.isArray,mr=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),br=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},_r={arrayToObject:br,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],i=o.obj[o.prop],a=Object.keys(i),s=0;s<a.length;++s){var c=a[s],l=i[c];"object"===w(l)&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:i,prop:c}),n.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(gr(n)){for(var r=[],o=0;o<n.length;++o)void 0!==n[o]&&r.push(n[o]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n,r,o){if(0===e.length)return e;var i=e;if("symbol"===w(e)?i=Symbol.prototype.toString.call(e):"string"!=typeof e&&(i=String(e)),"iso-8859-1"===n)return escape(i).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var a="",s=0;s<i.length;++s){var c=i.charCodeAt(s);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===yr.RFC1738&&(40===c||41===c)?a+=i.charAt(s):c<128?a+=mr[c]:c<2048?a+=mr[192|c>>6]+mr[128|63&c]:c<55296||c>=57344?a+=mr[224|c>>12]+mr[128|c>>6&63]+mr[128|63&c]:(s+=1,c=65536+((1023&c)<<10|1023&i.charCodeAt(s)),a+=mr[240|c>>18]+mr[128|c>>12&63]+mr[128|c>>6&63]+mr[128|63&c])}return a},isBuffer:function(e){return!(!e||"object"!==w(e)||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(gr(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!==w(n)){if(gr(t))t.push(n);else{if(!t||"object"!==w(t))return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!vr.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!==w(t))return[t].concat(n);var o=t;return gr(t)&&!gr(n)&&(o=br(t,r)),gr(t)&&gr(n)?(n.forEach((function(n,o){if(vr.call(t,o)){var i=t[o];i&&"object"===w(i)&&n&&"object"===w(n)?t[o]=e(i,n,r):t.push(n)}else t[o]=n})),t):Object.keys(n).reduce((function(t,o){var i=n[o];return vr.call(t,o)?t[o]=e(t[o],i,r):t[o]=i,t}),o)}},wr=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new tr("Side channel does not contain "+er(e))},get:function(r){if(nr&&r&&("object"===w(r)||"function"==typeof r)){if(e)return or(e,r)}else if(rr){if(t)return sr(t,r)}else if(n)return function(e,t){var n=ur(e,t);return n&&n.value}(n,r)},has:function(r){if(nr&&r&&("object"===w(r)||"function"==typeof r)){if(e)return ar(e,r)}else if(rr){if(t)return lr(t,r)}else if(n)return function(e,t){return!!ur(e,t)}(n,r);return!1},set:function(r,o){nr&&r&&("object"===w(r)||"function"==typeof r)?(e||(e=new nr),ir(e,r,o)):rr?(t||(t=new rr),cr(t,r,o)):(n||(n={key:{},next:null}),function(e,t,n){var r=ur(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(n,r,o))}};return r},Sr=_r,kr=pr,Er=Object.prototype.hasOwnProperty,Cr={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Tr=Array.isArray,Or=Array.prototype.push,Pr=function(e,t){Or.apply(e,Tr(t)?t:[t])},Ar=Date.prototype.toISOString,Rr=kr.default,jr={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Sr.encode,encodeValuesOnly:!1,format:Rr,formatter:kr.formatters[Rr],indices:!1,serializeDate:function(e){return Ar.call(e)},skipNulls:!1,strictNullHandling:!1},Ir={},xr=function e(t,n,r,o,i,a,s,c,l,u,f,h,d,p,y,v){for(var g,m=t,b=v,_=0,S=!1;void 0!==(b=b.get(Ir))&&!S;){var k=b.get(t);if(_+=1,void 0!==k){if(k===_)throw new RangeError("Cyclic object value");S=!0}void 0===b.get(Ir)&&(_=0)}if("function"==typeof c?m=c(n,m):m instanceof Date?m=f(m):"comma"===r&&Tr(m)&&(m=Sr.maybeMap(m,(function(e){return e instanceof Date?f(e):e}))),null===m){if(i)return s&&!p?s(n,jr.encoder,y,"key",h):n;m=""}if("string"==typeof(g=m)||"number"==typeof g||"boolean"==typeof g||"symbol"===w(g)||"bigint"==typeof g||Sr.isBuffer(m))return s?[d(p?n:s(n,jr.encoder,y,"key",h))+"="+d(s(m,jr.encoder,y,"value",h))]:[d(n)+"="+d(String(m))];var E,C=[];if(void 0===m)return C;if("comma"===r&&Tr(m))p&&s&&(m=Sr.maybeMap(m,s)),E=[{value:m.length>0?m.join(",")||null:void 0}];else if(Tr(c))E=c;else{var T=Object.keys(m);E=l?T.sort(l):T}for(var O=o&&Tr(m)&&1===m.length?n+"[]":n,P=0;P<E.length;++P){var A=E[P],R="object"===w(A)&&void 0!==A.value?A.value:m[A];if(!a||null!==R){var j=Tr(m)?"function"==typeof r?r(O,A):O:O+(u?"."+A:"["+A+"]");v.set(t,_);var I=wr();I.set(Ir,v),Pr(C,e(R,j,r,o,i,a,"comma"===r&&p&&Tr(m)?null:s,c,l,u,f,h,d,p,y,I))}}return C},Dr=_r,Lr=Object.prototype.hasOwnProperty,Nr=Array.isArray,Ur={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Dr.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Hr=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},Fr=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},Mr=function(e,t,n,r){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,a=n.depth>0&&/(\[[^[\]]*])/.exec(o),s=a?o.slice(0,a.index):o,c=[];if(s){if(!n.plainObjects&&Lr.call(Object.prototype,s)&&!n.allowPrototypes)return;c.push(s)}for(var l=0;n.depth>0&&null!==(a=i.exec(o))&&l<n.depth;){if(l+=1,!n.plainObjects&&Lr.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+o.slice(a.index)+"]"),function(e,t,n,r){for(var o=r?t:Fr(t,n),i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s&&n.parseArrays)a=[].concat(o);else{a=n.plainObjects?Object.create(null):{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(c,10);n.parseArrays||""!==c?!isNaN(l)&&s!==c&&String(l)===c&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(a=[])[l]=o:"__proto__"!==c&&(a[c]=o):a={0:o}}o=a}return o}(c,t,n,r)}},Wr=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}({formats:pr,parse:function(e,t){var n=function(e){if(!e)return Ur;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?Ur.charset:e.charset;return{allowDots:void 0===e.allowDots?Ur.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:Ur.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:Ur.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:Ur.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:Ur.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:Ur.comma,decoder:"function"==typeof e.decoder?e.decoder:Ur.decoder,delimiter:"string"==typeof e.delimiter||Dr.isRegExp(e.delimiter)?e.delimiter:Ur.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:Ur.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:Ur.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:Ur.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:Ur.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:Ur.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?function(e,t){var n,r={__proto__:null},o=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,a=o.split(t.delimiter,i),s=-1,c=t.charset;if(t.charsetSentinel)for(n=0;n<a.length;++n)0===a[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===a[n]?c="utf-8":"utf8=%26%2310003%3B"===a[n]&&(c="iso-8859-1"),s=n,n=a.length);for(n=0;n<a.length;++n)if(n!==s){var l,u,f=a[n],h=f.indexOf("]="),d=-1===h?f.indexOf("="):h+1;-1===d?(l=t.decoder(f,Ur.decoder,c,"key"),u=t.strictNullHandling?null:""):(l=t.decoder(f.slice(0,d),Ur.decoder,c,"key"),u=Dr.maybeMap(Fr(f.slice(d+1),t),(function(e){return t.decoder(e,Ur.decoder,c,"value")}))),u&&t.interpretNumericEntities&&"iso-8859-1"===c&&(u=Hr(u)),f.indexOf("[]=")>-1&&(u=Nr(u)?[u]:u),Lr.call(r,l)?r[l]=Dr.combine(r[l],u):r[l]=u}return r}(e,n):e,o=n.plainObjects?Object.create(null):{},i=Object.keys(r),a=0;a<i.length;++a){var s=i[a],c=Mr(s,r[s],n,"string"==typeof e);o=Dr.merge(o,c,n)}return!0===n.allowSparse?o:Dr.compact(o)},stringify:function(e,t){var n,r=e,o=function(e){if(!e)return jr;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||jr.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=kr.default;if(void 0!==e.format){if(!Er.call(kr.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=kr.formatters[n],o=jr.filter;return("function"==typeof e.filter||Tr(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:jr.addQueryPrefix,allowDots:void 0===e.allowDots?jr.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:jr.charsetSentinel,delimiter:void 0===e.delimiter?jr.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:jr.encode,encoder:"function"==typeof e.encoder?e.encoder:jr.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:jr.encodeValuesOnly,filter:o,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:jr.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:jr.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:jr.strictNullHandling}}(t);"function"==typeof o.filter?r=(0,o.filter)("",r):Tr(o.filter)&&(n=o.filter);var i,a=[];if("object"!==w(r)||null===r)return"";i=t&&t.arrayFormat in Cr?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var s=Cr[i];if(t&&"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c="comma"===s&&t&&t.commaRoundTrip;n||(n=Object.keys(r)),o.sort&&n.sort(o.sort);for(var l=wr(),u=0;u<n.length;++u){var f=n[u];o.skipNulls&&null===r[f]||Pr(a,xr(r[f],f,s,c,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,l))}var h=a.join(o.delimiter),d=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),h.length>0?d+h:""}}),Br=function(e){var t=e.payload,n=e.headers;return!(!t||(null==n?void 0:n["content-type"]))},qr=function(e){var t=e.payload,n=e.contentType;return n===pt.FormUrlEncoded?Wr.stringify(t):n===pt.Json?JSON.stringify(t):t},zr=function(e){var t=e.responseHeaders,n=e.localeHeader,r=e.currentLocale,o=e.setLocale,i=n.toLowerCase(),a=Object.keys(t).find((function(e){return e.toLowerCase()===i})),s=a?t[a]:void 0;s&&r&&s!==r&&(null==o||o(s))},Vr=function(e){return null==e?void 0:e.replace("outsystems://","https://")},Jr=function(e,t,n){var r,o=void 0;try{e&&(o=JSON.parse(e))}catch(o){null===(r=null==t?void 0:t.error)||void 0===r||r.call(t,{error:o,category:n,message:"Could not parse response: ".concat(e)})}return o};function Gr(e,t,n){return S(this,void 0,void 0,(function*(){var r=this;return(null==e?void 0:e.startActiveClientSpan)?e.startActiveClientSpan(t,(function(e){return S(r,void 0,void 0,(function*(){try{return yield n()}finally{null==e||e.end()}}))})):n()}))}var Kr,$r,Qr,Xr,Zr,Yr,eo,to,no,ro,oo,io,ao="os-auth-retry",so=function(e){var t=e.config,n=e.getAccessToken,r=e.isAccessTokenValid,o=e.refreshToken;return S(void 0,void 0,void 0,(function*(){r&&o&&!r()&&(yield o());var e=n();return e&&(t.headers=t.headers.concat({Authorization:e})),t}))},co=function(e){var t=e.err,n=e.axiosInstance,r=e.getAccessToken,o=e.refreshToken;return S(void 0,void 0,void 0,(function*(){var e,i,a;if(401!==(null===(e=null==t?void 0:t.response)||void 0===e?void 0:e.status)||(null===(a=null===(i=t.config)||void 0===i?void 0:i.headers)||void 0===a?void 0:a[ao]))return Promise.reject(t);yield o();var c=r();if(c){var l=new rt(s({Authorization:c},ao,"true"));return t.config?t.config.headers=t.config.headers.concat(l):t.config={headers:l},n.request(t.config)}return Promise.reject(t)}))},lo="HttpClient",uo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.baseUrl,r=void 0===n?"":n,o=t.headers,i=void 0===o?{}:o,a=t.withCredentials,s=void 0!==a&&a,c=t.getAccessToken,l=void 0===c?function(){return null}:c,u=t.localeHeader,f=void 0===u?"":u,h=t.getLocale,d=t.setLocale,p=t.httpClientInstance,y=void 0===p?function(e){var t=e.baseUrl,n=e.headers,r=e.withCredentials,o=void 0!==r&&r,i=nt.create({baseURL:t,headers:Object.assign({"Content-Type":"application/json"},n),timeout:1e4,transitional:{clarifyTimeoutError:!0}});return o&&(i.defaults.withCredentials=!0),i}({baseUrl:r,headers:i,withCredentials:s}):p,v=t.logger,g=t.refreshToken,b=void 0===g?function(){return Promise.resolve()}:g,_=t.isAccessTokenValid,w=void 0===_?function(){return!0}:_,S=t.loadTrace;m(this,e),Kr.add(this),$r.set(this,void 0),Qr.set(this,void 0),Xr.set(this,void 0),Zr.set(this,void 0),Yr.set(this,void 0),E(this,$r,f,"f"),E(this,Qr,h,"f"),E(this,Xr,d,"f"),E(this,Yr,v,"f"),E(this,Zr,S,"f"),this.httpClientInstance=function(e){var t=e.axiosInstance,n=e.getAccessToken,r=e.refreshToken,o=e.isAccessTokenValid;return n&&(t.interceptors.request.use((function(e){return so({config:e,getAccessToken:n,isAccessTokenValid:o,refreshToken:r})})),r&&t.interceptors.response.use(void 0,(function(e){return co({err:e,axiosInstance:t,getAccessToken:n,refreshToken:r})}))),t}({axiosInstance:y,getAccessToken:l,refreshToken:b,isAccessTokenValid:w})}return _(e,[{key:"post",value:function(e){var t,n,r,o,i,a,s,c,l=e.url,u=e.payload,f=e.params,h=e.headers,d=e.contentType,p=void 0===d?pt.FormUrlEncoded:d,y=e.timeout,v=e.timeoutHandler,g=e.useLocaleInfo,m=void 0!==g&&g,b=e.baseURL,_=e.responseHandler;return S(this,void 0,void 0,(function*(){var e=this;null===(n=null===(t=k(this,Yr,"f"))||void 0===t?void 0:t.setActiveSpanAsNonAggregable)||void 0===n||n.call(t);var d=m?null===(r=k(this,Qr,"f"))||void 0===r?void 0:r.call(this):void 0,g=u?qr({payload:u,contentType:p}):void 0,w=null!==(o=Vr(l))&&void 0!==o?o:"",E=Vr(b);try{null===(a=null===(i=k(this,Yr,"f"))||void 0===i?void 0:i.debug)||void 0===a||a.call(i,{category:lo,message:"POST ".concat(w)});var C=yield Gr(k(this,Yr,"f"),"POST",(function(){return S(e,void 0,void 0,(function*(){return this.httpClientInstance.post(w,g,{params:f,headers:yield k(this,Kr,"m",oo).call(this,h,d,Br({payload:u,headers:h})?p:void 0),timeout:y?1e3*y:void 0,baseURL:E})}))}));if(m&&k(this,Xr,"f")&&(null==C?void 0:C.headers)&&zr({responseHeaders:C.headers,localeHeader:k(this,$r,"f"),currentLocale:d,setLocale:k(this,Xr,"f")}),"function"==typeof _)try{_({data:C.data,responseHeaders:C.headers})}catch(e){null===(c=null===(s=k(this,Yr,"f"))||void 0===s?void 0:s.error)||void 0===c||c.call(s,{category:lo,message:"Handler Error: POST ".concat(w),errorCode:tt.Communication_Default,error:e})}return null==C?void 0:C.data}catch(e){throw yield k(this,Kr,"m",ro).call(this,e,w,"POST",v)}}))}},{key:"get",value:function(e){var t=e.url,n=e.params,r=e.headers,o=e.useLocaleInfo,i=e.timeout,a=e.timeoutHandler,s=e.responseType,c=void 0===s?"json":s,l=e.baseURL;return S(this,void 0,void 0,(function*(){var e=yield k(this,Kr,"m",to).call(this,{url:t,params:n,headers:r,useLocaleInfo:o,timeout:i,timeoutHandler:a,responseType:c,baseURL:l});return"none"!==c?null==e?void 0:e.data:void 0}))}},{key:"getResponseUrl",value:function(e){var t=e.url,n=e.params,r=e.headers,o=e.useLocaleInfo,i=e.timeout,a=e.timeoutHandler,s=e.baseURL;return S(this,void 0,void 0,(function*(){var e=yield k(this,Kr,"m",to).call(this,{url:t,params:n,headers:r,useLocaleInfo:o,timeout:i,timeoutHandler:a,baseURL:s});return null==e?void 0:e.request.responseURL}))}}]),e}();e.HttpClient=uo,$r=new WeakMap,Qr=new WeakMap,Xr=new WeakMap,Zr=new WeakMap,Yr=new WeakMap,Kr=new WeakSet,eo=function(e,t){return S(this,void 0,void 0,(function*(){k(this,Kr,"m",no).call(this,e)===yt.Timeout&&t&&(yield t())}))},to=function(e){var t,n,r,o,i,a,s=e.url,c=e.params,l=e.headers,u=e.useLocaleInfo,f=void 0!==u&&u,h=e.timeout,d=e.timeoutHandler,p=e.responseType,y=void 0===p?"json":p,v=e.baseURL;return S(this,void 0,void 0,(function*(){var e=this;null===(n=null===(t=k(this,Yr,"f"))||void 0===t?void 0:t.setActiveSpanAsNonAggregable)||void 0===n||n.call(t);var u=f?null===(r=k(this,Qr,"f"))||void 0===r?void 0:r.call(this):void 0,p=null!==(o=Vr(s))&&void 0!==o?o:"",g=Vr(v);try{null===(a=null===(i=k(this,Yr,"f"))||void 0===i?void 0:i.debug)||void 0===a||a.call(i,{category:lo,message:"GET ".concat(p)});var m=yield Gr(k(this,Yr,"f"),"GET",(function(){return S(e,void 0,void 0,(function*(){return this.httpClientInstance.get(p,{params:c,headers:yield k(this,Kr,"m",oo).call(this,l,u),timeout:h?1e3*h:void 0,responseType:"none"!==y?y:"json",baseURL:g})}))}));return f&&k(this,Xr,"f")&&(null==m?void 0:m.headers)&&zr({responseHeaders:m.headers,localeHeader:k(this,$r,"f"),currentLocale:u,setLocale:k(this,Xr,"f")}),m}catch(e){throw yield k(this,Kr,"m",ro).call(this,e,p,"GET",d)}}))},no=function(e){var t;return"ETIMEDOUT"===(null==e?void 0:e.code)?yt.Timeout:401===(null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.status)?yt.Unauthorized:yt.Unknown},ro=function(e,t,n,r){var o,i,a,s;return S(this,void 0,void 0,(function*(){yield k(this,Kr,"m",eo).call(this,e,r);var c=st(null!==(o=e.status)&&void 0!==o?o:"");return null===(a=null===(i=k(this,Yr,"f"))||void 0===i?void 0:i.error)||void 0===a||a.call(i,{category:lo,message:"".concat(n," ").concat(t),errorCode:c,error:e}),new ot("".concat(n," ").concat(t," - ").concat(e.message),c,e.status,null===(s=e.response)||void 0===s?void 0:s.data,lo)}))},oo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=Object.assign(Object.assign({},e),t?s({},k(this,$r,"f"),t):{});return n&&(r["content-type"]=n),k(this,Kr,"m",io).call(this,r)},io=function(e){var t,n;return S(this,void 0,void 0,(function*(){var r=this;try{return yield ht(e,(function(){var e;return null===(e=k(r,Zr,"f"))||void 0===e?void 0:e.call(r)}))}catch(e){null===(n=null===(t=k(this,Yr,"f"))||void 0===t?void 0:t.error)||void 0===n||n.call(t,{category:lo,message:"Error loading trace information",errorCode:tt.Communication_Default,error:e})}return e}))};var fo,ho,po,yo,vo,go,mo,bo,_o,wo,So,ko,Eo,Co,To,Oo="NativeHttpClient",Po=function(){function e(t){var n=t.baseUrl,r=void 0===n?"":n,o=t.headers,i=void 0===o?{}:o,a=t.getAccessToken,s=void 0===a?function(){return null}:a,c=t.localeHeader,l=void 0===c?"":c,u=t.getLocale,f=t.setLocale,h=t.httpClientInstance,d=t.logger,p=t.refreshToken,y=void 0===p?function(){return Promise.resolve()}:p,v=t.isAccessTokenValid,g=void 0===v?function(){return!0}:v,b=t.loadTrace;m(this,e),fo.add(this),ho.set(this,void 0),po.set(this,void 0),yo.set(this,void 0),vo.set(this,void 0),go.set(this,void 0),mo.set(this,void 0),bo.set(this,void 0),_o.set(this,void 0),wo.set(this,void 0),So.set(this,void 0),E(this,ho,l,"f"),E(this,po,u,"f"),E(this,yo,f,"f"),E(this,vo,d,"f"),this.httpClientInstance=h,E(this,go,s,"f"),E(this,mo,y,"f"),E(this,bo,g,"f"),E(this,wo,r,"f"),E(this,So,i,"f"),E(this,_o,b,"f")}return _(e,[{key:"post",value:function(e){var t,n,r,o=e.url,i=e.payload,a=e.params,s=e.headers,c=e.contentType,l=void 0===c?pt.FormUrlEncoded:c,u=e.timeout,f=e.timeoutHandler,h=e.useLocaleInfo,d=e.baseURL,p=e.responseHandler;return S(this,void 0,void 0,(function*(){var e=this,c=qr({payload:i,contentType:l}),y=yield Gr(k(this,vo,"f"),"POST",(function(){return k(e,fo,"m",Eo).call(e,{method:"POST",url:o,params:a,baseURL:d,headers:s,timeout:u,timeoutHandler:f,useLocaleInfo:h,contentType:l,payload:c})})),v=Jr(y.responseText,k(this,vo,"f"),Oo);if("function"==typeof p)try{p({data:v,responseHeaders:null!==(t=y.responseHeaders)&&void 0!==t?t:{}})}catch(e){null===(r=null===(n=k(this,vo,"f"))||void 0===n?void 0:n.error)||void 0===r||r.call(n,{category:Oo,message:"Handler Error: Post ".concat(y.responseUrl),errorCode:tt.Communication_Default,error:e})}return v}))}},{key:"get",value:function(e){var t=e.url,n=e.params,r=e.headers,o=e.responseType,i=void 0===o?"json":o,a=e.useLocaleInfo,s=e.timeout,c=e.timeoutHandler,l=e.baseURL;return S(this,void 0,void 0,(function*(){var e=this,o="blob"===i,u=yield Gr(k(this,vo,"f"),"GET",(function(){return k(e,fo,"m",Eo).call(e,{method:"GET",url:t,params:n,baseURL:l,headers:r,timeout:s,timeoutHandler:c,useLocaleInfo:a,responseType:o?"blob":void 0})}));return o?u.response:"none"!==i?Jr(u.responseText,k(this,vo,"f"),Oo):void 0}))}},{key:"getResponseUrl",value:function(e){var t,n,r=e.url,o=e.params,i=e.headers,a=e.useLocaleInfo,s=e.timeout,c=e.timeoutHandler,l=e.baseURL;return S(this,void 0,void 0,(function*(){var e=this,u=yield Gr(k(this,vo,"f"),"GET",(function(){return k(e,fo,"m",Eo).call(e,{method:"GET",url:r,params:o,baseURL:l,headers:i,timeout:s,timeoutHandler:c,useLocaleInfo:a})}));if(!u.responseUrl){var f=new Error("Successful request came without a response URL");throw null===(n=null===(t=k(this,vo,"f"))||void 0===t?void 0:t.error)||void 0===n||n.call(t,{error:f,category:Oo,message:"Successful request came without a response URL",errorCode:tt.Communication_Default}),f}return u.responseUrl}))}}]),e}();e.NativeHttpClient=Po,ho=new WeakMap,po=new WeakMap,yo=new WeakMap,vo=new WeakMap,go=new WeakMap,mo=new WeakMap,bo=new WeakMap,_o=new WeakMap,wo=new WeakMap,So=new WeakMap,fo=new WeakSet,ko=function(e,t,n,r,o){var i,a,s,c,l,u,f,h,d,p;return S(this,void 0,void 0,(function*(){if(401!==t.status||n){var y=null!==(f=null===(u=null===(l=t.status)||void 0===l?void 0:l.toString)||void 0===u?void 0:u.call(l))&&void 0!==f?f:"",v=st(y),g=new ot(null!==(h=t.responseText)&&void 0!==h?h:"Network Error",v,y,Jr(t.responseText,k(this,vo,"f"),Oo),Oo);throw null===(p=null===(d=k(this,vo,"f"))||void 0===d?void 0:d.error)||void 0===p||p.call(d,{error:g,category:Oo,message:"".concat(e," ").concat(r),errorCode:v}),g}if(yield null===(i=k(this,mo,"f"))||void 0===i?void 0:i.call(this),null===(a=k(this,go,"f"))||void 0===a?void 0:a.call(this))return o();var m=new Error("Unable to retrieve an authorization token");throw null===(c=null===(s=k(this,vo,"f"))||void 0===s?void 0:s.error)||void 0===c||c.call(s,{error:m,category:Oo,message:"".concat(e," ").concat(r),errorCode:tt.Communication_Unauthorized}),m}))},Eo=function e(t){var n,r,o;return S(this,void 0,void 0,(function*(){var i=this;null===(r=null===(n=k(this,vo,"f"))||void 0===n?void 0:n.setActiveSpanAsNonAggregable)||void 0===r||r.call(n);var a=t.method,s=t.url,c=t.params,l=t.baseURL,u=t.payload,f=t.headers,h=t.useLocaleInfo,d=t.timeout,p=t.timeoutHandler,v=t.isRetry,g=t.contentType,m=t.responseType,b=function(e,t,n){try{return function(e,t,n){var r=function(e){try{return new URL(e),!0}catch(e){return!1}}(null!=t?t:"")?new URL(e,t):new URL(e);return Object.entries(null!=n?n:{}).forEach((function(e){var t=y(e,2),n=t[0],o=t[1];r.searchParams.append(n,null!=o?o:"")})),r.toString()}(e,t,n)}catch(r){return function(e,t,n){var r="".concat(t||"","/").concat(e).concat(n?"?":""),o="";return Object.entries(null!=n?n:{}).forEach((function(e){var t=y(e,2),n=t[0],r=t[1];o+="".concat(o?"&":"").concat(n,"=").concat(encodeURIComponent(r))})),"".concat(r).concat(o).replace(/\/+/g,"/")}(e,t,n)}}(s,null!=l?l:k(this,wo,"f"),c),_=h?null===(o=k(this,po,"f"))||void 0===o?void 0:o.call(this):void 0,w=yield k(this,fo,"m",Co).call(this,{headers:f,locale:_,contentType:g});return new Promise((function(n,r){var o,c,l=i.httpClientInstance.createRequest(a,b);l.onError=function(o){return S(i,void 0,void 0,(function*(){var i=this;try{var s=yield k(this,fo,"m",ko).call(this,a,o,!!v,b,(function(){return k(i,fo,"m",e).call(i,Object.assign(Object.assign({},t),{isRetry:!0}))}));n(s)}catch(e){r(e)}}))},l.onTimeout=function(){var e,t;null==p||p();var n=new Error("Request timed out: ".concat(b));null===(t=null===(e=k(i,vo,"f"))||void 0===e?void 0:e.error)||void 0===t||t.call(e,{category:Oo,message:"POST ".concat(b),errorCode:tt.Communication_Timeout,error:n}),r(n)},l.onSuccess=function(e){h&&k(i,yo,"f")&&e.responseHeaders&&zr({responseHeaders:e.responseHeaders,localeHeader:k(i,ho,"f"),currentLocale:_,setLocale:k(i,yo,"f")}),n(e)},Object.entries(w).forEach((function(e){var t=y(e,2),n=t[0],r=t[1];l.setHeader(n,r)})),d&&l.setTimeout(1e3*d),u&&l.setBody(u),"blob"===m&&(l.responseType="blob"),null===(c=null===(o=k(i,vo,"f"))||void 0===o?void 0:o.debug)||void 0===c||c.call(o,{category:Oo,message:"".concat(a," ").concat(s)}),l.send()}))}))},Co=function(e){var t,n,r=e.headers,o=e.locale,i=e.contentType;return S(this,void 0,void 0,(function*(){var e=Object.assign(Object.assign(Object.assign({},null!==(t=k(this,So,"f"))&&void 0!==t?t:{}),r),o?s({},k(this,ho,"f"),o):{});if(i&&!e["content-type"]&&(e["content-type"]=i),!(null===(n=k(this,bo,"f"))||void 0===n?void 0:n.call(this))&&k(this,mo,"f")&&(yield k(this,mo,"f").call(this)),k(this,go,"f")){var a=k(this,go,"f").call(this);a&&(e.authorization=a)}return yield k(this,fo,"m",To).call(this,e)}))},To=function(e){var t,n;return S(this,void 0,void 0,(function*(){var r=this;try{return yield ht(e,(function(){var e;return null===(e=k(r,_o,"f"))||void 0===e?void 0:e.call(r)}))}catch(e){null===(n=null===(t=k(this,vo,"f"))||void 0===t?void 0:t.error)||void 0===n||n.call(t,{category:Oo,message:"Error loading trace information",errorCode:tt.Communication_Default,error:e})}return e}))};var Ao,Ro=function(e){c(n,e);var t=l(n);function n(e,r){var o;m(this,n);var i=(this instanceof n?this.constructor:void 0).prototype;return(o=t.call(this,"".concat(e,": Status code '").concat(r,"'"))).statusCode=r,o.__proto__=i,o}return _(n)}(u(Error)),jo=function(e){c(n,e);var t=l(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A timeout occurred.";m(this,n);var o=(this instanceof n?this.constructor:void 0).prototype;return(e=t.call(this,r)).__proto__=o,e}return _(n)}(u(Error)),Io=function(e){c(n,e);var t=l(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An abort occurred.";m(this,n);var o=(this instanceof n?this.constructor:void 0).prototype;return(e=t.call(this,r)).__proto__=o,e}return _(n)}(u(Error)),xo=function(e){c(n,e);var t=l(n);function n(e,r){var o;m(this,n);var i=(this instanceof n?this.constructor:void 0).prototype;return(o=t.call(this,e)).transport=r,o.errorType="UnsupportedTransportError",o.__proto__=i,o}return _(n)}(u(Error)),Do=function(e){c(n,e);var t=l(n);function n(e,r){var o;m(this,n);var i=(this instanceof n?this.constructor:void 0).prototype;return(o=t.call(this,e)).transport=r,o.errorType="DisabledTransportError",o.__proto__=i,o}return _(n)}(u(Error)),Lo=function(e){c(n,e);var t=l(n);function n(e,r){var o;m(this,n);var i=(this instanceof n?this.constructor:void 0).prototype;return(o=t.call(this,e)).transport=r,o.errorType="FailedToStartTransportError",o.__proto__=i,o}return _(n)}(u(Error)),No=function(e){c(n,e);var t=l(n);function n(e){var r;m(this,n);var o=(this instanceof n?this.constructor:void 0).prototype;return(r=t.call(this,e)).errorType="FailedToNegotiateWithServerError",r.__proto__=o,r}return _(n)}(u(Error)),Uo=function(e){c(n,e);var t=l(n);function n(e,r){var o;m(this,n);var i=(this instanceof n?this.constructor:void 0).prototype;return(o=t.call(this,e)).innerErrors=r,o.__proto__=i,o}return _(n)}(u(Error)),Ho=_((function e(t,n,r){m(this,e),this.statusCode=t,this.statusText=n,this.content=r})),Fo=function(){function e(){m(this,e)}return _(e,[{key:"get",value:function(e,t){return this.send(a(a({},t),{},{method:"GET",url:e}))}},{key:"post",value:function(e,t){return this.send(a(a({},t),{},{method:"POST",url:e}))}},{key:"delete",value:function(e,t){return this.send(a(a({},t),{},{method:"DELETE",url:e}))}},{key:"getCookieString",value:function(e){return""}}]),e}();!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"}(Ao||(Ao={}));var Mo=function(){function e(){m(this,e)}return _(e,[{key:"log",value:function(e,t){}}]),e}();Mo.instance=new Mo;var Wo=function(){function e(){m(this,e)}return _(e,null,[{key:"isRequired",value:function(e,t){if(null==e)throw new Error("The '".concat(t,"' argument is required."))}},{key:"isNotEmpty",value:function(e,t){if(!e||e.match(/^\s*$/))throw new Error("The '".concat(t,"' argument should not be empty."))}},{key:"isIn",value:function(e,t,n){if(!(e in t))throw new Error("Unknown ".concat(n," value: ").concat(e,"."))}}]),e}(),Bo=function(){function e(){m(this,e)}return _(e,null,[{key:"isBrowser",get:function(){return"object"===("undefined"==typeof window?"undefined":w(window))&&"object"===w(window.document)}},{key:"isWebWorker",get:function(){return"object"===("undefined"==typeof self?"undefined":w(self))&&"importScripts"in self}},{key:"isReactNative",get:function(){return"object"===("undefined"==typeof window?"undefined":w(window))&&void 0===window.document}},{key:"isNode",get:function(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}}]),e}();function qo(e,t){var n="";return zo(e)?(n="Binary data of length ".concat(e.byteLength),t&&(n+=". Content: '".concat(function(e){var t=new Uint8Array(e),n="";return t.forEach((function(e){n+="0x".concat(e<16?"0":"").concat(e.toString(16)," ")})),n.substr(0,n.length-1)}(e),"'"))):"string"==typeof e&&(n="String data of length ".concat(e.length),t&&(n+=". Content: '".concat(e,"'"))),n}function zo(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Vo(e,t,n,r,o,i){return Jo.apply(this,arguments)}function Jo(){return(Jo=o((function*(e,t,n,r,o,i){var s={},c=y($o(),2),l=c[0],u=c[1];s[l]=u,e.log(Ao.Trace,"(".concat(t," transport) sending data. ").concat(qo(o,i.logMessageContent),"."));var f=zo(o)?"arraybuffer":"text",h=yield n.post(r,{content:o,headers:a(a({},s),i.headers),responseType:f,timeout:i.timeout,withCredentials:i.withCredentials});e.log(Ao.Trace,"(".concat(t," transport) request complete. Response status: ").concat(h.statusCode,"."))}))).apply(this,arguments)}var Go=function(){function e(t,n){m(this,e),this._subject=t,this._observer=n}return _(e,[{key:"dispose",value:function(){var e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch((function(e){}))}}]),e}(),Ko=function(){function e(t){m(this,e),this._minLevel=t,this.out=console}return _(e,[{key:"log",value:function(e,t){if(e>=this._minLevel){var n="[".concat((new Date).toISOString(),"] ").concat(Ao[e],": ").concat(t);switch(e){case Ao.Critical:case Ao.Error:this.out.error(n);break;case Ao.Warning:this.out.warn(n);break;case Ao.Information:this.out.info(n);break;default:this.out.log(n)}}}}]),e}();function $o(){var e="X-SignalR-User-Agent";return Bo.isNode&&(e="User-Agent"),[e,Qo("7.0.9",Xo(),Bo.isNode?"NodeJS":"Browser",Zo())]}function Qo(e,t,n,r){var o="Microsoft SignalR/",i=e.split(".");return o+="".concat(i[0],".").concat(i[1]),o+=" (".concat(e,"; "),o+=t&&""!==t?"".concat(t,"; "):"Unknown OS; ",o+="".concat(n),(o+=r?"; ".concat(r):"; Unknown Runtime Version")+")"}function Xo(){if(!Bo.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function Zo(){if(Bo.isNode)return process.versions.node}function Yo(e){return e.stack?e.stack:e.message?e.message:"".concat(e)}var ei=function(e){c(r,e);var t,n=l(r);function r(e){var t;if(m(this,r),(t=n.call(this))._logger=e,"undefined"==typeof fetch){var o="function"==typeof __webpack_require__?__non_webpack_require__:require;t._jar=new(o("tough-cookie").CookieJar),t._fetchType=o("node-fetch"),t._fetchType=o("fetch-cookie")(t._fetchType,t._jar)}else t._fetchType=fetch.bind(function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("could not find global")}());if("undefined"==typeof AbortController){var i="function"==typeof __webpack_require__?__non_webpack_require__:require;t._abortControllerType=i("abort-controller")}else t._abortControllerType=AbortController;return t}return _(r,[{key:"send",value:(t=o((function*(e){var t=this;if(e.abortSignal&&e.abortSignal.aborted)throw new Io;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");var n,r=new this._abortControllerType;e.abortSignal&&(e.abortSignal.onabort=function(){r.abort(),n=new Io});var o,i=null;if(e.timeout){var s=e.timeout;i=setTimeout((function(){r.abort(),t._logger.log(Ao.Warning,"Timeout from HTTP request."),n=new jo}),s)}""===e.content&&(e.content=void 0),e.content&&(e.headers=e.headers||{},zo(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");try{o=yield this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:!0===e.withCredentials?"include":"same-origin",headers:a({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,mode:"cors",redirect:"follow",signal:r.signal})}catch(e){if(n)throw n;throw this._logger.log(Ao.Warning,"Error from HTTP request. ".concat(e,".")),e}finally{i&&clearTimeout(i),e.abortSignal&&(e.abortSignal.onabort=null)}if(!o.ok){var c=yield ti(o,"text");throw new Ro(c||o.statusText,o.status)}var l=ti(o,e.responseType),u=yield l;return new Ho(o.status,o.statusText,u)})),function(e){return t.apply(this,arguments)})},{key:"getCookieString",value:function(e){var t="";return Bo.isNode&&this._jar&&this._jar.getCookies(e,(function(e,n){return t=n.join("; ")})),t}}]),r}(Fo);function ti(e,t){var n;switch(t){case"arraybuffer":n=e.arrayBuffer();break;case"text":default:n=e.text();break;case"blob":case"document":case"json":throw new Error("".concat(t," is not supported."))}return n}var ni=function(e){c(n,e);var t=l(n);function n(e){var r;return m(this,n),(r=t.call(this))._logger=e,r}return _(n,[{key:"send",value:function(e){var t=this;return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Io):e.method?e.url?new Promise((function(n,r){var o=new XMLHttpRequest;o.open(e.method,e.url,!0),o.withCredentials=void 0===e.withCredentials||e.withCredentials,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===e.content&&(e.content=void 0),e.content&&(zo(e.content)?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));var i=e.headers;i&&Object.keys(i).forEach((function(e){o.setRequestHeader(e,i[e])})),e.responseType&&(o.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=function(){o.abort(),r(new Io)}),e.timeout&&(o.timeout=e.timeout),o.onload=function(){e.abortSignal&&(e.abortSignal.onabort=null),o.status>=200&&o.status<300?n(new Ho(o.status,o.statusText,o.response||o.responseText)):r(new Ro(o.response||o.responseText||o.statusText,o.status))},o.onerror=function(){t._logger.log(Ao.Warning,"Error from HTTP request. ".concat(o.status,": ").concat(o.statusText,".")),r(new Ro(o.statusText,o.status))},o.ontimeout=function(){t._logger.log(Ao.Warning,"Timeout from HTTP request."),r(new jo)},o.send(e.content)})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}]),n}(Fo),ri=function(e){c(n,e);var t=l(n);function n(e){var r;if(m(this,n),r=t.call(this),"undefined"!=typeof fetch||Bo.isNode)r._httpClient=new ei(e);else{if("undefined"==typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");r._httpClient=new ni(e)}return r}return _(n,[{key:"send",value:function(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Io):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}},{key:"getCookieString",value:function(e){return this._httpClient.getCookieString(e)}}]),n}(Fo),oi=function(){function e(){m(this,e)}return _(e,null,[{key:"write",value:function(t){return"".concat(t).concat(e.RecordSeparator)}},{key:"parse",value:function(t){if(t[t.length-1]!==e.RecordSeparator)throw new Error("Message is incomplete.");var n=t.split(e.RecordSeparator);return n.pop(),n}}]),e}();oi.RecordSeparatorCode=30,oi.RecordSeparator=String.fromCharCode(oi.RecordSeparatorCode);var ii,ai=function(){function e(){m(this,e)}return _(e,[{key:"writeHandshakeRequest",value:function(e){return oi.write(JSON.stringify(e))}},{key:"parseHandshakeResponse",value:function(e){var t,n;if(zo(e)){var r=new Uint8Array(e),o=r.indexOf(oi.RecordSeparatorCode);if(-1===o)throw new Error("Message is incomplete.");var i=o+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(r.slice(0,i))),n=r.byteLength>i?r.slice(i).buffer:null}else{var a=e,s=a.indexOf(oi.RecordSeparator);if(-1===s)throw new Error("Message is incomplete.");var c=s+1;t=a.substring(0,c),n=a.length>c?a.substring(c):null}var l=oi.parse(t),u=JSON.parse(l[0]);if(u.type)throw new Error("Expected a handshake response from the server.");return[n,u]}}]),e}();!function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close"}(ii||(ii={}));var si,ci=function(){function e(){m(this,e),this.observers=[]}return _(e,[{key:"next",value:function(e){var t,r=n(this.observers);try{for(r.s();!(t=r.n()).done;)t.value.next(e)}catch(e){r.e(e)}finally{r.f()}}},{key:"error",value:function(e){var t,r=n(this.observers);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.error&&o.error(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"complete",value:function(){var e,t=n(this.observers);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.complete&&r.complete()}}catch(e){t.e(e)}finally{t.f()}}},{key:"subscribe",value:function(e){return this.observers.push(e),new Go(this,e)}}]),e}();!function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Reconnecting="Reconnecting"}(si||(si={}));var li=function(){function e(t,n,r,o){var i=this;m(this,e),this._nextKeepAlive=0,this._freezeEventListener=function(){i._logger.log(Ao.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Wo.isRequired(t,"connection"),Wo.isRequired(n,"logger"),Wo.isRequired(r,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this._logger=n,this._protocol=r,this.connection=t,this._reconnectPolicy=o,this._handshakeProtocol=new ai,this.connection.onreceive=function(e){return i._processIncomingData(e)},this.connection.onclose=function(e){return i._connectionClosed(e)},this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=si.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:ii.Ping})}var t,r,i,a,s;return _(e,[{key:"state",get:function(){return this._connectionState}},{key:"connectionId",get:function(){return this.connection&&this.connection.connectionId||null}},{key:"baseUrl",get:function(){return this.connection.baseUrl||""},set:function(e){if(this._connectionState!==si.Disconnected&&this._connectionState!==si.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}},{key:"start",value:function(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}},{key:"_startWithStateTransitions",value:(s=o((function*(){if(this._connectionState!==si.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=si.Connecting,this._logger.log(Ao.Debug,"Starting HubConnection.");try{yield this._startInternal(),Bo.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=si.Connected,this._connectionStarted=!0,this._logger.log(Ao.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=si.Disconnected,this._logger.log(Ao.Debug,"HubConnection failed to start successfully because of error '".concat(e,"'.")),Promise.reject(e)}})),function(){return s.apply(this,arguments)})},{key:"_startInternal",value:(a=o((function*(){var e=this;this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;var t=new Promise((function(t,n){e._handshakeResolver=t,e._handshakeRejecter=n}));yield this.connection.start(this._protocol.transferFormat);try{var n={protocol:this._protocol.name,version:this._protocol.version};if(this._logger.log(Ao.Debug,"Sending handshake request."),yield this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n)),this._logger.log(Ao.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),yield t,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.inherentKeepAlive||(yield this._sendMessage(this._cachedPingMessage))}catch(e){throw this._logger.log(Ao.Debug,"Hub handshake failed with error '".concat(e,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),yield this.connection.stop(e),e}})),function(){return a.apply(this,arguments)})},{key:"stop",value:(i=o((function*(){var e=this._startPromise;this._stopPromise=this._stopInternal(),yield this._stopPromise;try{yield e}catch(e){}})),function(){return i.apply(this,arguments)})},{key:"_stopInternal",value:function(e){return this._connectionState===si.Disconnected?(this._logger.log(Ao.Debug,"Call to HubConnection.stop(".concat(e,") ignored because it is already in the disconnected state.")),Promise.resolve()):this._connectionState===si.Disconnecting?(this._logger.log(Ao.Debug,"Call to HttpConnection.stop(".concat(e,") ignored because the connection is already in the disconnecting state.")),this._stopPromise):(this._connectionState=si.Disconnecting,this._logger.log(Ao.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Ao.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new Io("The connection was stopped before the hub handshake could complete."),this.connection.stop(e)))}},{key:"stream",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i,a=y(this._replaceStreamingParams(r),2),s=a[0],c=a[1],l=this._createStreamInvocation(e,r,c),u=new ci;return u.cancelCallback=function(){var e=t._createCancelInvocation(l.invocationId);return delete t._callbacks[l.invocationId],i.then((function(){return t._sendWithProtocol(e)}))},this._callbacks[l.invocationId]=function(e,t){t?u.error(t):e&&(e.type===ii.Completion?e.error?u.error(new Error(e.error)):u.complete():u.next(e.item))},i=this._sendWithProtocol(l).catch((function(e){u.error(e),delete t._callbacks[l.invocationId]})),this._launchStreams(s,i),u}},{key:"_sendMessage",value:function(e){return this._resetKeepAliveInterval(),this.connection.send(e)}},{key:"_sendWithProtocol",value:function(e){return this._sendMessage(this._protocol.writeMessage(e))}},{key:"send",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=y(this._replaceStreamingParams(n),2),i=o[0],a=o[1],s=this._sendWithProtocol(this._createInvocation(e,n,!0,a));return this._launchStreams(i,s),s}},{key:"invoke",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=y(this._replaceStreamingParams(r),2),a=i[0],s=i[1],c=this._createInvocation(e,r,!1,s);return new Promise((function(e,n){t._callbacks[c.invocationId]=function(t,r){r?n(r):t&&(t.type===ii.Completion?t.error?n(new Error(t.error)):e(t.result):n(new Error("Unexpected message type: ".concat(t.type))))};var r=t._sendWithProtocol(c).catch((function(e){n(e),delete t._callbacks[c.invocationId]}));t._launchStreams(a,r)}))}},{key:"on",value:function(e,t){e&&t&&(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),-1===this._methods[e].indexOf(t)&&this._methods[e].push(t))}},{key:"off",value:function(e,t){if(e){e=e.toLowerCase();var n=this._methods[e];if(n)if(t){var r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this._methods[e])}else delete this._methods[e]}}},{key:"onclose",value:function(e){e&&this._closedCallbacks.push(e)}},{key:"onreconnecting",value:function(e){e&&this._reconnectingCallbacks.push(e)}},{key:"onreconnected",value:function(e){e&&this._reconnectedCallbacks.push(e)}},{key:"_processIncomingData",value:function(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){var t,r=n(this._protocol.parseMessages(e,this._logger));try{for(r.s();!(t=r.n()).done;){var o=t.value;switch(o.type){case ii.Invocation:this._invokeClientMethod(o);break;case ii.StreamItem:case ii.Completion:var i=this._callbacks[o.invocationId];if(i){o.type===ii.Completion&&delete this._callbacks[o.invocationId];try{i(o)}catch(e){this._logger.log(Ao.Error,"Stream callback threw error: ".concat(Yo(e)))}}break;case ii.Ping:break;case ii.Close:this._logger.log(Ao.Information,"Close message received from server.");var a=o.error?new Error("Server returned an error on close: "+o.error):void 0;!0===o.allowReconnect?this.connection.stop(a):this._stopPromise=this._stopInternal(a);break;default:this._logger.log(Ao.Warning,"Invalid message type: ".concat(o.type,"."))}}}catch(e){r.e(e)}finally{r.f()}}this._resetTimeoutPeriod()}},{key:"_processHandshakeResponse",value:function(e){var t,n;try{var r=y(this._handshakeProtocol.parseHandshakeResponse(e),2);n=r[0],t=r[1]}catch(e){var o="Error parsing handshake response: "+e;this._logger.log(Ao.Error,o);var i=new Error(o);throw this._handshakeRejecter(i),i}if(t.error){var a="Server returned handshake error: "+t.error;this._logger.log(Ao.Error,a);var s=new Error(a);throw this._handshakeRejecter(s),s}return this._logger.log(Ao.Debug,"Server handshake complete."),this._handshakeResolver(),n}},{key:"_resetKeepAliveInterval",value:function(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}},{key:"_resetTimeoutPeriod",value:function(){var e=this;if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout((function(){return e.serverTimeout()}),this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle))){var t=this._nextKeepAlive-(new Date).getTime();t<0&&(t=0),this._pingServerHandle=setTimeout(o((function*(){if(e._connectionState===si.Connected)try{yield e._sendMessage(e._cachedPingMessage)}catch(t){e._cleanupPingTimer()}})),t)}}},{key:"serverTimeout",value:function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}},{key:"_invokeClientMethod",value:(r=o((function*(e){var t=e.target.toLowerCase(),r=this._methods[t];if(!r)return this._logger.log(Ao.Warning,"No client method with the name '".concat(t,"' found.")),void(e.invocationId&&(this._logger.log(Ao.Warning,"No result given for '".concat(t,"' method and invocation ID '").concat(e.invocationId,"'.")),yield this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null))));var o,i,a,s,c=r.slice(),l=!!e.invocationId,u=n(c);try{for(u.s();!(s=u.n()).done;){var f=s.value;try{var h=o;o=yield f.apply(this,e.arguments),l&&o&&h&&(this._logger.log(Ao.Error,"Multiple results provided for '".concat(t,"'. Sending error to server.")),a=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),i=void 0}catch(e){i=e,this._logger.log(Ao.Error,"A callback for the method '".concat(t,"' threw error '").concat(e,"'."))}}}catch(e){u.e(e)}finally{u.f()}a?yield this._sendWithProtocol(a):l?(i?a=this._createCompletionMessage(e.invocationId,"".concat(i),null):void 0!==o?a=this._createCompletionMessage(e.invocationId,null,o):(this._logger.log(Ao.Warning,"No result given for '".concat(t,"' method and invocation ID '").concat(e.invocationId,"'.")),a=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),yield this._sendWithProtocol(a)):o&&this._logger.log(Ao.Error,"Result given for '".concat(t,"' method but server is not expecting a result."))})),function(e){return r.apply(this,arguments)})},{key:"_connectionClosed",value:function(e){this._logger.log(Ao.Debug,"HubConnection.connectionClosed(".concat(e,") called while in state ").concat(this._connectionState,".")),this._stopDuringStartError=this._stopDuringStartError||e||new Io("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===si.Disconnecting?this._completeClose(e):this._connectionState===si.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===si.Connected&&this._completeClose(e)}},{key:"_completeClose",value:function(e){var t=this;if(this._connectionStarted){this._connectionState=si.Disconnected,this._connectionStarted=!1,Bo.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach((function(n){return n.apply(t,[e])}))}catch(t){this._logger.log(Ao.Error,"An onclose callback called with error '".concat(e,"' threw error '").concat(t,"'."))}}}},{key:"_reconnect",value:(t=o((function*(e){var t=this,n=Date.now(),r=0,o=void 0!==e?e:new Error("Attempting to reconnect due to a unknown error."),i=this._getNextRetryDelay(r++,0,o);if(null===i)return this._logger.log(Ao.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void this._completeClose(e);if(this._connectionState=si.Reconnecting,e?this._logger.log(Ao.Information,"Connection reconnecting because of error '".concat(e,"'.")):this._logger.log(Ao.Information,"Connection reconnecting."),0!==this._reconnectingCallbacks.length){try{this._reconnectingCallbacks.forEach((function(n){return n.apply(t,[e])}))}catch(t){this._logger.log(Ao.Error,"An onreconnecting callback called with error '".concat(e,"' threw error '").concat(t,"'."))}if(this._connectionState!==si.Reconnecting)return void this._logger.log(Ao.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==i;){if(this._logger.log(Ao.Information,"Reconnect attempt number ".concat(r," will start in ").concat(i," ms.")),yield new Promise((function(e){t._reconnectDelayHandle=setTimeout(e,i)})),this._reconnectDelayHandle=void 0,this._connectionState!==si.Reconnecting)return void this._logger.log(Ao.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(yield this._startInternal(),this._connectionState=si.Connected,this._logger.log(Ao.Information,"HubConnection reconnected successfully."),0!==this._reconnectedCallbacks.length)try{this._reconnectedCallbacks.forEach((function(e){return e.apply(t,[t.connection.connectionId])}))}catch(e){this._logger.log(Ao.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(e,"'."))}return}catch(e){if(this._logger.log(Ao.Information,"Reconnect attempt failed because of error '".concat(e,"'.")),this._connectionState!==si.Reconnecting)return this._logger.log(Ao.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),void(this._connectionState===si.Disconnecting&&this._completeClose());o=e instanceof Error?e:new Error(e.toString()),i=this._getNextRetryDelay(r++,Date.now()-n,o)}}this._logger.log(Ao.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-n," ms and ").concat(r," failed attempts. Connection disconnecting.")),this._completeClose()})),function(e){return t.apply(this,arguments)})},{key:"_getNextRetryDelay",value:function(e,t,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(n){return this._logger.log(Ao.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(e,", ").concat(t,") threw error '").concat(n,"'.")),null}}},{key:"_cancelCallbacksWithError",value:function(e){var t=this,n=this._callbacks;this._callbacks={},Object.keys(n).forEach((function(r){var o=n[r];try{o(null,e)}catch(n){t._logger.log(Ao.Error,"Stream 'error' callback called with '".concat(e,"' threw error: ").concat(Yo(n)))}}))}},{key:"_cleanupPingTimer",value:function(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}},{key:"_cleanupTimeout",value:function(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}},{key:"_createInvocation",value:function(e,t,n,r){if(n)return 0!==r.length?{arguments:t,streamIds:r,target:e,type:ii.Invocation}:{arguments:t,target:e,type:ii.Invocation};var o=this._invocationId;return this._invocationId++,0!==r.length?{arguments:t,invocationId:o.toString(),streamIds:r,target:e,type:ii.Invocation}:{arguments:t,invocationId:o.toString(),target:e,type:ii.Invocation}}},{key:"_launchStreams",value:function(e,t){var n=this;if(0!==e.length){t||(t=Promise.resolve());var r=function(r){e[r].subscribe({complete:function(){t=t.then((function(){return n._sendWithProtocol(n._createCompletionMessage(r))}))},error:function(e){var o;o=e instanceof Error?e.message:e&&e.toString?e.toString():"Unknown error",t=t.then((function(){return n._sendWithProtocol(n._createCompletionMessage(r,o))}))},next:function(e){t=t.then((function(){return n._sendWithProtocol(n._createStreamItemMessage(r,e))}))}})};for(var o in e)r(o)}}},{key:"_replaceStreamingParams",value:function(e){for(var t=[],n=[],r=0;r<e.length;r++){var o=e[r];if(this._isObservable(o)){var i=this._invocationId;this._invocationId++,t[i]=o,n.push(i.toString()),e.splice(r,1)}}return[t,n]}},{key:"_isObservable",value:function(e){return e&&e.subscribe&&"function"==typeof e.subscribe}},{key:"_createStreamInvocation",value:function(e,t,n){var r=this._invocationId;return this._invocationId++,0!==n.length?{arguments:t,invocationId:r.toString(),streamIds:n,target:e,type:ii.StreamInvocation}:{arguments:t,invocationId:r.toString(),target:e,type:ii.StreamInvocation}}},{key:"_createCancelInvocation",value:function(e){return{invocationId:e,type:ii.CancelInvocation}}},{key:"_createStreamItemMessage",value:function(e,t){return{invocationId:e,item:t,type:ii.StreamItem}}},{key:"_createCompletionMessage",value:function(e,t,n){return t?{error:t,invocationId:e,type:ii.Completion}:{invocationId:e,result:n,type:ii.Completion}}}],[{key:"create",value:function(t,n,r,o){return new e(t,n,r,o)}}]),e}(),ui=[0,2e3,1e4,3e4,null],fi=function(){function e(t){m(this,e),this._retryDelays=void 0!==t?[].concat(function(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t),[null]):ui}return _(e,[{key:"nextRetryDelayInMilliseconds",value:function(e){return this._retryDelays[e.previousRetryCount]}}]),e}(),hi=_((function e(){m(this,e)}));hi.Authorization="Authorization",hi.Cookie="Cookie";var di,pi,yi=function(e){c(r,e);var t,n=l(r);function r(e,t){var o;return m(this,r),(o=n.call(this))._innerClient=e,o._accessTokenFactory=t,o}return _(r,[{key:"send",value:(t=o((function*(e){var t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=yield this._accessTokenFactory()),this._setAuthorizationHeader(e);var n=yield this._innerClient.send(e);return t&&401===n.statusCode&&this._accessTokenFactory?(this._accessToken=yield this._accessTokenFactory(),this._setAuthorizationHeader(e),yield this._innerClient.send(e)):n})),function(e){return t.apply(this,arguments)})},{key:"_setAuthorizationHeader",value:function(e){e.headers||(e.headers={}),this._accessToken?e.headers[hi.Authorization]="Bearer ".concat(this._accessToken):this._accessTokenFactory&&e.headers[hi.Authorization]&&delete e.headers[hi.Authorization]}},{key:"getCookieString",value:function(e){return this._innerClient.getCookieString(e)}}]),r}(Fo);!function(e){e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling"}(di||(di={})),function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"}(pi||(pi={}));var vi,gi,mi,bi,_i,wi,Si,ki,Ei,Ci,Ti,Oi,Pi,Ai=function(){function e(){m(this,e),this._isAborted=!1,this.onabort=null}return _(e,[{key:"abort",value:function(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}},{key:"signal",get:function(){return this}},{key:"aborted",get:function(){return this._isAborted}}]),e}(),Ri=function(){function e(t,n,r){m(this,e),this._httpClient=t,this._logger=n,this._pollAbort=new Ai,this._options=r,this._running=!1,this.onreceive=null,this.onclose=null}var t,n,r,i;return _(e,[{key:"pollAborted",get:function(){return this._pollAbort.aborted}},{key:"connect",value:(i=o((function*(e,t){if(Wo.isRequired(e,"url"),Wo.isRequired(t,"transferFormat"),Wo.isIn(t,pi,"transferFormat"),this._url=e,this._logger.log(Ao.Trace,"(LongPolling transport) Connecting."),t===pi.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");var n=y($o(),2),r=a(s({},n[0],n[1]),this._options.headers),o={abortSignal:this._pollAbort.signal,headers:r,timeout:1e5,withCredentials:this._options.withCredentials};t===pi.Binary&&(o.responseType="arraybuffer");var i="".concat(e,"&_=").concat(Date.now());this._logger.log(Ao.Trace,"(LongPolling transport) polling: ".concat(i,"."));var c=yield this._httpClient.get(i,o);200!==c.statusCode?(this._logger.log(Ao.Error,"(LongPolling transport) Unexpected response code: ".concat(c.statusCode,".")),this._closeError=new Ro(c.statusText||"",c.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,o)})),function(e,t){return i.apply(this,arguments)})},{key:"_poll",value:(r=o((function*(e,t){try{for(;this._running;)try{var n="".concat(e,"&_=").concat(Date.now());this._logger.log(Ao.Trace,"(LongPolling transport) polling: ".concat(n,"."));var r=yield this._httpClient.get(n,t);204===r.statusCode?(this._logger.log(Ao.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):200!==r.statusCode?(this._logger.log(Ao.Error,"(LongPolling transport) Unexpected response code: ".concat(r.statusCode,".")),this._closeError=new Ro(r.statusText||"",r.statusCode),this._running=!1):r.content?(this._logger.log(Ao.Trace,"(LongPolling transport) data received. ".concat(qo(r.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(r.content)):this._logger.log(Ao.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(e){this._running?e instanceof jo?this._logger.log(Ao.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=e,this._running=!1):this._logger.log(Ao.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(e.message))}}finally{this._logger.log(Ao.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}})),function(e,t){return r.apply(this,arguments)})},{key:"send",value:(n=o((function*(e){return this._running?Vo(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})),function(e){return n.apply(this,arguments)})},{key:"stop",value:(t=o((function*(){this._logger.log(Ao.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{yield this._receiving,this._logger.log(Ao.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,"."));var e={},t=y($o(),2),n=t[0],r=t[1];e[n]=r;var o={headers:a(a({},e),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials};yield this._httpClient.delete(this._url,o),this._logger.log(Ao.Trace,"(LongPolling transport) DELETE request sent.")}finally{this._logger.log(Ao.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}})),function(){return t.apply(this,arguments)})},{key:"_raiseOnClose",value:function(){if(this.onclose){var e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(Ao.Trace,e),this.onclose(this._closeError)}}}]),e}(),ji=function(){function e(t,n,r,o){m(this,e),this._httpClient=t,this._accessToken=n,this._logger=r,this._options=o,this.onreceive=null,this.onclose=null}var t,n;return _(e,[{key:"connect",value:(n=o((function*(e,t){var n=this;return Wo.isRequired(e,"url"),Wo.isRequired(t,"transferFormat"),Wo.isIn(t,pi,"transferFormat"),this._logger.log(Ao.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(this._accessToken))),new Promise((function(r,o){var i=!1;if(t===pi.Text){var s;if(Bo.isBrowser||Bo.isWebWorker)s=new n._options.EventSource(e,{withCredentials:n._options.withCredentials});else{var c=n._httpClient.getCookieString(e),l={};l.Cookie=c;var u=y($o(),2),f=u[0],h=u[1];l[f]=h,s=new n._options.EventSource(e,{withCredentials:n._options.withCredentials,headers:a(a({},l),n._options.headers)})}try{s.onmessage=function(e){if(n.onreceive)try{n._logger.log(Ao.Trace,"(SSE transport) data received. ".concat(qo(e.data,n._options.logMessageContent),".")),n.onreceive(e.data)}catch(e){return void n._close(e)}},s.onerror=function(e){i?n._close():o(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},s.onopen=function(){n._logger.log(Ao.Information,"SSE connected to ".concat(n._url)),n._eventSource=s,i=!0,r()}}catch(e){return void o(e)}}else o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))})),function(e,t){return n.apply(this,arguments)})},{key:"send",value:(t=o((function*(e){return this._eventSource?Vo(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})),function(e){return t.apply(this,arguments)})},{key:"stop",value:function(){return this._close(),Promise.resolve()}},{key:"_close",value:function(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}]),e}(),Ii=function(){function e(t,n,r,o,i,a){m(this,e),this._logger=r,this._accessTokenFactory=n,this._logMessageContent=o,this._webSocketConstructor=i,this._httpClient=t,this.onreceive=null,this.onclose=null,this._headers=a}var t;return _(e,[{key:"connect",value:(t=o((function*(e,t){var n,r=this;return Wo.isRequired(e,"url"),Wo.isRequired(t,"transferFormat"),Wo.isIn(t,pi,"transferFormat"),this._logger.log(Ao.Trace,"(WebSockets transport) Connecting."),this._accessTokenFactory&&(n=yield this._accessTokenFactory()),new Promise((function(o,i){var s;e=e.replace(/^http/,"ws");var c=r._httpClient.getCookieString(e),l=!1;if(Bo.isNode||Bo.isReactNative){var u={},f=y($o(),2),h=f[0],d=f[1];u[h]=d,n&&(u[hi.Authorization]="Bearer ".concat(n)),c&&(u[hi.Cookie]=c),s=new r._webSocketConstructor(e,void 0,{headers:a(a({},u),r._headers)})}else n&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(n)));s||(s=new r._webSocketConstructor(e)),t===pi.Binary&&(s.binaryType="arraybuffer"),s.onopen=function(t){r._logger.log(Ao.Information,"WebSocket connected to ".concat(e,".")),r._webSocket=s,l=!0,o()},s.onerror=function(e){var t;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:"There was an error with the transport",r._logger.log(Ao.Information,"(WebSockets transport) ".concat(t,"."))},s.onmessage=function(e){if(r._logger.log(Ao.Trace,"(WebSockets transport) data received. ".concat(qo(e.data,r._logMessageContent),".")),r.onreceive)try{r.onreceive(e.data)}catch(e){return void r._close(e)}},s.onclose=function(e){if(l)r._close(e);else{var t;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",i(new Error(t))}}}))})),function(e,n){return t.apply(this,arguments)})},{key:"send",value:function(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Ao.Trace,"(WebSockets transport) sending data. ".concat(qo(e,this._logMessageContent),".")),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}},{key:"stop",value:function(){return this._webSocket&&this._close(void 0),Promise.resolve()}},{key:"_close",value:function(e){this._webSocket&&(this._webSocket.onclose=function(){},this._webSocket.onmessage=function(){},this._webSocket.onerror=function(){},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Ao.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(e)||!1!==e.wasClean&&1e3===e.code?e instanceof Error?this.onclose(e):this.onclose():this.onclose(new Error("WebSocket closed with status code: ".concat(e.code," (").concat(e.reason||"no reason given",")."))))}},{key:"_isCloseEvent",value:function(e){return e&&"boolean"==typeof e.wasClean&&"number"==typeof e.code}}]),e}(),xi=function(){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(m(this,e),this._stopPromiseResolver=function(){},this.features={},this._negotiateVersion=1,Wo.isRequired(t,"url"),this._logger=void 0===(n=r.logger)?new Ko(Ao.Information):null===n?Mo.instance:void 0!==n.log?n:new Ko(n),this.baseUrl=this._resolveUrl(t),(r=r||{}).logMessageContent=void 0!==r.logMessageContent&&r.logMessageContent,"boolean"!=typeof r.withCredentials&&void 0!==r.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");r.withCredentials=void 0===r.withCredentials||r.withCredentials,r.timeout=void 0===r.timeout?1e5:r.timeout;var o=null,i=null;if(Bo.isNode&&"undefined"!=typeof require){var a="function"==typeof __webpack_require__?__non_webpack_require__:require;o=a("ws"),i=a("eventsource")}Bo.isNode||"undefined"==typeof WebSocket||r.WebSocket?Bo.isNode&&!r.WebSocket&&o&&(r.WebSocket=o):r.WebSocket=WebSocket,Bo.isNode||"undefined"==typeof EventSource||r.EventSource?Bo.isNode&&!r.EventSource&&void 0!==i&&(r.EventSource=i):r.EventSource=EventSource,this._httpClient=new yi(r.httpClient||new ri(this._logger),r.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=r,this.onreceive=null,this.onclose=null}var t,r,i,s,c,l;return _(e,[{key:"start",value:(l=o((function*(e){if(e=e||pi.Binary,Wo.isIn(e,pi,"transferFormat"),this._logger.log(Ao.Debug,"Starting connection with transfer format '".concat(pi[e],"'.")),"Disconnected"!==this._connectionState)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),yield this._startInternalPromise,"Disconnecting"===this._connectionState){var t="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Ao.Error,t),yield this._stopPromise,Promise.reject(new Io(t))}if("Connected"!==this._connectionState){var n="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Ao.Error,n),Promise.reject(new Io(n))}this._connectionStarted=!0})),function(e){return l.apply(this,arguments)})},{key:"send",value:function(e){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Di(this.transport)),this._sendQueue.send(e))}},{key:"stop",value:(c=o((function*(e){var t=this;return"Disconnected"===this._connectionState?(this._logger.log(Ao.Debug,"Call to HttpConnection.stop(".concat(e,") ignored because the connection is already in the disconnected state.")),Promise.resolve()):"Disconnecting"===this._connectionState?(this._logger.log(Ao.Debug,"Call to HttpConnection.stop(".concat(e,") ignored because the connection is already in the disconnecting state.")),this._stopPromise):(this._connectionState="Disconnecting",this._stopPromise=new Promise((function(e){t._stopPromiseResolver=e})),yield this._stopInternal(e),void(yield this._stopPromise))})),function(e){return c.apply(this,arguments)})},{key:"_stopInternal",value:(s=o((function*(e){this._stopError=e;try{yield this._startInternalPromise}catch(e){}if(this.transport){try{yield this.transport.stop()}catch(e){this._logger.log(Ao.Error,"HttpConnection.transport.stop() threw error '".concat(e,"'.")),this._stopConnection()}this.transport=void 0}else this._logger.log(Ao.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})),function(e){return s.apply(this,arguments)})},{key:"_startInternal",value:(i=o((function*(e){var t=this,n=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation){if(this._options.transport!==di.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");this.transport=this._constructTransport(di.WebSockets),yield this._startTransport(n,e)}else{var r=null,o=0,i=function*(){if(r=yield t._getNegotiationResponse(n),"Disconnecting"===t._connectionState||"Disconnected"===t._connectionState)throw new Io("The connection was stopped during negotiation.");if(r.error)throw new Error(r.error);if(r.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(r.url&&(n=r.url),r.accessToken){var e=r.accessToken;t._accessTokenFactory=function(){return e},t._httpClient._accessToken=e,t._httpClient._accessTokenFactory=void 0}o++};do{yield*i()}while(r.url&&o<100);if(100===o&&r.url)throw new Error("Negotiate redirection limit exceeded.");yield this._createTransport(n,this._options.transport,r,e)}this.transport instanceof Ri&&(this.features.inherentKeepAlive=!0),"Connecting"===this._connectionState&&(this._logger.log(Ao.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(e){return this._logger.log(Ao.Error,"Failed to start the connection: "+e),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(e)}})),function(e){return i.apply(this,arguments)})},{key:"_getNegotiationResponse",value:(r=o((function*(e){var t={},n=y($o(),2),r=n[0],o=n[1];t[r]=o;var i=this._resolveNegotiateUrl(e);this._logger.log(Ao.Debug,"Sending negotiation request: ".concat(i,"."));try{var s=yield this._httpClient.post(i,{content:"",headers:a(a({},t),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(200!==s.statusCode)return Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(s.statusCode,"'")));var c=JSON.parse(s.content);return(!c.negotiateVersion||c.negotiateVersion<1)&&(c.connectionToken=c.connectionId),c}catch(e){var l="Failed to complete negotiation with the server: "+e;return e instanceof Ro&&404===e.statusCode&&(l+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Ao.Error,l),Promise.reject(new No(l))}})),function(e){return r.apply(this,arguments)})},{key:"_createConnectUrl",value:function(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+"id=".concat(t):e}},{key:"_createTransport",value:(t=o((function*(e,t,r,o){var i=this._createConnectUrl(e,r.connectionToken);if(this._isITransport(t))return this._logger.log(Ao.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,yield this._startTransport(i,o),void(this.connectionId=r.connectionId);var a,s=[],c=r,l=n(r.availableTransports||[]);try{for(l.s();!(a=l.n()).done;){var u=a.value,f=this._resolveTransportOrError(u,t,o);if(f instanceof Error)s.push("".concat(u.transport," failed:")),s.push(f);else if(this._isITransport(f)){if(this.transport=f,!c){try{c=yield this._getNegotiationResponse(e)}catch(e){return Promise.reject(e)}i=this._createConnectUrl(e,c.connectionToken)}try{return yield this._startTransport(i,o),void(this.connectionId=c.connectionId)}catch(e){if(this._logger.log(Ao.Error,"Failed to start the transport '".concat(u.transport,"': ").concat(e)),c=void 0,s.push(new Lo("".concat(u.transport," failed: ").concat(e),di[u.transport])),"Connecting"!==this._connectionState){var h="Failed to select transport before stop() was called.";return this._logger.log(Ao.Debug,h),Promise.reject(new Io(h))}}}}}catch(e){l.e(e)}finally{l.f()}return s.length>0?Promise.reject(new Uo("Unable to connect to the server with any of the available transports. ".concat(s.join(" ")),s)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))})),function(e,n,r,o){return t.apply(this,arguments)})},{key:"_constructTransport",value:function(e){switch(e){case di.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Ii(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case di.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new ji(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case di.LongPolling:return new Ri(this._httpClient,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(e,"."))}}},{key:"_startTransport",value:function(e,t){var n=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=function(e){return n._stopConnection(e)},this.transport.connect(e,t)}},{key:"_resolveTransportOrError",value:function(e,t,n){var r=di[e.transport];if(null==r)return this._logger.log(Ao.Debug,"Skipping transport '".concat(e.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(e.transport,"' because it is not supported by this client."));if(!function(e,t){return!e||0!=(t&e)}(t,r))return this._logger.log(Ao.Debug,"Skipping transport '".concat(di[r],"' because it was disabled by the client.")),new Do("'".concat(di[r],"' is disabled by the client."),r);if(!(e.transferFormats.map((function(e){return pi[e]})).indexOf(n)>=0))return this._logger.log(Ao.Debug,"Skipping transport '".concat(di[r],"' because it does not support the requested transfer format '").concat(pi[n],"'.")),new Error("'".concat(di[r],"' does not support ").concat(pi[n],"."));if(r===di.WebSockets&&!this._options.WebSocket||r===di.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Ao.Debug,"Skipping transport '".concat(di[r],"' because it is not supported in your environment.'")),new xo("'".concat(di[r],"' is not supported in your environment."),r);this._logger.log(Ao.Debug,"Selecting transport '".concat(di[r],"'."));try{return this._constructTransport(r)}catch(e){return e}}},{key:"_isITransport",value:function(e){return e&&"object"===w(e)&&"connect"in e}},{key:"_stopConnection",value:function(e){var t=this;if(this._logger.log(Ao.Debug,"HttpConnection.stopConnection(".concat(e,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(Ao.Warning,"Call to HttpConnection.stopConnection(".concat(e,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(e,") was called while the connection is still in the connecting state."));if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),e?this._logger.log(Ao.Error,"Connection disconnected with error '".concat(e,"'.")):this._logger.log(Ao.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch((function(e){t._logger.log(Ao.Error,"TransportSendQueue.stop() threw error '".concat(e,"'."))})),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(Ao.Error,"HttpConnection.onclose(".concat(e,") threw error '").concat(t,"'."))}}}else this._logger.log(Ao.Debug,"Call to HttpConnection.stopConnection(".concat(e,") was ignored because the connection is already in the disconnected state."))}},{key:"_resolveUrl",value:function(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if(!Bo.isBrowser)throw new Error("Cannot resolve '".concat(e,"'."));var t=window.document.createElement("a");return t.href=e,this._logger.log(Ao.Information,"Normalizing '".concat(e,"' to '").concat(t.href,"'.")),t.href}},{key:"_resolveNegotiateUrl",value:function(e){var t=e.indexOf("?"),n=e.substring(0,-1===t?e.length:t);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",-1===(n+=-1===t?"":e.substring(t)).indexOf("negotiateVersion")&&(n+=-1===t?"?":"&",n+="negotiateVersion="+this._negotiateVersion),n}}]),e}(),Di=function(){function e(t){m(this,e),this._transport=t,this._buffer=[],this._executing=!0,this._sendBufferedData=new Li,this._transportResult=new Li,this._sendLoopPromise=this._sendLoop()}var t;return _(e,[{key:"send",value:function(e){return this._bufferData(e),this._transportResult||(this._transportResult=new Li),this._transportResult.promise}},{key:"stop",value:function(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}},{key:"_bufferData",value:function(e){if(this._buffer.length&&w(this._buffer[0])!==w(e))throw new Error("Expected data to be of type ".concat(w(this._buffer)," but was of type ").concat(w(e)));this._buffer.push(e),this._sendBufferedData.resolve()}},{key:"_sendLoop",value:(t=o((function*(){for(;;){if(yield this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Li;var t=this._transportResult;this._transportResult=void 0;var n="string"==typeof this._buffer[0]?this._buffer.join(""):e._concatBuffers(this._buffer);this._buffer.length=0;try{yield this._transport.send(n),t.resolve()}catch(e){t.reject(e)}}})),function(){return t.apply(this,arguments)})}],[{key:"_concatBuffers",value:function(e){var t,r=e.map((function(e){return e.byteLength})).reduce((function(e,t){return e+t})),o=new Uint8Array(r),i=0,a=n(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;o.set(new Uint8Array(s),i),i+=s.byteLength}}catch(e){a.e(e)}finally{a.f()}return o.buffer}}]),e}(),Li=function(){function e(){var t=this;m(this,e),this.promise=new Promise((function(e,n){var r;return r=[e,n],t._resolver=r[0],t._rejecter=r[1],r}))}return _(e,[{key:"resolve",value:function(){this._resolver()}},{key:"reject",value:function(e){this._rejecter(e)}}]),e}(),Ni=function(){function e(){m(this,e),this.name="json",this.version=1,this.transferFormat=pi.Text}return _(e,[{key:"parseMessages",value:function(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=Mo.instance);var r,o=[],i=n(oi.parse(e));try{for(i.s();!(r=i.n()).done;){var a=r.value,s=JSON.parse(a);if("number"!=typeof s.type)throw new Error("Invalid payload.");switch(s.type){case ii.Invocation:this._isInvocationMessage(s);break;case ii.StreamItem:this._isStreamItemMessage(s);break;case ii.Completion:this._isCompletionMessage(s);break;case ii.Ping:case ii.Close:break;default:t.log(Ao.Information,"Unknown message type '"+s.type+"' ignored.");continue}o.push(s)}}catch(e){i.e(e)}finally{i.f()}return o}},{key:"writeMessage",value:function(e){return oi.write(JSON.stringify(e))}},{key:"_isInvocationMessage",value:function(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}},{key:"_isStreamItemMessage",value:function(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")}},{key:"_isCompletionMessage",value:function(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}},{key:"_assertNotEmptyString",value:function(e,t){if("string"!=typeof e||""===e)throw new Error(t)}}]),e}(),Ui={trace:Ao.Trace,debug:Ao.Debug,info:Ao.Information,information:Ao.Information,warn:Ao.Warning,warning:Ao.Warning,error:Ao.Error,critical:Ao.Critical,none:Ao.None},Hi=function(){function e(){m(this,e)}return _(e,[{key:"configureLogging",value:function(e){if(Wo.isRequired(e,"logging"),void 0!==e.log)this.logger=e;else if("string"==typeof e){var t=function(e){var t=Ui[e.toLowerCase()];if(void 0!==t)return t;throw new Error("Unknown log level: ".concat(e))}(e);this.logger=new Ko(t)}else this.logger=new Ko(e);return this}},{key:"withUrl",value:function(e,t){return Wo.isRequired(e,"url"),Wo.isNotEmpty(e,"url"),this.url=e,"object"===w(t)?this.httpConnectionOptions=a(a({},this.httpConnectionOptions),t):this.httpConnectionOptions=a(a({},this.httpConnectionOptions),{},{transport:t}),this}},{key:"withHubProtocol",value:function(e){return Wo.isRequired(e,"protocol"),this.protocol=e,this}},{key:"withAutomaticReconnect",value:function(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new fi(e):this.reconnectPolicy=e:this.reconnectPolicy=new fi,this}},{key:"build",value:function(){var e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var t=new xi(this.url,e);return li.create(t,this.logger||Mo.instance,this.protocol||new Ni,this.reconnectPolicy)}}]),e}(),Fi=function(e){var t=e.builder,n=void 0===t?new Hi:t,r=e.hubEndpoint,o=e.appUrl,i=e.logger,a=e.getAccessToken,s=e.refreshToken,c=e.isAccessTokenValid;if(!r||!o)throw new Error("The AppUrl and HubEndpoint must be defined in order to use SignalR communications");var l=n.withUrl(new URL(r,o).href,{accessTokenFactory:function(){return S(void 0,void 0,void 0,(function*(){var e;return(null!==(e=yield function(e,t,n){return S(void 0,void 0,void 0,(function*(){if(e){n&&t&&!n()&&(yield t());var r=e();if(r)return r}return""}))}(a,s,c))&&void 0!==e?e:"").replace("Bearer ","")}))}}).withAutomaticReconnect();return i&&l.configureLogging({log:function(e,t){var n,r;switch(e){case Ao.Information:case Ao.Trace:case Ao.Debug:case Ao.Warning:null===(n=i.debug)||void 0===n||n.call(i,{category:"SignalRHttpClient",message:"HubConnection ".concat(t)});break;case Ao.Error:case Ao.Critical:null===(r=i.error)||void 0===r||r.call(i,{category:"SignalRHttpClient",message:"Handler Error: HubConnection ".concat(t),errorCode:tt.Communication_Default,error:new Error(t)})}}}),l.build()},Mi="SignalRHttpClient",Wi=function(){function e(t){var n=t.appUrl,r=t.localeHeader,o=void 0===r?"":r,i=t.getLocale,a=t.setLocale,s=t.logger,c=t.getAccessToken,l=t.refreshToken,u=t.isAccessTokenValid;m(this,e),vi.add(this),gi.set(this,void 0),mi.set(this,void 0),bi.set(this,void 0),_i.set(this,void 0),wi.set(this,void 0),Si.set(this,void 0),ki.set(this,void 0),Ei.set(this,void 0),E(this,wi,Vr(n),"f"),E(this,gi,o,"f"),E(this,mi,i,"f"),E(this,bi,a,"f"),E(this,_i,s,"f"),E(this,Si,c,"f"),E(this,ki,l,"f"),E(this,Ei,u,"f")}return _(e,[{key:"executeRequest",value:function(e){var t,n,r,o,i,a,c,l,u,f,h,d,p,y,v=e.url,g=e.payload,m=e.headers,b=e.contentType,_=void 0===b?pt.FormUrlEncoded:b,w=e.useLocaleInfo,E=void 0!==w&&w,C=e.responseHandler,T=e.hubConnectionBuilder,O=void 0===T?new Hi:T;return S(this,void 0,void 0,(function*(){null===(n=null===(t=k(this,_i,"f"))||void 0===t?void 0:t.setActiveSpanAsNonAggregable)||void 0===n||n.call(t);var e=Fi({builder:O,hubEndpoint:"moduleservices/debugger/requestshub",appUrl:k(this,wi,"f"),logger:k(this,_i,"f"),getAccessToken:k(this,Si,"f"),refreshToken:k(this,ki,"f"),isAccessTokenValid:k(this,Ei,"f")}),b=E?null===(r=k(this,mi,"f"))||void 0===r?void 0:r.call(this):void 0,w=Object.assign(Object.assign(Object.assign({},m),b?s({},k(this,gi,"f"),b):{}),Br({payload:g,headers:m})?{"content-type":_}:{});try{var S=g?qr({payload:g,contentType:_}):void 0;yield e.start();var T=yield e.invoke("ExecuteRequest",new URL(v,k(this,wi,"f")).pathname,S,w);yield e.stop(),null===(i=null===(o=k(this,_i,"f"))||void 0===o?void 0:o.debug)||void 0===i||i.call(o,{category:Mi,message:"ExecuteRequest ".concat(v)});var P=Jr(null==T?void 0:T.ResponseBody,k(this,_i,"f"),Mi);if(200!==(null==T?void 0:T.ResponseStatusCode)){var A=null!==(l=null===(c=null===(a=null==T?void 0:T.ResponseStatusCode)||void 0===a?void 0:a.toString)||void 0===c?void 0:c.call(a))&&void 0!==l?l:"",R=st(A);throw new ot(null!==(f=null===(u=null==P?void 0:P.exception)||void 0===u?void 0:u.message)&&void 0!==f?f:"Network Error",null!==(d=null===(h=null==P?void 0:P.exception)||void 0===h?void 0:h.errorCode)&&void 0!==d?d:R,A,P,Mi)}if(E&&k(this,bi,"f")&&(null==T?void 0:T.ResponseHeaders)&&zr({responseHeaders:T.ResponseHeaders,localeHeader:k(this,gi,"f"),currentLocale:b,setLocale:k(this,bi,"f")}),"function"==typeof C)try{C({data:P,responseHeaders:null==T?void 0:T.ResponseHeaders})}catch(e){null===(y=null===(p=k(this,_i,"f"))||void 0===p?void 0:p.error)||void 0===y||y.call(p,{category:Mi,message:"ExecuteRequest ".concat(v),errorCode:tt.Communication_Default,error:e})}return P}catch(t){throw yield null==e?void 0:e.stop(),k(this,vi,"m",Ci).call(this,t,v)}}))}}]),e}();gi=new WeakMap,mi=new WeakMap,bi=new WeakMap,_i=new WeakMap,wi=new WeakMap,Si=new WeakMap,ki=new WeakMap,Ei=new WeakMap,vi=new WeakSet,Ci=function(e,t){var n,r,o,i,a,s=tt.Communication_Default;return e instanceof ot?(s=st(null!==(n=e.status)&&void 0!==n?n:""),a=e):a=new ot("ExecuteRequest ".concat(t),s,void 0,void 0,Mi),null===(o=null===(r=k(this,_i,"f"))||void 0===r?void 0:r.error)||void 0===o||o.call(r,{category:Mi,message:"ExecuteRequest ".concat(t," - ").concat(null!==(i=null==e?void 0:e.message)&&void 0!==i?i:""),errorCode:s,error:e}),a};var Bi=function(){function e(t){var n=t.appUrl,r=t.localeHeader,o=t.getLocale,i=t.setLocale,a=t.logger,s=t.getAccessToken,c=t.refreshToken,l=t.isAccessTokenValid,u=t.signalRClientInstance,f=void 0===u?function(e){return new Wi({appUrl:e.appUrl,localeHeader:e.localeHeader,getLocale:e.getLocale,setLocale:e.setLocale,logger:e.logger,getAccessToken:e.getAccessToken,refreshToken:e.refreshToken,isAccessTokenValid:e.isAccessTokenValid})}({appUrl:n,localeHeader:r,getLocale:o,setLocale:i,logger:a,getAccessToken:s,refreshToken:c,isAccessTokenValid:l}):u,h=t.alternateHttpClientInstance;m(this,e),Ti.set(this,void 0),Oi.set(this,void 0),Pi.set(this,void 0),E(this,Ti,f,"f"),E(this,Oi,h,"f"),E(this,Pi,a,"f")}return _(e,[{key:"post",value:function(e){var t=e.url,n=e.payload,r=e.headers,o=e.contentType,i=e.timeout,a=e.timeoutHandler,s=e.useLocaleInfo,c=e.responseHandler;return S(this,void 0,void 0,(function*(){var e=this;return Gr(k(this,Pi,"f"),"POST",(function(){return k(e,Ti,"f").executeRequest({url:t,payload:n,headers:r,contentType:o,useLocaleInfo:s,timeout:i,timeoutHandler:a,responseHandler:c})}))}))}},{key:"get",value:function(e){var t=e.url,n=e.params,r=e.headers,o=e.responseType,i=e.useLocaleInfo,a=e.timeout,s=e.timeoutHandler,c=e.baseURL;return S(this,void 0,void 0,(function*(){return k(this,Oi,"f").get({url:t,params:n,headers:r,responseType:o,useLocaleInfo:i,timeout:a,timeoutHandler:s,baseURL:c})}))}},{key:"getResponseUrl",value:function(e){var t=e.url,n=e.params,r=e.headers,o=e.useLocaleInfo,i=e.timeout,a=e.timeoutHandler,s=e.baseURL;return S(this,void 0,void 0,(function*(){return k(this,Oi,"f").getResponseUrl({url:t,params:n,headers:r,useLocaleInfo:o,timeout:i,timeoutHandler:a,baseURL:s})}))}}]),e}();e.DebuggerHttpClient=Bi,Ti=new WeakMap,Oi=new WeakMap,Pi=new WeakMap,e.Version="1.4.2"}));
define("@outsystems/auth-js",["exports","@outsystems/communication-js"],(function(e,t){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function i(e){var t=u();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)}(this,n)}}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)})(e)}function s(e,t,n){return(s=u()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key,"string"),"symbol"===g(i)?i:String(i)),r)}var i}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=e.FailureReasons=e.ExternalAuth=e.BuiltinAuth=e.AuthType=e.AuthFactory=e.AuthErrorCode=e.AuthError=void 0;var m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var w=function(){return(w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function b(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function S(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function _(e,t){return function(n,r){t(n,r,e)}}function E(e,t){if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function A(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function C(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var k=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function P(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||k(t,e,n)}function x(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function T(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(I(arguments[t]));return e}function O(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function U(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function N(e){return this instanceof N?(this.v=e,this):new N(e)}function M(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof N?Promise.resolve(e.value.v).then(u,c):l(o[0][2],e)}(i[e](t))}catch(e){l(o[0][3],e)}}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function R(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:N(e[r](t)),done:!1}:i?i(t):t}:i}}function L(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=x(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function F(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var j=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function D(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&k(t,e,n);return j(t,e),t}function z(e){return e&&e.__esModule?e:{default:e}}function q(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function B(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function G(e,t){if(null===t||"object"!==g(t)&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}var $,W,V,H={__extends:y,__assign:w,__rest:b,__decorate:S,__param:_,__metadata:E,__awaiter:A,__generator:C,__createBinding:k,__exportStar:P,__values:x,__read:I,__spread:T,__spreadArrays:O,__spreadArray:U,__await:N,__asyncGenerator:M,__asyncDelegator:R,__asyncValues:L,__makeTemplateObject:F,__importStar:D,__importDefault:z,__classPrivateFieldGet:q,__classPrivateFieldSet:B,__classPrivateFieldIn:G},K=Object.freeze({__proto__:null,__extends:y,get __assign(){return w},__rest:b,__decorate:S,__param:_,__esDecorate:function(e,t,n,r,i,o){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var s,u=r.kind,c="getter"===u?"get":"setter"===u?"set":"value",l=!t&&e?r.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),f=!1,h=n.length-1;h>=0;h--){var p={};for(var v in r)p[v]="access"===v?{}:r[v];for(var v in r.access)p.access[v]=r.access[v];p.addInitializer=function(e){if(f)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var m=(0,n[h])("accessor"===u?{get:d.get,set:d.set}:d[c],p);if("accessor"===u){if(void 0===m)continue;if(null===m||"object"!==g(m))throw new TypeError("Object expected");(s=a(m.get))&&(d.get=s),(s=a(m.set))&&(d.set=s),(s=a(m.init))&&i.unshift(s)}else(s=a(m))&&("field"===u?i.unshift(s):d[c]=s)}l&&Object.defineProperty(l,r.name,d),f=!0},__runInitializers:function(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0},__propKey:function(e){return"symbol"===g(e)?e:"".concat(e)},__setFunctionName:function(e,t,n){return"symbol"===g(t)&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},__metadata:E,__awaiter:A,__generator:C,__createBinding:k,__exportStar:P,__values:x,__read:I,__spread:T,__spreadArrays:O,__spreadArray:U,__await:N,__asyncGenerator:M,__asyncDelegator:R,__asyncValues:L,__makeTemplateObject:F,__importStar:D,__importDefault:z,__classPrivateFieldGet:q,__classPrivateFieldSet:B,__classPrivateFieldIn:G,default:H});function J(e){return e&&!!["provider"].find((function(t){return e.hasOwnProperty(t)}))}function Y(e){return void 0!==e.redirectSignIn}!function(e){e.Cognito="COGNITO",e.Google="Google",e.Facebook="Facebook",e.Amazon="LoginWithAmazon",e.Apple="SignInWithApple"}($||($={})),function(e){e.NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default",e.DeviceConfig="deviceConfig",e.NetworkError="networkError",e.AutoSignInError="autoSignInError"}(W||(W={})),function(e){e.API_KEY="API_KEY",e.AWS_IAM="AWS_IAM",e.OPENID_CONNECT="OPENID_CONNECT",e.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS",e.AWS_LAMBDA="AWS_LAMBDA"}(V||(V={}));var Z,Q=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},X=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},ee=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},te={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5};!function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE"}(Z||(Z={}));var ne,re,ie,oe,ae,se,ue,ce,le,de,fe,he,pe,ve=function(){function e(e,t){void 0===t&&(t=Z.WARN),this.name=e,this.level=t,this._pluggables=[]}return e.prototype._padding=function(e){return e<10?"0"+e:""+e},e.prototype._ts=function(){var e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()},e.prototype.configure=function(e){return e?(this._config=e,this._config):this._config},e.prototype._log=function(t){for(var n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=this.level;if(e.LOG_LEVEL&&(a=e.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(a=window.LOG_LEVEL),te[t]>=te[a]){var s=console.log.bind(console);t===Z.ERROR&&console.error&&(s=console.error.bind(console)),t===Z.WARN&&console.warn&&(s=console.warn.bind(console));var u="[".concat(t,"] ").concat(this._ts()," ").concat(this.name),c="";if(1===i.length&&"string"==typeof i[0])s(c="".concat(u," - ").concat(i[0]));else if(1===i.length)c="".concat(u," ").concat(i[0]),s(u,i[0]);else if("string"==typeof i[0]){var l=i.slice(1);1===l.length&&(l=l[0]),c="".concat(u," - ").concat(i[0]," ").concat(l),s("".concat(u," - ").concat(i[0]),l)}else c="".concat(u," ").concat(i),s(u,i);try{for(var d=Q(this._pluggables),f=d.next();!f.done;f=d.next()){var h=f.value,p={message:c,timestamp:Date.now()};h.pushLogs([p])}}catch(e){n={error:e}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}}},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,ee([Z.INFO],X(e),!1))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,ee([Z.INFO],X(e),!1))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,ee([Z.WARN],X(e),!1))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,ee([Z.ERROR],X(e),!1))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,ee([Z.DEBUG],X(e),!1))},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,ee([Z.VERBOSE],X(e),!1))},e.prototype.addPluggable=function(e){e&&"Logging"===e.getCategoryName()&&(this._pluggables.push(e),e.configure(this._config))},e.prototype.listPluggables=function(){return this._pluggables},e.LOG_LEVEL=null,e}(),ge=new ve("Amplify"),me=new(function(){function e(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Geo=null,this.Notifications=null,this.Logger=ve,this.ServiceWorker=null}return e.prototype.register=function(e){ge.debug("component registered in amplify",e),this._components.push(e),"function"==typeof e.getModuleName?(this._modules[e.getModuleName()]=e,this[e.getModuleName()]=e):ge.debug("no getModuleName method for component",e),e.configure(this._config)},e.prototype.configure=function(e){var t=this;return e?(this._config=Object.assign(this._config,e),ge.debug("amplify config",this._config),Object.entries(this._modules).forEach((function(e){var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(e,2);n[0];var r=n[1];Object.keys(r).forEach((function(e){t._modules[e]&&(r[e]=t._modules[e])}))})),this._components.map((function(e){e.configure(t._config)})),this._config):this._config},e.prototype.addPluggable=function(e){e&&e.getCategory&&"function"==typeof e.getCategory&&this._components.map((function(t){t.addPluggable&&"function"==typeof t.addPluggable&&t.addPluggable(e)}))},e}());!function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"}(ne||(ne={})),function(e){e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"}(re||(re={})),function(e){e.Record="1",e.UpdateEndpoint="2"}(ie||(ie={})),function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"}(oe||(oe={})),function(e){e.FederatedSignIn="30"}(ae||(ae={})),function(e){e.Subscribe="1",e.GraphQl="2"}(se||(se={})),function(e){e.None="0"}(ue||(ue={})),function(e){e.None="0"}(ce||(ce={})),function(e){e.None="0"}(le||(le={})),function(e){e.Convert="1",e.Identify="2",e.Interpret="3"}(de||(de={})),function(e){e.Subscribe="1"}(fe||(fe={})),function(e){e.None="0"}(he||(he={})),function(e){e.Put="1",e.Get="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6"}(pe||(pe={}));var ye,we=function(){return"undefined"!=typeof global},be=function(){return"undefined"!=typeof window},Se=function(){return"undefined"!=typeof document},_e=function(){return"undefined"!=typeof process},Ee=function(e,t){return!!Object.keys(e).find((function(e){return e.startsWith(t)}))},Ae=[{platform:ne.Expo,detectionMethod:function(){return we()&&void 0!==global.expo}},{platform:ne.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:ne.NextJs,detectionMethod:function(){return be()&&window.next&&"object"===g(window.next)}},{platform:ne.Nuxt,detectionMethod:function(){return be()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:ne.Angular,detectionMethod:function(){var e=Boolean(Se()&&document.querySelector("[ng-version]")),t=Boolean(be()&&void 0!==window.ng);return e||t}},{platform:ne.React,detectionMethod:function(){var e=function(e){return e.startsWith("_react")||e.startsWith("__react")};return Se()&&Array.from(document.querySelectorAll("[id]")).some((function(t){return Object.keys(t).find(e)}))}},{platform:ne.VueJs,detectionMethod:function(){return be()&&Ee(window,"__VUE")}},{platform:ne.Svelte,detectionMethod:function(){return be()&&Ee(window,"__SVELTE")}},{platform:ne.WebUnknown,detectionMethod:function(){return be()}},{platform:ne.NextJsSSR,detectionMethod:function(){return we()&&(Ee(global,"__next")||Ee(global,"__NEXT"))}},{platform:ne.NuxtSSR,detectionMethod:function(){return we()&&void 0!==global.__NUXT_PATHS__}},{platform:ne.ReactSSR,detectionMethod:function(){return _e()&&void 0!==process.env&&!!Object.keys(process.env).find((function(e){return e.includes("react")}))}},{platform:ne.VueJsSSR,detectionMethod:function(){return we()&&Ee(global,"__VUE")}},{platform:ne.AngularSSR,detectionMethod:function(){var e;return _e()&&"object"===g(process.env)&&(null===(e=process.env.npm_lifecycle_script)||void 0===e?void 0:e.startsWith("ng "))||!1}},{platform:ne.SvelteSSR,detectionMethod:function(){return _e()&&void 0!==process.env&&!!Object.keys(process.env).find((function(e){return e.includes("svelte")}))}}],Ce=[],ke=!1,Pe=function(){var e;return ye||(ye=(null===(e=Ae.find((function(e){return e.detectionMethod()})))||void 0===e?void 0:e.platform)||ne.ServerSideUnknown,Ce.forEach((function(e){return e()})),Ie(ne.ServerSideUnknown,10),Ie(ne.WebUnknown,10)),ye},xe=function(e){Ce.push(e)};function Ie(e,t){ye!==e||ke||setTimeout((function(){ye=void 0,ke=!0,setTimeout(Pe,1e3)}),t)}var Te="aws-amplify",Oe=new(function(){function e(){this.userAgent="".concat(Te,"/").concat("5.3.5")}return Object.defineProperty(e.prototype,"framework",{get:function(){return Pe()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReactNative",{get:function(){return this.framework===ne.ReactNative||this.framework===ne.Expo},enumerable:!1,configurable:!0}),e.prototype.observeFrameworkChanges=function(e){xe(e)},e}()),Ue=function(e){return function(e){var t=void 0===e?{}:e,n=t.category,r=t.action,i=t.framework,o=t.additionalInfo,a=[[Te,"5.3.5"]];return n&&a.push([n,r]),a.push(["framework",i||Pe()]),o&&(a=a.concat(o)),a}(e).map((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(e,2),n=t[0],r=t[1];return"".concat(n,"/").concat(r)})).join(" ")};new ve("ClientDevice_Browser");var Ne=function(){return(Ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Me=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Re=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Le=new ve("Hub"),Fe="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",je=new(function(){function e(e){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}return e.prototype._remove=function(e,t){if(e instanceof RegExp){var n=this.patterns.find((function(t){return t.pattern.source===e.source}));if(!n)return void Le.warn("No listeners for ".concat(e));this.patterns=Re([],Me(this.patterns.filter((function(e){return e!==n}))),!1)}else{var r=this.listeners[e];if(!r)return void Le.warn("No listeners for ".concat(e));this.listeners[e]=Re([],Me(r.filter((function(e){return e.callback!==t}))),!1)}},e.prototype.remove=function(e,t){this._remove(e,t)},e.prototype.dispatch=function(e,t,n,r){void 0===n&&(n=""),this.protectedChannels.indexOf(e)>-1&&(r===Fe||Le.warn("WARNING: ".concat(e," is protected and dispatching on it can have unintended consequences")));var i={channel:e,payload:Ne({},t),source:n,patternInfo:[]};try{this._toListeners(i)}catch(e){Le.error(e)}},e.prototype.listen=function(e,t,n){var r,i=this;if(void 0===n&&(n="noname"),function(e){return void 0!==e.onHubCapsule}(t))Le.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),r=t.onHubCapsule.bind(t);else{if("function"!=typeof t)throw new Error("No callback supplied to Hub");r=t}if(e instanceof RegExp)this.patterns.push({pattern:e,callback:r});else{var o=this.listeners[e];o||(o=[],this.listeners[e]=o),o.push({name:n,callback:r})}return function(){i._remove(e,r)}},e.prototype._toListeners=function(e){var t=e.channel,n=e.payload,r=this.listeners[t];if(r&&r.forEach((function(r){Le.debug("Dispatching to ".concat(t," with "),n);try{r.callback(e)}catch(e){Le.error(e)}})),this.patterns.length>0){if(!n.message)return void Le.warn("Cannot perform pattern matching without a message key");var i=n.message;this.patterns.forEach((function(t){var n=i.match(t.pattern);if(n){var r=Me(n).slice(1),o=Ne(Ne({},e),{patternInfo:r});try{t.callback(o)}catch(e){Le.error(e)}}}))}},e}())("__default__"),De=function(){return(De=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ze=new ve("I18n"),qe=function(){function e(e){this._options=null,this._lang=null,this._dict={},this._options=Object.assign({},e),this._lang=this._options.language,!this._lang&&"undefined"!=typeof window&&window&&window.navigator&&(this._lang=window.navigator.language),ze.debug(this._lang)}return e.prototype.setLanguage=function(e){this._lang=e},e.prototype.get=function(e,t){if(void 0===t&&(t=void 0),!this._lang)return void 0!==t?t:e;var n=this._lang,r=this.getByLanguage(e,n);return r||(n.indexOf("-")>0&&(r=this.getByLanguage(e,n.split("-")[0])),r||(void 0!==t?t:e))},e.prototype.getByLanguage=function(e,t,n){if(void 0===n&&(n=null),!t)return n;var r=this._dict[t];return r?r[e]:n},e.prototype.putVocabulariesForLanguage=function(e,t){var n=this._dict[e];n||(n=this._dict[e]={}),this._dict[e]=De(De({},n),t)},e.prototype.putVocabularies=function(e){var t=this;Object.keys(e).map((function(n){t.putVocabulariesForLanguage(n,e[n])}))},e}(),Be=new ve("I18n"),Ge=null,$e=null,We=function(){function e(){}return e.configure=function(t){return Be.debug("configure I18n"),t?(Ge=Object.assign({},Ge,t.I18n||t),e.createInstance(),Ge):Ge},e.getModuleName=function(){return"I18n"},e.createInstance=function(){Be.debug("create I18n instance"),$e||($e=new qe(Ge))},e.setLanguage=function(t){return e.checkConfig(),$e.setLanguage(t)},e.get=function(t,n){return e.checkConfig()?$e.get(t,n):void 0===n?t:n},e.putVocabulariesForLanguage=function(t,n){return e.checkConfig(),$e.putVocabulariesForLanguage(t,n)},e.putVocabularies=function(t){return e.checkConfig(),$e.putVocabularies(t)},e.checkConfig=function(){return $e||($e=new qe(Ge)),!0},e}();me.register(We);var Ve,He=function(){return{isBrowser:"undefined"!=typeof window&&void 0!==window.document,isNode:"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node}},Ke=(Ve=function(e,t){return(Ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ve(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Je=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Ye=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},Ze=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Qe=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Xe=new ve("Util"),et=function(e){function t(t){var n=e.call(this,t)||this;return n.nonRetryable=!0,n}return Ke(t,e),t}(Error);function tt(e){return void 0===e&&(e=3e5),function(t){var n=100*Math.pow(2,t)+100*Math.random();return!(n>e)&&n}}var nt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function rt(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){if(this instanceof e){var n=[null];return n.push.apply(n,arguments),new(Function.bind.apply(t,n))}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var it={};function ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t,n){return t&&at(e.prototype,t),n&&at(e,n),e}Object.defineProperty(it,"__esModule",{value:!0}),it.Observable=void 0;var ut=function(){return"function"==typeof Symbol},ct=function(e){return ut()&&Boolean(Symbol[e])},lt=function(e){return ct(e)?Symbol[e]:"@@"+e};ut()&&!ct("observable")&&(Symbol.observable=Symbol("observable"));var dt=lt("iterator"),ft=lt("observable"),ht=lt("species");function pt(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function vt(e){var t=e.constructor;return void 0!==t&&null===(t=t[ht])&&(t=void 0),void 0!==t?t:At}function gt(e){gt.log?gt.log(e):setTimeout((function(){throw e}))}function mt(e){Promise.resolve().then((function(){try{e()}catch(e){gt(e)}}))}function yt(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=pt(t,"unsubscribe");n&&n.call(t)}}catch(e){gt(e)}}function wt(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function bt(e,t,n){e._state="running";var r=e._observer;try{var i=pt(r,t);switch(t){case"next":i&&i.call(r,n);break;case"error":if(wt(e),!i)throw n;i.call(r,n);break;case"complete":wt(e),i&&i.call(r)}}catch(e){gt(e)}"closed"===e._state?yt(e):"running"===e._state&&(e._state="ready")}function St(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void mt((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(bt(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void bt(e,t,n);e._queue.push({type:t,value:n})}}var _t=function(){function e(t,n){ot(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var r=new Et(this);try{this._cleanup=n.call(void 0,r)}catch(e){r.error(e)}"initializing"===this._state&&(this._state="ready")}return st(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(wt(this),yt(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),Et=function(){function e(t){ot(this,e),this._subscription=t}return st(e,[{key:"next",value:function(e){St(this._subscription,"next",e)}},{key:"error",value:function(e){St(this._subscription,"error",e)}},{key:"complete",value:function(){St(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),At=function(){function e(t){if(ot(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return st(e,[{key:"subscribe",value:function(e){return"object"===g(e)&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new _t(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise((function(n,r){if("function"==typeof e)var i=t.subscribe({next:function(t){try{e(t,o)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n});else r(new TypeError(e+" is not a function"));function o(){i.unsubscribe(),n()}}))}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(vt(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(vt(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=vt(this),r=arguments.length>1,i=!1,o=arguments[1];return new n((function(n){return t.subscribe({next:function(t){var a=!i;if(i=!0,!a||r)try{o=e(o,t)}catch(e){return n.error(e)}else o=t},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(o),n.complete()}})}))}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=vt(this);return new i((function(t){var r,o=0;return function e(a){r=a.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(r=void 0,t.complete()):e(i.from(n[o++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}}))}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=vt(this);return new n((function(r){var i=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return r.error(e)}var o=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=i.indexOf(o);e>=0&&i.splice(e,1),a()}});i.push(o)},error:function(e){r.error(e)},complete:function(){a()}});function a(){o.closed&&0===i.length&&r.complete()}return function(){i.forEach((function(e){return e.unsubscribe()})),o.unsubscribe()}}))}},{key:ft,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=pt(t,ft);if(r){var i=r.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return function(e){return e instanceof At}(i)&&i.constructor===n?i:new n((function(e){return i.subscribe(e)}))}if(ct("iterator")&&(r=pt(t,dt)))return new n((function(e){mt((function(){if(!e.closed){var n=!0,i=!1,o=void 0;try{for(var a,s=r.call(t)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;if(e.next(u),e.closed)return}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){mt((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new("function"==typeof this?this:e)((function(e){mt((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))}},{key:ht,get:function(){return this}}]),e}();it.Observable=At,ut()&&Object.defineProperty(At,Symbol("extensions"),{value:{symbol:ft,hostReportError:gt},configurable:!0}),it.Observable;var Ct,kt=(Ct=function(e,t){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ct(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Pt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},xt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};!function(){function e(){this._state=It.Open,this.jobs=new Set}e.prototype.add=function(t,n){var r,i;"string"==typeof t?(r=void 0,i=t):(r=t,i=n);var o=this.closedFailure(i);if(o)return o;if(void 0===r)return this.addHook(i);if("function"==typeof r)return this.addFunction(r,i);if(r instanceof e)return this.addManager(r,i);throw new Error("If `job` is provided, it must be an Observable, Function, or BackgroundProcessManager.")},e.prototype.addCleaner=function(e,t){var n=this,r=this.addHook(t),i=r.resolve,o=function(){return Pt(n,void 0,void 0,(function(){return xt(this,(function(t){switch(t.label){case 0:return[4,e()];case 1:return t.sent(),i(),[2]}}))}))};return r.onTerminate.then(o),o},e.prototype.addFunction=function(e,t){var n,r=e(new Promise((function(e){n=e})));return"function"==typeof(null==r?void 0:r.then)&&this.registerPromise(r,n,t),r},e.prototype.addManager=function(e,t){var n=this;this.addCleaner((function(){return Pt(n,void 0,void 0,(function(){return xt(this,(function(t){switch(t.label){case 0:return[4,e.close()];case 1:return[2,t.sent()]}}))}))}),t)},e.prototype.addHook=function(e){var t,n,r,i=new Promise((function(e,r){t=e,n=r})),o=new Promise((function(e){r=e}));return this.registerPromise(i,r,e),{resolve:t,reject:n,onTerminate:o}},e.prototype.registerPromise=function(e,t,n){var r=this,i={promise:e,terminate:t,description:n};this.jobs.add(i),e.then((function(){r.jobs.delete(i)})).catch((function(){r.jobs.delete(i)}))},Object.defineProperty(e.prototype,"length",{get:function(){return this.jobs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return Array.from(this.jobs).map((function(e){return e.description}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this._state===It.Open},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClosing",{get:function(){return this._state===It.Closing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClosed",{get:function(){return this._state===It.Closed},enumerable:!1,configurable:!0}),e.prototype.closedFailure=function(e){if(!this.isOpen)return Promise.reject(new Tt(["The manager is ".concat(this.state,"."),'You tried to add "'.concat(e,'".'),"Pending jobs: [\n".concat(this.pending.map((function(e){return"    "+e})).join(",\n"),"\n]")].join("\n")))},e.prototype.close=function(){return Pt(this,void 0,void 0,(function(){var e,t,n,r,i;return xt(this,(function(o){switch(o.label){case 0:if(!this.isOpen)return[3,2];this._state=It.Closing;try{for(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Array.from(this.jobs)),t=e.next();!t.done;t=e.next()){n=t.value;try{n.terminate()}catch(e){console.warn("Failed to send termination signal to job. Error: ".concat(e.message),n)}}}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return this._closingPromise=Promise.allSettled(Array.from(this.jobs).map((function(e){return e.promise}))),[4,this._closingPromise];case 1:o.sent(),this._state=It.Closed,o.label=2;case 2:return[2,this._closingPromise]}}))}))},e.prototype.open=function(){return Pt(this,void 0,void 0,(function(){return xt(this,(function(e){switch(e.label){case 0:return this.isClosing?[4,this.close()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this._state=It.Open,[2]}}))}))}}();var It,Tt=function(e){function t(t){return e.call(this,"BackgroundManagerNotOpenError: ".concat(t))||this}return kt(t,e),t}(Error);!function(e){e.Open="Open",e.Closing="Closing",e.Closed="Closed"}(It||(It={}));var Ot={},Ut=rt(K),Nt={},Mt={};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.MAX_HASHABLE_LENGTH=Mt.INIT=Mt.KEY=Mt.DIGEST_LENGTH=Mt.BLOCK_SIZE=void 0,Mt.BLOCK_SIZE=64,Mt.DIGEST_LENGTH=32,Mt.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Mt.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Mt.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1;var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.RawSha256=void 0;var Lt=Mt,Ft=function(){function e(){this.state=Int32Array.from(Lt.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>Lt.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===Lt.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%Lt.BLOCK_SIZE>=Lt.BLOCK_SIZE-8){for(var r=this.bufferLength;r<Lt.BLOCK_SIZE;r++)t.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(r=this.bufferLength;r<Lt.BLOCK_SIZE-8;r++)t.setUint8(r,0);t.setUint32(Lt.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(Lt.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var i=new Uint8Array(Lt.DIGEST_LENGTH);for(r=0;r<8;r++)i[4*r]=this.state[r]>>>24&255,i[4*r+1]=this.state[r]>>>16&255,i[4*r+2]=this.state[r]>>>8&255,i[4*r+3]=this.state[r]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=0;l<Lt.BLOCK_SIZE;l++){if(l<16)this.temp[l]=(255&e[4*l])<<24|(255&e[4*l+1])<<16|(255&e[4*l+2])<<8|255&e[4*l+3];else{var d=this.temp[l-2],f=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,h=((d=this.temp[l-15])>>>7|d<<25)^(d>>>18|d<<14)^d>>>3;this.temp[l]=(f+this.temp[l-7]|0)+(h+this.temp[l-16]|0)}var p=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&s^~a&u)|0)+(c+(Lt.KEY[l]+this.temp[l]|0)|0)|0,v=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&r^n&i^r&i)|0;c=u,u=s,s=a,a=o+p|0,o=i,i=r,r=n,n=p+v|0}t[0]+=n,t[1]+=r,t[2]+=i,t[3]+=o,t[4]+=a,t[5]+=s,t[6]+=u,t[7]+=c},e}();Rt.RawSha256=Ft;var jt={},Dt={},zt=rt(Object.freeze({__proto__:null,fromUtf8:function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},toUtf8:function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var a="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(a)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}}));Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.convertToBuffer=void 0;var qt=zt,Bt="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:qt.fromUtf8;Dt.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?Bt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)};var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.isEmptyData=void 0,Gt.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength};var $t={};Object.defineProperty($t,"__esModule",{value:!0}),$t.numToUint8=void 0,$t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])};var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.uint32ArrayFrom=void 0,Wt.uint32ArrayFrom=function(e){if(!Array.from){for(var t=new Uint32Array(e.length);0<e.length;)t[0]=e[0];return t}return Uint32Array.from(e)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uint32ArrayFrom=e.numToUint8=e.isEmptyData=e.convertToBuffer=void 0;var t=Dt;Object.defineProperty(e,"convertToBuffer",{enumerable:!0,get:function(){return t.convertToBuffer}});var n=Gt;Object.defineProperty(e,"isEmptyData",{enumerable:!0,get:function(){return n.isEmptyData}});var r=$t;Object.defineProperty(e,"numToUint8",{enumerable:!0,get:function(){return r.numToUint8}});var i=Wt;Object.defineProperty(e,"uint32ArrayFrom",{enumerable:!0,get:function(){return i.uint32ArrayFrom}})}(jt),Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.Sha256=void 0;var Vt,Ht=Ut,Kt=Mt,Jt=Rt,Yt=jt,Zt=function(){function e(e){if(this.hash=new Jt.RawSha256,e){this.outer=new Jt.RawSha256;var t=function(e){var t=(0,Yt.convertToBuffer)(e);if(t.byteLength>Kt.BLOCK_SIZE){var n=new Jt.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(Kt.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(Kt.BLOCK_SIZE);n.set(t);for(var r=0;r<Kt.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;for(this.hash.update(t),this.outer.update(n),r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!(0,Yt.isEmptyData)(e)&&!this.error)try{this.hash.update((0,Yt.convertToBuffer)(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return(0,Ht.__awaiter)(this,void 0,void 0,(function(){return(0,Ht.__generator)(this,(function(e){return[2,this.digestSync()]}))}))},e}();Nt.Sha256=Zt,Vt=Ot,Object.defineProperty(Vt,"__esModule",{value:!0}),(0,Ut.__exportStar)(Nt,Vt);for(var Qt={},Xt=0;Xt<256;Xt++){var en=Xt.toString(16).toLowerCase();1===en.length&&(en="0"+en),Qt[Xt]=en}function tn(e){for(var t="",n=0;n<e.byteLength;n++)t+=Qt[e[n]];return t}var nn=function(){return(nn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},rn=new ve("Parser"),on=function(e){var t,n={};if(e.aws_mobile_analytics_app_id){var r={AWSPinpoint:{appId:e.aws_mobile_analytics_app_id,region:e.aws_mobile_analytics_app_region}};n.Analytics=r}return(e.aws_cognito_identity_pool_id||e.aws_user_pools_id)&&(n.Auth={userPoolId:e.aws_user_pools_id,userPoolWebClientId:e.aws_user_pools_web_client_id,region:e.aws_cognito_region,identityPoolId:e.aws_cognito_identity_pool_id,identityPoolRegion:e.aws_cognito_region,mandatorySignIn:"enable"===e.aws_mandatory_sign_in,signUpVerificationMethod:e.aws_cognito_sign_up_verification_method||"code"}),t=e.aws_user_files_s3_bucket?{AWSS3:{bucket:e.aws_user_files_s3_bucket,region:e.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:e.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:e?e.Storage||e:{},e.Logging&&(n.Logging=nn(nn({},e.Logging),{region:e.aws_project_region})),e.geo&&(n.Geo=Object.assign({},e.geo),e.geo.amazon_location_service&&(n.Geo={AmazonLocationService:e.geo.amazon_location_service})),n.Analytics=Object.assign({},n.Analytics,e.Analytics),n.Auth=Object.assign({},n.Auth,e.Auth),n.Storage=Object.assign({},t),n.Logging=Object.assign({},n.Logging,e.Logging),rn.debug("parse config",e,"to amplifyconfig",n),n},an={},sn={},un={},cn={};Object.defineProperty(cn,"__esModule",{value:!0}),cn.isEmptyData=void 0,cn.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength};var ln={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_DATA_SHA_256=e.SHA_256_HMAC_ALGO=e.SHA_256_HASH=void 0,e.SHA_256_HASH={name:"SHA-256"},e.SHA_256_HMAC_ALGO={name:"HMAC",hash:e.SHA_256_HASH},e.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])}(ln);var dn={},fn=rt(Object.freeze({__proto__:null,locateWindow:function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:dn}}));Object.defineProperty(un,"__esModule",{value:!0}),un.Sha256=void 0;var hn=cn,pn=ln,vn=zt,gn=fn,mn=function(){function e(e){e?(this.operation=function(e){return new Promise((function(t,n){var r=(0,gn.locateWindow)().msCrypto.subtle.importKey("raw",yn(e),pn.SHA_256_HMAC_ALGO,!1,["sign"]);r.oncomplete=function(){r.result&&t(r.result),n(new Error("ImportKey completed without importing key."))},r.onerror=function(){n(new Error("ImportKey failed to import key."))}}))}(e).then((function(e){return(0,gn.locateWindow)().msCrypto.subtle.sign(pn.SHA_256_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve((0,gn.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;(0,hn.isEmptyData)(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(yn(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n(new Error("Error encountered finalizing hash"))},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n(new Error("Error encountered finalizing hash"))},e.finish()}))}))},e}();function yn(e){return"string"==typeof e?(0,vn.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}un.Sha256=mn;var wn={};Object.defineProperty(wn,"__esModule",{value:!0}),wn.Sha256=void 0;var bn=jt,Sn=ln,_n=fn,En=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise((function(t,n){(0,_n.locateWindow)().crypto.subtle.importKey("raw",(0,bn.convertToBuffer)(e),Sn.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))}return e.prototype.update=function(e){if(!(0,bn.isEmptyData)(e)){var t=(0,bn.convertToBuffer)(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return(0,_n.locateWindow)().crypto.subtle.sign(Sn.SHA_256_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):(0,bn.isEmptyData)(this.toHash)?Promise.resolve(Sn.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return(0,_n.locateWindow)().crypto.subtle.digest(Sn.SHA_256_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e}();wn.Sha256=En;var An,Cn={},kn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),Ut.__exportStar(function(){if(An)return kn;An=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.supportsZeroByteGCM=kn.supportsSubtleCrypto=kn.supportsSecureRandom=kn.supportsWebCrypto=void 0;var e=Ut,t=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function n(e){return"object"===g(e)&&"object"===g(e.crypto)&&"function"==typeof e.crypto.getRandomValues}function r(e){return e&&t.every((function(t){return"function"==typeof e[t]}))}return kn.supportsWebCrypto=function(e){return!(!n(e)||"object"!==g(e.crypto.subtle))&&r(e.crypto.subtle)},kn.supportsSecureRandom=n,kn.supportsSubtleCrypto=r,kn.supportsZeroByteGCM=function(t){return e.__awaiter(this,void 0,void 0,(function(){var n;return e.__generator(this,(function(e){switch(e.label){case 0:if(!r(t))return[2,!1];e.label=1;case 1:return e.trys.push([1,4,,5]),[4,t.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return n=e.sent(),[4,t.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},n,new Uint8Array(0))];case 3:return[2,16===e.sent().byteLength];case 4:return e.sent(),[2,!1];case 5:return[2]}}))}))},kn}(),e)}(Cn);var Pn,xn,In,Tn,On,Un={},Nn={},Mn={},Rn={},Ln={},Fn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Ut;t.__exportStar((Pn||(Pn=1,Object.defineProperty(Nn,"__esModule",{value:!0})),Nn),e),t.__exportStar((xn||(xn=1,Object.defineProperty(Mn,"__esModule",{value:!0})),Mn),e),t.__exportStar((In||(In=1,Object.defineProperty(Rn,"__esModule",{value:!0})),Rn),e),t.__exportStar((Tn||(Tn=1,Object.defineProperty(Ln,"__esModule",{value:!0})),Ln),e),t.__exportStar(function(){if(On)return Fn;On=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.isMsWindow=void 0;var e=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];return Fn.isMsWindow=function(t){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(t)&&void 0!==t.msCrypto.subtle){var n=t.msCrypto,r=n.getRandomValues,i=n.subtle;return e.map((function(e){return i[e]})).concat(r).every((function(e){return"function"==typeof e}))}return!1},Fn}(),e)}(Un),Object.defineProperty(sn,"__esModule",{value:!0}),sn.Sha256=void 0;var jn=un,Dn=wn,zn=Ot,qn=Cn,Bn=Un,Gn=fn,$n=function(){function e(e){(0,qn.supportsWebCrypto)((0,Gn.locateWindow)())?this.hash=new Dn.Sha256(e):(0,Bn.isMsWindow)((0,Gn.locateWindow)())?this.hash=new jn.Sha256(e):this.hash=new zn.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();sn.Sha256=$n,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WebCryptoSha256=e.Ie11Sha256=void 0,(0,Ut.__exportStar)(sn,e);var t=un;Object.defineProperty(e,"Ie11Sha256",{enumerable:!0,get:function(){return t.Sha256}});var n=wn;Object.defineProperty(e,"WebCryptoSha256",{enumerable:!0,get:function(){return n.Sha256}})}(an);for(var Wn=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"===g(t.headers)},e}(),Vn=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"===g(t.query)&&"object"===g(t.headers)},e.prototype.clone=function(){var t,n=new e(w(w({},this),{headers:w({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce((function(e,n){var r,i=t[n];return w(w({},e),((r={})[n]=Array.isArray(i)?T(i):i,r))}),{}))),n},e}(),Hn=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,Kn)},Kn=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},Jn=function(){function e(e){var t=(void 0===e?{}:e).requestTimeout;this.requestTimeout=t}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal,r=this.requestTimeout;if(null==n?void 0:n.aborted){var i=new Error("Request aborted");return i.name="AbortError",Promise.reject(i)}var o=e.path;if(e.query){var a=function(e){var t,n,r=[];try{for(var i=x(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var a=o.value,s=e[a];if(a=Hn(a),Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+Hn(s[u]));else{var l=a;(s||"string"==typeof s)&&(l+="="+Hn(s)),r.push(l)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(e.query);a&&(o+="?"+a)}var s=e.port,u=e.method,c=e.protocol+"//"+e.hostname+(s?":"+s:"")+o,l={body:"GET"===u||"HEAD"===u?void 0:e.body,headers:new Headers(e.headers),method:u};"undefined"!=typeof AbortController&&(l.signal=n);var d,f=new Request(c,l),h=[fetch(f).then((function(e){var t,n,r=e.headers,i={};try{for(var o=x(r.entries()),a=o.next();!a.done;a=o.next()){var s=a.value;i[s[0]]=s[1]}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new Wn({headers:i,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new Wn({headers:i,statusCode:e.status,body:t})}}))})),(d=r,void 0===d&&(d=0),new Promise((function(e,t){d&&setTimeout((function(){var e=new Error("Request did not complete within "+d+" ms");e.name="TimeoutError",t(e)}),d)})))];return n&&h.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),Promise.race(h)},e}(),Yn={},Zn=new Array(64),Qn=0,Xn="A".charCodeAt(0),er="Z".charCodeAt(0);Qn+Xn<=er;Qn++){var tr=String.fromCharCode(Qn+Xn);Yn[tr]=Qn,Zn[Qn]=tr}for(Qn=0,Xn="a".charCodeAt(0),er="z".charCodeAt(0);Qn+Xn<=er;Qn++){tr=String.fromCharCode(Qn+Xn);var nr=Qn+26;Yn[tr]=nr,Zn[nr]=tr}for(Qn=0;Qn<10;Qn++)Yn[Qn.toString(10)]=Qn+52,tr=Qn.toString(10),nr=Qn+52,Yn[tr]=nr,Zn[nr]=tr;Yn["+"]=62,Zn[62]="+",Yn["/"]=63,Zn[63]="/";function rr(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var o=0,a=0,s=i,u=i+3;s<=u;s++)"="!==e[s]?(o|=Yn[e[s]]<<6*(u-s),a+=6):o>>=6;var c=i/4*3;o>>=a%8;for(var l=Math.floor(a/8),d=0;d<l;d++){var f=8*(l-d-1);r.setUint8(c+d,(o&255<<f)>>f)}}return new Uint8Array(n)}function ir(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var i=null!==(e=r.result)&&void 0!==e?e:"",o=i.indexOf(","),a=o>-1?o+1:i.length;t(i.substring(a))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)}))}var or={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},ar=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],sr=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ur=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],cr=[500,502,503,504],lr=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||sr.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},dr={},fr={get exports(){return dr},set exports(e){dr=e}},hr="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(hr){var pr=new Uint8Array(16);fr.exports=function(){return hr(pr),pr}}else{var vr=new Array(16);fr.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),vr[t]=e>>>((3&t)<<3)&255;return vr}}for(var gr=[],mr=0;mr<256;++mr)gr[mr]=(mr+256).toString(16).substr(1);var yr,wr,br=function(e,t){var n=t||0,r=gr;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")},Sr=dr,_r=br,Er=0,Ar=0,Cr=dr,kr=br,Pr=function(e,t,n){var r=t&&n||0,i=t||[],o=(e=e||{}).node||yr,a=void 0!==e.clockseq?e.clockseq:wr;if(null==o||null==a){var s=Sr();null==o&&(o=yr=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=wr=16383&(s[6]<<8|s[7]))}var u=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:Ar+1,l=u-Er+(c-Ar)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||u>Er)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Er=u,Ar=c,wr=a;var d=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;i[r++]=d>>>24&255,i[r++]=d>>>16&255,i[r++]=d>>>8&255,i[r++]=255&d;var f=u/4294967296*1e4&268435455;i[r++]=f>>>8&255,i[r++]=255&f,i[r++]=f>>>24&15|16,i[r++]=f>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var h=0;h<6;++h)i[r+h]=o[h];return t||_r(i)},xr=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||Cr)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||kr(i)},Ir=xr;Ir.v1=Pr,Ir.v4=xr;var Tr=Ir,Or=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},Ur=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return ar.includes(e.name)}(e)||lr(e)||function(e){var t;return ur.includes(e.name)||cr.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},Nr=function(){function e(e,t){var n,r,i,o,a,s,u;this.maxAttemptsProvider=e,this.mode="standard",this.retryDecider=null!==(n=null==t?void 0:t.retryDecider)&&void 0!==n?n:Ur,this.delayDecider=null!==(r=null==t?void 0:t.delayDecider)&&void 0!==r?r:Or,this.retryQuota=null!==(i=null==t?void 0:t.retryQuota)&&void 0!==i?i:(o=500,a=500,s=function(e){return"TimeoutError"===e.name?10:5},u=function(e){return s(e)<=a},Object.freeze({hasRetryTokens:u,retrieveRetryTokens:function(e){if(!u(e))throw new Error("No retry token available");var t=s(e);return a-=t,t},releaseRetryTokens:function(e){a+=null!=e?e:1,a=Math.min(a,o)}}))}return e.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return A(this,void 0,void 0,(function(){var e;return C(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=3,[3,3];case 3:return[2,e]}}))}))},e.prototype.retry=function(e,t){return A(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return C(this,(function(l){switch(l.label){case 0:return r=0,i=0,[4,this.getMaxAttempts()];case 1:o=l.sent(),a=t.request,Vn.isInstance(a)&&(a.headers["amz-sdk-invocation-id"]=Tr.v4()),s=function(){var s,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return h.trys.push([0,2,,5]),Vn.isInstance(a)&&(a.headers["amz-sdk-request"]="attempt="+(r+1)+"; max="+o),[4,e(t)];case 1:return s=h.sent(),c=s.response,l=s.output,u.retryQuota.releaseRetryTokens(n),l.$metadata.attempts=r+1,l.$metadata.totalRetryDelay=i,[2,{value:{response:c,output:l}}];case 2:return d=h.sent(),r++,u.shouldRetry(d,r,o)?(n=u.retryQuota.retrieveRetryTokens(d),f=u.delayDecider(lr(d)?500:100,r),i+=f,[4,new Promise((function(e){return setTimeout(e,f)}))]):[3,4];case 3:return h.sent(),[2,"continue"];case 4:throw d.$metadata||(d.$metadata={}),d.$metadata.attempts=r,d.$metadata.totalRetryDelay=i,d;case 5:return[2]}}))},u=this,l.label=2;case 2:return[5,s()];case 3:return"object"===g(c=l.sent())?[2,c.value]:[3,2];case 4:return[2]}}))}))},e}(),Mr={};!function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==g(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,u=e.map([t,n],(function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===s)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var s=function(){var e=o[t];"object"==g(e)&&null!==e&&Object.keys(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=o.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){}var t,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],null&&a(t.prototype,null),n&&a(t,n),e}();t.default=s,e.exports=t.default},91:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=u(n(92)),i=u(n(93)),o=u(n(94)),a=u(n(95)),s=u(n(17));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach((function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"==g(a)&&(n[t]=a,r+=1)})),r>0){var a=Object.keys(n),u=s.default.find(a,(function(e){return t.isOS(e)}));if(u){var c=this.satisfies(n[u]);if(void 0!==c)return c}var l=s.default.find(a,(function(e){return t.isPlatform(e)}));if(l){var d=this.satisfies(n[l]);if(void 0!==d)return d}}if(o>0){var f=Object.keys(i),h=s.default.find(f,(function(e){return t.isBrowser(e,!0)}));if(void 0!==h)return this.compareVersion(i[h])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=c,e.exports=t.default},92:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=a,e.exports=t.default}})}({get exports(){return Mr},set exports(e){Mr=e}});var Rr,Lr,Fr,jr=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Mr),Dr="logs.{region}.amazonaws.com",zr=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),qr=new Set(["cn-north-1","cn-northwest-1"]),Br=new Set(["us-iso-east-1"]),Gr=new Set(["us-isob-east-1"]),$r=new Set(["us-gov-east-1","us-gov-west-1"]),Wr={apiVersion:"2014-03-28",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"logs.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"logs.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"logs.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"logs.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"logs.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"logs.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"logs.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"logs.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"logs.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"logs.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"logs.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"logs.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"logs.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"logs.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"logs.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"logs.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":n={hostname:"logs-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":n={hostname:"logs-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-west-1":n={hostname:"logs-fips.us-west-1.amazonaws.com",partition:"aws",signingRegion:"us-west-1"};break;case"fips-us-west-2":n={hostname:"logs-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"me-south-1":n={hostname:"logs.me-south-1.amazonaws.com",partition:"aws"};break;case"sa-east-1":n={hostname:"logs.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"logs.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"logs.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"logs.us-gov-east-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-east-1"};break;case"us-gov-west-1":n={hostname:"logs.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"us-iso-east-1":n={hostname:"logs.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"logs.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"logs.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"logs.us-west-2.amazonaws.com",partition:"aws"};break;default:zr.has(e)&&(n={hostname:Dr.replace("{region}",e),partition:"aws"}),qr.has(e)&&(n={hostname:"logs.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Br.has(e)&&(n={hostname:"logs.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Gr.has(e)&&(n={hostname:"logs.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),$r.has(e)&&(n={hostname:"logs.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:Dr.replace("{region}",e),partition:"aws"})}return Promise.resolve(w({signingService:"logs"},n))},serviceId:"CloudWatch Logs",urlParser:function(e){var t,n=new URL(e),r=n.hostname,i=n.pathname,o=n.port,a=n.protocol,s=n.search;return s&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=x(e.split("&")),o=i.next();!o.done;o=i.next()){var a=I(o.value.split("="),2),s=a[0],u=a[1],c=void 0===u?null:u;s=decodeURIComponent(s),c&&(c=decodeURIComponent(c)),s in r?Array.isArray(r[s])?r[s].push(c):r[s]=[r[s],c]:r[s]=c}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(s)),{hostname:r,port:o?parseInt(o):void 0,protocol:a,path:i,query:t}}},Vr=w(w({},Wr),{runtime:"browser",base64Decoder:rr,base64Encoder:function(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,a=Math.min(n+3,e.length);o<a;o++)r|=e[o]<<8*(a-o-1),i+=8;var s=Math.ceil(i/6);r<<=6*s-i;for(var u=1;u<=s;u++){var c=6*(s-u);t+=Zn[(r&63<<c)>>c]}t+="==".slice(0,4-s)}return t},bodyLengthChecker:function(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2)}return t}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0},credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:(Rr={serviceId:Wr.serviceId,clientVersion:"3.6.1"},Lr=Rr.serviceId,Fr=Rr.clientVersion,function(){return A(void 0,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u;return C(this,(function(c){return e=(null===(n=null===window||void 0===window?void 0:window.navigator)||void 0===n?void 0:n.userAgent)?jr.parse(window.navigator.userAgent):void 0,t=[["aws-sdk-js",Fr],["os/"+((null===(r=null==e?void 0:e.os)||void 0===r?void 0:r.name)||"other"),null===(i=null==e?void 0:e.os)||void 0===i?void 0:i.version],["lang/js"],["md/browser",(null!==(a=null===(o=null==e?void 0:e.browser)||void 0===o?void 0:o.name)&&void 0!==a?a:"unknown")+"_"+(null!==(u=null===(s=null==e?void 0:e.browser)||void 0===s?void 0:s.version)&&void 0!==u?u:"unknown")]],Lr&&t.push(["api/"+Lr,Fr]),[2,t]}))}))}),maxAttempts:3,region:("Region is missing",function(){return Promise.reject("Region is missing")}),requestHandler:new Jn,sha256:an.Sha256,streamCollector:function(e){return"function"==typeof Blob&&e instanceof Blob?function(e){return A(this,void 0,void 0,(function(){var t,n;return C(this,(function(r){switch(r.label){case 0:return[4,ir(e)];case 1:return t=r.sent(),n=rr(t),[2,new Uint8Array(n)]}}))}))}(e):function(e){return A(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return C(this,(function(u){switch(u.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,u.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return i=u.sent(),o=i.done,(a=i.value)&&(s=t,(t=new Uint8Array(s.length+a.length)).set(s),t.set(a,s.length)),r=o,[3,1];case 3:return[2,t]}}))}))}(e)},utf8Decoder:function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},utf8Encoder:function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var a="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(a)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}}),Hr=function(e){var t=e.endpoint,n=e.urlParser;if("string"==typeof t){var r=Promise.resolve(n(t));return function(){return r}}if("object"===g(t)){var i=Promise.resolve(t);return function(){return i}}return t},Kr=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},Jr="content-length",Yr={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Zr={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Qr={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Xr="X-Amz-Date",ei="X-Amz-Signature",ti="X-Amz-Security-Token",ni="authorization",ri=Xr.toLowerCase(),ii=[ni,ri,"date"],oi=ei.toLowerCase(),ai="x-amz-content-sha256",si=ti.toLowerCase(),ui={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},ci=/^proxy-/,li=/^sec-/,di="AWS4-HMAC-SHA256",fi="AWS4-HMAC-SHA256-PAYLOAD",hi="aws4_request",pi={},vi=[];function gi(e,t,n){return e+"/"+t+"/"+n+"/"+hi}function mi(e,t,n){var r=new e(t);return r.update(n),r.digest()}function yi(e,t,n){var r,i,o=e.headers,a={};try{for(var s=x(Object.keys(o).sort()),u=s.next();!u.done;u=s.next()){var c=u.value,l=c.toLowerCase();(l in ui||(null==t?void 0:t.has(l))||ci.test(l)||li.test(l))&&(!n||n&&!n.has(l))||(a[l]=o[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a}function wi(e,t){var n=e.headers,r=e.body;return A(this,void 0,void 0,(function(){var e,i,o,a,s,u,c;return C(this,(function(l){switch(l.label){case 0:try{for(e=x(Object.keys(n)),i=e.next();!i.done;i=e.next())if((o=i.value).toLowerCase()===ai)return[2,n[o]]}catch(e){u={error:e}}finally{try{i&&!i.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||(d=r,"function"==typeof ArrayBuffer&&d instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(d))?((a=new t).update(r),s=tn,[4,a.digest()]):[3,3];case 2:return[2,s.apply(void 0,[l.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var d}))}))}function bi(e){var t=e.headers,n=e.query,r=b(e,["headers","query"]);return w(w({},r),{headers:w({},t),query:n?Si(n):void 0})}function Si(e){return Object.keys(e).reduce((function(t,n){var r,i=e[n];return w(w({},t),((r={})[n]=Array.isArray(i)?T(i):i,r))}),{})}function _i(e){var t,n;e="function"==typeof e.clone?e.clone():bi(e);try{for(var r=x(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;ii.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}var Ei=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,a=e.uriEscapePath,s=void 0===a||a;this.service=i,this.sha256=o,this.uriEscapePath=s,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=ki(r),this.credentialProvider=Pi(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),A(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f,h,p,v,g,m,y,b,S,_,E,A,k,P;return C(this,(function(C){switch(C.label){case 0:return n=t.signingDate,r=void 0===n?new Date:n,i=t.expiresIn,o=void 0===i?3600:i,a=t.unsignableHeaders,s=t.unhoistableHeaders,u=t.signableHeaders,c=t.signingRegion,l=t.signingService,[4,this.credentialProvider()];case 1:return d=C.sent(),null==c?[3,2]:(h=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:h=C.sent(),C.label=4;case 4:return f=h,p=Ai(r),v=p.longDate,g=p.shortDate,o>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(m=gi(g,f,null!=l?l:this.service),y=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():bi(e),a=o.headers,s=o.query,u=void 0===s?{}:s;try{for(var c=x(Object.keys(a)),l=c.next();!l.done;l=c.next()){var d=l.value,f=d.toLowerCase();"x-amz-"!==f.substr(0,6)||(null===(i=t.unhoistableHeaders)||void 0===i?void 0:i.has(f))||(u[d]=a[d],delete a[d])}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return w(w({},e),{headers:a,query:u})}(_i(e),{unhoistableHeaders:s}),d.sessionToken&&(y.query[ti]=d.sessionToken),y.query["X-Amz-Algorithm"]=di,y.query["X-Amz-Credential"]=d.accessKeyId+"/"+m,y.query[Xr]=v,y.query["X-Amz-Expires"]=o.toString(10),b=yi(y,a,u),y.query["X-Amz-SignedHeaders"]=Ci(b),S=y.query,_=ei,E=this.getSignature,A=[v,m,this.getSigningKey(d,f,g,l)],k=this.createCanonicalRequest,P=[y,b],[4,wi(e,this.sha256)]);case 5:return[4,E.apply(this,A.concat([k.apply(this,P.concat([C.sent()]))]))];case 6:return S[_]=C.sent(),[2,y]}}))}))},e.prototype.sign=function(e,t){return A(this,void 0,void 0,(function(){return C(this,(function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,i=t.signingDate,o=void 0===i?new Date:i,a=t.priorSignature,s=t.signingRegion,u=t.signingService;return A(this,void 0,void 0,(function(){var e,t,i,c,l,d,f,h,p,v,g;return C(this,(function(m){switch(m.label){case 0:return null==s?[3,1]:(t=s,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=m.sent(),m.label=3;case 3:return e=t,i=Ai(o),c=i.shortDate,l=i.longDate,d=gi(c,e,null!=u?u:this.service),[4,wi({headers:{},body:r},this.sha256)];case 4:return f=m.sent(),(h=new this.sha256).update(n),v=tn,[4,h.digest()];case 5:return p=v.apply(void 0,[m.sent()]),g=[fi,l,d,a,p,f].join("\n"),[2,this.signString(g,{signingDate:o,signingRegion:e,signingService:u})]}}))}))},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signingRegion,a=n.signingService;return A(this,void 0,void 0,(function(){var t,n,r,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return[4,this.credentialProvider()];case 1:return t=f.sent(),null==o?[3,2]:(r=o,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=f.sent(),f.label=4;case 4:return n=r,s=Ai(i).shortDate,l=(c=this.sha256).bind,[4,this.getSigningKey(t,n,s,a)];case 5:return(u=new(l.apply(c,[void 0,f.sent()]))).update(e),d=tn,[4,u.digest()];case 6:return[2,d.apply(void 0,[f.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signableHeaders,a=n.unsignableHeaders,s=n.signingRegion,u=n.signingService;return A(this,void 0,void 0,(function(){var t,n,r,c,l,d,f,h,p,v,g;return C(this,(function(m){switch(m.label){case 0:return[4,this.credentialProvider()];case 1:return t=m.sent(),null==s?[3,2]:(r=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=m.sent(),m.label=4;case 4:return n=r,c=_i(e),l=Ai(i),d=l.longDate,f=l.shortDate,h=gi(f,n,null!=u?u:this.service),c.headers[ri]=d,t.sessionToken&&(c.headers[si]=t.sessionToken),[4,wi(c,this.sha256)];case 5:return p=m.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=x(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}(ai,c.headers)&&this.applyChecksum&&(c.headers[ai]=p),v=yi(c,a,o),[4,this.getSignature(d,h,this.getSigningKey(t,n,f,u),this.createCanonicalRequest(c,v,p))];case 6:return g=m.sent(),c.headers[ni]=di+" Credential="+t.accessKeyId+"/"+h+", SignedHeaders="+Ci(v)+", Signature="+g,[2,c]}}))}))},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],a={},s=function(e){if(e.toLowerCase()===oi)return"continue";o.push(e);var t=i[e];"string"==typeof t?a[e]=Hn(e)+"="+Hn(t):Array.isArray(t)&&(a[e]=t.slice(0).sort().reduce((function(t,n){return t.concat([Hn(e)+"="+Hn(n)])}),[]).join("&"))};try{for(var u=x(Object.keys(i).sort()),c=u.next();!c.done;c=u.next())s(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o.map((function(e){return a[e]})).filter((function(e){return e})).join("&")}(e)+"\n"+r.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+r.join(";")+"\n"+n},e.prototype.createStringToSign=function(e,t,n){return A(this,void 0,void 0,(function(){var r,i;return C(this,(function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,di+"\n"+e+"\n"+t+"\n"+tn(i)]}}))}))},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,n,r){return A(this,void 0,void 0,(function(){var i,o,a,s,u;return C(this,(function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return i=c.sent(),s=(a=this.sha256).bind,[4,n];case 2:return(o=new(s.apply(a,[void 0,c.sent()]))).update(i),u=tn,[4,o.digest()];case 3:return[2,u.apply(void 0,[c.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,i){return A(void 0,void 0,void 0,(function(){var o,a,s,u,c,l,d,f,h;return C(this,(function(p){switch(p.label){case 0:return[4,mi(e,t.secretAccessKey,t.accessKeyId)];case 1:if(o=p.sent(),(a=n+":"+r+":"+i+":"+tn(o)+":"+t.sessionToken)in pi)return[2,pi[a]];for(vi.push(a);vi.length>50;)delete pi[vi.shift()];s="AWS4"+t.secretAccessKey,p.label=2;case 2:p.trys.push([2,7,8,9]),u=x([n,r,i,hi]),c=u.next(),p.label=3;case 3:return c.done?[3,6]:(l=c.value,[4,mi(e,s,l)]);case 4:s=p.sent(),p.label=5;case 5:return c=u.next(),[3,3];case 6:return[3,9];case 7:return d=p.sent(),f={error:d},[3,9];case 8:try{c&&!c.done&&(h=u.return)&&h.call(u)}finally{if(f)throw f.error}return[7];case 9:return[2,pi[a]=s]}}))}))}(this.sha256,e,n,t,r||this.service)},e}(),Ai=function(e){var t=function(e){return function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},Ci=function(e){return Object.keys(e).sort().join(";")},ki=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},Pi=function(e){if("object"===g(e)){var t=Promise.resolve(e);return function(){return t}}return e};function xi(e){if("object"===g(e)){var t=Promise.resolve(e);return function(){return t}}return e}function Ii(e){return function(t,n){return function(r){return A(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return Vn.isInstance(r.request)?"function"!=typeof e.signer?[3,2]:[4,e.signer()]:[2,t(r)];case 1:return o=h.sent(),[3,3];case 2:o=e.signer,h.label=3;case 3:return i=o,s=t,u=[w({},r)],f={},[4,i.sign(r.request,{signingDate:new Date(Date.now()+e.systemClockOffset),signingRegion:n.signing_region,signingService:n.signing_service})];case 4:return[4,s.apply(void 0,[w.apply(void 0,u.concat([(f.request=h.sent(),f)]))])];case 5:return a=h.sent(),c=a.response.headers,(l=c&&(c.date||c.Date))&&(p=d=Date.parse(l),v=e.systemClockOffset,Math.abs(function(e){return new Date(Date.now()+e)}(v).getTime()-p)>=3e5&&(e.systemClockOffset=d-Date.now())),[2,a]}var p,v}))}))}}}var Ti={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Oi="user-agent",Ui=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Ni=function(e){var t=I(e,2),n=t[0],r=t[1],i=n.indexOf("/"),o=n.substring(0,i),a=n.substring(i+1);return"api"===o&&(a=a.toLowerCase()),[o,a,r].filter((function(e){return e&&e.length>0})).map((function(e){return null==e?void 0:e.replace(Ui,"_")})).join("/")},Mi={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Ri=function e(){var t=[],n=[],r=new Set,i=function(e){return t.forEach((function(t){e.add(t.middleware,w({},t))})),n.forEach((function(t){e.addRelativeTo(t.middleware,w({},t))})),e},o=function e(t){var n=[];return t.before.forEach((function(t){0===t.before.length&&0===t.after.length?n.push(t):n.push.apply(n,T(e(t)))})),n.push(t),t.after.reverse().forEach((function(t){0===t.before.length&&0===t.after.length?n.push(t):n.push.apply(n,T(e(t)))})),n},a=function(){var e,r=[],i=[],a={};return t.forEach((function(e){var t=w(w({},e),{before:[],after:[]});t.name&&(a[t.name]=t),r.push(t)})),n.forEach((function(e){var t=w(w({},e),{before:[],after:[]});t.name&&(a[t.name]=t),i.push(t)})),i.forEach((function(e){if(e.toMiddleware){var t=a[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(e=r,e.sort((function(e,t){return Li[t.step]-Li[e.step]||Fi[t.priority||"normal"]-Fi[e.priority||"normal"]}))).map(o).reduce((function(e,t){return e.push.apply(e,T(t)),e}),[]).map((function(e){return e.middleware}))},s={add:function(e,n){void 0===n&&(n={});var i=n.name,o=n.override,a=w({step:"initialize",priority:"normal",middleware:e},n);if(i){if(r.has(i)){if(!o)throw new Error("Duplicate middleware name '"+i+"'");var s=t.findIndex((function(e){return e.name===i})),u=t[s];if(u.step!==a.step||u.priority!==a.priority)throw new Error('"'+i+'" middleware with '+u.priority+" priority in "+u.step+" step cannot be overridden by same-name middleware with "+a.priority+" priority in "+a.step+" step.");t.splice(s,1)}r.add(i)}t.push(a)},addRelativeTo:function(e,t){var i=t.name,o=t.override,a=w({middleware:e},t);if(i){if(r.has(i)){if(!o)throw new Error("Duplicate middleware name '"+i+"'");var s=n.findIndex((function(e){return e.name===i})),u=n[s];if(u.toMiddleware!==a.toMiddleware||u.relation!==a.relation)throw new Error('"'+i+'" middleware '+u.relation+' "'+u.toMiddleware+'" middleware cannot be overridden by same-name middleware '+a.relation+' "'+a.toMiddleware+'" middleware.');n.splice(s,1)}r.add(i)}n.push(a)},clone:function(){return i(e())},use:function(e){e.applyToStack(s)},remove:function(e){return"string"==typeof e?function(e){var i=!1,o=function(t){return!t.name||t.name!==e||(i=!0,r.delete(e),!1)};return t=t.filter(o),n=n.filter(o),i}(e):function(e){var i=!1,o=function(t){return t.middleware!==e||(i=!0,t.name&&r.delete(t.name),!1)};return t=t.filter(o),n=n.filter(o),i}(e)},removeByTag:function(e){var i=!1,o=function(t){var n=t.tags,o=t.name;return!n||!n.includes(e)||(o&&r.delete(o),i=!0,!1)};return t=t.filter(o),n=n.filter(o),i},concat:function(t){var n=i(e());return n.use(t),n},applyToStack:i,resolve:function(e,t){var n,r;try{for(var i=x(a().reverse()),o=i.next();!o.done;o=i.next())e=(0,o.value)(e,t)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e}};return s},Li={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Fi={high:3,normal:2,low:1},ji=function(){function e(e){this.middlewareStack=Ri(),this.config=e}return e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return o(e).then((function(e){return e.output}));o(e).then((function(e){return i(null,e.output)}),(function(e){return i(e)})).catch((function(){}))},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),Di=function(){this.middlewareStack=Ri()},zi=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,T([null],arguments)));return Object.setPrototypeOf(t,e.prototype),t};zi.prototype=Object.create(String.prototype,{constructor:{value:zi,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(zi,String),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}y(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))}}(zi);var qi,Bi,Gi,$i,Wi,Vi,Hi,Ki,Ji,Yi,Zi,Qi,Xi,eo,to,no,ro,io,oo,ao,so,uo,co,lo,fo,ho,po,vo,go,mo,yo,wo,bo,So,_o,Eo,Ao,Co,ko,Po,xo,Io,To,Oo,Uo,No,Mo,Ro,Lo,Fo,jo,Do,zo,qo,Bo,Go,$o,Wo,Vo,Ho,Ko,Jo,Yo,Zo,Qo,Xo,ea,ta,na,ra,ia,oa,aa,sa,ua,ca,la,da,fa,ha,pa,va,ga,ma,ya,wa,ba,Sa,_a,Ea,Aa,Ca,ka,Pa,xa,Ia,Ta,Oa,Ua,Na,Ma,Ra,La,Fa,ja=function(e){function t(t){var n,r,i,o=this,a=function(e){var t,n=this,r=xi(e.credentials||e.credentialDefaultProvider(e)),i=e.signingEscapePath,o=void 0===i||i,a=e.systemClockOffset,s=void 0===a?e.systemClockOffset||0:a,u=e.sha256;return t=e.signer?xi(e.signer):function(){return xi(e.region)().then((function(t){return A(n,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return[4,e.regionInfoProvider(t)];case 1:return[2,[n.sent()||{},t]]}}))}))})).then((function(t){var n=I(t,2),i=n[0],a=n[1],s=i.signingRegion,c=i.signingService;return e.signingRegion=e.signingRegion||s||a,e.signingName=e.signingName||c||e.serviceId,new Ei({credentials:r,region:e.signingRegion,service:e.signingName,sha256:u,uriEscapePath:o})}))},w(w({},e),{systemClockOffset:s,signingEscapePath:o,credentials:r,signer:t})}(function(e){var t;return w(w({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?Hr(e):function(){return function(e){return A(void 0,void 0,void 0,(function(){var t,n,r,i,o;return C(this,(function(a){switch(a.label){case 0:return t=e.tls,n=void 0===t||t,[4,e.region()];case 1:if(r=a.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(r)];case 2:if(!(i=(null!==(o=a.sent())&&void 0!==o?o:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+i)]}}))}))}(e)},isCustomEndpoint:!!e.endpoint})}(function(e){if(!e.region)throw new Error("Region is missing");return w(w({},e),{region:Kr(e.region)})}(w(w({},Vr),t)))),s=function(e){return w(w({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}((r=function(e){if(void 0===e&&(e=3),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}((n=a).maxAttempts),w(w({},n),{maxAttempts:r,retryStrategy:n.retryStrategy||new Nr(r)})));return(o=e.call(this,s)||this).config=s,o.middlewareStack.use((i=o.config,{applyToStack:function(e){e.addRelativeTo(Ii(i),Ti)}})),o.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return A(void 0,void 0,void 0,(function(){var i;return C(this,(function(o){return(null===(i=null==e?void 0:e.retryStrategy)||void 0===i?void 0:i.mode)&&(n.userAgent=T(n.userAgent||[],[["cfg/retry-mode",e.retryStrategy.mode]])),[2,e.retryStrategy.retry(t,r)]}))}))}}}(e),or)}}}(o.config)),o.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return A(t,void 0,void 0,(function(){var t,i,o,a,s;return C(this,(function(u){return t=r.request,Vn.isInstance(t)&&(i=t.body,o=t.headers,i&&-1===Object.keys(o).map((function(e){return e.toLowerCase()})).indexOf(Jr)&&void 0!==(a=e(i))&&(t.headers=w(w({},t.headers),((s={})[Jr]=String(a),s)))),[2,n(w(w({},r),{request:t}))]}))}))}}}(e.bodyLengthChecker),Yr)}}}(o.config)),o.middlewareStack.use(function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return A(void 0,void 0,void 0,(function(){var r,i;return C(this,(function(o){return Vn.isInstance(n.request)?(r=n.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]}))}))}}}(e),Zr)}}}(o.config)),o.middlewareStack.use((o.config,{applyToStack:function(e){e.add((function(e,t){return function(n){return A(void 0,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=t.clientName,i=t.commandName,o=t.inputFilterSensitiveLog,a=t.logger,s=t.outputFilterSensitiveLog,[4,e(n)];case 1:return u=f.sent(),a?("function"==typeof a.info&&(c=u.output,l=c.$metadata,d=b(c,["$metadata"]),a.info({clientName:r,commandName:i,input:o(n.input),output:s(d),metadata:l})),[2,u]):[2,u]}}))}))}}),Qr)}})),o.middlewareStack.use(function(e){return{applyToStack:function(t){var n;t.add((n=e,function(e,t){return function(r){return A(void 0,void 0,void 0,(function(){var i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return i=r.request,Vn.isInstance(i)?(o=i.headers,a=(null===(l=null==t?void 0:t.userAgent)||void 0===l?void 0:l.map(Ni))||[],[4,n.defaultUserAgentProvider()]):[2,e(r)];case 1:return s=f.sent().map(Ni),u=(null===(d=null==n?void 0:n.customUserAgent)||void 0===d?void 0:d.map(Ni))||[],o["x-amz-user-agent"]=T(s,a,u).join(" "),c=T(s.filter((function(e){return e.startsWith("aws-sdk-")})),u).join(" "),"browser"!==n.runtime&&c&&(o[Oi]=o[Oi]?o[Oi]+" "+c:c),[2,e(w(w({},r),{request:i}))]}}))}))}}),Mi)}}}(o.config)),o}return y(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(ji);!function(e){e.filterSensitiveLog=function(e){return w({},e)}}(qi||(qi={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Bi||(Bi={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Gi||(Gi={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}($i||($i={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Wi||(Wi={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Vi||(Vi={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Hi||(Hi={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Ki||(Ki={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Ji||(Ji={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Yi||(Yi={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Zi||(Zi={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Qi||(Qi={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Xi||(Xi={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(eo||(eo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(to||(to={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(no||(no={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ro||(ro={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(io||(io={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(oo||(oo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ao||(ao={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(so||(so={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(uo||(uo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(co||(co={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(lo||(lo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(fo||(fo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ho||(ho={})),function(e){e.CANCELLED="CANCELLED",e.COMPLETED="COMPLETED",e.FAILED="FAILED",e.PENDING="PENDING",e.PENDING_CANCEL="PENDING_CANCEL",e.RUNNING="RUNNING"}(po||(po={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(vo||(vo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(go||(go={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(mo||(mo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(yo||(yo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(wo||(wo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(bo||(bo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(So||(So={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(_o||(_o={})),function(e){e.LastEventTime="LastEventTime",e.LogStreamName="LogStreamName"}(Eo||(Eo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Ao||(Ao={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Co||(Co={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ko||(ko={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Po||(Po={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(xo||(xo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Io||(Io={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(To||(To={})),function(e){e.Cancelled="Cancelled",e.Complete="Complete",e.Failed="Failed",e.Running="Running",e.Scheduled="Scheduled"}(Oo||(Oo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Uo||(Uo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(No||(No={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Mo||(Mo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Ro||(Ro={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Lo||(Lo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Fo||(Fo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(jo||(jo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Do||(Do={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(zo||(zo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(qo||(qo={})),function(e){e.ByLogStream="ByLogStream",e.Random="Random"}(Bo||(Bo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Go||(Go={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}($o||($o={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Wo||(Wo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Vo||(Vo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Ho||(Ho={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Ko||(Ko={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Jo||(Jo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Yo||(Yo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Zo||(Zo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Qo||(Qo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Xo||(Xo={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ea||(ea={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ta||(ta={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(na||(na={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ra||(ra={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ia||(ia={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(oa||(oa={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(aa||(aa={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(sa||(sa={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ua||(ua={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ca||(ca={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(la||(la={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(da||(da={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(fa||(fa={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ha||(ha={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(pa||(pa={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(va||(va={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ga||(ga={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ma||(ma={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ya||(ya={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(wa||(wa={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ba||(ba={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Sa||(Sa={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(_a||(_a={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Ea||(Ea={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Aa||(Aa={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Ca||(Ca={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(ka||(ka={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Pa||(Pa={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(xa||(xa={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Ia||(Ia={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Ta||(Ta={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Oa||(Oa={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Ua||(Ua={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Na||(Na={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Ma||(Ma={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Ra||(Ra={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(La||(La={})),function(e){e.filterSensitiveLog=function(e){return w({},e)}}(Fa||(Fa={}));var Da=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return r=[w({},e)],f={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(f.body=h.sent(),f)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 4:return s=[{}],[4,Ns(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 6:return u=[{}],[4,Rs(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 8:return c=[{}],[4,Ls(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 10:l=n.body,o=l.code||l.Code||o,i=w(w({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:Uu(e)}),h.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},za=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return r=[w({},e)],f={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(f.body=h.sent(),f)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidOperationException":case"com.amazonaws.cloudwatchlogs#InvalidOperationException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,xs(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 4:return s=[{}],[4,Is(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 6:return u=[{}],[4,Rs(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 8:return c=[{}],[4,Ls(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 10:l=n.body,o=l.code||l.Code||o,i=w(w({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:Uu(e)}),h.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},qa=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f,h,p;return C(this,(function(v){switch(v.label){case 0:return r=[w({},e)],p={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(p.body=v.sent(),p)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"LimitExceededException":case"com.amazonaws.cloudwatchlogs#LimitExceededException":return[3,4];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,6];case"ResourceAlreadyExistsException":case"com.amazonaws.cloudwatchlogs#ResourceAlreadyExistsException":return[3,8];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,10];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,12]}return[3,14];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([v.sent()])),{name:o,$metadata:Uu(e)}]),[3,15];case 4:return s=[{}],[4,Os(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([v.sent()])),{name:o,$metadata:Uu(e)}]),[3,15];case 6:return u=[{}],[4,Ns(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([v.sent()])),{name:o,$metadata:Uu(e)}]),[3,15];case 8:return c=[{}],[4,Ms(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([v.sent()])),{name:o,$metadata:Uu(e)}]),[3,15];case 10:return l=[{}],[4,Rs(n)];case 11:return i=w.apply(void 0,[w.apply(void 0,l.concat([v.sent()])),{name:o,$metadata:Uu(e)}]),[3,15];case 12:return d=[{}],[4,Ls(n)];case 13:return i=w.apply(void 0,[w.apply(void 0,d.concat([v.sent()])),{name:o,$metadata:Uu(e)}]),[3,15];case 14:f=n.body,o=f.code||f.Code||o,i=w(w({},f),{name:""+o,message:f.message||f.Message||o,$fault:"client",$metadata:Uu(e)}),v.label=15;case 15:return h=i.message||i.Message||o,i.message=h,delete i.Message,[2,Promise.reject(Object.assign(new Error(h),i))]}}))}))},Ba=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f,h;return C(this,(function(p){switch(p.label){case 0:return r=[w({},e)],h={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(h.body=p.sent(),h)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"LimitExceededException":case"com.amazonaws.cloudwatchlogs#LimitExceededException":return[3,4];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,6];case"ResourceAlreadyExistsException":case"com.amazonaws.cloudwatchlogs#ResourceAlreadyExistsException":return[3,8];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,10]}return[3,12];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 4:return s=[{}],[4,Os(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 6:return u=[{}],[4,Ns(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 8:return c=[{}],[4,Ms(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 10:return l=[{}],[4,Ls(n)];case 11:return i=w.apply(void 0,[w.apply(void 0,l.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 12:d=n.body,o=d.code||d.Code||o,i=w(w({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:Uu(e)}),p.label=13;case 13:return f=i.message||i.Message||o,i.message=f,delete i.Message,[2,Promise.reject(Object.assign(new Error(f),i))]}}))}))},Ga=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return r=[w({},e)],f={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(f.body=h.sent(),f)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceAlreadyExistsException":case"com.amazonaws.cloudwatchlogs#ResourceAlreadyExistsException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 4:return s=[{}],[4,Ms(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 6:return u=[{}],[4,Rs(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 8:return c=[{}],[4,Ls(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 10:l=n.body,o=l.code||l.Code||o,i=w(w({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:Uu(e)}),h.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},$a=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return r=[w({},e)],f={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(f.body=h.sent(),f)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 4:return s=[{}],[4,Ns(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 6:return u=[{}],[4,Rs(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 8:return c=[{}],[4,Ls(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 10:l=n.body,o=l.code||l.Code||o,i=w(w({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:Uu(e)}),h.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},Wa=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return r=[w({},e)],f={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(f.body=h.sent(),f)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 4:return s=[{}],[4,Ns(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 6:return u=[{}],[4,Rs(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 8:return c=[{}],[4,Ls(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 10:l=n.body,o=l.code||l.Code||o,i=w(w({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:Uu(e)}),h.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},Va=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return r=[w({},e)],f={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(f.body=h.sent(),f)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 4:return s=[{}],[4,Ns(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 6:return u=[{}],[4,Rs(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 8:return c=[{}],[4,Ls(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 10:l=n.body,o=l.code||l.Code||o,i=w(w({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:Uu(e)}),h.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},Ha=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return r=[w({},e)],f={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(f.body=h.sent(),f)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 4:return s=[{}],[4,Ns(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 6:return u=[{}],[4,Rs(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 8:return c=[{}],[4,Ls(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 10:l=n.body,o=l.code||l.Code||o,i=w(w({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:Uu(e)}),h.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},Ka=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=[w({},e)],d={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 4:return s=[{}],[4,Rs(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 6:return u=[{}],[4,Ls(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=w(w({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Uu(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},Ja=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=[w({},e)],d={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 4:return s=[{}],[4,Rs(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 6:return u=[{}],[4,Ls(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=w(w({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Uu(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},Ya=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return r=[w({},e)],f={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(f.body=h.sent(),f)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 4:return s=[{}],[4,Ns(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 6:return u=[{}],[4,Rs(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 8:return c=[{}],[4,Ls(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 10:l=n.body,o=l.code||l.Code||o,i=w(w({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:Uu(e)}),h.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},Za=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return r=[w({},e)],f={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(f.body=h.sent(),f)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 4:return s=[{}],[4,Ns(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 6:return u=[{}],[4,Rs(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 8:return c=[{}],[4,Ls(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 10:l=n.body,o=l.code||l.Code||o,i=w(w({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:Uu(e)}),h.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},Qa=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return C(this,(function(d){switch(d.label){case 0:return r=[w({},e)],l={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(l.body=d.sent(),l)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,4]}return[3,6];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 4:return s=[{}],[4,Ls(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=w(w({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:Uu(e)}),d.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},Xa=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return C(this,(function(d){switch(d.label){case 0:return r=[w({},e)],l={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(l.body=d.sent(),l)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,4]}return[3,6];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 4:return s=[{}],[4,Ls(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=w(w({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:Uu(e)}),d.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},es=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return C(this,(function(d){switch(d.label){case 0:return r=[w({},e)],l={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(l.body=d.sent(),l)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,4]}return[3,6];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 4:return s=[{}],[4,Ls(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=w(w({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:Uu(e)}),d.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},ts=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=[w({},e)],d={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 4:return s=[{}],[4,Rs(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 6:return u=[{}],[4,Ls(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=w(w({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Uu(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},ns=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=[w({},e)],d={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 4:return s=[{}],[4,Rs(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 6:return u=[{}],[4,Ls(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=w(w({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Uu(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},rs=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=[w({},e)],d={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 4:return s=[{}],[4,Rs(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 6:return u=[{}],[4,Ls(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=w(w({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Uu(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},is=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return C(this,(function(d){switch(d.label){case 0:return r=[w({},e)],l={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(l.body=d.sent(),l)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,4]}return[3,6];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 4:return s=[{}],[4,Ls(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=w(w({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:Uu(e)}),d.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},os=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return C(this,(function(d){switch(d.label){case 0:return r=[w({},e)],l={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(l.body=d.sent(),l)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,4]}return[3,6];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 4:return s=[{}],[4,Ls(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=w(w({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:Uu(e)}),d.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},as=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=[w({},e)],d={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 4:return s=[{}],[4,Rs(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 6:return u=[{}],[4,Ls(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=w(w({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Uu(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},ss=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return r=[w({},e)],f={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(f.body=h.sent(),f)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 4:return s=[{}],[4,Ns(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 6:return u=[{}],[4,Rs(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 8:return c=[{}],[4,Ls(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 10:l=n.body,o=l.code||l.Code||o,i=w(w({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:Uu(e)}),h.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},us=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=[w({},e)],d={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 4:return s=[{}],[4,Rs(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 6:return u=[{}],[4,Ls(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=w(w({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Uu(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},cs=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=[w({},e)],d={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 4:return s=[{}],[4,Rs(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 6:return u=[{}],[4,Ls(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=w(w({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Uu(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},ls=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return r=[w({},e)],f={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(f.body=h.sent(),f)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"LimitExceededException":case"com.amazonaws.cloudwatchlogs#LimitExceededException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 4:return s=[{}],[4,Os(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 6:return u=[{}],[4,Rs(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 8:return c=[{}],[4,Ls(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 10:l=n.body,o=l.code||l.Code||o,i=w(w({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:Uu(e)}),h.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},ds=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return r=[w({},e)],f={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(f.body=h.sent(),f)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"LimitExceededException":case"com.amazonaws.cloudwatchlogs#LimitExceededException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 4:return s=[{}],[4,Os(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 6:return u=[{}],[4,Rs(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 8:return c=[{}],[4,Ls(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 10:l=n.body,o=l.code||l.Code||o,i=w(w({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:Uu(e)}),h.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},fs=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=[w({},e)],d={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 4:return s=[{}],[4,Rs(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 6:return u=[{}],[4,Ls(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=w(w({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Uu(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},hs=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return C(this,(function(d){switch(d.label){case 0:return r=[w({},e)],l={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(l.body=d.sent(),l)])),o="UnknownError",o=Lu(e,n.body)){case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,2];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,4]}return[3,6];case 2:return a=[{}],[4,Rs(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 4:return s=[{}],[4,Ls(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=w(w({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:Uu(e)}),d.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},ps=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=[w({},e)],d={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 4:return s=[{}],[4,Ns(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 6:return u=[{}],[4,Ls(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=w(w({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Uu(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},vs=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=[w({},e)],d={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 4:return s=[{}],[4,Ns(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 6:return u=[{}],[4,Ls(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=w(w({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Uu(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},gs=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f,h,p;return C(this,(function(v){switch(v.label){case 0:return r=[w({},e)],p={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(p.body=v.sent(),p)])),o="UnknownError",o=Lu(e,n.body)){case"DataAlreadyAcceptedException":case"com.amazonaws.cloudwatchlogs#DataAlreadyAcceptedException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,4];case"InvalidSequenceTokenException":case"com.amazonaws.cloudwatchlogs#InvalidSequenceTokenException":return[3,6];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,8];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,10];case"UnrecognizedClientException":case"com.amazonaws.cloudwatchlogs#UnrecognizedClientException":return[3,12]}return[3,14];case 2:return a=[{}],[4,Ps(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([v.sent()])),{name:o,$metadata:Uu(e)}]),[3,15];case 4:return s=[{}],[4,Is(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([v.sent()])),{name:o,$metadata:Uu(e)}]),[3,15];case 6:return u=[{}],[4,Ts(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([v.sent()])),{name:o,$metadata:Uu(e)}]),[3,15];case 8:return c=[{}],[4,Rs(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([v.sent()])),{name:o,$metadata:Uu(e)}]),[3,15];case 10:return l=[{}],[4,Ls(n)];case 11:return i=w.apply(void 0,[w.apply(void 0,l.concat([v.sent()])),{name:o,$metadata:Uu(e)}]),[3,15];case 12:return d=[{}],[4,Fs(n)];case 13:return i=w.apply(void 0,[w.apply(void 0,d.concat([v.sent()])),{name:o,$metadata:Uu(e)}]),[3,15];case 14:f=n.body,o=f.code||f.Code||o,i=w(w({},f),{name:""+o,message:f.message||f.Message||o,$fault:"client",$metadata:Uu(e)}),v.label=15;case 15:return h=i.message||i.Message||o,i.message=h,delete i.Message,[2,Promise.reject(Object.assign(new Error(h),i))]}}))}))},ms=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f,h;return C(this,(function(p){switch(p.label){case 0:return r=[w({},e)],h={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(h.body=p.sent(),h)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"LimitExceededException":case"com.amazonaws.cloudwatchlogs#LimitExceededException":return[3,4];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,6];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,8];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,10]}return[3,12];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 4:return s=[{}],[4,Os(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 6:return u=[{}],[4,Ns(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 8:return c=[{}],[4,Rs(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 10:return l=[{}],[4,Ls(n)];case 11:return i=w.apply(void 0,[w.apply(void 0,l.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 12:d=n.body,o=d.code||d.Code||o,i=w(w({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:Uu(e)}),p.label=13;case 13:return f=i.message||i.Message||o,i.message=f,delete i.Message,[2,Promise.reject(Object.assign(new Error(f),i))]}}))}))},ys=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=[w({},e)],d={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 4:return s=[{}],[4,Rs(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 6:return u=[{}],[4,Ls(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=w(w({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Uu(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},ws=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=[w({},e)],d={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"LimitExceededException":case"com.amazonaws.cloudwatchlogs#LimitExceededException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 4:return s=[{}],[4,Os(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 6:return u=[{}],[4,Ls(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=w(w({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Uu(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},bs=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f;return C(this,(function(h){switch(h.label){case 0:return r=[w({},e)],f={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(f.body=h.sent(),f)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 4:return s=[{}],[4,Ns(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 6:return u=[{}],[4,Rs(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 8:return c=[{}],[4,Ls(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([h.sent()])),{name:o,$metadata:Uu(e)}]),[3,11];case 10:l=n.body,o=l.code||l.Code||o,i=w(w({},l),{name:""+o,message:l.message||l.Message||o,$fault:"client",$metadata:Uu(e)}),h.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},Ss=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f,h;return C(this,(function(p){switch(p.label){case 0:return r=[w({},e)],h={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(h.body=p.sent(),h)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"LimitExceededException":case"com.amazonaws.cloudwatchlogs#LimitExceededException":return[3,4];case"OperationAbortedException":case"com.amazonaws.cloudwatchlogs#OperationAbortedException":return[3,6];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,8];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,10]}return[3,12];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 4:return s=[{}],[4,Os(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 6:return u=[{}],[4,Ns(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 8:return c=[{}],[4,Rs(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 10:return l=[{}],[4,Ls(n)];case 11:return i=w.apply(void 0,[w.apply(void 0,l.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 12:d=n.body,o=d.code||d.Code||o,i=w(w({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:Uu(e)}),p.label=13;case 13:return f=i.message||i.Message||o,i.message=f,delete i.Message,[2,Promise.reject(Object.assign(new Error(f),i))]}}))}))},_s=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d,f,h;return C(this,(function(p){switch(p.label){case 0:return r=[w({},e)],h={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(h.body=p.sent(),h)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"LimitExceededException":case"com.amazonaws.cloudwatchlogs#LimitExceededException":return[3,4];case"MalformedQueryException":case"com.amazonaws.cloudwatchlogs#MalformedQueryException":return[3,6];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,8];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,10]}return[3,12];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 4:return s=[{}],[4,Os(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 6:return u=[{}],[4,Us(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 8:return c=[{}],[4,Rs(n)];case 9:return i=w.apply(void 0,[w.apply(void 0,c.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 10:return l=[{}],[4,Ls(n)];case 11:return i=w.apply(void 0,[w.apply(void 0,l.concat([p.sent()])),{name:o,$metadata:Uu(e)}]),[3,13];case 12:d=n.body,o=d.code||d.Code||o,i=w(w({},d),{name:""+o,message:d.message||d.Message||o,$fault:"client",$metadata:Uu(e)}),p.label=13;case 13:return f=i.message||i.Message||o,i.message=f,delete i.Message,[2,Promise.reject(Object.assign(new Error(f),i))]}}))}))},Es=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:return r=[w({},e)],d={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(d.body=f.sent(),d)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,6]}return[3,8];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 4:return s=[{}],[4,Rs(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 6:return u=[{}],[4,Ls(n)];case 7:return i=w.apply(void 0,[w.apply(void 0,u.concat([f.sent()])),{name:o,$metadata:Uu(e)}]),[3,9];case 8:c=n.body,o=c.code||c.Code||o,i=w(w({},c),{name:""+o,message:c.message||c.Message||o,$fault:"client",$metadata:Uu(e)}),f.label=9;case 9:return l=i.message||i.Message||o,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}}))}))},As=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return C(this,(function(d){switch(d.label){case 0:return r=[w({},e)],l={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(l.body=d.sent(),l)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,4]}return[3,6];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 4:return s=[{}],[4,Rs(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=w(w({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:Uu(e)}),d.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},Cs=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return C(this,(function(d){switch(d.label){case 0:return r=[w({},e)],l={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(l.body=d.sent(),l)])),o="UnknownError",o=Lu(e,n.body)){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":return[3,2];case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":return[3,4]}return[3,6];case 2:return a=[{}],[4,Is(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 4:return s=[{}],[4,Ls(n)];case 5:return i=w.apply(void 0,[w.apply(void 0,s.concat([d.sent()])),{name:o,$metadata:Uu(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=w(w({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:Uu(e)}),d.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},ks=function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return C(this,(function(l){switch(l.label){case 0:return r=[w({},e)],c={},[4,Ru(e.body,t)];case 1:switch(n=w.apply(void 0,r.concat([(c.body=l.sent(),c)])),o="UnknownError",o=Lu(e,n.body)){case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":return[3,2]}return[3,4];case 2:return a=[{}],[4,Rs(n)];case 3:return i=w.apply(void 0,[w.apply(void 0,a.concat([l.sent()])),{name:o,$metadata:Uu(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=w(w({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:Uu(e)}),l.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},Ps=function(e,t){return A(void 0,void 0,void 0,(function(){var t,n;return C(this,(function(r){return t=e.body,n=Ws(t),[2,w({name:"DataAlreadyAcceptedException",$fault:"client",$metadata:Uu(e)},n)]}))}))},xs=function(e,t){return A(void 0,void 0,void 0,(function(){var t,n;return C(this,(function(r){return t=e.body,n=Xs(t),[2,w({name:"InvalidOperationException",$fault:"client",$metadata:Uu(e)},n)]}))}))},Is=function(e,t){return A(void 0,void 0,void 0,(function(){var t,n;return C(this,(function(r){return t=e.body,n=eu(t),[2,w({name:"InvalidParameterException",$fault:"client",$metadata:Uu(e)},n)]}))}))},Ts=function(e,t){return A(void 0,void 0,void 0,(function(){var t,n;return C(this,(function(r){return t=e.body,n=tu(t),[2,w({name:"InvalidSequenceTokenException",$fault:"client",$metadata:Uu(e)},n)]}))}))},Os=function(e,t){return A(void 0,void 0,void 0,(function(){var t,n;return C(this,(function(r){return t=e.body,n=nu(t),[2,w({name:"LimitExceededException",$fault:"client",$metadata:Uu(e)},n)]}))}))},Us=function(e,t){return A(void 0,void 0,void 0,(function(){var t,n;return C(this,(function(r){return t=e.body,n=uu(t),[2,w({name:"MalformedQueryException",$fault:"client",$metadata:Uu(e)},n)]}))}))},Ns=function(e,t){return A(void 0,void 0,void 0,(function(){var t,n;return C(this,(function(r){return t=e.body,n=hu(t),[2,w({name:"OperationAbortedException",$fault:"client",$metadata:Uu(e)},n)]}))}))},Ms=function(e,t){return A(void 0,void 0,void 0,(function(){var t,n;return C(this,(function(r){return t=e.body,n=_u(t),[2,w({name:"ResourceAlreadyExistsException",$fault:"client",$metadata:Uu(e)},n)]}))}))},Rs=function(e,t){return A(void 0,void 0,void 0,(function(){var t,n;return C(this,(function(r){return t=e.body,n=Eu(t),[2,w({name:"ResourceNotFoundException",$fault:"client",$metadata:Uu(e)},n)]}))}))},Ls=function(e,t){return A(void 0,void 0,void 0,(function(){var t,n;return C(this,(function(r){return t=e.body,n=xu(t),[2,w({name:"ServiceUnavailableException",$fault:"server",$metadata:Uu(e)},n)]}))}))},Fs=function(e,t){return A(void 0,void 0,void 0,(function(){var t,n;return C(this,(function(r){return t=e.body,n=Ou(t),[2,w({name:"UnrecognizedClientException",$fault:"client",$metadata:Uu(e)},n)]}))}))},js=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return w(w({},void 0!==e.message&&null!==e.message&&{message:e.message}),void 0!==e.timestamp&&null!==e.timestamp&&{timestamp:e.timestamp})}(e)}))},Ds=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:e}))},zs=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:e}))},qs=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return w(w(w(w({},void 0!==e.defaultValue&&null!==e.defaultValue&&{defaultValue:e.defaultValue}),void 0!==e.metricName&&null!==e.metricName&&{metricName:e.metricName}),void 0!==e.metricNamespace&&null!==e.metricNamespace&&{metricNamespace:e.metricNamespace}),void 0!==e.metricValue&&null!==e.metricValue&&{metricValue:e.metricValue})}(e)}))},Bs=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:e}))},Gs=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=I(t,2),i=r[0],o=r[1];return null===o?e:w(w({},e),((n={})[i]=o,n))}),{})},$s=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:e}))},Ws=function(e,t){return{expectedSequenceToken:void 0!==e.expectedSequenceToken&&null!==e.expectedSequenceToken?e.expectedSequenceToken:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0}},Vs=function(e,t){return{accessPolicy:void 0!==e.accessPolicy&&null!==e.accessPolicy?e.accessPolicy:void 0,arn:void 0!==e.arn&&null!==e.arn?e.arn:void 0,creationTime:void 0!==e.creationTime&&null!==e.creationTime?e.creationTime:void 0,destinationName:void 0!==e.destinationName&&null!==e.destinationName?e.destinationName:void 0,roleArn:void 0!==e.roleArn&&null!==e.roleArn?e.roleArn:void 0,targetArn:void 0!==e.targetArn&&null!==e.targetArn?e.targetArn:void 0}},Hs=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:Vs(e)}))},Ks=function(e,t){return{completionTime:void 0!==e.completionTime&&null!==e.completionTime?e.completionTime:void 0,creationTime:void 0!==e.creationTime&&null!==e.creationTime?e.creationTime:void 0}},Js=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{destination:void 0!==e.destination&&null!==e.destination?e.destination:void 0,destinationPrefix:void 0!==e.destinationPrefix&&null!==e.destinationPrefix?e.destinationPrefix:void 0,executionInfo:void 0!==e.executionInfo&&null!==e.executionInfo?Ks(e.executionInfo):void 0,from:void 0!==e.from&&null!==e.from?e.from:void 0,logGroupName:void 0!==e.logGroupName&&null!==e.logGroupName?e.logGroupName:void 0,status:void 0!==e.status&&null!==e.status?Ys(e.status):void 0,taskId:void 0!==e.taskId&&null!==e.taskId?e.taskId:void 0,taskName:void 0!==e.taskName&&null!==e.taskName?e.taskName:void 0,to:void 0!==e.to&&null!==e.to?e.to:void 0}}(e)}))},Ys=function(e,t){return{code:void 0!==e.code&&null!==e.code?e.code:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0}},Zs=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=I(t,2),i=r[0],o=r[1];return null===o?e:w(w({},e),((n={})[i]=o,n))}),{})},Qs=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{eventId:void 0!==e.eventId&&null!==e.eventId?e.eventId:void 0,ingestionTime:void 0!==e.ingestionTime&&null!==e.ingestionTime?e.ingestionTime:void 0,logStreamName:void 0!==e.logStreamName&&null!==e.logStreamName?e.logStreamName:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0,timestamp:void 0!==e.timestamp&&null!==e.timestamp?e.timestamp:void 0}}(e)}))},Xs=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},eu=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},tu=function(e,t){return{expectedSequenceToken:void 0!==e.expectedSequenceToken&&null!==e.expectedSequenceToken?e.expectedSequenceToken:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0}},nu=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},ru=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{name:void 0!==e.name&&null!==e.name?e.name:void 0,percent:void 0!==e.percent&&null!==e.percent?e.percent:void 0}}(e)}))},iu=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:e}))},ou=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{arn:void 0!==e.arn&&null!==e.arn?e.arn:void 0,creationTime:void 0!==e.creationTime&&null!==e.creationTime?e.creationTime:void 0,kmsKeyId:void 0!==e.kmsKeyId&&null!==e.kmsKeyId?e.kmsKeyId:void 0,logGroupName:void 0!==e.logGroupName&&null!==e.logGroupName?e.logGroupName:void 0,metricFilterCount:void 0!==e.metricFilterCount&&null!==e.metricFilterCount?e.metricFilterCount:void 0,retentionInDays:void 0!==e.retentionInDays&&null!==e.retentionInDays?e.retentionInDays:void 0,storedBytes:void 0!==e.storedBytes&&null!==e.storedBytes?e.storedBytes:void 0}}(e)}))},au=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=I(t,2),i=r[0],o=r[1];return null===o?e:w(w({},e),((n={})[i]=o,n))}),{})},su=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{arn:void 0!==e.arn&&null!==e.arn?e.arn:void 0,creationTime:void 0!==e.creationTime&&null!==e.creationTime?e.creationTime:void 0,firstEventTimestamp:void 0!==e.firstEventTimestamp&&null!==e.firstEventTimestamp?e.firstEventTimestamp:void 0,lastEventTimestamp:void 0!==e.lastEventTimestamp&&null!==e.lastEventTimestamp?e.lastEventTimestamp:void 0,lastIngestionTime:void 0!==e.lastIngestionTime&&null!==e.lastIngestionTime?e.lastIngestionTime:void 0,logStreamName:void 0!==e.logStreamName&&null!==e.logStreamName?e.logStreamName:void 0,storedBytes:void 0!==e.storedBytes&&null!==e.storedBytes?e.storedBytes:void 0,uploadSequenceToken:void 0!==e.uploadSequenceToken&&null!==e.uploadSequenceToken?e.uploadSequenceToken:void 0}}(e)}))},uu=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0,queryCompileError:void 0!==e.queryCompileError&&null!==e.queryCompileError?vu(e.queryCompileError):void 0}},cu=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:lu(e)}))},lu=function(e,t){return{eventMessage:void 0!==e.eventMessage&&null!==e.eventMessage?e.eventMessage:void 0,eventNumber:void 0!==e.eventNumber&&null!==e.eventNumber?e.eventNumber:void 0,extractedValues:void 0!==e.extractedValues&&null!==e.extractedValues?Zs(e.extractedValues):void 0}},du=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{creationTime:void 0!==e.creationTime&&null!==e.creationTime?e.creationTime:void 0,filterName:void 0!==e.filterName&&null!==e.filterName?e.filterName:void 0,filterPattern:void 0!==e.filterPattern&&null!==e.filterPattern?e.filterPattern:void 0,logGroupName:void 0!==e.logGroupName&&null!==e.logGroupName?e.logGroupName:void 0,metricTransformations:void 0!==e.metricTransformations&&null!==e.metricTransformations?fu(e.metricTransformations):void 0}}(e)}))},fu=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{defaultValue:void 0!==e.defaultValue&&null!==e.defaultValue?e.defaultValue:void 0,metricName:void 0!==e.metricName&&null!==e.metricName?e.metricName:void 0,metricNamespace:void 0!==e.metricNamespace&&null!==e.metricNamespace?e.metricNamespace:void 0,metricValue:void 0!==e.metricValue&&null!==e.metricValue?e.metricValue:void 0}}(e)}))},hu=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},pu=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{ingestionTime:void 0!==e.ingestionTime&&null!==e.ingestionTime?e.ingestionTime:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0,timestamp:void 0!==e.timestamp&&null!==e.timestamp?e.timestamp:void 0}}(e)}))},vu=function(e,t){return{location:void 0!==e.location&&null!==e.location?gu(e.location):void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0}},gu=function(e,t){return{endCharOffset:void 0!==e.endCharOffset&&null!==e.endCharOffset?e.endCharOffset:void 0,startCharOffset:void 0!==e.startCharOffset&&null!==e.startCharOffset?e.startCharOffset:void 0}},mu=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{lastModified:void 0!==e.lastModified&&null!==e.lastModified?e.lastModified:void 0,logGroupNames:void 0!==e.logGroupNames&&null!==e.logGroupNames?iu(e.logGroupNames):void 0,name:void 0!==e.name&&null!==e.name?e.name:void 0,queryDefinitionId:void 0!==e.queryDefinitionId&&null!==e.queryDefinitionId?e.queryDefinitionId:void 0,queryString:void 0!==e.queryString&&null!==e.queryString?e.queryString:void 0}}(e)}))},yu=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{createTime:void 0!==e.createTime&&null!==e.createTime?e.createTime:void 0,logGroupName:void 0!==e.logGroupName&&null!==e.logGroupName?e.logGroupName:void 0,queryId:void 0!==e.queryId&&null!==e.queryId?e.queryId:void 0,queryString:void 0!==e.queryString&&null!==e.queryString?e.queryString:void 0,status:void 0!==e.status&&null!==e.status?e.status:void 0}}(e)}))},wu=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:ku(e)}))},bu=function(e,t){return{bytesScanned:void 0!==e.bytesScanned&&null!==e.bytesScanned?e.bytesScanned:void 0,recordsMatched:void 0!==e.recordsMatched&&null!==e.recordsMatched?e.recordsMatched:void 0,recordsScanned:void 0!==e.recordsScanned&&null!==e.recordsScanned?e.recordsScanned:void 0}},Su=function(e,t){return{expiredLogEventEndIndex:void 0!==e.expiredLogEventEndIndex&&null!==e.expiredLogEventEndIndex?e.expiredLogEventEndIndex:void 0,tooNewLogEventStartIndex:void 0!==e.tooNewLogEventStartIndex&&null!==e.tooNewLogEventStartIndex?e.tooNewLogEventStartIndex:void 0,tooOldLogEventEndIndex:void 0!==e.tooOldLogEventEndIndex&&null!==e.tooOldLogEventEndIndex?e.tooOldLogEventEndIndex:void 0}},_u=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Eu=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Au=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:Cu(e)}))},Cu=function(e,t){return{lastUpdatedTime:void 0!==e.lastUpdatedTime&&null!==e.lastUpdatedTime?e.lastUpdatedTime:void 0,policyDocument:void 0!==e.policyDocument&&null!==e.policyDocument?e.policyDocument:void 0,policyName:void 0!==e.policyName&&null!==e.policyName?e.policyName:void 0}},ku=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{field:void 0!==e.field&&null!==e.field?e.field:void 0,value:void 0!==e.value&&null!==e.value?e.value:void 0}}(e)}))},Pu=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{logStreamName:void 0!==e.logStreamName&&null!==e.logStreamName?e.logStreamName:void 0,searchedCompletely:void 0!==e.searchedCompletely&&null!==e.searchedCompletely?e.searchedCompletely:void 0}}(e)}))},xu=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Iu=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){return{creationTime:void 0!==e.creationTime&&null!==e.creationTime?e.creationTime:void 0,destinationArn:void 0!==e.destinationArn&&null!==e.destinationArn?e.destinationArn:void 0,distribution:void 0!==e.distribution&&null!==e.distribution?e.distribution:void 0,filterName:void 0!==e.filterName&&null!==e.filterName?e.filterName:void 0,filterPattern:void 0!==e.filterPattern&&null!==e.filterPattern?e.filterPattern:void 0,logGroupName:void 0!==e.logGroupName&&null!==e.logGroupName?e.logGroupName:void 0,roleArn:void 0!==e.roleArn&&null!==e.roleArn?e.roleArn:void 0}}(e)}))},Tu=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=I(t,2),i=r[0],o=r[1];return null===o?e:w(w({},e),((n={})[i]=o,n))}),{})},Ou=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Uu=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Nu=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},Mu=function(e,t,n,r,i){return A(void 0,void 0,void 0,(function(){var o,a,s,u,c,l;return C(this,(function(d){switch(d.label){case 0:return[4,e.endpoint()];case 1:return o=d.sent(),a=o.hostname,s=o.protocol,u=void 0===s?"https":s,c=o.port,l={protocol:u,hostname:a,port:c,method:"POST",path:n,headers:t},void 0!==r&&(l.hostname=r),void 0!==i&&(l.body=i),[2,new Vn(l)]}}))}))},Ru=function(e,t){return function(e,t){return Nu(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},Lu=function(e,t){var n,r=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(n=e.headers,"x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()})));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},Fu={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},ju={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Du(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(r){return A(void 0,void 0,void 0,(function(){var i,o;return C(this,(function(a){switch(a.label){case 0:return[4,n(r)];case 1:return i=a.sent().response,[4,t(i,e)];case 2:return o=a.sent(),[2,{response:i,output:o}]}}))}))}}}(e,n),Fu),r.add(function(e,t){return function(n,r){return function(r){return A(void 0,void 0,void 0,(function(){var i;return C(this,(function(o){switch(o.label){case 0:return[4,t(r.input,e)];case 1:return i=o.sent(),[2,n(w(w({},r),{request:i}))]}}))}))}}}(e,t),ju)}}}var zu=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"AssociateKmsKeyCommand",inputFilterSensitiveLog:qi.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.AssociateKmsKey"},r=JSON.stringify(function(e,t){return w(w({},void 0!==e.kmsKeyId&&null!==e.kmsKeyId&&{kmsKeyId:e.kmsKeyId}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,Da(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),qu=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"CancelExportTaskCommand",inputFilterSensitiveLog:Vi.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.CancelExportTask"},r=JSON.stringify(function(e,t){return w({},void 0!==e.taskId&&null!==e.taskId&&{taskId:e.taskId})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,za(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),Bu=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"CreateExportTaskCommand",inputFilterSensitiveLog:Ki.filterSensitiveLog,outputFilterSensitiveLog:Ji.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.CreateExportTask"},r=JSON.stringify(function(e,t){return w(w(w(w(w(w(w({},void 0!==e.destination&&null!==e.destination&&{destination:e.destination}),void 0!==e.destinationPrefix&&null!==e.destinationPrefix&&{destinationPrefix:e.destinationPrefix}),void 0!==e.from&&null!==e.from&&{from:e.from}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamNamePrefix&&null!==e.logStreamNamePrefix&&{logStreamNamePrefix:e.logStreamNamePrefix}),void 0!==e.taskName&&null!==e.taskName&&{taskName:e.taskName}),void 0!==e.to&&null!==e.to&&{to:e.to})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,qa(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{taskId:void 0!==e.taskId&&null!==e.taskId?e.taskId:void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),Gu=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"CreateLogGroupCommand",inputFilterSensitiveLog:Qi.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.CreateLogGroup"},r=JSON.stringify(function(e,t){return w(w(w({},void 0!==e.kmsKeyId&&null!==e.kmsKeyId&&{kmsKeyId:e.kmsKeyId}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.tags&&null!==e.tags&&{tags:Gs(e.tags)})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,Ba(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),$u=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"CreateLogStreamCommand",inputFilterSensitiveLog:Xi.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.CreateLogStream"},r=JSON.stringify(function(e,t){return w(w({},void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamName&&null!==e.logStreamName&&{logStreamName:e.logStreamName})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,Ga(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),Wu=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DeleteDestinationCommand",inputFilterSensitiveLog:to.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DeleteDestination"},r=JSON.stringify(function(e,t){return w({},void 0!==e.destinationName&&null!==e.destinationName&&{destinationName:e.destinationName})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,$a(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),Vu=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DeleteLogGroupCommand",inputFilterSensitiveLog:no.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DeleteLogGroup"},r=JSON.stringify(function(e,t){return w({},void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,Wa(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),Hu=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DeleteLogStreamCommand",inputFilterSensitiveLog:ro.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DeleteLogStream"},r=JSON.stringify(function(e,t){return w(w({},void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamName&&null!==e.logStreamName&&{logStreamName:e.logStreamName})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,Va(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),Ku=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DeleteMetricFilterCommand",inputFilterSensitiveLog:io.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DeleteMetricFilter"},r=JSON.stringify(function(e,t){return w(w({},void 0!==e.filterName&&null!==e.filterName&&{filterName:e.filterName}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,Ha(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),Ju=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DeleteQueryDefinitionCommand",inputFilterSensitiveLog:oo.filterSensitiveLog,outputFilterSensitiveLog:ao.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DeleteQueryDefinition"},r=JSON.stringify(function(e,t){return w({},void 0!==e.queryDefinitionId&&null!==e.queryDefinitionId&&{queryDefinitionId:e.queryDefinitionId})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,Ka(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{success:void 0!==e.success&&null!==e.success?e.success:void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),Yu=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DeleteResourcePolicyCommand",inputFilterSensitiveLog:so.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DeleteResourcePolicy"},r=JSON.stringify(function(e,t){return w({},void 0!==e.policyName&&null!==e.policyName&&{policyName:e.policyName})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,Ja(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),Zu=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DeleteRetentionPolicyCommand",inputFilterSensitiveLog:uo.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DeleteRetentionPolicy"},r=JSON.stringify(function(e,t){return w({},void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,Ya(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),Qu=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DeleteSubscriptionFilterCommand",inputFilterSensitiveLog:co.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DeleteSubscriptionFilter"},r=JSON.stringify(function(e,t){return w(w({},void 0!==e.filterName&&null!==e.filterName&&{filterName:e.filterName}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,Za(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),Xu=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DescribeDestinationsCommand",inputFilterSensitiveLog:lo.filterSensitiveLog,outputFilterSensitiveLog:ho.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DescribeDestinations"},r=JSON.stringify(function(e,t){return w(w(w({},void 0!==e.DestinationNamePrefix&&null!==e.DestinationNamePrefix&&{DestinationNamePrefix:e.DestinationNamePrefix}),void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,Qa(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{destinations:void 0!==e.destinations&&null!==e.destinations?Hs(e.destinations):void 0,nextToken:void 0!==e.nextToken&&null!==e.nextToken?e.nextToken:void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),ec=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DescribeExportTasksCommand",inputFilterSensitiveLog:vo.filterSensitiveLog,outputFilterSensitiveLog:wo.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DescribeExportTasks"},r=JSON.stringify(function(e,t){return w(w(w(w({},void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken}),void 0!==e.statusCode&&null!==e.statusCode&&{statusCode:e.statusCode}),void 0!==e.taskId&&null!==e.taskId&&{taskId:e.taskId})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,Xa(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{exportTasks:void 0!==e.exportTasks&&null!==e.exportTasks?Js(e.exportTasks):void 0,nextToken:void 0!==e.nextToken&&null!==e.nextToken?e.nextToken:void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),tc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DescribeLogGroupsCommand",inputFilterSensitiveLog:bo.filterSensitiveLog,outputFilterSensitiveLog:_o.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DescribeLogGroups"},r=JSON.stringify(function(e,t){return w(w(w({},void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.logGroupNamePrefix&&null!==e.logGroupNamePrefix&&{logGroupNamePrefix:e.logGroupNamePrefix}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,es(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{logGroups:void 0!==e.logGroups&&null!==e.logGroups?ou(e.logGroups):void 0,nextToken:void 0!==e.nextToken&&null!==e.nextToken?e.nextToken:void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),nc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DescribeLogStreamsCommand",inputFilterSensitiveLog:Ao.filterSensitiveLog,outputFilterSensitiveLog:ko.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DescribeLogStreams"},r=JSON.stringify(function(e,t){return w(w(w(w(w(w({},void 0!==e.descending&&null!==e.descending&&{descending:e.descending}),void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamNamePrefix&&null!==e.logStreamNamePrefix&&{logStreamNamePrefix:e.logStreamNamePrefix}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken}),void 0!==e.orderBy&&null!==e.orderBy&&{orderBy:e.orderBy})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,ts(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{logStreams:void 0!==e.logStreams&&null!==e.logStreams?su(e.logStreams):void 0,nextToken:void 0!==e.nextToken&&null!==e.nextToken?e.nextToken:void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),rc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DescribeMetricFiltersCommand",inputFilterSensitiveLog:Po.filterSensitiveLog,outputFilterSensitiveLog:To.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DescribeMetricFilters"},r=JSON.stringify(function(e,t){return w(w(w(w(w(w({},void 0!==e.filterNamePrefix&&null!==e.filterNamePrefix&&{filterNamePrefix:e.filterNamePrefix}),void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.metricName&&null!==e.metricName&&{metricName:e.metricName}),void 0!==e.metricNamespace&&null!==e.metricNamespace&&{metricNamespace:e.metricNamespace}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,ns(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{metricFilters:void 0!==e.metricFilters&&null!==e.metricFilters?du(e.metricFilters):void 0,nextToken:void 0!==e.nextToken&&null!==e.nextToken?e.nextToken:void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),ic=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DescribeQueriesCommand",inputFilterSensitiveLog:Uo.filterSensitiveLog,outputFilterSensitiveLog:Mo.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DescribeQueries"},r=JSON.stringify(function(e,t){return w(w(w(w({},void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.maxResults&&null!==e.maxResults&&{maxResults:e.maxResults}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken}),void 0!==e.status&&null!==e.status&&{status:e.status})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,rs(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{nextToken:void 0!==e.nextToken&&null!==e.nextToken?e.nextToken:void 0,queries:void 0!==e.queries&&null!==e.queries?yu(e.queries):void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),oc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DescribeQueryDefinitionsCommand",inputFilterSensitiveLog:Ro.filterSensitiveLog,outputFilterSensitiveLog:Fo.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DescribeQueryDefinitions"},r=JSON.stringify(function(e,t){return w(w(w({},void 0!==e.maxResults&&null!==e.maxResults&&{maxResults:e.maxResults}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken}),void 0!==e.queryDefinitionNamePrefix&&null!==e.queryDefinitionNamePrefix&&{queryDefinitionNamePrefix:e.queryDefinitionNamePrefix})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,is(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{nextToken:void 0!==e.nextToken&&null!==e.nextToken?e.nextToken:void 0,queryDefinitions:void 0!==e.queryDefinitions&&null!==e.queryDefinitions?mu(e.queryDefinitions):void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),ac=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DescribeResourcePoliciesCommand",inputFilterSensitiveLog:jo.filterSensitiveLog,outputFilterSensitiveLog:zo.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DescribeResourcePolicies"},r=JSON.stringify(function(e,t){return w(w({},void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,os(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{nextToken:void 0!==e.nextToken&&null!==e.nextToken?e.nextToken:void 0,resourcePolicies:void 0!==e.resourcePolicies&&null!==e.resourcePolicies?Au(e.resourcePolicies):void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),sc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DescribeSubscriptionFiltersCommand",inputFilterSensitiveLog:qo.filterSensitiveLog,outputFilterSensitiveLog:$o.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DescribeSubscriptionFilters"},r=JSON.stringify(function(e,t){return w(w(w(w({},void 0!==e.filterNamePrefix&&null!==e.filterNamePrefix&&{filterNamePrefix:e.filterNamePrefix}),void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,as(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{nextToken:void 0!==e.nextToken&&null!==e.nextToken?e.nextToken:void 0,subscriptionFilters:void 0!==e.subscriptionFilters&&null!==e.subscriptionFilters?Iu(e.subscriptionFilters):void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),uc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"DisassociateKmsKeyCommand",inputFilterSensitiveLog:Wo.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.DisassociateKmsKey"},r=JSON.stringify(function(e,t){return w({},void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,ss(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),cc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"FilterLogEventsCommand",inputFilterSensitiveLog:Ho.filterSensitiveLog,outputFilterSensitiveLog:Jo.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.FilterLogEvents"},r=JSON.stringify(function(e,t){return w(w(w(w(w(w(w(w(w({},void 0!==e.endTime&&null!==e.endTime&&{endTime:e.endTime}),void 0!==e.filterPattern&&null!==e.filterPattern&&{filterPattern:e.filterPattern}),void 0!==e.interleaved&&null!==e.interleaved&&{interleaved:e.interleaved}),void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamNamePrefix&&null!==e.logStreamNamePrefix&&{logStreamNamePrefix:e.logStreamNamePrefix}),void 0!==e.logStreamNames&&null!==e.logStreamNames&&{logStreamNames:Ds(e.logStreamNames)}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken}),void 0!==e.startTime&&null!==e.startTime&&{startTime:e.startTime})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,us(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{events:void 0!==e.events&&null!==e.events?Qs(e.events):void 0,nextToken:void 0!==e.nextToken&&null!==e.nextToken?e.nextToken:void 0,searchedLogStreams:void 0!==e.searchedLogStreams&&null!==e.searchedLogStreams?Pu(e.searchedLogStreams):void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),lc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"GetLogEventsCommand",inputFilterSensitiveLog:Yo.filterSensitiveLog,outputFilterSensitiveLog:Qo.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.GetLogEvents"},r=JSON.stringify(function(e,t){return w(w(w(w(w(w(w({},void 0!==e.endTime&&null!==e.endTime&&{endTime:e.endTime}),void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamName&&null!==e.logStreamName&&{logStreamName:e.logStreamName}),void 0!==e.nextToken&&null!==e.nextToken&&{nextToken:e.nextToken}),void 0!==e.startFromHead&&null!==e.startFromHead&&{startFromHead:e.startFromHead}),void 0!==e.startTime&&null!==e.startTime&&{startTime:e.startTime})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,cs(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{events:void 0!==e.events&&null!==e.events?pu(e.events):void 0,nextBackwardToken:void 0!==e.nextBackwardToken&&null!==e.nextBackwardToken?e.nextBackwardToken:void 0,nextForwardToken:void 0!==e.nextForwardToken&&null!==e.nextForwardToken?e.nextForwardToken:void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),dc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"GetLogGroupFieldsCommand",inputFilterSensitiveLog:Xo.filterSensitiveLog,outputFilterSensitiveLog:ta.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.GetLogGroupFields"},r=JSON.stringify(function(e,t){return w(w({},void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.time&&null!==e.time&&{time:e.time})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,ls(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{logGroupFields:void 0!==e.logGroupFields&&null!==e.logGroupFields?ru(e.logGroupFields):void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),fc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"GetLogRecordCommand",inputFilterSensitiveLog:na.filterSensitiveLog,outputFilterSensitiveLog:ra.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.GetLogRecord"},r=JSON.stringify(function(e,t){return w({},void 0!==e.logRecordPointer&&null!==e.logRecordPointer&&{logRecordPointer:e.logRecordPointer})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,ds(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{logRecord:void 0!==e.logRecord&&null!==e.logRecord?au(e.logRecord):void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),hc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"GetQueryResultsCommand",inputFilterSensitiveLog:ia.filterSensitiveLog,outputFilterSensitiveLog:sa.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.GetQueryResults"},r=JSON.stringify(function(e,t){return w({},void 0!==e.queryId&&null!==e.queryId&&{queryId:e.queryId})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,fs(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{results:void 0!==e.results&&null!==e.results?wu(e.results):void 0,statistics:void 0!==e.statistics&&null!==e.statistics?bu(e.statistics):void 0,status:void 0!==e.status&&null!==e.status?e.status:void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),pc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"ListTagsLogGroupCommand",inputFilterSensitiveLog:la.filterSensitiveLog,outputFilterSensitiveLog:da.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.ListTagsLogGroup"},r=JSON.stringify(function(e,t){return w({},void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,hs(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{tags:void 0!==e.tags&&null!==e.tags?Tu(e.tags):void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),vc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"PutDestinationCommand",inputFilterSensitiveLog:fa.filterSensitiveLog,outputFilterSensitiveLog:ha.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.PutDestination"},r=JSON.stringify(function(e,t){return w(w(w({},void 0!==e.destinationName&&null!==e.destinationName&&{destinationName:e.destinationName}),void 0!==e.roleArn&&null!==e.roleArn&&{roleArn:e.roleArn}),void 0!==e.targetArn&&null!==e.targetArn&&{targetArn:e.targetArn})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,ps(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{destination:void 0!==e.destination&&null!==e.destination?Vs(e.destination):void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),gc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"PutDestinationPolicyCommand",inputFilterSensitiveLog:pa.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.PutDestinationPolicy"},r=JSON.stringify(function(e,t){return w(w({},void 0!==e.accessPolicy&&null!==e.accessPolicy&&{accessPolicy:e.accessPolicy}),void 0!==e.destinationName&&null!==e.destinationName&&{destinationName:e.destinationName})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,vs(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),mc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"PutLogEventsCommand",inputFilterSensitiveLog:va.filterSensitiveLog,outputFilterSensitiveLog:ma.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.PutLogEvents"},r=JSON.stringify(function(e,t){return w(w(w(w({},void 0!==e.logEvents&&null!==e.logEvents&&{logEvents:js(e.logEvents)}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logStreamName&&null!==e.logStreamName&&{logStreamName:e.logStreamName}),void 0!==e.sequenceToken&&null!==e.sequenceToken&&{sequenceToken:e.sequenceToken})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,gs(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{nextSequenceToken:void 0!==e.nextSequenceToken&&null!==e.nextSequenceToken?e.nextSequenceToken:void 0,rejectedLogEventsInfo:void 0!==e.rejectedLogEventsInfo&&null!==e.rejectedLogEventsInfo?Su(e.rejectedLogEventsInfo):void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),yc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"PutMetricFilterCommand",inputFilterSensitiveLog:wa.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.PutMetricFilter"},r=JSON.stringify(function(e,t){return w(w(w(w({},void 0!==e.filterName&&null!==e.filterName&&{filterName:e.filterName}),void 0!==e.filterPattern&&null!==e.filterPattern&&{filterPattern:e.filterPattern}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.metricTransformations&&null!==e.metricTransformations&&{metricTransformations:qs(e.metricTransformations)})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,ms(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),wc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"PutQueryDefinitionCommand",inputFilterSensitiveLog:ba.filterSensitiveLog,outputFilterSensitiveLog:Sa.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.PutQueryDefinition"},r=JSON.stringify(function(e,t){return w(w(w(w({},void 0!==e.logGroupNames&&null!==e.logGroupNames&&{logGroupNames:zs(e.logGroupNames)}),void 0!==e.name&&null!==e.name&&{name:e.name}),void 0!==e.queryDefinitionId&&null!==e.queryDefinitionId&&{queryDefinitionId:e.queryDefinitionId}),void 0!==e.queryString&&null!==e.queryString&&{queryString:e.queryString})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,ys(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{queryDefinitionId:void 0!==e.queryDefinitionId&&null!==e.queryDefinitionId?e.queryDefinitionId:void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),bc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"PutResourcePolicyCommand",inputFilterSensitiveLog:_a.filterSensitiveLog,outputFilterSensitiveLog:Ea.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.PutResourcePolicy"},r=JSON.stringify(function(e,t){return w(w({},void 0!==e.policyDocument&&null!==e.policyDocument&&{policyDocument:e.policyDocument}),void 0!==e.policyName&&null!==e.policyName&&{policyName:e.policyName})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,ws(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{resourcePolicy:void 0!==e.resourcePolicy&&null!==e.resourcePolicy?Cu(e.resourcePolicy):void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),Sc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"PutRetentionPolicyCommand",inputFilterSensitiveLog:Aa.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.PutRetentionPolicy"},r=JSON.stringify(function(e,t){return w(w({},void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.retentionInDays&&null!==e.retentionInDays&&{retentionInDays:e.retentionInDays})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,bs(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),_c=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"PutSubscriptionFilterCommand",inputFilterSensitiveLog:Ca.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.PutSubscriptionFilter"},r=JSON.stringify(function(e,t){return w(w(w(w(w(w({},void 0!==e.destinationArn&&null!==e.destinationArn&&{destinationArn:e.destinationArn}),void 0!==e.distribution&&null!==e.distribution&&{distribution:e.distribution}),void 0!==e.filterName&&null!==e.filterName&&{filterName:e.filterName}),void 0!==e.filterPattern&&null!==e.filterPattern&&{filterPattern:e.filterPattern}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.roleArn&&null!==e.roleArn&&{roleArn:e.roleArn})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,Ss(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),Ec=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"StartQueryCommand",inputFilterSensitiveLog:Ia.filterSensitiveLog,outputFilterSensitiveLog:Ta.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.StartQuery"},r=JSON.stringify(function(e,t){return w(w(w(w(w(w({},void 0!==e.endTime&&null!==e.endTime&&{endTime:e.endTime}),void 0!==e.limit&&null!==e.limit&&{limit:e.limit}),void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.logGroupNames&&null!==e.logGroupNames&&{logGroupNames:zs(e.logGroupNames)}),void 0!==e.queryString&&null!==e.queryString&&{queryString:e.queryString}),void 0!==e.startTime&&null!==e.startTime&&{startTime:e.startTime})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,_s(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{queryId:void 0!==e.queryId&&null!==e.queryId?e.queryId:void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),Ac=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"StopQueryCommand",inputFilterSensitiveLog:Oa.filterSensitiveLog,outputFilterSensitiveLog:Ua.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.StopQuery"},r=JSON.stringify(function(e,t){return w({},void 0!==e.queryId&&null!==e.queryId&&{queryId:e.queryId})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,Es(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{success:void 0!==e.success&&null!==e.success?e.success:void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),Cc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"TagLogGroupCommand",inputFilterSensitiveLog:Na.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.TagLogGroup"},r=JSON.stringify(function(e,t){return w(w({},void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.tags&&null!==e.tags&&{tags:Gs(e.tags)})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,As(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di),kc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"TestMetricFilterCommand",inputFilterSensitiveLog:Ma.filterSensitiveLog,outputFilterSensitiveLog:La.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.TestMetricFilter"},r=JSON.stringify(function(e,t){return w(w({},void 0!==e.filterPattern&&null!==e.filterPattern&&{filterPattern:e.filterPattern}),void 0!==e.logEventMessages&&null!==e.logEventMessages&&{logEventMessages:$s(e.logEventMessages)})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r,i;return C(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,Cs(e,t)]:[4,Ru(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{matches:void 0!==e.matches&&null!==e.matches?cu(e.matches):void 0}}(n),i=w({$metadata:Uu(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Di),Pc=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Du(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"CloudWatchLogsClient",commandName:"UntagLogGroupCommand",inputFilterSensitiveLog:Fa.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(i){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"Logs_20140328.UntagLogGroup"},r=JSON.stringify(function(e,t){return w(w({},void 0!==e.logGroupName&&null!==e.logGroupName&&{logGroupName:e.logGroupName}),void 0!==e.tags&&null!==e.tags&&{tags:Bs(e.tags)})}(e)),[2,Mu(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return A(void 0,void 0,void 0,(function(){var n;return C(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[2,ks(e,t)]:[4,Nu(e.body,t)];case 1:return r.sent(),n={$metadata:Uu(e)},[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Di);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}y(t,e),t.prototype.associateKmsKey=function(e,t,n){var r=new zu(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.cancelExportTask=function(e,t,n){var r=new qu(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.createExportTask=function(e,t,n){var r=new Bu(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.createLogGroup=function(e,t,n){var r=new Gu(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.createLogStream=function(e,t,n){var r=new $u(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.deleteDestination=function(e,t,n){var r=new Wu(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.deleteLogGroup=function(e,t,n){var r=new Vu(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.deleteLogStream=function(e,t,n){var r=new Hu(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.deleteMetricFilter=function(e,t,n){var r=new Ku(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.deleteQueryDefinition=function(e,t,n){var r=new Ju(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.deleteResourcePolicy=function(e,t,n){var r=new Yu(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.deleteRetentionPolicy=function(e,t,n){var r=new Zu(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.deleteSubscriptionFilter=function(e,t,n){var r=new Qu(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.describeDestinations=function(e,t,n){var r=new Xu(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.describeExportTasks=function(e,t,n){var r=new ec(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.describeLogGroups=function(e,t,n){var r=new tc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.describeLogStreams=function(e,t,n){var r=new nc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.describeMetricFilters=function(e,t,n){var r=new rc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.describeQueries=function(e,t,n){var r=new ic(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.describeQueryDefinitions=function(e,t,n){var r=new oc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.describeResourcePolicies=function(e,t,n){var r=new ac(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.describeSubscriptionFilters=function(e,t,n){var r=new sc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.disassociateKmsKey=function(e,t,n){var r=new uc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.filterLogEvents=function(e,t,n){var r=new cc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.getLogEvents=function(e,t,n){var r=new lc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.getLogGroupFields=function(e,t,n){var r=new dc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.getLogRecord=function(e,t,n){var r=new fc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.getQueryResults=function(e,t,n){var r=new hc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.listTagsLogGroup=function(e,t,n){var r=new pc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.putDestination=function(e,t,n){var r=new vc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.putDestinationPolicy=function(e,t,n){var r=new gc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.putLogEvents=function(e,t,n){var r=new mc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.putMetricFilter=function(e,t,n){var r=new yc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.putQueryDefinition=function(e,t,n){var r=new wc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.putResourcePolicy=function(e,t,n){var r=new bc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.putRetentionPolicy=function(e,t,n){var r=new Sc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.putSubscriptionFilter=function(e,t,n){var r=new _c(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.startQuery=function(e,t,n){var r=new Ec(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.stopQuery=function(e,t,n){var r=new Ac(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.tagLogGroup=function(e,t,n){var r=new Cc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.testMetricFilter=function(e,t,n){var r=new kc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}},t.prototype.untagLogGroup=function(e,t,n){var r=new Pc(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!==g(t))throw new Error("Expect http options but get "+g(t));this.send(r,t||{},n)}}}(ja),new ve("AWSCloudWatch");var xc=new ve("CognitoCredentials"),Ic=new Promise((function(e,t){return He().isBrowser?window.gapi&&window.gapi.auth2&&window.gapi.auth2?(xc.debug("google api already loaded"),e()):void setTimeout((function(){return e()}),2e3):(xc.debug("not in the browser, directly resolved"),e())})),Tc=function(){function e(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return e.prototype.refreshGoogleToken=function(){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(e){switch(e.label){case 0:return this.initialized?[3,2]:(xc.debug("need to wait for the Google SDK loaded"),[4,Ic]);case 1:e.sent(),this.initialized=!0,xc.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}}))}))},e.prototype._refreshGoogleTokenImpl=function(){var e=null;return He().isBrowser&&(e=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),e?new Promise((function(t,n){e.getAuthInstance().then((function(e){e||(xc.debug("google Auth undefined"),n(new et("google Auth undefined")));var r=e.currentUser.get();r.isSignedIn()?(xc.debug("refreshing the google access token"),r.reloadAuthResponse().then((function(e){var n=e.id_token,r=e.expires_at;t({token:n,expires_at:r})})).catch((function(e){e&&"network_error"===e.error?n("Network error reloading google auth response"):n(new et("Failed to reload google auth response"))}))):n(new et("User is not signed in with Google"))})).catch((function(e){xc.debug("Failed to refresh google token",e),n(new et("Failed to refresh google token"))}))})):(xc.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},e}(),Oc=new ve("CognitoCredentials"),Uc=new Promise((function(e,t){return He().isBrowser?window.FB?(Oc.debug("FB SDK already loaded"),e()):void setTimeout((function(){return e()}),2e3):(Oc.debug("not in the browser, directly resolved"),e())})),Nc=function(){function e(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return e.prototype.refreshFacebookToken=function(){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(e){switch(e.label){case 0:return this.initialized?[3,2]:(Oc.debug("need to wait for the Facebook SDK loaded"),[4,Uc]);case 1:e.sent(),this.initialized=!0,Oc.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}}))}))},e.prototype._refreshFacebookTokenImpl=function(){var e=null;if(He().isBrowser&&(e=window.FB),!e){var t="no fb sdk available";return Oc.debug(t),Promise.reject(new et(t))}return new Promise((function(t,n){e.getLoginStatus((function(e){if(e&&e.authResponse){var r=e.authResponse,i=r.accessToken,o=1e3*r.expiresIn+(new Date).getTime();i||(a="the jwtToken is undefined",Oc.debug(a),n(new et(a))),t({token:i,expires_at:o})}else{var a="no response from facebook when refreshing the jwt token";Oc.debug(a),n(new et(a))}}),{scope:"public_profile,email"})}))},e}(),Mc=new Tc,Rc=new Nc,Lc={},Fc=function(){function e(){}return e.setItem=function(e,t){return Lc[e]=t,Lc[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(Lc,e)?Lc[e]:void 0},e.removeItem=function(e){return delete Lc[e]},e.clear=function(){return Lc={}},e}(),jc=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch(e){this.storageWindow=Fc}}return e.prototype.getStorage=function(){return this.storageWindow},e}();He().isBrowser&&(new jc).getStorage();var Dc={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},zc={partitions:[Dc,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},qc=function(e){var t,n,r=zc.partitions;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),o=i.next();!o.done;o=i.next()){var a=o.value,s=a.regions,u=a.outputs,c=a.regionRegex,l=new RegExp(c);if(s.includes(e)||l.test(e))return u.dnsSuffix}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return Dc.outputs.dnsSuffix},Bc=rt(Object.freeze({__proto__:null,default:function(e,t){return t=t||{},new Promise((function(n,r){var i=new XMLHttpRequest,o=[],a=[],s={};for(var u in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){o.push(t=t.toLowerCase()),a.push([t,n]),s[t]=s[t]?s[t]+","+n:n})),n(function e(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:e,headers:{keys:function(){return o},entries:function(){return a},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}}())},i.onerror=r,i.withCredentials="include"==t.credentials,t.headers)i.setRequestHeader(u,t.headers[u]);i.send(t.body||null)}))}}));self.fetch||(self.fetch=Bc.default||Bc);var Gc,$c=function(e){var t;return function(){return t||(t=e()),t}},Wc=function(){return(Wc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Vc=function(e){return!["HEAD","GET","DELETE"].includes(e.toUpperCase())},Hc=function(){return(Hc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Kc=function(e,t){if(null==t?void 0:t.aborted)return Promise.resolve();var n,r,i=new Promise((function(t){r=t,n=setTimeout(t,e)}));return null==t||t.addEventListener("abort",(function e(i){clearTimeout(n),null==t||t.removeEventListener("abort",e),r()})),i},Jc=function(e,t){var n;"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata=Hc(Hc({},null!==(n=e.$metadata)&&void 0!==n?n:{}),{attempts:t}))},Yc=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],Zc=function(e){return Yc.includes(e)},Qc=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],Xc=["TimeoutError","RequestTimeout","RequestTimeoutException"],el=function(e,t){return 429===e||Qc.includes(t)},tl=function(e){return"Network error"===(null==e?void 0:e.name)},nl=function(e,t){return[500,502,503,504].includes(e)||Xc.includes(t)},rl=function(e,t){return function(n,r){for(var i={},o=function(t){return e(t,r)},a=t.length-1;a>=0;a--)o=(0,t[a])(r)(o,i);return o(n)}},il=rl((function(e,t){var n=e.url,r=e.method,i=e.headers,o=e.body,a=t.abortSignal;return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e,t,s,u,c,l,d;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),[4,fetch(n,{method:r,headers:i,body:Vc(r)?o:void 0,signal:a})];case 1:return e=f.sent(),[3,3];case 2:if((t=f.sent())instanceof TypeError)throw new Error("Network error");throw t;case 3:return s={},null===(l=e.headers)||void 0===l||l.forEach((function(e,t){s[t.toLowerCase()]=e})),u={statusCode:e.status,headers:s,body:null},c=Object.assign(null!==(d=e.body)&&void 0!==d?d:{},{text:$c((function(){return e.text()})),blob:$c((function(){return e.blob()})),json:$c((function(){return e.json()}))}),[2,Wc(Wc({},u),{body:c})]}}))}))}),[function(e){var t=e.userAgentHeader,n=void 0===t?"x-amz-user-agent":t,r=e.userAgentValue,i=void 0===r?"":r;return function(e){return function(t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var r;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(o){switch(o.label){case 0:return 0!==i.trim().length?[3,2]:[4,e(t)];case 1:return[2,o.sent()];case 2:return r=n.toLowerCase(),t.headers[r]=t.headers[r]?"".concat(t.headers[r]," ").concat(i):i,[4,e(t)];case 3:return[2,o.sent()]}}))}))}}},function(e){var t=e.maxAttempts,n=void 0===t?3:t,r=e.retryDecider,i=e.computeDelay,o=e.abortSignal;if(n<1)throw new Error("maxAttempts must be greater than 0");return function(e,t){return function(a){var s;return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var u,c,l,d,f,h;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(p){switch(p.label){case 0:c=null!==(s=t.attemptsCount)&&void 0!==s?s:0,d=function(){if(l)return Jc(l,c),l;throw Jc(u,c),u},p.label=1;case 1:if((null==o?void 0:o.aborted)||!(c<n))return[3,11];p.label=2;case 2:return p.trys.push([2,4,,5]),[4,e(a)];case 3:return l=p.sent(),u=void 0,[3,5];case 4:return f=p.sent(),u=f,l=void 0,[3,5];case 5:return c=t.attemptsCount>c?t.attemptsCount:c+1,t.attemptsCount=c,[4,r(l,u)];case 6:return p.sent()?!(null==o?void 0:o.aborted)&&c<n?(h=i(c),[4,Kc(h,o)]):[3,8]:[3,9];case 7:p.sent(),p.label=8;case 8:return[3,1];case 9:return[2,d()];case 10:return[3,1];case 11:if(null==o?void 0:o.aborted)throw new Error("Request aborted.");return[2,d()]}}))}))}}}]),ol=function(){return(ol=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},al=function(e){var t,n,r=e.headers,i=e.statusCode;return ol(ol({},sl(e)?e.$metadata:{}),{httpStatusCode:i,requestId:null!==(n=null!==(t=r["x-amzn-requestid"])&&void 0!==t?t:r["x-amzn-request-id"])&&void 0!==n?n:r["x-amz-request-id"],extendedRequestId:r["x-amz-id-2"],cfId:r["x-amz-cf-id"]})},sl=function(e){return"object"===g(null==e?void 0:e.$metadata)},ul=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},cl=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},ll=function(e){return ul(void 0,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c;return cl(this,(function(l){switch(l.label){case 0:return!e||e.statusCode<300?[2]:[4,dl(e)];case 1:return t=l.sent(),n=function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(e.toString().split(/[\,\:]+/),1)[0];return t.includes("#")?t.split("#")[1]:t}(null!==(s=null!==(a=null!==(o=e.headers["x-amzn-errortype"])&&void 0!==o?o:t.code)&&void 0!==a?a:t.__type)&&void 0!==s?s:"UnknownError"),r=null!==(c=null!==(u=t.message)&&void 0!==u?u:t.Message)&&void 0!==c?c:"Unknown error",i=new Error(r),[2,Object.assign(i,{name:n,$metadata:al(e)})]}}))}))},dl=function(e){return ul(void 0,void 0,void 0,(function(){var t;return cl(this,(function(n){switch(n.label){case 0:if(!e.body)throw new Error("Missing response payload");return[4,e.body.json()];case 1:return t=n.sent(),[2,Object.assign(t,{$metadata:al(e)})]}}))}))},fl=rl(il,[function(){return function(e,t){return function(t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(n){return t.headers["cache-control"]="no-store",[2,e(t)]}))}))}}}]),hl={service:"cognito-identity",endpointResolver:function(e){var t=e.region;return{url:new URL("https://cognito-identity.".concat(t,".").concat(qc(t)))}},retryDecider:(Gc=ll,function(e,t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var n,r,i,o;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(a){switch(a.label){case 0:return null==t?[3,1]:(r=t,[3,3]);case 1:return[4,Gc(e)];case 2:r=a.sent(),a.label=3;case 3:return n=(null!==(o=r)&&void 0!==o?o:{}).name,i=null==e?void 0:e.statusCode,[2,tl(t)||el(i,n)||Zc(n)||nl(i,n)]}}))}))}),computeDelay:function(e){var t=tt(3e5)(e);return!1===t?3e5:t},userAgentValue:Ue()};xe((function(){hl.userAgentValue=Ue()}));var pl=function(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.".concat(e)}},vl=function(e,t,n){return{headers:t,url:e.url,body:n,method:"POST"}},gl=function(){return(gl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ml=function(e,t,n,r){return function(i,o){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var a,s,u,c;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(l){switch(l.label){case 0:return[4,(a=gl(gl({},r),i)).endpointResolver(a,o)];case 1:return s=l.sent(),[4,t(o,s)];case 2:return u=l.sent(),[4,e(u,gl({},a))];case 3:return c=l.sent(),[4,n(c)];case 4:return[2,l.sent()]}}))}))}},yl=ml(fl,(function(e,t){var n=pl("GetId"),r=JSON.stringify(e);return vl(t,n,r)}),(function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(t){switch(t.label){case 0:return e.statusCode>=300?[4,ll(e)]:[3,2];case 1:throw t.sent();case 2:return[4,dl(e)];case 3:return[2,{IdentityId:t.sent().IdentityId,$metadata:al(e)}]}}))}))}),hl),wl=function(e){return void 0===e&&(e={}),{AccessKeyId:e.AccessKeyId,SecretKey:e.SecretKey,SessionToken:e.SessionToken,Expiration:new Date(1e3*e.Expiration)}},bl=ml(fl,(function(e,t){var n=pl("GetCredentialsForIdentity"),r=JSON.stringify(e);return vl(t,n,r)}),(function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var t;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(n){switch(n.label){case 0:return e.statusCode>=300?[4,ll(e)]:[3,2];case 1:throw n.sent();case 2:return[4,dl(e)];case 3:return[2,{IdentityId:(t=n.sent()).IdentityId,Credentials:wl(t.Credentials),$metadata:al(e)}]}}))}))}),hl),Sl=function(){return(Sl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_l=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},El=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},Al=new ve("Credentials"),Cl="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",kl=new(function(){function e(e){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(e),this._refreshHandlers.google=Mc.refreshGoogleToken,this._refreshHandlers.facebook=Rc.refreshFacebookToken}return e.prototype.getModuleName=function(){return"Credentials"},e.prototype.getCredSource=function(){return this._credentials_source},e.prototype.configure=function(e){if(!e)return this._config||{};this._config=Object.assign({},this._config,e);var t=this._config.refreshHandlers;return t&&(this._refreshHandlers=Sl(Sl({},this._refreshHandlers),t)),this._storage=this._config.storage,this._storage||(this._storage=(new jc).getStorage()),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),je.dispatch("core",{event:"credentials_configured",data:null,message:"Credentials has been configured successfully"},"Credentials",Cl),this._config},e.prototype.get=function(){return Al.debug("getting credentials"),this._pickupCredentials()},e.prototype._getCognitoIdentityIdStorageKey=function(e){return"".concat("CognitoIdentityId-").concat(e)},e.prototype._pickupCredentials=function(){return Al.debug("picking up credentials"),this._gettingCredPromise&&this._gettingCredPromise.isPending()?Al.debug("getting old cred promise"):(Al.debug("getting new cred promise"),this._gettingCredPromise=function(e){if(e.isResolved)return e;var t=!0,n=!1,r=!1,i=e.then((function(e){return r=!0,t=!1,e}),(function(e){throw n=!0,t=!1,e}));return i.isFullfilled=function(){return r},i.isPending=function(){return t},i.isRejected=function(){return n},i}(this._keepAlive())),this._gettingCredPromise},e.prototype._keepAlive=function(){return _l(this,void 0,void 0,(function(){var e,t,n,r,i,o,a;return El(this,(function(s){switch(s.label){case 0:if(Al.debug("checking if credentials exists and not expired"),(e=this._credentials)&&!this._isExpired(e)&&!this._isPastTTL())return Al.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(e)];if(Al.debug("need to get a new credential or refresh the existing one"),t=this.Auth,!(n=void 0===t?me.Auth:t)||"function"!=typeof n.currentUserCredentials)return[2,this._setCredentialsForGuest()];if(this._isExpired(e)||!this._isPastTTL())return[3,6];Al.debug("ttl has passed but token is not yet expired"),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,n.currentUserPoolUser()];case 2:return r=s.sent(),[4,n.currentSession()];case 3:return i=s.sent(),o=i.refreshToken,[4,new Promise((function(e,t){r.refreshSession(o,(function(n,r){return n?t(n):e(r)}))}))];case 4:return s.sent(),[3,6];case 5:return a=s.sent(),Al.debug("Error attempting to refreshing the session",a),[3,6];case 6:return[2,n.currentUserCredentials()]}}))}))},e.prototype.refreshFederatedToken=function(e){Al.debug("Getting federated credentials");var t=e.provider,n=e.user,r=e.token,i=e.identity_id,o=e.expires_at;o=1970===new Date(o).getFullYear()?1e3*o:o;var a=this;return Al.debug("checking if federated jwt token expired"),o>(new Date).getTime()?(Al.debug("token not expired"),this._setCredentialsFromFederation({provider:t,token:r,user:n,identity_id:i,expires_at:o})):a._refreshHandlers[t]&&"function"==typeof a._refreshHandlers[t]?(Al.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:a._refreshHandlers[t],provider:t,user:n})):(Al.debug("no refresh handler for provider:",t),this.clear(),Promise.reject("no refresh handler for provider"))},e.prototype._providerRefreshWithRetry=function(e){var t=this,n=e.refreshHandler,r=e.provider,i=e.user;return function(e,t,n,r){return void 0===n&&(n=3e5),function(e,t,n,r){return Je(this,void 0,void 0,(function(){var i=this;return Ye(this,(function(o){if("function"!=typeof e)throw Error("functionToRetry must be a function");return[2,new Promise((function(o,a){return Je(i,void 0,void 0,(function(){var i,s,u,c,l,d,f;return Ye(this,(function(h){switch(h.label){case 0:i=0,s=!1,c=function(){},r&&r.then((function(){s=!0,clearTimeout(u),c()})),d=function(){var r,d,f,h;return Ye(this,(function(p){switch(p.label){case 0:i++,Xe.debug("".concat(e.name," attempt #").concat(i," with this vars: ").concat(JSON.stringify(t))),p.label=1;case 1:return p.trys.push([1,3,,7]),r={},d=o,[4,e.apply(void 0,Qe([],Ze(t),!1))];case 2:return[2,(r.value=d.apply(void 0,[p.sent()]),r)];case 3:return f=p.sent(),l=f,Xe.debug("error on ".concat(e.name),f),(v=f)&&v.nonRetryable?(Xe.debug("".concat(e.name," non retryable error"),f),[2,{value:a(f)}]):(h=n(i,t,f),Xe.debug("".concat(e.name," retrying in ").concat(h," ms")),!1===h||s?[2,{value:a(f)}]:[3,4]);case 4:return[4,new Promise((function(e){c=e,u=setTimeout(c,h)}))];case 5:p.sent(),p.label=6;case 6:return[3,7];case 7:return[2]}var v}))},h.label=1;case 1:return s?[3,3]:[5,d()];case 2:return"object"===g(f=h.sent())?[2,f.value]:[3,1];case 3:return a(l),[2]}}))}))}))]}))}))}(e,t,tt(n),r)}(n,[],1e4).then((function(e){return Al.debug("refresh federated token sucessfully",e),t._setCredentialsFromFederation({provider:r,token:e.token,user:i,identity_id:e.identity_id,expires_at:e.expires_at})})).catch((function(e){return"string"==typeof e&&0===e.toLowerCase().lastIndexOf("network error",e.length)||t.clear(),Al.debug("refresh federated token failed",e),Promise.reject("refreshing federation token failed: "+e)}))},e.prototype._isExpired=function(e){if(!e)return Al.debug("no credentials for expiration check"),!0;Al.debug("are these credentials expired?",e);var t=Date.now();return e.expiration.getTime()<=t},e.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},e.prototype._setCredentialsForGuest=function(){var e;return _l(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l=this;return El(this,(function(d){switch(d.label){case 0:return Al.debug("setting credentials for guest"),(null===(e=this._config)||void 0===e?void 0:e.identityPoolId)||(this._config=Object.assign({},this._config,on(this._config||{}).Auth)),t=this._config,n=t.identityPoolId,r=t.region,i=t.mandatorySignIn,o=t.identityPoolRegion,i?[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")]:n?o||r?(s=this,[4,this._getGuestIdentityId()]):(Al.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")]):(Al.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")]);case 1:return a=s._identityId=d.sent(),u={region:null!=o?o:r},c=function(){return _l(l,void 0,void 0,(function(){var e,t;return El(this,(function(r){switch(r.label){case 0:return a?[3,2]:[4,yl(u,{IdentityPoolId:n})];case 1:e=r.sent().IdentityId,this._identityId=e,r.label=2;case 2:return[4,bl(u,{IdentityId:this._identityId})];case 3:return t=r.sent().Credentials,[2,{identityId:this._identityId,accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretKey,sessionToken:t.SessionToken,expiration:t.Expiration}]}}))}))}().catch((function(e){return _l(l,void 0,void 0,(function(){return El(this,(function(t){throw e}))}))})),[2,this._loadCredentials(c,"guest",!1,null).then((function(e){return e})).catch((function(e){return _l(l,void 0,void 0,(function(){var t=this;return El(this,(function(r){switch(r.label){case 0:return"ResourceNotFoundException"!==e.name||e.message!=="Identity '".concat(a,"' not found.")?[3,2]:(Al.debug("Failed to load guest credentials"),[4,this._removeGuestIdentityId()]);case 1:return r.sent(),c=function(){return _l(t,void 0,void 0,(function(){var e,t;return El(this,(function(r){switch(r.label){case 0:return[4,yl(u,{IdentityPoolId:n})];case 1:return e=r.sent().IdentityId,this._identityId=e,[4,bl(u,{IdentityId:e})];case 2:return t=r.sent().Credentials,[2,{identityId:e,accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretKey,sessionToken:t.SessionToken,expiration:t.Expiration}]}}))}))}().catch((function(e){return _l(t,void 0,void 0,(function(){return El(this,(function(t){throw e}))}))})),[2,this._loadCredentials(c,"guest",!1,null)];case 2:return[2,e]}}))}))}))]}}))}))},e.prototype._setCredentialsFromFederation=function(e){var t=this,n=e.provider,r=e.token,i=e.identity_id,o={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"}[n]||n;if(!o)return Promise.reject("You must specify a federated provider");var a={};a[o]=r;var s=this._config,u=s.identityPoolId,c=s.region,l=s.identityPoolRegion;if(!u)return Al.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!l&&!c)return Al.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var d={region:null!=l?l:c},f=_l(t,void 0,void 0,(function(){var e,t;return El(this,(function(n){switch(n.label){case 0:return i?[3,2]:[4,yl(d,{IdentityPoolId:u,Logins:a})];case 1:e=n.sent().IdentityId,i=e,n.label=2;case 2:return[4,bl(d,{IdentityId:i,Logins:a})];case 3:return t=n.sent().Credentials,[2,{identityId:i,accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretKey,sessionToken:t.SessionToken,expiration:t.Expiration}]}}))})).catch((function(e){return _l(t,void 0,void 0,(function(){return El(this,(function(t){throw e}))}))}));return this._loadCredentials(f,"federated",!0,e)},e.prototype._setCredentialsFromSession=function(e){var t=this;Al.debug("set credentials from session");var n=e.getIdToken().getJwtToken(),r=this._config,i=r.region,o=r.userPoolId,a=r.identityPoolId,s=r.identityPoolRegion;if(!a)return Al.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!s&&!i)return Al.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var u={};u["cognito-idp."+i+".amazonaws.com/"+o]=n;var c={region:null!=s?s:i},l=_l(t,void 0,void 0,(function(){var e,t,n,r,i,o,s,l,d,f;return El(this,(function(h){switch(h.label){case 0:return[4,this._getGuestIdentityId()];case 1:return(e=h.sent())?[3,3]:[4,yl(c,{IdentityPoolId:a,Logins:u})];case 2:n=h.sent().IdentityId,t=n,h.label=3;case 3:return[4,bl(c,{IdentityId:e||t,Logins:u})];case 4:return r=h.sent(),i=r.Credentials,o=i.AccessKeyId,s=i.Expiration,l=i.SecretKey,d=i.SessionToken,f=r.IdentityId,this._identityId=f,e?(Al.debug("The guest identity ".concat(e," has been successfully linked to the logins")),e===f&&Al.debug("The guest identity ".concat(e," has become the primary identity")),[4,this._removeGuestIdentityId()]):[3,6];case 5:h.sent(),h.label=6;case 6:return[2,{accessKeyId:o,secretAccessKey:l,sessionToken:d,expiration:s,identityId:f}]}}))})).catch((function(e){return _l(t,void 0,void 0,(function(){return El(this,(function(t){throw e}))}))}));return this._loadCredentials(l,"userPool",!0,null)},e.prototype._loadCredentials=function(e,t,n,r){var i=this,o=this;return new Promise((function(a,s){e.then((function(e){return _l(i,void 0,void 0,(function(){var i,s,u,c,l;return El(this,(function(d){switch(d.label){case 0:if(Al.debug("Load credentials successfully",e),this._identityId&&!e.identityId&&(e.identityId=this._identityId),o._credentials=e,o._credentials.authenticated=n,o._credentials_source=t,o._nextCredentialsRefresh=(new Date).getTime()+3e6,"federated"===t){i=Object.assign({id:this._credentials.identityId},r.user),s=r.provider,u=r.token,c=r.expires_at,l=r.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:s,token:u,user:i,expires_at:c,identity_id:l}))}catch(e){Al.debug("Failed to put federated info into auth storage",e)}}return"guest"!==t?[3,2]:[4,this._setGuestIdentityId(e.identityId)];case 1:d.sent(),d.label=2;case 2:return a(o._credentials),[2]}}))}))})).catch((function(t){if(t)return Al.debug("Failed to load credentials",e),Al.debug("Error loading credentials",t),void s(t)}))}))},e.prototype.set=function(e,t){return"session"===t?this._setCredentialsFromSession(e):"federation"===t?this._setCredentialsFromFederation(e):"guest"===t?this._setCredentialsForGuest():(Al.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},e.prototype.clear=function(){return _l(this,void 0,void 0,(function(){return El(this,(function(e){return this._credentials=null,this._credentials_source=null,Al.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]}))}))},e.prototype._getGuestIdentityId=function(){return _l(this,void 0,void 0,(function(){var e,t;return El(this,(function(n){switch(n.label){case 0:e=this._config.identityPoolId,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._storageSync];case 2:return n.sent(),[2,this._storage.getItem(this._getCognitoIdentityIdStorageKey(e))];case 3:return t=n.sent(),Al.debug("Failed to get the cached guest identityId",t),[3,4];case 4:return[2]}}))}))},e.prototype._setGuestIdentityId=function(e){return _l(this,void 0,void 0,(function(){var t,n;return El(this,(function(r){switch(r.label){case 0:t=this._config.identityPoolId,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),this._storage.setItem(this._getCognitoIdentityIdStorageKey(t),e),[3,4];case 3:return n=r.sent(),Al.debug("Failed to cache guest identityId",n),[3,4];case 4:return[2]}}))}))},e.prototype._removeGuestIdentityId=function(){return _l(this,void 0,void 0,(function(){var e;return El(this,(function(t){return e=this._config.identityPoolId,Al.debug("removing ".concat(this._getCognitoIdentityIdStorageKey(e)," from storage")),this._storage.removeItem(this._getCognitoIdentityIdStorageKey(e)),[2]}))}))},e.prototype.shear=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e}())(null);me.register(kl),function(){function e(){this._logger=new ve("ServiceWorker")}Object.defineProperty(e.prototype,"serviceWorker",{get:function(){return this._serviceWorker},enumerable:!1,configurable:!0}),e.prototype.register=function(e,t){var n=this;return void 0===e&&(e="/service-worker.js"),void 0===t&&(t="/"),this._logger.debug("registering ".concat(e)),this._logger.debug("registering service worker with scope ".concat(t)),new Promise((function(r,i){if(!navigator||!("serviceWorker"in navigator))return i(new Error("Service Worker not available"));navigator.serviceWorker.register(e,{scope:t}).then((function(e){return e.installing?n._serviceWorker=e.installing:e.waiting?n._serviceWorker=e.waiting:e.active&&(n._serviceWorker=e.active),n._registration=e,n._setupListeners(),n._logger.debug("Service Worker Registration Success: ".concat(e)),r(e)})).catch((function(e){return n._logger.debug("Service Worker Registration Failed ".concat(e)),i(e)}))}))},e.prototype.enablePush=function(e){var t=this;if(!this._registration)throw new Error("Service Worker not registered");return this._publicKey=e,new Promise((function(n,r){if(!He().isBrowser)return r(new Error("Service Worker not available"));t._registration.pushManager.getSubscription().then((function(r){if(!r)return t._logger.debug("User is NOT subscribed to push"),t._registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t._urlB64ToUint8Array(e)}).then((function(e){t._subscription=e,t._logger.debug("User subscribed: ".concat(JSON.stringify(e))),n(e)})).catch((function(e){t._logger.error(e)}));t._subscription=r,t._logger.debug("User is subscribed to push: ".concat(JSON.stringify(r))),n(r)}))}))},e.prototype._urlB64ToUint8Array=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r},e.prototype.send=function(e){this._serviceWorker&&this._serviceWorker.postMessage("object"===g(e)?JSON.stringify(e):e)},e.prototype._setupListeners=function(){var e=this;this._serviceWorker.addEventListener("statechange",(function(t){var n=e._serviceWorker.state;e._logger.debug("ServiceWorker statechange: ".concat(n)),me.Analytics&&"function"==typeof me.Analytics.record&&me.Analytics.record({name:"ServiceWorker",attributes:{state:n}})})),this._serviceWorker.addEventListener("message",(function(t){e._logger.debug("ServiceWorker message event: ".concat(t))}))}}();
/*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   */
var Pl=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},r=t||{},i=e.split(";"),o=r.decode||Il,a=0;a<i.length;a++){var s=i[a],u=s.indexOf("=");if(!(u<0)){var c=s.substring(0,u).trim();if(null==n[c]){var l=s.substring(u+1,s.length).trim();'"'===l[0]&&(l=l.slice(1,-1)),n[c]=Ul(l,o)}}}return n},xl=function(e,t,n){var r=n||{},i=r.encode||Tl;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!Ol.test(e))throw new TypeError("argument name is invalid");var o=i(t);if(o&&!Ol.test(o))throw new TypeError("argument val is invalid");var a=e+"="+o;if(null!=r.maxAge){var s=r.maxAge-0;if(isNaN(s)||!isFinite(s))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(s)}if(r.domain){if(!Ol.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain="+r.domain}if(r.path){if(!Ol.test(r.path))throw new TypeError("option path is invalid");a+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a},Il=decodeURIComponent,Tl=encodeURIComponent,Ol=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Ul(e,t){try{return t(e)}catch(t){return e}}function Nl(e,t){void 0===t&&(t={});var n=function(e){return e&&"j"===e[0]&&":"===e[1]?e.substr(2):e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(n,t.doNotParse))try{return JSON.parse(n)}catch(e){}return e}var Ml=function(){return(Ml=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Rl=function(){function e(e,t){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"==typeof e?Pl(e,t):"object"===g(e)&&null!==e?e:{}}(e,t),new Promise((function(){n.HAS_DOCUMENT_COOKIE="object"===("undefined"==typeof document?"undefined":g(document))&&"string"==typeof document.cookie})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=Pl(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,n){return void 0===t&&(t={}),this._updateBrowserValues(n),Nl(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var n={};for(var r in this.cookies)n[r]=Nl(this.cookies[r],e);return n},e.prototype.set=function(e,t,n){var r;"object"===g(t)&&(t=JSON.stringify(t)),this.cookies=Ml(Ml({},this.cookies),((r={})[e]=t,r)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=xl(e,t,n)),this._emitChange({name:e,value:t,options:n})},e.prototype.remove=function(e,t){var n=t=Ml(Ml({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=Ml({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=xl(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}(),Ll=function(){return(Ll=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Fl=He().isBrowser,jl=function(){function e(e){void 0===e&&(e={}),this.cookies=new Rl,this.store=Fl?window.localStorage:Object.create(null),this.cookies=e.req?new Rl(e.req.headers.cookie):new Rl,Object.assign(this.store,this.cookies.getAll())}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.entries(this.store).length},enumerable:!1,configurable:!0}),e.prototype.clear=function(){var e=this;Array.from(new Array(this.length)).map((function(t,n){return e.key(n)})).forEach((function(t){return e.removeItem(t)}))},e.prototype.getItem=function(e){return this.getLocalItem(e)},e.prototype.getLocalItem=function(e){return Object.prototype.hasOwnProperty.call(this.store,e)?this.store[e]:null},e.prototype.getUniversalItem=function(e){return this.cookies.get(e)},e.prototype.key=function(e){return Object.keys(this.store)[e]},e.prototype.removeItem=function(e){this.removeLocalItem(e),this.removeUniversalItem(e)},e.prototype.removeLocalItem=function(e){delete this.store[e]},e.prototype.removeUniversalItem=function(e){this.cookies.remove(e,{path:"/"})},e.prototype.setItem=function(e,t){this.setLocalItem(e,t);var n=e.split(".").pop();["LastAuthUser","accessToken","refreshToken","idToken"].includes(null!=n?n:"")&&this.setUniversalItem(e,t,{expires:new Date(Date.now()+31536e6)})},e.prototype.setLocalItem=function(e,t){this.store[e]=t},e.prototype.setUniversalItem=function(e,t,n){void 0===n&&(n={}),this.cookies.set(e,t,Ll(Ll({},n),{path:"/",sameSite:!0,secure:!Fl||"localhost"!==window.location.hostname}))},e}();Oe.userAgent;for(
/*!
   * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
   * SPDX-License-Identifier: Apache-2.0
   */
var Dl=function(){function e(e){var t=e||{},n=t.ValidationData,r=t.Username,i=t.Password,o=t.AuthParameters,a=t.ClientMetadata;this.validationData=n||{},this.authParameters=o||{},this.clientMetadata=a||{},this.username=r,this.password=i}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}(),zl={},ql={byteLength:function(e){var t=Hl(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=Hl(e),i=r[0],o=r[1],a=new $l(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=Gl[e.charCodeAt(n)]<<18|Gl[e.charCodeAt(n+1)]<<12|Gl[e.charCodeAt(n+2)]<<6|Gl[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;return 2===o&&(t=Gl[e.charCodeAt(n)]<<2|Gl[e.charCodeAt(n+1)]>>4,a[s++]=255&t),1===o&&(t=Gl[e.charCodeAt(n)]<<10|Gl[e.charCodeAt(n+1)]<<4|Gl[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t),a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(Kl(e,a,a+o>s?s:a+o));return 1===r?(t=e[n-1],i.push(Bl[t>>2]+Bl[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(Bl[t>>10]+Bl[t>>4&63]+Bl[t<<2&63]+"=")),i.join("")}},Bl=[],Gl=[],$l="undefined"!=typeof Uint8Array?Uint8Array:Array,Wl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vl=0;Vl<64;++Vl)Bl[Vl]=Wl[Vl],Gl[Wl.charCodeAt(Vl)]=Vl;function Hl(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function Kl(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(Bl[(i=r)>>18&63]+Bl[i>>12&63]+Bl[i>>6&63]+Bl[63&i]);return o.join("")}Gl["-".charCodeAt(0)]=62,Gl["_".charCodeAt(0)]=63;var Jl,Yl={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},write:function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(a++,u/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*u-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+h]=255&a,h+=p,a/=256,c-=8);e[n+h-p]|=128*v}},Zl={}.toString,Ql=Array.isArray||function(e){return"[object Array]"==Zl.call(e)};if(
/*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <http://feross.org>
   * @license  MIT
   */
function(e){var t=ql,n=Yl,r=Ql;function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=a.prototype:(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return s(this,e,t,n)}function s(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),a.TYPED_ARRAY_SUPPORT?(e=t).__proto__=a.prototype:e=l(e,t),e}(e,t,n,i):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(t,n),i=(e=o(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(a.isBuffer(t)){var n=0|d(t.length);return 0===(e=o(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?o(e,0):l(e,t);if("Buffer"===t.type&&r(t.data))return l(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t){if(u(t),e=o(e,t<0?0:0|d(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t){var n=t.length<0?0:0|d(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function f(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return D(e).length;t=(""+t).toLowerCase(),r=!0}}function h(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var d=!0,f=0;f<u;f++)if(c(e,o+f)!==c(t,f)){d=!1;break}if(d)return o}return-1}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function y(e,t,n,r){return q(D(t,e.length-n),e,n,r)}function w(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return w(e,t,n,r)}function S(e,t,n,r){return q(z(t),e,n,r)}function _(e,t,n,r){return q(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function E(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,c=e[i],l=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}e.Buffer=a,e.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==nt.TYPED_ARRAY_SUPPORT?nt.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=i(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,n){return s(null,e,t,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,n){return function(e,t,n,r){return u(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}(null,e,t,n)},a.allocUnsafe=function(e){return c(null,e)},a.allocUnsafeSlow=function(e){return c(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!r(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=a.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var s=e[n];if(!a.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):h.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(e,t,n,r,i){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),u=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),d=0;d<u;++d)if(c[d]!==l[d]){o=c[d],s=l[d];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function x(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=j(e[o]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function T(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function U(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function M(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,r,i,o){return o||M(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function L(e,t,r,i,o){return o||M(e,0,r,8),n.write(e,t,r,i,52,8),r+8}a.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),a.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=a.prototype;else{var i=t-e;n=new a(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},a.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return t||T(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||T(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||T(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){t||T(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||T(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||T(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||T(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||T(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||T(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:D(new a(e,r).toString()),u=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function D(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(e){return t.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}(zl),"undefined"!=typeof window&&window.crypto&&(Jl=window.crypto),!Jl&&"undefined"!=typeof window&&window.msCrypto&&(Jl=window.msCrypto),!Jl&&"undefined"!=typeof global&&global.crypto&&(Jl=global.crypto),!Jl&&"function"==typeof require)try{Jl=require("crypto")}catch(e){}function Xl(){if(Jl){if("function"==typeof Jl.getRandomValues)try{return Jl.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof Jl.randomBytes)try{return Jl.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}var ed,td=function(){function e(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length}var t=e.prototype;return t.random=function(t){for(var n=[],r=0;r<t;r+=4)n.push(Xl());return new e(n,t)},t.toString=function(){return function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")}(this)},e}();function nd(e,t){null!=e&&this.fromString(e,t)}function rd(){return new nd(null)}var id="undefined"!=typeof navigator;id&&"Microsoft Internet Explorer"==navigator.appName?(nd.prototype.am=function(e,t,n,r,i,o){for(var a=32767&t,s=t>>15;--o>=0;){var u=32767&this[e],c=this[e++]>>15,l=s*u+c*a;i=((u=a*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+s*c+(i>>>30),n[r++]=1073741823&u}return i},ed=30):id&&"Netscape"!=navigator.appName?(nd.prototype.am=function(e,t,n,r,i,o){for(;--o>=0;){var a=t*this[e++]+n[r]+i;i=Math.floor(a/67108864),n[r++]=67108863&a}return i},ed=26):(nd.prototype.am=function(e,t,n,r,i,o){for(var a=16383&t,s=t>>14;--o>=0;){var u=16383&this[e],c=this[e++]>>14,l=s*u+c*a;i=((u=a*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+s*c,n[r++]=268435455&u}return i},ed=28),nd.prototype.DB=ed,nd.prototype.DM=(1<<ed)-1,nd.prototype.DV=1<<ed,nd.prototype.FV=Math.pow(2,52),nd.prototype.F1=52-ed,nd.prototype.F2=2*ed-52;var od,ad,sd=new Array;for(od="0".charCodeAt(0),ad=0;ad<=9;++ad)sd[od++]=ad;for(od="a".charCodeAt(0),ad=10;ad<36;++ad)sd[od++]=ad;for(od="A".charCodeAt(0),ad=10;ad<36;++ad)sd[od++]=ad;function ud(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function cd(e,t){var n=sd[e.charCodeAt(t)];return null==n?-1:n}function ld(e){var t=rd();return t.fromInt(e),t}function dd(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function fd(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}
/*!
   * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
   * SPDX-License-Identifier: Apache-2.0
   */function hd(e){return zl.Buffer.from((new td).random(e).toString(),"hex")}fd.prototype.convert=function(e){var t=rd();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(nd.ZERO)>0&&this.m.subTo(t,t),t},fd.prototype.revert=function(e){var t=rd();return e.copyTo(t),this.reduce(t),t},fd.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},fd.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},fd.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},nd.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},nd.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},nd.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;--r>=0;){var a=cd(e,r);a<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=a:o+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=n)>=this.DB&&(o-=this.DB))}this.clamp(),i&&nd.ZERO.subTo(this,this)},nd.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},nd.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},nd.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},nd.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,o=(1<<i)-1,a=Math.floor(e/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>i|s,s=(this[n]&o)<<r;for(n=a-1;n>=0;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()},nd.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&o)<<i,t[a-n]=this[a]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},nd.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},nd.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&nd.ZERO.subTo(t,t)},nd.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},nd.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=rd());var o=rd(),a=this.s,s=e.s,u=this.DB-dd(r[r.t-1]);u>0?(r.lShiftTo(u,o),i.lShiftTo(u,n)):(r.copyTo(o),i.copyTo(n));var c=o.t,l=o[c-1];if(0!=l){var d=l*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),f=this.FV/d,h=(1<<this.F1)/d,p=1<<this.F2,v=n.t,g=v-c,m=null==t?rd():t;for(o.dlShiftTo(g,m),n.compareTo(m)>=0&&(n[n.t++]=1,n.subTo(m,n)),nd.ONE.dlShiftTo(c,m),m.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--g>=0;){var y=n[--v]==l?this.DM:Math.floor(n[v]*f+(n[v-1]+p)*h);if((n[v]+=o.am(0,y,n,g,0,c))<y)for(o.dlShiftTo(g,m),n.subTo(m,n);n[v]<--y;)n.subTo(m,n)}null!=t&&(n.drShiftTo(c,t),a!=s&&nd.ZERO.subTo(t,t)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),a<0&&nd.ZERO.subTo(n,n)}}},nd.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},nd.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},nd.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,i=!1,o="",a=this.t,s=this.DB-a*this.DB%t;if(a-- >0)for(s<this.DB&&(n=this[a]>>s)>0&&(i=!0,o=ud(n));a>=0;)s<t?(n=(this[a]&(1<<s)-1)<<t-s,n|=this[--a]>>(s+=this.DB-t)):(n=this[a]>>(s-=t)&r,s<=0&&(s+=this.DB,--a)),n>0&&(i=!0),i&&(o+=ud(n));return i?o:"0"},nd.prototype.negate=function(){var e=rd();return nd.ZERO.subTo(this,e),e},nd.prototype.abs=function(){return this.s<0?this.negate():this},nd.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},nd.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+dd(this[this.t-1]^this.s&this.DM)},nd.prototype.mod=function(e){var t=rd();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(nd.ZERO)>0&&e.subTo(t,t),t},nd.prototype.equals=function(e){return 0==this.compareTo(e)},nd.prototype.add=function(e){var t=rd();return this.addTo(e,t),t},nd.prototype.subtract=function(e){var t=rd();return this.subTo(e,t),t},nd.prototype.multiply=function(e){var t=rd();return this.multiplyTo(e,t),t},nd.prototype.divide=function(e){var t=rd();return this.divRemTo(e,t,null),t},nd.prototype.modPow=function(e,t,n){var r,i=e.bitLength(),o=ld(1),a=new fd(t);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6;var s=new Array,u=3,c=r-1,l=(1<<r)-1;if(s[1]=a.convert(this),r>1){var d=rd();for(a.sqrTo(s[1],d);u<=l;)s[u]=rd(),a.mulTo(d,s[u-2],s[u]),u+=2}var f,h,p=e.t-1,v=!0,g=rd();for(i=dd(e[p])-1;p>=0;){for(i>=c?f=e[p]>>i-c&l:(f=(e[p]&(1<<i+1)-1)<<c-i,p>0&&(f|=e[p-1]>>this.DB+i-c)),u=r;0==(1&f);)f>>=1,--u;if((i-=u)<0&&(i+=this.DB,--p),v)s[f].copyTo(o),v=!1;else{for(;u>1;)a.sqrTo(o,g),a.sqrTo(g,o),u-=2;u>0?a.sqrTo(o,g):(h=o,o=g,g=h),a.mulTo(g,s[f],o)}for(;p>=0&&0==(e[p]&1<<i);)a.sqrTo(o,g),h=o,o=g,g=h,--i<0&&(i=this.DB-1,--p)}var m=a.revert(o);return n(null,m),m},nd.ZERO=ld(0),nd.ONE=ld(1);var pd=/^[89a-f]/i,vd=function(){function e(e){this.N=new nd("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new nd("2",16),this.k=new nd(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue((function(){})),this.infoBits=zl.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(e){var t=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,(function(n,r){n&&e(n,null),t.largeAValue=r,e(null,t.largeAValue)}))},t.generateRandomSmallA=function(){return new nd(hd(128).toString("hex"),16)},t.generateRandomString=function(){return hd(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();var i=""+e+t+":"+this.randomPassword,o=this.hash(i),a=hd(16).toString("hex");this.SaltToHashDevices=this.padHex(new nd(a,16)),this.g.modPow(new nd(this.hexHash(this.SaltToHashDevices+o),16),this.N,(function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)}))},t.calculateA=function(e,t){var n=this;this.g.modPow(e,this.N,(function(e,r){e&&t(e,null),r.mod(n.N).equals(nd.ZERO)&&t(new Error("Illegal paramater. A mod N cannot be 0."),null),t(null,r)}))},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new nd(this.UHexHash,16)},t.hash=function(e){var t=new Ot.Sha256;t.update(e);var n=t.digestSync(),r=zl.Buffer.from(n).toString("hex");return new Array(64-r.length).join("0")+r},t.hexHash=function(e){return this.hash(zl.Buffer.from(e,"hex"))},t.computehkdf=function(e,t){var n=zl.Buffer.concat([this.infoBits,zl.Buffer.from(String.fromCharCode(1),"utf8")]),r=new Ot.Sha256(t);r.update(e);var i=r.digestSync(),o=new Ot.Sha256(i);return o.update(n),o.digestSync().slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,r,i){var o=this;if(n.mod(this.N).equals(nd.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(nd.ZERO))throw new Error("U cannot be zero.");var a=""+this.poolName+e+":"+t,s=this.hash(a),u=new nd(this.hexHash(this.padHex(r)+s),16);this.calculateS(u,n,(function(e,t){e&&i(e,null);var n=o.computehkdf(zl.Buffer.from(o.padHex(t),"hex"),zl.Buffer.from(o.padHex(o.UValue),"hex"));i(null,n)}))},t.calculateS=function(e,t,n){var r=this;this.g.modPow(e,this.N,(function(i,o){i&&n(i,null),t.subtract(r.k.multiply(o)).modPow(r.smallAValue.add(r.UValue.multiply(e)),r.N,(function(e,t){e&&n(e,null),n(null,t.mod(r.N))}))}))},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){if(!(e instanceof nd))throw new Error("Not a BigInteger");var t=e.compareTo(nd.ZERO)<0,n=e.abs().toString(16);if(n=n.length%2!=0?"0"+n:n,n=pd.test(n)?"00"+n:n,t){var r=n.split("").map((function(e){var t=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(t)})).join("");(n=new nd(r,16).add(nd.ONE).toString(16)).toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},e}(),gd=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(zl.Buffer.from(e,"base64").toString("utf8"))}catch(e){return{}}},e}();function md(e,t){return(md=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var yd=function(e){var t,n;function r(t){var n=(void 0===t?{}:t).AccessToken;return e.call(this,n||"")||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,md(t,n),r}(gd);function wd(e,t){return(wd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var bd=function(e){var t,n;function r(t){var n=(void 0===t?{}:t).IdToken;return e.call(this,n||"")||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,wd(t,n),r}(gd),Sd=function(){function e(e){var t=(void 0===e?{}:e).RefreshToken;this.token=t||""}return e.prototype.getToken=function(){return this.token},e}(),_d="aws-amplify/5.0.4",Ed="undefined"!=typeof navigator&&"ReactNative"===navigator.product,Ad=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,i=t.AccessToken,o=t.ClockDrift;if(null==i||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=i,this.clockDrift=void 0===o?this.calculateClockDrift():o}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),Cd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],kd=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Pd=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=kd[e.getUTCDay()],n=Cd[e.getUTCMonth()],r=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var o=e.getUTCMinutes();o<10&&(o="0"+o);var a=e.getUTCSeconds();return a<10&&(a="0"+a),t+" "+n+" "+r+" "+i+":"+o+":"+a+" UTC "+e.getUTCFullYear()},e}(),xd=function(){function e(e){var t=void 0===e?{}:e,n=t.Name,r=t.Value;this.Name=n||"",this.Value=r||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),Id={},Td=function(){function e(){}return e.setItem=function(e,t){return Id[e]=t,Id[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(Id,e)?Id[e]:void 0},e.removeItem=function(e){return delete Id[e]},e.clear=function(){return Id={}},e}(),Od=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=Td}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),Ud="undefined"!=typeof navigator?Ed?"react-native":navigator.userAgent:"nodejs",Nd=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new Od).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,t){var n=this,r=e.getAuthParameters();r.USERNAME=this.username;var i=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),o={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:i};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",o,(function(e,r){if(e)return t.onFailure(e);var i=r.ChallengeName,o=r.ChallengeParameters;return"CUSTOM_CHALLENGE"===i?(n.Session=r.Session,t.customChallenge(o)):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),t.onSuccess(n.signInUserSession))}))},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(e,t){var n,r,i=this,o=new vd(this.pool.getUserPoolName()),a=new Pd,s={};null!=this.deviceKey&&(s.DEVICE_KEY=this.deviceKey),s.USERNAME=this.username,o.getLargeAValue((function(u,c){u&&t.onFailure(u),s.SRP_A=c.toString(16),"CUSTOM_AUTH"===i.authenticationFlowType&&(s.CHALLENGE_NAME="SRP_A");var l=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),d={AuthFlow:i.authenticationFlowType,ClientId:i.pool.getClientId(),AuthParameters:s,ClientMetadata:l};i.getUserContextData(i.username)&&(d.UserContextData=i.getUserContextData(i.username)),i.client.request("InitiateAuth",d,(function(s,u){if(s)return t.onFailure(s);var c=u.ChallengeParameters;i.username=c.USER_ID_FOR_SRP,i.userDataKey=i.keyPrefix+"."+i.username+".userData",n=new nd(c.SRP_B,16),r=new nd(c.SALT,16),i.getCachedDeviceKeyAndPassword(),o.getPasswordAuthenticationKey(i.username,e.getPassword(),n,r,(function(e,n){e&&t.onFailure(e);var r=a.getNowString(),s=zl.Buffer.concat([zl.Buffer.from(i.pool.getUserPoolName(),"utf8"),zl.Buffer.from(i.username,"utf8"),zl.Buffer.from(c.SECRET_BLOCK,"base64"),zl.Buffer.from(r,"utf8")]),d=new Ot.Sha256(n);d.update(s);var f=d.digestSync(),h=zl.Buffer.from(f).toString("base64"),p={};p.USERNAME=i.username,p.PASSWORD_CLAIM_SECRET_BLOCK=c.SECRET_BLOCK,p.TIMESTAMP=r,p.PASSWORD_CLAIM_SIGNATURE=h,null!=i.deviceKey&&(p.DEVICE_KEY=i.deviceKey);var v={ChallengeName:"PASSWORD_VERIFIER",ClientId:i.pool.getClientId(),ChallengeResponses:p,Session:u.Session,ClientMetadata:l};i.getUserContextData()&&(v.UserContextData=i.getUserContextData()),function e(t,n){return i.client.request("RespondToAuthChallenge",t,(function(r,o){return r&&"ResourceNotFoundException"===r.code&&-1!==r.message.toLowerCase().indexOf("device")?(p.DEVICE_KEY=null,i.deviceKey=null,i.randomPassword=null,i.deviceGroupKey=null,i.clearCachedDeviceKeyAndPassword(),e(t,n)):n(r,o)}))}(v,(function(e,n){return e?t.onFailure(e):i.authenticateUserInternal(n,o,t)}))}))}))}))},t.authenticateUserPlainUsernamePassword=function(e,t){var n=this,r={};if(r.USERNAME=this.username,r.PASSWORD=e.getPassword(),r.PASSWORD){var i=new vd(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey);var o=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),a={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:o};this.getUserContextData(this.username)&&(a.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",a,(function(e,r){return e?t.onFailure(e):n.authenticateUserInternal(r,i,t)}))}else t.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(e,t,n){var r=this,i=e.ChallengeName,o=e.ChallengeParameters;if("SMS_MFA"===i)return this.Session=e.Session,n.mfaRequired(i,o);if("SELECT_MFA_TYPE"===i)return this.Session=e.Session,n.selectMFAType(i,o);if("MFA_SETUP"===i)return this.Session=e.Session,n.mfaSetup(i,o);if("SOFTWARE_TOKEN_MFA"===i)return this.Session=e.Session,n.totpRequired(i,o);if("CUSTOM_CHALLENGE"===i)return this.Session=e.Session,n.customChallenge(o);if("NEW_PASSWORD_REQUIRED"===i){this.Session=e.Session;var a=null,s=null,u=[],c=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(o&&(a=JSON.parse(e.ChallengeParameters.userAttributes),s=JSON.parse(e.ChallengeParameters.requiredAttributes)),s)for(var l=0;l<s.length;l++)u[l]=s[l].substr(c.length);return n.newPasswordRequired(a,u)}if("DEVICE_SRP_AUTH"===i)return this.Session=e.Session,void this.getDeviceResponse(n);this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=i,this.cacheTokens();var d=e.AuthenticationResult.NewDeviceMetadata;if(null==d)return n.onSuccess(this.signInUserSession);t.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(i){if(i)return n.onFailure(i);var o={Salt:zl.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:zl.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};r.verifierDevices=o.PasswordVerifier,r.deviceGroupKey=d.DeviceGroupKey,r.randomPassword=t.getRandomPassword(),r.client.request("ConfirmDevice",{DeviceKey:d.DeviceKey,AccessToken:r.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:Ud},(function(t,i){return t?n.onFailure(t):(r.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,r.cacheDeviceKeyAndPassword(),!0===i.UserConfirmationNecessary?n.onSuccess(r.signInUserSession,i.UserConfirmationNecessary):n.onSuccess(r.signInUserSession))}))}))},t.completeNewPasswordChallenge=function(e,t,n,r){var i=this;if(!e)return n.onFailure(new Error("New password is required."));var o=new vd(this.pool.getUserPoolName()),a=o.getNewPasswordRequiredChallengeUserAttributePrefix(),s={};t&&Object.keys(t).forEach((function(e){s[a+e]=t[e]})),s.NEW_PASSWORD=e,s.USERNAME=this.username;var u={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:s,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,(function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,o,n)}))},t.getDeviceResponse=function(e,t){var n=this,r=new vd(this.deviceGroupKey),i=new Pd,o={};o.USERNAME=this.username,o.DEVICE_KEY=this.deviceKey,r.getLargeAValue((function(a,s){a&&e.onFailure(a),o.SRP_A=s.toString(16);var u={ChallengeName:"DEVICE_SRP_AUTH",ClientId:n.pool.getClientId(),ChallengeResponses:o,ClientMetadata:t,Session:n.Session};n.getUserContextData()&&(u.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",u,(function(t,o){if(t)return e.onFailure(t);var a=o.ChallengeParameters,s=new nd(a.SRP_B,16),u=new nd(a.SALT,16);r.getPasswordAuthenticationKey(n.deviceKey,n.randomPassword,s,u,(function(t,r){if(t)return e.onFailure(t);var s=i.getNowString(),u=zl.Buffer.concat([zl.Buffer.from(n.deviceGroupKey,"utf8"),zl.Buffer.from(n.deviceKey,"utf8"),zl.Buffer.from(a.SECRET_BLOCK,"base64"),zl.Buffer.from(s,"utf8")]),c=new Ot.Sha256(r);c.update(u);var l=c.digestSync(),d=zl.Buffer.from(l).toString("base64"),f={};f.USERNAME=n.username,f.PASSWORD_CLAIM_SECRET_BLOCK=a.SECRET_BLOCK,f.TIMESTAMP=s,f.PASSWORD_CLAIM_SIGNATURE=d,f.DEVICE_KEY=n.deviceKey;var h={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:f,Session:o.Session};n.getUserContextData()&&(h.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",h,(function(t,r){return t?e.onFailure(t):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),e.onSuccess(n.signInUserSession))}))}))}))}))},t.confirmRegistration=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",i,(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.sendCustomChallengeAnswer=function(e,t,n){var r=this,i={};i.USERNAME=this.username,i.ANSWER=e;var o=new vd(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);var a={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,(function(e,n){return e?t.onFailure(e):r.authenticateUserInternal(n,o,t)}))},t.sendMFACode=function(e,t,n,r){var i=this,o={};o.USERNAME=this.username,o.SMS_MFA_CODE=e;var a=n||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===a&&(o.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);var s={ChallengeName:a,ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",s,(function(e,n){if(e)return t.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return t.onSuccess(i.signInUserSession);var r=new vd(i.pool.getUserPoolName());r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(e){if(e)return t.onFailure(e);var o={Salt:zl.Buffer.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:zl.Buffer.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=o.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:Ud},(function(e,r){return e?t.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===r.UserConfirmationNecessary?t.onSuccess(i.signInUserSession,r.UserConfirmationNecessary):t.onSuccess(i.signInUserSession))}))}))}else i.getDeviceResponse(t)}))},t.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.enableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var t=[];t.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.disableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.deleteUser=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},(function(t){return t?e(t,null):(n.clearCachedUser(),e(null,"SUCCESS"))}))},t.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},(function(e,n){return e?t(e,null):r.getUserData((function(){return t(null,"SUCCESS",n)}),{bypassCache:!0})}))},t.getUserAttributes=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){if(t)return e(t,null);for(var r=[],i=0;i<n.UserAttributes.length;i++){var o={Name:n.UserAttributes[i].Name,Value:n.UserAttributes[i].Value},a=new xd(o);r.push(a)}return e(null,r)}))},t.getMFAOptions=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e(t,null):e(null,n.MFAOptions)}))},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(e){var t=this;return void 0===e&&(e={}),new Promise((function(n){var r=t.signInUserSession.getRefreshToken();r&&r.getToken()?t.refreshSession(r,n,e.clientMetadata):n()}))},t.getUserData=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var r=this.getUserDataFromCache();if(r)if(this.isFetchUserDataAndTokenRequired(t))this.fetchUserData().then((function(e){return n.refreshSessionIfPossible(t).then((function(){return e}))})).then((function(t){return e(null,t)})).catch(e);else try{return void e(null,JSON.parse(r))}catch(t){return this.clearCachedUserData(),void e(t,null)}else this.fetchUserData().then((function(t){e(null,t)})).catch(e)},t.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},t.isFetchUserDataAndTokenRequired=function(e){var t=(e||{}).bypassCache;return void 0!==t&&t},t.fetchUserData=function(){var e=this;return this.createGetUserRequest().then((function(t){return e.cacheUserData(t),t}))},t.deleteAttributes=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?t(e,null):n.getUserData((function(){return t(null,"SUCCESS")}),{bypassCache:!0})}))},t.resendConfirmationCode=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.client.request("ResendConfirmationCode",n,(function(t,n){return t?e(t,null):e(null,n)}))},t.getSession=function(e,t){if(void 0===t&&(t={}),null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=n+".idToken",i=n+".accessToken",o=n+".refreshToken",a=n+".clockDrift";if(this.storage.getItem(r)){var s=new bd({IdToken:this.storage.getItem(r)}),u=new yd({AccessToken:this.storage.getItem(i)}),c=new Sd({RefreshToken:this.storage.getItem(o)}),l=parseInt(this.storage.getItem(a),0)||0,d=new Ad({IdToken:s,AccessToken:u,RefreshToken:c,ClockDrift:l});if(d.isValid())return this.signInUserSession=d,e(null,this.signInUserSession);if(!c.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(c,e,t.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(e,t,n){var r=this,i=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(t):t,o={};o.REFRESH_TOKEN=e.getToken();var a="CognitoIdentityServiceProvider."+this.pool.getClientId(),s=a+".LastAuthUser";if(this.storage.getItem(s)){this.username=this.storage.getItem(s);var u=a+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(u),o.DEVICE_KEY=this.deviceKey}var c={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:o,ClientMetadata:n};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",c,(function(t,n){if(t)return"NotAuthorizedException"===t.code&&r.clearCachedUser(),i(t,null);if(n){var o=n.AuthenticationResult;return Object.prototype.hasOwnProperty.call(o,"RefreshToken")||(o.RefreshToken=e.getToken()),r.signInUserSession=r.getCognitoUserSession(o),r.cacheTokens(),i(null,r.signInUserSession)}}))},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+"."+this.username+".clockDrift",o=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(i,""+this.signInUserSession.getClockDrift()),this.storage.setItem(o,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(r,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(r))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+".LastAuthUser",o=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(i),this.storage.removeItem(o)},t.getCognitoUserSession=function(e){var t=new bd(e),n=new yd(e),r=new Sd(e);return new Ad({IdToken:t,AccessToken:n,RefreshToken:r})},t.forgotPassword=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",n,(function(t,n){return t?e.onFailure(t):"function"==typeof e.inputVerificationCode?e.inputVerificationCode(n):e.onSuccess(n)}))},t.confirmPassword=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",i,(function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")}))},t.getAttributeVerificationCode=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:n},(function(e,n){return e?t.onFailure(e):"function"==typeof t.inputVerificationCode?t.inputVerificationCode(n):t.onSuccess("SUCCESS")}))},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")}))},t.getDevice=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},(function(t,n){return t?e.onFailure(t):e.onSuccess(n)}))},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},(function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")}))},t.forgetDevice=function(e){var t=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(n){return t.deviceKey=null,t.deviceGroupKey=null,t.randomPassword=null,t.clearCachedDeviceKeyAndPassword(),e.onSuccess(n)}})},t.setDeviceStatusRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.setDeviceStatusNotRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));var r={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(r.PaginationToken=t),this.client.request("ListDevices",r,(function(e,t){return e?n.onFailure(e):n.onSuccess(t)}))},t.globalSignOut=function(e){var t=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(n){return n?e.onFailure(n):(t.clearCachedUser(),e.onSuccess("SUCCESS"))}))},t.signOut=function(e){var t=this;e&&"function"==typeof e?this.getSession((function(n,r){if(n)return e(n);t.revokeTokens((function(n){t.cleanClientData(),e(n)}))})):this.cleanClientData()},t.revokeTokens=function(e){if(void 0===e&&(e=function(){}),"function"!=typeof e)throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession)return e(new Error("User is not authenticated"));if(!this.signInUserSession.getAccessToken())return e(new Error("No Access token available"));var t=this.signInUserSession.getRefreshToken().getToken(),n=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(n)&&t)return this.revokeToken({token:t,callback:e});e()},t.isSessionRevocable=function(e){if(e&&"function"==typeof e.decodePayload)try{return!!e.decodePayload().origin_jti}catch(e){}return!1},t.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},t.revokeToken=function(e){var t=e.token,n=e.callback;this.client.requestWithRetry("RevokeToken",{Token:t,ClientId:this.pool.getClientId()},(function(e){if(e)return n(e);n()}))},t.sendMFASelectionAnswer=function(e,t){var n=this,r={};r.USERNAME=this.username,r.ANSWER=e;var i={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:r,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",i,(function(r,i){return r?t.onFailure(r):(n.Session=i.Session,"SMS_MFA"===e?t.mfaRequired(i.ChallengeName,i.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===e?t.totpRequired(i.ChallengeName,i.ChallengeParameters):void 0)}))},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(e){var t=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e.onFailure(t):e.associateSecretCode(n.SecretCode)})):this.client.request("AssociateSoftwareToken",{Session:this.Session},(function(n,r){return n?e.onFailure(n):(t.Session=r.Session,e.associateSecretCode(r.SecretCode))}))},t.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},(function(e,t){return e?n.onFailure(e):n.onSuccess(t)})):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},(function(e,t){if(e)return n.onFailure(e);r.Session=t.Session;var i={};i.USERNAME=r.username;var o={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:i,Session:r.Session};r.getUserContextData()&&(o.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",o,(function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))}))}))},e}();
/*!
   * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
   * SPDX-License-Identifier: Apache-2.0
   */function Md(){}Md.prototype.userAgent=_d;var Rd=function(e){Md.framework=e};function Ld(e){var t="function"==typeof Map?new Map:void 0;return(Ld=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Fd(e,arguments,Dd(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),jd(r,e)})(e)}function Fd(e,t,n){return(Fd=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&jd(i,n.prototype),i}).apply(null,arguments)}function jd(e,t){return(jd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Dd(e){return(Dd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zd=function(e){var t,n;function r(t,n,r,i){var o;return(o=e.call(this,t)||this).code=n,o.name=r,o.statusCode=i,o}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,jd(t,n),r}(Ld(Error)),qd=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";var r=(n||{}).credentials;this.fetchOptions=r?{credentials:r}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var n=this;return new Promise((function(r,i){n.request(e,t,(function(e,t){e?i(new zd(e.message,e.code,e.name,e.statusCode)):r(t)}))}))},t.requestWithRetry=function(e,t,n){var r=this;(function(e,t,n){return void 0===n&&(n=Gd),function e(t,n,r,i){if(void 0===i&&(i=1),"function"!=typeof t)throw Error("functionToRetry must be a function");return Bd(t.name+" attempt #"+i+" with args: "+JSON.stringify(n)),t.apply(void 0,n).catch((function(o){if(Bd("error on "+t.name,o),function(e){return e&&e.nonRetryable}(o))throw Bd(t.name+" non retryable error",o),o;var a=r(i,n,o);if(Bd(t.name+" retrying in "+a+" ms"),!1!==a)return new Promise((function(e){return setTimeout(e,a)})).then((function(){return e(t,n,r,i+1)}));throw o}))}(e,t,function(e){return function(t){var n=100*Math.pow(2,t)+100*Math.random();return!(n>e)&&n}}(n))}
/*!
   * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
   * SPDX-License-Identifier: Apache-2.0
   */)((function(t){return new Promise((function(n,i){r.request(e,t,(function(e,t){e?i(e):n(t)}))}))}),[t],5e3).then((function(e){return n(null,e)})).catch((function(e){return n(e)}))},t.request=function(e,t,n){var r,i,o,a={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":(r=Md.category?" "+Md.category:"",i=Md.framework?" framework/"+Md.framework:"",""+Md.prototype.userAgent+r+i),"Cache-Control":"no-store"},s=Object.assign({},this.fetchOptions,{headers:a,method:"POST",mode:"cors",body:JSON.stringify(t)});fetch(this.endpoint,s).then((function(e){return o=e,e}),(function(e){if(e instanceof TypeError)throw new Error("Network error");throw e})).then((function(e){return e.json().catch((function(){return{}}))})).then((function(e){if(o.ok)return n(null,e);var t=(e.__type||e.code).split("#").pop(),r=new Error(e.message||e.Message||null);return r.name=t,r.code=t,n(r)})).catch((function(e){if(o&&o.headers&&o.headers.get("x-amzn-errortype"))try{var t=o.headers.get("x-amzn-errortype").split(":")[0],r=new Error(o.status?o.status.toString():null);return r.code=t,r.name=t,r.statusCode=o.status,n(r)}catch(t){return n(e)}else e instanceof Error&&"Network error"===e.message&&(e.code="NetworkError");return n(e)}))},e}(),Bd=function(){};var Gd=3e5,$d=function(){function e(e,t){var n=e||{},r=n.UserPoolId,i=n.ClientId,o=n.endpoint,a=n.fetchOptions,s=n.AdvancedSecurityDataCollectionFlag;if(!r||!i)throw new Error("Both UserPoolId and ClientId are required.");if(r.length>55||!/^[\w-]+_[0-9a-zA-Z]+$/.test(r))throw new Error("Invalid UserPoolId format.");var u=r.split("_")[0];this.userPoolId=r,this.clientId=i,this.client=new qd(u,o,a),this.advancedSecurityDataCollectionFlag=!1!==s,this.storage=e.Storage||(new Od).getStorage(),t&&(this.wrapRefreshSessionCallback=t)}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},t.getClientId=function(){return this.clientId},t.signUp=function(e,t,n,r,i,o){var a=this,s={ClientId:this.clientId,Username:e,Password:t,UserAttributes:n,ValidationData:r,ClientMetadata:o};this.getUserContextData(e)&&(s.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",s,(function(t,n){if(t)return i(t,null);var r={Username:e,Pool:a,Storage:a.storage},o={user:new Nd(r),userConfirmed:n.UserConfirmed,userSub:n.UserSub,codeDeliveryDetails:n.CodeDeliveryDetails};return i(null,o)}))},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",t=this.storage.getItem(e);if(t){var n={Username:t,Pool:this,Storage:this.storage};return new Nd(n)}return null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},e}(),Wd={};!function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in o)o[u]&&(s+="; "+u,!0!==o[u]&&(s+="="+o[u].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var s=o[a].split("="),u=s.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(s[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(i[c]=u,e===c)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))},e.exports=n()}({get exports(){return Wd},set exports(e){Wd=e}});var Vd=function(){function e(e){if(void 0===e&&(e={}),e.domain&&(this.domain=e.domain),e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=e.prototype;return t.setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),Wd.set(e,t,n),Wd.get(e)},t.getItem=function(e){return Wd.get(e)},t.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),Wd.remove(e,t)},t.clear=function(){for(var e=Wd.get(),t=Object.keys(e).length,n=0;n<t;++n)this.removeItem(Object.keys(e)[n]);return{}},e}(),Hd={};
/*! https://mths.be/punycode v1.3.2 by @mathias */!function(e,t){!function(n){var r=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,o="object"==g(nt)&&nt;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var a,s,u=2147483647,c=36,l=/^xn--/,d=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,v=String.fromCharCode;function m(e){throw RangeError(h[e])}function y(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function w(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+y((e=e.replace(f,".")).split("."),t).join(".")}function b(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function S(e){return y(e,(function(e){var t="";return e>65535&&(t+=v((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+v(e)})).join("")}function _(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function E(e,t,n){var r=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;r+=c)e=p(e/35);return p(r+36*e/(e+38))}function A(e){var t,n,r,i,o,a,s,l,d,f,h,v=[],g=e.length,y=0,w=128,b=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&m("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(o=y,a=1,s=c;i>=g&&m("invalid-input"),((l=(h=e.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:c)>=c||l>p((u-y)/a))&&m("overflow"),y+=l*a,!(l<(d=s<=b?1:s>=b+26?26:s-b));s+=c)a>p(u/(f=c-d))&&m("overflow"),a*=f;b=E(y-o,t=v.length+1,0==o),p(y/t)>u-w&&m("overflow"),w+=p(y/t),y%=t,v.splice(y++,0,w)}return S(v)}function C(e){var t,n,r,i,o,a,s,l,d,f,h,g,y,w,S,A=[];for(g=(e=b(e)).length,t=128,n=0,o=72,a=0;a<g;++a)(h=e[a])<128&&A.push(v(h));for(r=i=A.length,i&&A.push("-");r<g;){for(s=u,a=0;a<g;++a)(h=e[a])>=t&&h<s&&(s=h);for(s-t>p((u-n)/(y=r+1))&&m("overflow"),n+=(s-t)*y,t=s,a=0;a<g;++a)if((h=e[a])<t&&++n>u&&m("overflow"),h==t){for(l=n,d=c;!(l<(f=d<=o?1:d>=o+26?26:d-o));d+=c)S=l-f,w=c-f,A.push(v(_(f+S%w,0))),l=p(S/w);A.push(v(_(l,0))),o=E(n,y,r==i),n=0,++r}++n,++t}return A.join("")}if(a={version:"1.3.2",ucs2:{decode:b,encode:S},decode:A,encode:C,toASCII:function(e){return w(e,(function(e){return d.test(e)?"xn--"+C(e):e}))},toUnicode:function(e){return w(e,(function(e){return l.test(e)?A(e.slice(4).toLowerCase()):e}))}},r&&i)if(e.exports==r)i.exports=a;else for(s in a)a.hasOwnProperty(s)&&(r[s]=a[s]);else n.punycode=a}(nt)}({get exports(){return Hd},set exports(e){Hd=e}},Hd);var Kd={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===g(e)&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}},Jd={};function Yd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Zd=function(e){switch(g(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};Jd.decode=Jd.parse=function(e,t,n,r){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=e.length;a>0&&s>a&&(s=a);for(var u=0;u<s;++u){var c,l,d,f,h=e[u].replace(o,"%20"),p=h.indexOf(n);p>=0?(c=h.substr(0,p),l=h.substr(p+1)):(c=h,l=""),d=decodeURIComponent(c),f=decodeURIComponent(l),Yd(i,d)?Array.isArray(i[d])?i[d].push(f):i[d]=[i[d],f]:i[d]=f}return i},Jd.encode=Jd.stringify=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===g(e)?Object.keys(e).map((function(r){var i=encodeURIComponent(Zd(r))+n;return Array.isArray(e[r])?e[r].map((function(e){return i+encodeURIComponent(Zd(e))})).join(t):i+encodeURIComponent(Zd(e[r]))})).join(t):r?encodeURIComponent(Zd(r))+n+encodeURIComponent(Zd(e)):""};var Qd=Hd,Xd=Kd,ef=gf;function tf(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var nf=/^([a-z0-9.+-]+:)/i,rf=/:[0-9]*$/,of=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,af=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),sf=["'"].concat(af),uf=["%","/","?",";","#"].concat(sf),cf=["/","?","#"],lf=/^[+a-z0-9A-Z_-]{0,63}$/,df=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ff={javascript:!0,"javascript:":!0},hf={javascript:!0,"javascript:":!0},pf={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},vf=Jd;function gf(e,t,n){if(e&&Xd.isObject(e)&&e instanceof tf)return e;var r=new tf;return r.parse(e,t,n),r}tf.prototype.parse=function(e,t,n){if(!Xd.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+g(e));var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i);o[0]=o[0].replace(/\\/g,"/");var a=e=o.join(i);if(a=a.trim(),!n&&1===e.split("#").length){var s=of.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?vf.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=nf.exec(a);if(u){var c=(u=u[0]).toLowerCase();this.protocol=c,a=a.substr(u.length)}if(n||u||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===a.substr(0,2);!l||u&&hf[u]||(a=a.substr(2),this.slashes=!0)}if(!hf[u]&&(l||u&&!pf[u])){for(var d,f,h=-1,p=0;p<cf.length;p++)-1!==(v=a.indexOf(cf[p]))&&(-1===h||v<h)&&(h=v);for(-1!==(f=-1===h?a.lastIndexOf("@"):a.lastIndexOf("@",h))&&(d=a.slice(0,f),a=a.slice(f+1),this.auth=decodeURIComponent(d)),h=-1,p=0;p<uf.length;p++){var v;-1!==(v=a.indexOf(uf[p]))&&(-1===h||v<h)&&(h=v)}-1===h&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var y=this.hostname.split(/\./),w=(p=0,y.length);p<w;p++){var b=y[p];if(b&&!b.match(lf)){for(var S="",_=0,E=b.length;_<E;_++)b.charCodeAt(_)>127?S+="x":S+=b[_];if(!S.match(lf)){var A=y.slice(0,p),C=y.slice(p+1),k=b.match(df);k&&(A.push(k[1]),C.unshift(k[2])),C.length&&(a="/"+C.join(".")+a),this.hostname=A.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=Qd.toASCII(this.hostname));var P=this.port?":"+this.port:"",x=this.hostname||"";this.host=x+P,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!ff[c])for(p=0,w=sf.length;p<w;p++){var I=sf[p];if(-1!==a.indexOf(I)){var T=encodeURIComponent(I);T===I&&(T=escape(I)),a=a.split(I).join(T)}}var O=a.indexOf("#");-1!==O&&(this.hash=a.substr(O),a=a.slice(0,O));var U=a.indexOf("?");if(-1!==U?(this.search=a.substr(U),this.query=a.substr(U+1),t&&(this.query=vf.parse(this.query)),a=a.slice(0,U)):t&&(this.search="",this.query={}),a&&(this.pathname=a),pf[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){P=this.pathname||"";var N=this.search||"";this.path=P+N}return this.href=this.format(),this},tf.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&Xd.isObject(this.query)&&Object.keys(this.query).length&&(o=vf.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||pf[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},tf.prototype.resolve=function(e){return this.resolveObject(gf(e,!1,!0)).format()},tf.prototype.resolveObject=function(e){if(Xd.isString(e)){var t=new tf;t.parse(e,!1,!0),e=t}for(var n=new tf,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var u=a[s];"protocol"!==u&&(n[u]=e[u])}return pf[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!pf[e.protocol]){for(var c=Object.keys(e),l=0;l<c.length;l++){var d=c[l];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||hf[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var h=n.pathname||"",p=n.search||"";n.path=h+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),m=g||v||n.host&&e.pathname,y=m,w=n.pathname&&n.pathname.split("/")||[],b=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!pf[n.protocol]);if(b&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),m=m&&(""===f[0]||""===w[0])),g)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=f;else if(f.length)w||(w=[]),w.pop(),w=w.concat(f),n.search=e.search,n.query=e.query;else if(!Xd.isNullOrUndefined(e.search))return b&&(n.hostname=n.host=w.shift(),(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift())),n.search=e.search,n.query=e.query,Xd.isNull(n.pathname)&&Xd.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=w.slice(-1)[0],_=(n.host||e.host||w.length>1)&&("."===S||".."===S)||""===S,E=0,A=w.length;A>=0;A--)"."===(S=w[A])?w.splice(A,1):".."===S?(w.splice(A,1),E++):E&&(w.splice(A,1),E--);if(!m&&!y)for(;E--;E)w.unshift("..");!m||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),_&&"/"!==w.join("/").substr(-1)&&w.push("");var C,k=""===w[0]||w[0]&&"/"===w[0].charAt(0);return b&&(n.hostname=n.host=k?"":w.length?w.shift():"",(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift())),(m=m||n.host&&w.length)&&!k&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),Xd.isNull(n.pathname)&&Xd.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},tf.prototype.parseHost=function(){var e=this.host,t=rf.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var mf,yf=function(e){var t=window.open(e,"_self");return t?Promise.resolve(t):Promise.reject()},wf="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",bf=function(e,t,n){je.dispatch("auth",{event:e,data:t,message:n},"Auth",wf)},Sf=new ve("OAuth"),_f=function(){function e(e){var t=e.config,n=e.cognitoClientId,r=e.scopes,i=void 0===r?[]:r;if(this._urlOpener=t.urlOpener||yf,this._config=t,this._cognitoClientId=n,!this.isValidScopes(i))throw Error("scopes must be a String Array");this._scopes=i}return e.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))},e.prototype.oauthSignIn=function(e,t,n,r,i,o){void 0===e&&(e="code"),void 0===i&&(i=$.Cognito);var a=this._generateState(32),s=o?a+"-"+o.split("").map((function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")})).join(""):a;!function(e){window.sessionStorage.setItem("oauth_state",e)}(s);var u,c=this._generateRandom(128);u=c,window.sessionStorage.setItem("ouath_pkce_key",u);var l=this._generateChallenge(c),d=this._scopes.join(" "),f="https://"+t+"/oauth2/authorize?"+Object.entries(w(w({redirect_uri:n,response_type:e,client_id:r,identity_provider:i,scope:d,state:s},"code"===e?{code_challenge:l}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map((function(e){var t=I(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&");Sf.debug("Redirecting to "+f),this._urlOpener(f,n)},e.prototype._handleCodeFlow=function(e){return A(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l,d,f,h,p,v,g;return C(this,(function(m){switch(m.label){case 0:return t=(ef(e).query||"").split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n,r=I(t,2),i=r[0],o=r[1];return w(w({},e),((n={})[i]=o,n))}),{code:void 0}).code,n=ef(e).pathname||"/",r=ef(this._config.redirectSignIn).pathname||"/",t&&n===r?(i="https://"+this._config.domain+"/oauth2/token",bf("codeFlow",{},"Retrieving tokens from "+i),o=Y(this._config)?this._cognitoClientId:this._config.clientID,a=Y(this._config)?this._config.redirectSignIn:this._config.redirectUri,y=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),u=w({grant_type:"authorization_code",code:t,client_id:o,redirect_uri:a},(s=y)?{code_verifier:s}:{}),Sf.debug("Calling token endpoint: "+i+" with",u),c=Object.entries(u).map((function(e){var t=I(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&"),l={category:re.Auth,action:ae.FederatedSignIn},[4,fetch(i,{method:"POST",headers:(g={"Content-Type":"application/x-www-form-urlencoded"},g["x-amz-user-agent"]=Ue(l),g),body:c})]):[2];case 1:return[4,m.sent().json()];case 2:if(d=m.sent(),f=d.access_token,h=d.refresh_token,p=d.id_token,v=d.error)throw new Error(v);return[2,{accessToken:f,refreshToken:h,idToken:p}]}var y}))}))},e.prototype._handleImplicitFlow=function(e){return A(this,void 0,void 0,(function(){var t,n,r;return C(this,(function(i){return t=(ef(e).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n,r=I(t,2),i=r[0],o=r[1];return w(w({},e),((n={})[i]=o,n))}),{id_token:void 0,access_token:void 0}),n=t.id_token,r=t.access_token,bf("implicitFlow",{},"Got tokens from "+e),Sf.debug("Retrieving implicit tokens from "+e+" with"),[2,{accessToken:r,idToken:n,refreshToken:null}]}))}))},e.prototype.handleAuthResponse=function(e){return A(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return C(this,(function(u){switch(u.label){case 0:if(u.trys.push([0,5,,6]),t=e?w(w({},(ef(e).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=I(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})),(ef(e).query||"").split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=I(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})):{},n=t.error,r=t.error_description,n)throw new Error(r);return i=this._validateState(t),Sf.debug("Starting "+this._config.responseType+" flow with "+e),"code"!==this._config.responseType?[3,2]:(o=[{}],[4,this._handleCodeFlow(e)]);case 1:return[2,w.apply(void 0,[w.apply(void 0,o.concat([u.sent()])),{state:i}])];case 2:return a=[{}],[4,this._handleImplicitFlow(e)];case 3:return[2,w.apply(void 0,[w.apply(void 0,a.concat([u.sent()])),{state:i}])];case 4:return[3,6];case 5:throw s=u.sent(),Sf.debug("Error handling auth response.",s),s;case 6:return[2]}}))}))},e.prototype._validateState=function(e){if(e){var t,n=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),r=e.state;if(n&&n!==r)throw new Error("Invalid state in OAuth flow");return r}},e.prototype.signOut=function(){return A(this,void 0,void 0,(function(){var e,t,n;return C(this,(function(r){return e="https://"+this._config.domain+"/logout?",t=Y(this._config)?this._cognitoClientId:this._config.oauth.clientID,n=Y(this._config)?this._config.redirectSignOut:this._config.returnTo,e+=Object.entries({client_id:t,logout_uri:encodeURIComponent(n)}).map((function(e){var t=I(e,2);return t[0]+"="+t[1]})).join("&"),bf("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+e),Sf.debug("Signing out from "+e),[2,this._urlOpener(e,n)]}))}))},e.prototype._generateState=function(e){for(var t="",n=e;n>0;--n)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.round(61*Math.random())];return t},e.prototype._generateChallenge=function(e){var t=new Ot.Sha256;t.update(e);var n=t.digestSync(),r=zl.Buffer.from(n).toString("base64");return this._base64URL(r)},e.prototype._base64URL=function(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=66*Math.random()|0;return this._bufferToString(t)},e.prototype._bufferToString=function(e){for(var t=[],n=0;n<e.byteLength;n+=1){var r=e[n]%62;t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[r])}return t.join("")},e}();!function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in"}(mf||(mf={}));var Ef=new ve("AuthError"),Af=function(e){function t(n){var r=this,i=kf[n],o=i.message,a=i.log;return(r=e.call(this,o)||this).constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="AuthError",r.log=a||o,Ef.error(r.log),r}return y(t,e),t}(Error),Cf=function(e){function t(n){var r=e.call(this,n)||this;return r.constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="NoUserPoolError",r}return y(t,e),t}(Af),kf={noConfig:{message:mf.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of amplify packages in your node_modules.\n\t\t\t\tRefer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)\n        "},missingAuthConfig:{message:mf.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties.\n            This error is typically caused by one of the following scenarios:\n\n            1. Did you run `amplify push` after adding auth via `amplify add auth`?\n                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n\n            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.\n        "},emptyUsername:{message:mf.EMPTY_USERNAME},invalidUsername:{message:mf.INVALID_USERNAME},emptyPassword:{message:mf.EMPTY_PASSWORD},emptyCode:{message:mf.EMPTY_CODE},signUpError:{message:mf.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:mf.NO_MFA},invalidMFA:{message:mf.INVALID_MFA},emptyChallengeResponse:{message:mf.EMPTY_CHALLENGE},noUserSession:{message:mf.NO_USER_SESSION},deviceConfig:{message:mf.DEVICE_CONFIG},networkError:{message:mf.NETWORK_ERROR},autoSignInError:{message:mf.AUTOSIGNIN_ERROR},default:{message:mf.DEFAULT_MSG}},Pf=new ve("AuthClass"),xf="aws.cognito.signin.user.admin",If="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Tf=function(e,t,n){je.dispatch("auth",{event:e,data:t,message:n},"Auth",If)},Of=new(function(){function e(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.autoSignInInitiated=!1,this.inflightSessionPromise=null,this.inflightSessionPromiseCounter=0,this.Credentials=kl,this.wrapRefreshSessionCallback=function(e){return function(t,n){return n?Tf("tokenRefresh",void 0,"New token retrieved"):Tf("tokenRefresh_failure",t,"Failed to retrieve new token"),e(t,n)}},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),je.listen("auth",(function(e){switch(e.payload.event){case"verify":case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}})),Md.category="auth",Rd(Oe.framework),Oe.observeFrameworkChanges((function(){Rd(Oe.framework)}))}return e.prototype.getModuleName=function(){return"Auth"},e.prototype.configure=function(e){var t=this;if(!e)return this._config||{};Pf.debug("configure Auth");var n=Object.assign({},this._config,on(e).Auth,e);this._config=n;var r=this._config,i=r.userPoolId,o=r.userPoolWebClientId,a=r.cookieStorage,s=r.oauth,u=r.region,c=r.identityPoolId,l=r.mandatorySignIn,d=r.refreshHandlers,f=r.identityPoolRegion,h=r.clientMetadata,p=r.endpoint,v=r.storage;if(v){if(!this._isValidAuthStorage(v))throw Pf.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=v}else this._storage=a?new Vd(a):e.ssr?new jl:(new jc).getStorage();if(this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i){var g={UserPoolId:i,ClientId:o,endpoint:p};g.Storage=this._storage,this.userPool=new $d(g,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:l,region:u,userPoolId:i,identityPoolId:c,refreshHandlers:d,storage:this._storage,identityPoolRegion:f});var m=s?Y(this._config.oauth)?s:s.awsCognito:void 0;if(m){var y=Object.assign({cognitoClientId:o,UserPoolId:i,domain:m.domain,scopes:m.scope,redirectSignIn:m.redirectSignIn,redirectSignOut:m.redirectSignOut,responseType:m.responseType,Storage:this._storage,urlOpener:m.urlOpener,clientMetadata:h},m.options);this._oAuthHandler=new _f({scopes:y.scopes,config:y,cognitoClientId:y.cognitoClientId});var w={};!function(e){if(He().isBrowser&&window.location)!function(e){var n=e.url;w[n]||(w[n]=!0,t._handleAuthResponse(n))}({url:window.location.href});else if(!He().isNode)throw new Error("Not supported")}()}return Tf("configured",null,"The Auth category has been configured successfully"),this.autoSignInInitiated||"function"!=typeof this._storage.getItem||(this.isTrueStorageValue("amplify-polling-started")&&(Tf("autoSignIn_failure",null,W.AutoSignInError),this._storage.removeItem("amplify-auto-sign-in")),this._storage.removeItem("amplify-polling-started")),this._config},e.prototype.signUp=function(e){for(var t,n,r,i=this,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];if(!this.userPool)return this.rejectNoUserPool();var s,u=null,c=null,l=[],d=null,f={enabled:!1},h={},p={};if(e&&"string"==typeof e){u=e,c=o?o[0]:null;var v=o?o[1]:null,m=o?o[2]:null;v&&l.push(new xd({Name:"email",Value:v})),m&&l.push(new xd({Name:"phone_number",Value:m}))}else{if(!e||"object"!==g(e))return this.rejectAuthError(W.SignUpError);u=e.username,c=e.password,e&&e.clientMetadata?s=e.clientMetadata:this._config.clientMetadata&&(s=this._config.clientMetadata);var y=e.attributes;y&&Object.keys(y).map((function(e){l.push(new xd({Name:e,Value:y[e]}))}));var w=e.validationData;w&&(d=[],Object.keys(w).map((function(e){d.push(new xd({Name:e,Value:w[e]}))}))),(f=null!==(t=e.autoSignIn)&&void 0!==t?t:{enabled:!1}).enabled&&(this._storage.setItem("amplify-auto-sign-in","true"),h=null!==(n=f.validationData)&&void 0!==n?n:{},p=null!==(r=f.clientMetaData)&&void 0!==r?r:{})}return u?c?(Pf.debug("signUp attrs:",l),Pf.debug("signUp validation data:",d),new Promise((function(e,t){i.userPool.signUp(u,c,l,d,(function(n,r){n?(Tf("signUp_failure",n,u+" failed to signup"),t(n)):(Tf("signUp",r,u+" has signed up successfully"),f.enabled&&i.handleAutoSignIn(u,c,h,p,r),e(r))}),s)}))):this.rejectAuthError(W.EmptyPassword):this.rejectAuthError(W.EmptyUsername)},e.prototype.handleAutoSignIn=function(e,t,n,r,i){this.autoSignInInitiated=!0;var o=new Dl({Username:e,Password:t,ValidationData:n,ClientMetadata:r});i.userConfirmed?this.signInAfterUserConfirmed(o):"link"===this._config.signUpVerificationMethod?this.handleLinkAutoSignIn(o):this.handleCodeAutoSignIn(o)},e.prototype.handleCodeAutoSignIn=function(e){var t=this;je.listen("auth",(function n(r){"confirmSignUp"===r.payload.event&&t.signInAfterUserConfirmed(e,n)}))},e.prototype.handleLinkAutoSignIn=function(e){var t=this;this._storage.setItem("amplify-polling-started","true");var n=Date.now(),r=setInterval((function(){Date.now()-n>18e4?(clearInterval(r),Tf("autoSignIn_failure",null,"Please confirm your account and use your credentials to sign in."),t._storage.removeItem("amplify-auto-sign-in")):t.signInAfterUserConfirmed(e,null,r)}),5e3)},e.prototype.signInAfterUserConfirmed=function(e,t,n){return A(this,void 0,void 0,(function(){var r,i,o=this;return C(this,(function(a){switch(a.label){case 0:r=this.createCognitoUser(e.getUsername()),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r.authenticateUser(e,this.authCallbacks(r,(function(r){Tf("autoSignIn",r,e.getUsername()+" has signed in successfully"),t&&je.remove("auth",t),n&&(clearInterval(n),o._storage.removeItem("amplify-polling-started")),o._storage.removeItem("amplify-auto-sign-in")}),(function(e){Pf.error(e),o._storage.removeItem("amplify-auto-sign-in")})))];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),Pf.error(i),[3,4];case 4:return[2]}}))}))},e.prototype.confirmSignUp=function(e,t,n){var r=this;if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(W.EmptyUsername);if(!t)return this.rejectAuthError(W.EmptyCode);var i,o=this.createCognitoUser(e),a=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?i=n.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata),new Promise((function(n,s){o.confirmRegistration(t,a,(function(t,i){t?s(t):(Tf("confirmSignUp",i,e+" has been confirmed successfully"),r.isTrueStorageValue("amplify-auto-sign-in")&&!r.autoSignInInitiated&&(Tf("autoSignIn_failure",null,W.AutoSignInError),r._storage.removeItem("amplify-auto-sign-in")),n(i))}),i)}))},e.prototype.isTrueStorageValue=function(e){var t=this._storage.getItem(e);return!!t&&"true"===t},e.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(W.EmptyUsername);var n=this.createCognitoUser(e);return new Promise((function(e,r){n.resendConfirmationCode((function(t,n){t?r(t):e(n)}),t)}))},e.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,i=null,o={};if("string"==typeof e)r=e,i=t;else{if(!e.username)return this.rejectAuthError(W.InvalidUsername);void 0!==t&&Pf.warn("The password should be defined under the first parameter object!"),r=e.username,i=e.password,o=e.validationData}if(!r)return this.rejectAuthError(W.EmptyUsername);var a=new Dl({Username:r,Password:i,ValidationData:o,ClientMetadata:n});return i?this.signInWithPassword(a):this.signInWithoutPassword(a)},e.prototype.authCallbacks=function(e,t,n){var r=this,i=this;return{onSuccess:function(o){return A(r,void 0,void 0,(function(){var r,a,s,u;return C(this,(function(c){switch(c.label){case 0:Pf.debug(o),delete e.challengeName,delete e.challengeParam,c.label=1;case 1:return c.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return c.sent(),[4,this.Credentials.set(o,"session")];case 3:return r=c.sent(),Pf.debug("succeed to get cognito credentials",r),[3,9];case 4:return a=c.sent(),Pf.debug("cannot get cognito credentials",a),[3,9];case 5:return c.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return s=c.sent(),i.user=s,Tf("signIn",s,"A user "+e.getUsername()+" has been signed in"),t(s),[3,8];case 7:return u=c.sent(),Pf.error("Failed to get the signed in user",u),n(u),[3,8];case 8:return[7];case 9:return[2]}}))}))},onFailure:function(t){Pf.debug("signIn failure",t),Tf("signIn_failure",t,e.getUsername()+" failed to signin"),n(t)},customChallenge:function(n){Pf.debug("signIn custom challenge answer required"),e.challengeName="CUSTOM_CHALLENGE",e.challengeParam=n,t(e)},mfaRequired:function(n,r){Pf.debug("signIn MFA required"),e.challengeName=n,e.challengeParam=r,t(e)},mfaSetup:function(n,r){Pf.debug("signIn mfa setup",n),e.challengeName=n,e.challengeParam=r,t(e)},newPasswordRequired:function(n,r){Pf.debug("signIn new password"),e.challengeName="NEW_PASSWORD_REQUIRED",e.challengeParam={userAttributes:n,requiredAttributes:r},t(e)},totpRequired:function(n,r){Pf.debug("signIn totpRequired"),e.challengeName=n,e.challengeParam=r,t(e)},selectMFAType:function(n,r){Pf.debug("signIn selectMFAType",n),e.challengeName=n,e.challengeParam=r,t(e)}}},e.prototype.signInWithPassword=function(e){var t=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var n=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise((function(r,i){n.authenticateUser(e,t.authCallbacks(n,(function(e){t.pendingSignIn=null,r(e)}),(function(e){t.pendingSignIn=null,i(e)})))})),this.pendingSignIn},e.prototype.signInWithoutPassword=function(e){var t=this,n=this.createCognitoUser(e.getUsername());return n.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise((function(r,i){n.initiateAuth(e,t.authCallbacks(n,r,i))}))},e.prototype.getMFAOptions=function(e){return new Promise((function(t,n){e.getMFAOptions((function(e,r){if(e)return Pf.debug("get MFA Options failed",e),void n(e);Pf.debug("get MFA options success",r),t(r)}))}))},e.prototype.getPreferredMFA=function(e,t){var n=this,r=this;return new Promise((function(i,o){var a=n._config.clientMetadata,s=!!t&&t.bypassCache;e.getUserData((function(t,a){return A(n,void 0,void 0,(function(){var n,s;return C(this,(function(u){switch(u.label){case 0:if(!t)return[3,5];if(Pf.debug("getting preferred mfa failed",t),!this.isSessionInvalid(t))return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return u.sent(),[3,4];case 3:return n=u.sent(),o(new Error("Session is invalid due to: "+t.message+" and failed to clean up invalid session: "+n.message)),[2];case 4:return o(t),[2];case 5:return(s=r._getMfaTypeFromUserData(a))?(i(s),[2]):(o("invalid MFA Type"),[2])}}))}))}),{bypassCache:s,clientMetadata:a})}))},e.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;if(n)t=n;else{var r=e.UserMFASettingList;r?0===r.length?t="NOMFA":Pf.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA"}return t},e.prototype._getUserData=function(e,t){var n=this;return new Promise((function(r,i){e.getUserData((function(t,o){return A(n,void 0,void 0,(function(){var n;return C(this,(function(a){switch(a.label){case 0:if(!t)return[3,5];if(Pf.debug("getting user data failed",t),!this.isSessionInvalid(t))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return a.sent(),[3,4];case 3:return n=a.sent(),i(new Error("Session is invalid due to: "+t.message+" and failed to clean up invalid session: "+n.message)),[2];case 4:return i(t),[2];case 5:r(o),a.label=6;case 6:return[2]}}))}))}),t)}))},e.prototype.setPreferredMFA=function(e,t){return A(this,void 0,void 0,(function(){var n,r,i,o,a,s,u=this;return C(this,(function(c){switch(c.label){case 0:return n=this._config.clientMetadata,[4,this._getUserData(e,{bypassCache:!0,clientMetadata:n})];case 1:switch(r=c.sent(),i=null,o=null,t){case"TOTP":case"SOFTWARE_TOKEN_MFA":return[3,2];case"SMS":case"SMS_MFA":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return o={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return a=r.UserMFASettingList,[4,this._getMfaTypeFromUserData(r)];case 5:if("NOMFA"===(s=c.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===s)i={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==s)return[2,this.rejectAuthError(W.InvalidMFA)];o={PreferredMfa:!1,Enabled:!1}}return a&&0!==a.length&&a.forEach((function(e){"SMS_MFA"===e?i={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(o={PreferredMfa:!1,Enabled:!1})})),[3,7];case 6:return Pf.debug("no validmfa method provided"),[2,this.rejectAuthError(W.NoMFA)];case 7:return[2,new Promise((function(t,r){e.setUserMfaPreference(i,o,(function(i,o){if(i)return Pf.debug("Set user mfa preference error",i),r(i);Pf.debug("Set user mfa success",o),Pf.debug("Caching the latest user data into local"),e.getUserData((function(n,i){return A(u,void 0,void 0,(function(){var i;return C(this,(function(a){switch(a.label){case 0:if(!n)return[3,5];if(Pf.debug("getting user data failed",n),!this.isSessionInvalid(n))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),r(new Error("Session is invalid due to: "+n.message+" and failed to clean up invalid session: "+i.message)),[2];case 4:return[2,r(n)];case 5:return[2,t(o)]}}))}))}),{bypassCache:!0,clientMetadata:n})}))}))]}}))}))},e.prototype.disableSMS=function(e){return new Promise((function(t,n){e.disableMFA((function(e,r){if(e)return Pf.debug("disable mfa failed",e),void n(e);Pf.debug("disable mfa succeed",r),t(r)}))}))},e.prototype.enableSMS=function(e){return new Promise((function(t,n){e.enableMFA((function(e,r){if(e)return Pf.debug("enable mfa failed",e),void n(e);Pf.debug("enable mfa succeed",r),t(r)}))}))},e.prototype.setupTOTP=function(e){return new Promise((function(t,n){e.associateSoftwareToken({onFailure:function(e){Pf.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){Pf.debug("associateSoftwareToken success",e),t(e)}})}))},e.prototype.verifyTotpToken=function(e,t){var n;Pf.debug("verification totp token",e,t),e&&"function"==typeof e.getSignInUserSession&&(n=e.getSignInUserSession());var r=null==n?void 0:n.isValid();return new Promise((function(n,i){e.verifySoftwareToken(t,"My TOTP device",{onFailure:function(e){Pf.debug("verifyTotpToken failed",e),i(e)},onSuccess:function(t){r||Tf("signIn",e,"A user "+e.getUsername()+" has been signed in"),Tf("verify",e,"A user "+e.getUsername()+" has been verified"),Pf.debug("verifyTotpToken success",t),n(t)}})}))},e.prototype.confirmSignIn=function(e,t,n,r){var i=this;if(void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(W.EmptyCode);var o=this;return new Promise((function(a,s){e.sendMFACode(t,{onSuccess:function(t){return A(i,void 0,void 0,(function(){var n,r,i,s;return C(this,(function(u){switch(u.label){case 0:Pf.debug(t),u.label=1;case 1:return u.trys.push([1,4,5,10]),[4,this.Credentials.clear()];case 2:return u.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=u.sent(),Pf.debug("succeed to get cognito credentials",n),[3,10];case 4:return r=u.sent(),Pf.debug("cannot get cognito credentials",r),[3,10];case 5:o.user=e,u.label=6;case 6:return u.trys.push([6,8,,9]),[4,this.currentUserPoolUser()];case 7:return i=u.sent(),e.attributes=i.attributes,[3,9];case 8:return s=u.sent(),Pf.debug("cannot get updated Cognito User",s),[3,9];case 9:return Tf("signIn",e,"A user "+e.getUsername()+" has been signed in"),a(e),[7];case 10:return[2]}}))}))},onFailure:function(e){Pf.debug("confirm signIn failure",e),s(e)}},n,r)}))},e.prototype.completeNewPassword=function(e,t,n,r){var i=this;if(void 0===n&&(n={}),void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(W.EmptyPassword);var o=this;return new Promise((function(a,s){e.completeNewPasswordChallenge(t,n,{onSuccess:function(t){return A(i,void 0,void 0,(function(){var n,r;return C(this,(function(i){switch(i.label){case 0:Pf.debug(t),i.label=1;case 1:return i.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return i.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=i.sent(),Pf.debug("succeed to get cognito credentials",n),[3,6];case 4:return r=i.sent(),Pf.debug("cannot get cognito credentials",r),[3,6];case 5:return o.user=e,Tf("signIn",e,"A user "+e.getUsername()+" has been signed in"),a(e),[7];case 6:return[2]}}))}))},onFailure:function(e){Pf.debug("completeNewPassword failure",e),Tf("completeNewPassword_failure",e,i.user+" failed to complete the new password flow"),s(e)},mfaRequired:function(t,n){Pf.debug("signIn MFA required"),e.challengeName=t,e.challengeParam=n,a(e)},mfaSetup:function(t,n){Pf.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,a(e)},totpRequired:function(t,n){Pf.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,a(e)}},r)}))},e.prototype.sendCustomChallengeAnswer=function(e,t,n){var r=this;return void 0===n&&(n=this._config.clientMetadata),this.userPool?t?new Promise((function(i,o){e.sendCustomChallengeAnswer(t,r.authCallbacks(e,i,o),n)})):this.rejectAuthError(W.EmptyChallengeResponse):this.rejectNoUserPool()},e.prototype.deleteUserAttributes=function(e,t){var n=this;return new Promise((function(r,i){n.userSession(e).then((function(n){e.deleteAttributes(t,(function(e,t){return e?i(e):r(t)}))}))}))},e.prototype.deleteUser=function(){return A(this,void 0,void 0,(function(){var e,t,n=this;return C(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this._storageSync];case 1:return r.sent(),[3,3];case 2:throw e=r.sent(),Pf.debug("Failed to sync cache info into memory",e),new Error(e);case 3:return t=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise((function(e,r){return A(n,void 0,void 0,(function(){var n,i=this;return C(this,(function(o){if(this.userPool){if(!(n=this.userPool.getCurrentUser()))return Pf.debug("Failed to get user from user pool"),[2,r(new Error("No current user."))];n.getSession((function(o,a){return A(i,void 0,void 0,(function(){var i,a=this;return C(this,(function(s){switch(s.label){case 0:if(!o)return[3,5];if(Pf.debug("Failed to get the user session",o),!this.isSessionInvalid(o))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(n)];case 2:return s.sent(),[3,4];case 3:return i=s.sent(),r(new Error("Session is invalid due to: "+o.message+" and failed to clean up invalid session: "+i.message)),[2];case 4:return[2,r(o)];case 5:n.deleteUser((function(i,o){if(i)r(i);else{Tf("userDeleted",o,"The authenticated user has been deleted."),n.signOut(),a.user=null;try{a.cleanCachedItems()}catch(e){Pf.debug("failed to clear cached items")}t?a.oAuthSignOutRedirect(e,r):(Tf("signOut",a.user,"A user has been signed out"),e(o))}})),s.label=6;case 6:return[2]}}))}))}))}else Pf.debug("no Congito User pool"),r(new Error("Cognito User pool does not exist"));return[2]}))}))}))]}}))}))},e.prototype.updateUserAttributes=function(e,t,n){var r=this;void 0===n&&(n=this._config.clientMetadata);var i=[],o=this;return new Promise((function(a,s){o.userSession(e).then((function(o){for(var u in t)if("sub"!==u&&u.indexOf("_verified")<0){var c={Name:u,Value:t[u]};i.push(c)}e.updateAttributes(i,(function(e,n,i){if(e)return Tf("updateUserAttributes_failure",e,"Failed to update attributes"),s(e);var o=r.createUpdateAttributesResultList(t,null==i?void 0:i.CodeDeliveryDetailsList);return Tf("updateUserAttributes",o,"Attributes successfully updated"),a(n)}),n)}))}))},e.prototype.createUpdateAttributesResultList=function(e,t){var n={};return Object.keys(e).forEach((function(e){n[e]={isUpdated:!0};var r=null==t?void 0:t.find((function(t){return t.AttributeName===e}));r&&(n[e].isUpdated=!1,n[e].codeDeliveryDetails=r)})),n},e.prototype.userAttributes=function(e){var t=this;return new Promise((function(n,r){t.userSession(e).then((function(t){e.getUserAttributes((function(e,t){e?r(e):n(t)}))}))}))},e.prototype.verifiedContact=function(e){var t=this;return this.userAttributes(e).then((function(e){var n=t.attributesToObject(e),r={},i={};return n.email&&(n.email_verified?i.email=n.email:r.email=n.email),n.phone_number&&(n.phone_number_verified?i.phone_number=n.phone_number:r.phone_number=n.phone_number),{verified:i,unverified:r}}))},e.prototype.isErrorWithMessage=function(e){return"object"===g(e)&&Object.prototype.hasOwnProperty.call(e,"message")},e.prototype.isTokenRevokedError=function(e){return this.isErrorWithMessage(e)&&"Access Token has been revoked"===e.message},e.prototype.isRefreshTokenRevokedError=function(e){return this.isErrorWithMessage(e)&&"Refresh Token has been revoked"===e.message},e.prototype.isUserDisabledError=function(e){return this.isErrorWithMessage(e)&&"User is disabled."===e.message},e.prototype.isUserDoesNotExistError=function(e){return this.isErrorWithMessage(e)&&"User does not exist."===e.message},e.prototype.isRefreshTokenExpiredError=function(e){return this.isErrorWithMessage(e)&&"Refresh Token has expired"===e.message},e.prototype.isPasswordResetRequiredError=function(e){return this.isErrorWithMessage(e)&&"Password reset required for the user"===e.message},e.prototype.isSignedInHostedUI=function(){return this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI")},e.prototype.isSessionInvalid=function(e){return this.isUserDisabledError(e)||this.isUserDoesNotExistError(e)||this.isTokenRevokedError(e)||this.isRefreshTokenRevokedError(e)||this.isRefreshTokenExpiredError(e)||this.isPasswordResetRequiredError(e)},e.prototype.cleanUpInvalidSession=function(e){return A(this,void 0,void 0,(function(){var t=this;return C(this,(function(n){switch(n.label){case 0:e.signOut(),this.user=null,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.cleanCachedItems()];case 2:return n.sent(),[3,4];case 3:return n.sent(),Pf.debug("failed to clear cached items"),[3,4];case 4:return this.isSignedInHostedUI()?[2,new Promise((function(e,n){t.oAuthSignOutRedirect(e,n)}))]:(Tf("signOut",this.user,"A user has been signed out"),[2])}}))}))},e.prototype.currentUserPoolUser=function(e){var t=this;return this.userPool?new Promise((function(n,r){t._storageSync.then((function(){return A(t,void 0,void 0,(function(){var t,i,o,a,s,u,c=this;return C(this,(function(l){switch(l.label){case 0:return this.isOAuthInProgress()?(Pf.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise((function(e){var t=setTimeout((function(){Pf.debug("OAuth signIn in progress timeout"),je.remove("auth",n),e()}),1e4);function n(r){var i=r.payload.event;"cognitoHostedUI"!==i&&"cognitoHostedUI_failure"!==i||(Pf.debug("OAuth signIn resolved: "+i),clearTimeout(t),je.remove("auth",n),e())}je.listen("auth",n)}))]):[3,2];case 1:l.sent(),l.label=2;case 2:if(!(t=this.userPool.getCurrentUser()))return Pf.debug("Failed to get user from user pool"),r("No current user"),[2];l.label=3;case 3:return l.trys.push([3,7,,8]),[4,this._userSession(t)];case 4:return i=l.sent(),(o=!!e&&e.bypassCache)?[4,this.Credentials.clear()]:[3,6];case 5:l.sent(),l.label=6;case 6:return a=this._config.clientMetadata,(void 0===(s=i.getAccessToken().decodePayload().scope)?"":s).split(" ").includes(xf)?(t.getUserData((function(e,i){return A(c,void 0,void 0,(function(){var o,a,s,u,c,l,d;return C(this,(function(f){switch(f.label){case 0:if(!e)return[3,7];if(Pf.debug("getting user data failed",e),!this.isSessionInvalid(e))return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return f.sent(),[3,4];case 3:return o=f.sent(),r(new Error("Session is invalid due to: "+e.message+" and failed to clean up invalid session: "+o.message)),[2];case 4:return r(e),[3,6];case 5:n(t),f.label=6;case 6:return[2];case 7:for(a=i.PreferredMfaSetting||"NOMFA",s=[],u=0;u<i.UserAttributes.length;u++)c={Name:i.UserAttributes[u].Name,Value:i.UserAttributes[u].Value},l=new xd(c),s.push(l);return d=this.attributesToObject(s),Object.assign(t,{attributes:d,preferredMFA:a}),[2,n(t)]}}))}))}),{bypassCache:o,clientMetadata:a}),[3,8]):(Pf.debug("Unable to get the user data because the "+xf+" is not in the scopes of the access token"),[2,n(t)]);case 7:return u=l.sent(),r(u),[3,8];case 8:return[2]}}))}))})).catch((function(e){return Pf.debug("Failed to sync cache info into memory",e),r(e)}))})):this.rejectNoUserPool()},e.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},e.prototype.currentAuthenticatedUser=function(e){return A(this,void 0,void 0,(function(){var t,n,r,i,o;return C(this,(function(a){switch(a.label){case 0:Pf.debug("getting current authenticated user"),t=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._storageSync];case 2:return a.sent(),[3,4];case 3:throw n=a.sent(),Pf.debug("Failed to sync cache info into memory",n),n;case 4:try{(r=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=w(w({},r.user),{token:r.token}))}catch(e){Pf.debug("cannot load federated user from auth storage")}return t?(this.user=t,Pf.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:Pf.debug("get current authenticated userpool user"),i=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,this.currentUserPoolUser(e)];case 7:return i=a.sent(),[3,9];case 8:return"No userPool"===(o=a.sent())&&Pf.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),Pf.debug("The user is not authenticated by the error",o),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=i,[2,this.user]}}))}))},e.prototype.currentSession=function(){var e=this;return Pf.debug("Getting current session"),this.userPool?new Promise((function(t,n){e.currentUserPoolUser().then((function(r){e.userSession(r).then((function(e){t(e)})).catch((function(e){Pf.debug("Failed to get the current session",e),n(e)}))})).catch((function(e){Pf.debug("Failed to get the current user",e),n(e)}))})):Promise.reject(new Error("No User Pool in the configuration."))},e.prototype._userSession=function(e){return A(this,void 0,void 0,(function(){var t,n,r=this;return C(this,(function(i){switch(i.label){case 0:if(!e)return Pf.debug("the user is null"),[2,this.rejectAuthError(W.NoUserSession)];t=this._config.clientMetadata,0===this.inflightSessionPromiseCounter&&(this.inflightSessionPromise=new Promise((function(n,i){e.getSession((function(t,o){return A(r,void 0,void 0,(function(){var r;return C(this,(function(a){switch(a.label){case 0:if(!t)return[3,5];if(Pf.debug("Failed to get the session from user",e),!this.isSessionInvalid(t))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return a.sent(),[3,4];case 3:return r=a.sent(),i(new Error("Session is invalid due to: "+t.message+" and failed to clean up invalid session: "+r.message)),[2];case 4:return i(t),[2];case 5:return Pf.debug("Succeed to get the user session",o),n(o),[2]}}))}))}),{clientMetadata:t})}))),this.inflightSessionPromiseCounter++,i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.inflightSessionPromise];case 2:return n=i.sent(),e.signInUserSession=n,[2,n];case 3:return this.inflightSessionPromiseCounter--,[7];case 4:return[2]}}))}))},e.prototype.userSession=function(e){return this._userSession(e)},e.prototype.currentUserCredentials=function(){return A(this,void 0,void 0,(function(){var e,t,n=this;return C(this,(function(r){switch(r.label){case 0:Pf.debug("Getting current user credentials"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),[3,4];case 3:throw e=r.sent(),Pf.debug("Failed to sync cache info into memory",e),e;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){Pf.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then((function(e){return Pf.debug("getting session success",e),n.Credentials.set(e,"session")})).catch((function(){return Pf.debug("getting guest credentials"),n.Credentials.set(null,"guest")}))]}}))}))},e.prototype.currentCredentials=function(){return Pf.debug("getting current credentials"),this.Credentials.get()},e.prototype.verifyUserAttribute=function(e,t,n){return void 0===n&&(n=this._config.clientMetadata),new Promise((function(r,i){e.getAttributeVerificationCode(t,{onSuccess:function(e){return r(e)},onFailure:function(e){return i(e)}},n)}))},e.prototype.verifyUserAttributeSubmit=function(e,t,n){return n?new Promise((function(r,i){e.verifyAttribute(t,n,{onSuccess:function(e){r(e)},onFailure:function(e){i(e)}})})):this.rejectAuthError(W.EmptyCode)},e.prototype.verifyCurrentUserAttribute=function(e){var t=this;return t.currentUserPoolUser().then((function(n){return t.verifyUserAttribute(n,e)}))},e.prototype.verifyCurrentUserAttributeSubmit=function(e,t){var n=this;return n.currentUserPoolUser().then((function(r){return n.verifyUserAttributeSubmit(r,e,t)}))},e.prototype.cognitoIdentitySignOut=function(e,t){return A(this,void 0,void 0,(function(){var n,r,i=this;return C(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._storageSync];case 1:return o.sent(),[3,3];case 2:throw n=o.sent(),Pf.debug("Failed to sync cache info into memory",n),n;case 3:return r=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise((function(n,o){if(e&&e.global){Pf.debug("user global sign out",t);var a=i._config.clientMetadata;t.getSession((function(e,a){return A(i,void 0,void 0,(function(){var i,a=this;return C(this,(function(s){switch(s.label){case 0:if(!e)return[3,5];if(Pf.debug("failed to get the user session",e),!this.isSessionInvalid(e))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return s.sent(),[3,4];case 3:return i=s.sent(),o(new Error("Session is invalid due to: "+e.message+" and failed to clean up invalid session: "+i.message)),[2];case 4:return[2,o(e)];case 5:return t.globalSignOut({onSuccess:function(e){if(Pf.debug("global sign out success"),!r)return n();a.oAuthSignOutRedirect(n,o)},onFailure:function(e){return Pf.debug("global sign out failed",e),o(e)}}),[2]}}))}))}),{clientMetadata:a})}else Pf.debug("user sign out",t),t.signOut((function(){if(!r)return n();i.oAuthSignOutRedirect(n,o)}))}))]}}))}))},e.prototype.oAuthSignOutRedirect=function(e,t){He().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},e.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},e.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout((function(){return e(Error("Signout timeout fail"))}),3e3)},e.prototype.signOut=function(e){return A(this,void 0,void 0,(function(){var t;return C(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return n.sent(),[3,3];case 2:return n.sent(),Pf.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(e,t)]:[3,5]:[3,7];case 4:return n.sent(),[3,6];case 5:Pf.debug("no current Cognito user"),n.label=6;case 6:return[3,8];case 7:Pf.debug("no Cognito User pool"),n.label=8;case 8:return Tf("signOut",this.user,"A user has been signed out"),this.user=null,[2]}}))}))},e.prototype.cleanCachedItems=function(){return A(this,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}}))}))},e.prototype.changePassword=function(e,t,n,r){var i=this;return void 0===r&&(r=this._config.clientMetadata),new Promise((function(o,a){i.userSession(e).then((function(i){e.changePassword(t,n,(function(e,t){return e?(Pf.debug("change password failure",e),a(e)):o(t)}),r)}))}))},e.prototype.forgotPassword=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(W.EmptyUsername);var n=this.createCognitoUser(e);return new Promise((function(r,i){n.forgotPassword({onSuccess:function(){r()},onFailure:function(t){Pf.debug("forgot password failure",t),Tf("forgotPassword_failure",t,e+" forgotPassword failed"),i(t)},inputVerificationCode:function(t){Tf("forgotPassword",n,e+" has initiated forgot password flow"),r(t)}},t)}))},e.prototype.forgotPasswordSubmit=function(e,t,n,r){if(void 0===r&&(r=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(W.EmptyUsername);if(!t)return this.rejectAuthError(W.EmptyCode);if(!n)return this.rejectAuthError(W.EmptyPassword);var i=this.createCognitoUser(e);return new Promise((function(o,a){i.confirmPassword(t,n,{onSuccess:function(t){Tf("forgotPasswordSubmit",i,e+" forgotPasswordSubmit successful"),o(t)},onFailure:function(t){Tf("forgotPasswordSubmit_failure",t,e+" forgotPasswordSubmit failed"),a(t)}},r)}))},e.prototype.currentUserInfo=function(){return A(this,void 0,void 0,(function(){var e,t,n,r,i,o,a;return C(this,(function(s){switch(s.label){case 0:return(e=this.Credentials.getCredSource())&&"aws"!==e&&"userPool"!==e?[3,9]:[4,this.currentUserPoolUser().catch((function(e){return Pf.error(e)}))];case 1:if(!(a=s.sent()))return[2,null];s.label=2;case 2:return s.trys.push([2,8,,9]),[4,this.userAttributes(a)];case 3:t=s.sent(),n=this.attributesToObject(t),r=null,s.label=4;case 4:return s.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return r=s.sent(),[3,7];case 6:return i=s.sent(),Pf.debug("Failed to retrieve credentials while getting current user info",i),[3,7];case 7:return[2,{id:r?r.identityId:void 0,username:a.getUsername(),attributes:n}];case 8:return o=s.sent(),Pf.error("currentUserInfo error",o),[2,{}];case 9:return"federated"===e?[2,(a=this.user)||{}]:[2]}}))}))},e.prototype.federatedSignIn=function(e,t,n){return A(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,d,f,h;return C(this,(function(p){switch(p.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===e&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return J(e)||(v=e)&&["customProvider"].find((function(e){return v.hasOwnProperty(e)}))||function(e){return e&&!!["customState"].find((function(t){return e.hasOwnProperty(t)}))}(e)||void 0===e?(r=e||{provider:$.Cognito},s=J(r)?r.provider:r.customProvider,J(r),i=r.customState,this._config.userPoolId&&(o=Y(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,a=Y(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,a,o,s,i)),[3,4]):[3,1];case 1:s=e;try{(u=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&Pf.warn("There is already a signed in user: "+u+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return c=t.token,l=t.identity_id,d=t.expires_at,[4,this.Credentials.set({provider:s,token:c,identity_id:l,user:n,expires_at:d},"federation")];case 2:return f=p.sent(),[4,this.currentAuthenticatedUser()];case 3:return h=p.sent(),Tf("signIn",h,"A user "+h.username+" has been signed in"),Pf.debug("federated sign in credentials",f),[2,f];case 4:return[2]}var v}))}))},e.prototype._handleAuthResponse=function(e){return A(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l,d,f,h,p;return C(this,(function(v){switch(v.label){case 0:if(this.oAuthFlowInProgress)return Pf.debug("Skipping URL "+e+" current flow in progress"),[2];v.label=1;case 1:if(v.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(Tf("parsingCallbackUrl",{url:e},"The callback url is being parsed"),t=e||(He().isBrowser?window.location.href:""),n=!!(ef(t).query||"").split("&").map((function(e){return e.split("=")})).find((function(e){var t=I(e,1)[0];return"code"===t||"error"===t})),r=!!(ef(t).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).find((function(e){var t=I(e,1)[0];return"access_token"===t||"error"===t})),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),v.label=2;case 2:return v.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return i=v.sent(),o=i.accessToken,a=i.idToken,s=i.refreshToken,u=i.state,c=new Ad({IdToken:new bd({IdToken:a}),RefreshToken:new Sd({RefreshToken:s}),AccessToken:new yd({AccessToken:o})}),l=void 0,this._config.identityPoolId?[4,this.Credentials.set(c,"session")]:[3,5];case 4:l=v.sent(),Pf.debug("AWS credentials",l),v.label=5;case 5:return d=/-/.test(u),(f=this.createCognitoUser(c.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(c),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Tf("signIn",f,"A user "+f.getUsername()+" has been signed in"),Tf("cognitoHostedUI",f,"A user "+f.getUsername()+" has been signed in via Cognito Hosted UI"),d&&(h=u.split("-").splice(1).join("-"),Tf("customOAuthState",h.match(/.{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""),"State for user "+f.getUsername())),[2,l];case 6:return p=v.sent(),Pf.debug("Error in cognito hosted auth response",p),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Tf("signIn_failure",p,"The OAuth response flow failed"),Tf("cognitoHostedUI_failure",p,"A failure occurred when returning to the Cognito Hosted UI"),Tf("customState_failure",p,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}}))}))},e.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e.prototype.attributesToObject=function(e){var t=this,n={};return e&&e.map((function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?n[e.Name]=t.isTruthyString(e.Value)||!0===e.Value:n[e.Name]=e.Value})),n},e.prototype.isTruthyString=function(e){return"function"==typeof e.toLowerCase&&"true"===e.toLowerCase()},e.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var n=this._config.authenticationFlowType,r=new Nd(t);return n&&r.setAuthenticationFlowType(n),r},e.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},e.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?W.NoConfig:W.MissingAuthConfig},e.prototype.rejectAuthError=function(e){return Promise.reject(new Af(e))},e.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new Cf(e))},e.prototype.rememberDevice=function(){return A(this,void 0,void 0,(function(){var e,t;return C(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:return t=n.sent(),Pf.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise((function(t,n){e.setDeviceStatusRemembered({onSuccess:function(e){t(e)},onFailure:function(e){"InvalidParameterException"===e.code?n(new Af(W.DeviceConfig)):"NetworkError"===e.code?n(new Af(W.NetworkError)):n(e)}})}))]}}))}))},e.prototype.forgetDevice=function(){return A(this,void 0,void 0,(function(){var e,t;return C(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:return t=n.sent(),Pf.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise((function(t,n){e.forgetDevice({onSuccess:function(e){t(e)},onFailure:function(e){"InvalidParameterException"===e.code?n(new Af(W.DeviceConfig)):"NetworkError"===e.code?n(new Af(W.NetworkError)):n(e)}})}))]}}))}))},e.prototype.fetchDevices=function(){return A(this,void 0,void 0,(function(){var e,t;return C(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:throw t=n.sent(),Pf.debug("The user is not authenticated by the error",t),new Error("The user is not authenticated");case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise((function(t,n){var r={onSuccess:function(e){var n=e.Devices.map((function(e){var t=e.DeviceAttributes.find((function(e){return"device_name"===e.Name}))||{};return{id:e.DeviceKey,name:t.Value}}));t(n)},onFailure:function(e){"InvalidParameterException"===e.code?n(new Af(W.DeviceConfig)):"NetworkError"===e.code?n(new Af(W.NetworkError)):n(e)}};e.listDevices(60,null,r)}))]}}))}))},e}())(null);me.register(Of);var Uf,Nf,Mf,Rf,Lf,Ff,jf="client_runtime",Df=function(){function e(t){h(this,e),Uf.set(this,void 0),B(this,Uf,null!=t?t:[],"f")}return v(e,[{key:"readFirst",value:function(){var e,t=null,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(q(this,Uf,"f"));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(t=localStorage.getItem(r))break}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"writeAll",value:function(e){q(this,Uf,"f").forEach((function(t){localStorage.setItem(t,e)}))}},{key:"clearAll",value:function(){q(this,Uf,"f").forEach((function(e){localStorage.removeItem(e)}))}}]),e}();Uf=new WeakMap;var zf,qf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.prefix,r=void 0===n?["os-runtime","os-builtin",""]:n,i=t.localEndpointKey,o=void 0===i?"identity-endpoints":i,a=t.tokenKey,s=void 0===a?"token":a,u=t.currentAuthTypeKey,c=void 0===u?"currentAuthType":u,l=t.currentAuthConfigKey,d=void 0===l?"currentAuthConfig":l;h(this,e),Nf.set(this,void 0),Mf.set(this,void 0),Rf.set(this,void 0),Lf.set(this,void 0),Ff.set(this,(function(e,t){return e.map((function(e){return"".concat(e,"-").concat(t)}))})),B(this,Nf,new Df(q(this,Ff,"f").call(this,r,o)),"f"),B(this,Mf,new Df(q(this,Ff,"f").call(this,r,s)),"f"),B(this,Rf,new Df(q(this,Ff,"f").call(this,r,c)),"f"),B(this,Lf,new Df(q(this,Ff,"f").call(this,r,d)),"f")}return v(e,[{key:"storeEndpoints",value:function(e){q(this,Nf,"f").writeAll(JSON.stringify(e))}},{key:"readEndpoints",value:function(){var e=q(this,Nf,"f").readFirst();return e?JSON.parse(e):null}},{key:"storeToken",value:function(e){q(this,Mf,"f").writeAll(JSON.stringify(e))}},{key:"readToken",value:function(){var e=q(this,Mf,"f").readFirst();return e?JSON.parse(e):null}},{key:"readAccessToken",value:function(){var e,t=this.readToken();return null!==(e=null==t?void 0:t.access_token)&&void 0!==e?e:null}},{key:"readRefreshToken",value:function(){var e,t=this.readToken();return null!==(e=null==t?void 0:t.refresh_token)&&void 0!==e?e:null}},{key:"readIdToken",value:function(){var e,t=this.readToken();return null!==(e=null==t?void 0:t.id_token)&&void 0!==e?e:null}},{key:"storeCurrentAuthType",value:function(e){q(this,Rf,"f").writeAll(e)}},{key:"readCurrentAuthType",value:function(){var e;return null!==(e=q(this,Rf,"f").readFirst())&&void 0!==e?e:null}},{key:"storeCurrentAuthConfig",value:function(e){q(this,Lf,"f").writeAll(JSON.stringify(e))}},{key:"readCurrentAuthConfig",value:function(){var e=q(this,Lf,"f").readFirst();return e?JSON.parse(e):null}},{key:"clearAuthData",value:function(){q(this,Nf,"f").clearAll(),q(this,Mf,"f").clearAll(),q(this,Rf,"f").clearAll()}}]),e}();Nf=new WeakMap,Mf=new WeakMap,Rf=new WeakMap,Lf=new WeakMap,Ff=new WeakMap,function(e){e.InvalidCredentials="InvalidCredentials",e.TooManyFailedAttempts="TooManyFailedAttempts",e.UnknownFailure="UnknownFailure",e.PasswordComplexityPolicyFailed="PasswordComplexityPolicyFailed",e.InvalidToken="InvalidToken",e.IdentityTokenEndpointFailed="IdentityTokenEndpointFailed"}(zf||(zf={}));var Bf=zf;e.FailureReasons=Bf;var Gf=function(e){r(n,e);var t=i(n);function n(e,r){var i;return h(this,n),(i=t.call(this,r)).errorCode=e,i}return v(n)}(a(Error));e.AuthError=Gf;var $f=function(){function e(){h(this,e)}return v(e,null,[{key:"create",value:function(e){var t=e.name,n=e.message,r=e.code,i=new Gf(void 0===r?"OS-CLRT-40100":r,n);return i.name=t,i}}]),e}();function Wf(e){this.message=e}Wf.prototype=new Error,Wf.prototype.name="InvalidCharacterError";var Vf="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new Wf("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,a="";r=t.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)?a+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};function Hf(e){this.message=e}function Kf(e,t){if("string"!=typeof e)throw new Hf("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(Vf(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return Vf(t)}}(e.split(".")[n]))}catch(e){throw new Hf("Invalid token specified: "+e.message)}}Hf.prototype=new Error,Hf.prototype.name="InvalidTokenError";var Jf=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kf)(e)},Yf=function(e){return e?"".concat(e.token_type," ").concat(e.access_token):null},Zf=function(e){var t=e.token,n=e.now,r=void 0===n?Date.now:n,i=e.tokenDecoder,o=e.logger;if(!t)return!1;try{var a=1e3*i(t).exp-1e4;return r()<a}catch(e){return null==o||o.error({category:"JWT_DECODING",message:"Issue validating token",error:e}),!1}},Qf={};!function(e,t){var n="__lodash_hash_undefined__",r=9007199254740991,i="[object Arguments]",o="[object Array]",a="[object Boolean]",s="[object Date]",u="[object Error]",c="[object Function]",l="[object Map]",d="[object Number]",f="[object Object]",h="[object Promise]",p="[object RegExp]",v="[object Set]",m="[object String]",y="[object WeakMap]",w="[object ArrayBuffer]",b="[object DataView]",S=/^\[object .+?Constructor\]$/,_=/^(?:0|[1-9]\d*)$/,E={};E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E[i]=E[o]=E[w]=E[a]=E[b]=E[s]=E[u]=E[c]=E[l]=E[d]=E[f]=E[p]=E[v]=E[m]=E[y]=!1;var A="object"==g(nt)&&nt&&nt.Object===Object&&nt,C="object"==("undefined"==typeof self?"undefined":g(self))&&self&&self.Object===Object&&self,k=A||C||Function("return this")(),P=t&&!t.nodeType&&t,x=P&&e&&!e.nodeType&&e,I=x&&x.exports===P,T=I&&A.process,O=function(){try{return T&&T.binding&&T.binding("util")}catch(e){}}(),U=O&&O.isTypedArray;function N(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function M(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function R(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var L,F,j,D=Array.prototype,z=Function.prototype,q=Object.prototype,B=k["__core-js_shared__"],G=z.toString,$=q.hasOwnProperty,W=(L=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"",V=q.toString,H=RegExp("^"+G.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=I?k.Buffer:void 0,J=k.Symbol,Y=k.Uint8Array,Z=q.propertyIsEnumerable,Q=D.splice,X=J?J.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=K?K.isBuffer:void 0,ne=(F=Object.keys,j=Object,function(e){return F(j(e))}),re=xe(k,"DataView"),ie=xe(k,"Map"),oe=xe(k,"Promise"),ae=xe(k,"Set"),se=xe(k,"WeakMap"),ue=xe(Object,"create"),ce=Ue(re),le=Ue(ie),de=Ue(oe),fe=Ue(ae),he=Ue(se),pe=J?J.prototype:void 0,ve=pe?pe.valueOf:void 0;function ge(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function me(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function we(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ye;++t<n;)this.add(e[t])}function be(e){var t=this.__data__=new me(e);this.size=t.size}function Se(e,t){for(var n=e.length;n--;)if(Ne(e[n][0],t))return n;return-1}function _e(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":X&&X in Object(e)?function(e){var t=$.call(e,X),n=e[X];try{e[X]=void 0;var r=!0}catch(e){}var i=V.call(e);return r&&(t?e[X]=n:delete e[X]),i}(e):function(e){return V.call(e)}(e)}function Ee(e){return ze(e)&&_e(e)==i}function Ae(e,t,n,r,c){return e===t||(null==e||null==t||!ze(e)&&!ze(t)?e!=e&&t!=t:function(e,t,n,r,c,h){var g=Re(e),y=Re(t),S=g?o:Te(e),_=y?o:Te(t),E=(S=S==i?f:S)==f,A=(_=_==i?f:_)==f,C=S==_;if(C&&Le(e)){if(!Le(t))return!1;g=!0,E=!1}if(C&&!E)return h||(h=new be),g||qe(e)?Ce(e,t,n,r,c,h):function(e,t,n,r,i,o,c){switch(n){case b:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!o(new Y(e),new Y(t)));case a:case s:case d:return Ne(+e,+t);case u:return e.name==t.name&&e.message==t.message;case p:case m:return e==t+"";case l:var f=M;case v:var h=1&r;if(f||(f=R),e.size!=t.size&&!h)return!1;var g=c.get(e);if(g)return g==t;r|=2,c.set(e,t);var y=Ce(f(e),f(t),r,i,o,c);return c.delete(e),y;case"[object Symbol]":if(ve)return ve.call(e)==ve.call(t)}return!1}(e,t,S,n,r,c,h);if(!(1&n)){var k=E&&$.call(e,"__wrapped__"),P=A&&$.call(t,"__wrapped__");if(k||P){var x=k?e.value():e,I=P?t.value():t;return h||(h=new be),c(x,I,n,r,h)}}return!!C&&(h||(h=new be),function(e,t,n,r,i,o){var a=1&n,s=ke(e),u=s.length;if(u!=ke(t).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in t:$.call(t,l)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var f=!0;o.set(e,t),o.set(t,e);for(var h=a;++c<u;){var p=e[l=s[c]],v=t[l];if(r)var g=a?r(v,p,l,t,e,o):r(p,v,l,e,t,o);if(!(void 0===g?p===v||i(p,v,n,r,o):g)){f=!1;break}h||(h="constructor"==l)}if(f&&!h){var m=e.constructor,y=t.constructor;m==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,r,c,h))}(e,t,n,r,Ae,c))}function Ce(e,t,n,r,i,o){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var l=-1,d=!0,f=2&n?new we:void 0;for(o.set(e,t),o.set(t,e);++l<s;){var h=e[l],p=t[l];if(r)var v=a?r(p,h,l,t,e,o):r(h,p,l,e,t,o);if(void 0!==v){if(v)continue;d=!1;break}if(f){if(!N(t,(function(e,t){if(a=t,!f.has(a)&&(h===e||i(h,e,n,r,o)))return f.push(t);var a}))){d=!1;break}}else if(h!==p&&!i(h,p,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function ke(e){return function(e,t,n){var r=t(e);return Re(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Be,Ie)}function Pe(e,t){var n,r,i=e.__data__;return("string"==(r=g(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function xe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!De(e)||function(e){return!!W&&W in e}(e))&&(Fe(e)?H:S).test(Ue(e))}(n)?n:void 0}ge.prototype.clear=function(){this.__data__=ue?ue(null):{},this.size=0},ge.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ge.prototype.get=function(e){var t=this.__data__;if(ue){var r=t[e];return r===n?void 0:r}return $.call(t,e)?t[e]:void 0},ge.prototype.has=function(e){var t=this.__data__;return ue?void 0!==t[e]:$.call(t,e)},ge.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ue&&void 0===t?n:t,this},me.prototype.clear=function(){this.__data__=[],this.size=0},me.prototype.delete=function(e){var t=this.__data__,n=Se(t,e);return!(n<0||(n==t.length-1?t.pop():Q.call(t,n,1),--this.size,0))},me.prototype.get=function(e){var t=this.__data__,n=Se(t,e);return n<0?void 0:t[n][1]},me.prototype.has=function(e){return Se(this.__data__,e)>-1},me.prototype.set=function(e,t){var n=this.__data__,r=Se(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ye.prototype.clear=function(){this.size=0,this.__data__={hash:new ge,map:new(ie||me),string:new ge}},ye.prototype.delete=function(e){var t=Pe(this,e).delete(e);return this.size-=t?1:0,t},ye.prototype.get=function(e){return Pe(this,e).get(e)},ye.prototype.has=function(e){return Pe(this,e).has(e)},ye.prototype.set=function(e,t){var n=Pe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},we.prototype.add=we.prototype.push=function(e){return this.__data__.set(e,n),this},we.prototype.has=function(e){return this.__data__.has(e)},be.prototype.clear=function(){this.__data__=new me,this.size=0},be.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},be.prototype.get=function(e){return this.__data__.get(e)},be.prototype.has=function(e){return this.__data__.has(e)},be.prototype.set=function(e,t){var n=this.__data__;if(n instanceof me){var r=n.__data__;if(!ie||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ye(r)}return n.set(e,t),this.size=n.size,this};var Ie=ee?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a)&&(o[i++]=a)}return o}(ee(e),(function(t){return Z.call(e,t)})))}:function(){return[]},Te=_e;function Oe(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||_.test(e))&&e>-1&&e%1==0&&e<t}function Ue(e){if(null!=e){try{return G.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ne(e,t){return e===t||e!=e&&t!=t}(re&&Te(new re(new ArrayBuffer(1)))!=b||ie&&Te(new ie)!=l||oe&&Te(oe.resolve())!=h||ae&&Te(new ae)!=v||se&&Te(new se)!=y)&&(Te=function(e){var t=_e(e),n=t==f?e.constructor:void 0,r=n?Ue(n):"";if(r)switch(r){case ce:return b;case le:return l;case de:return h;case fe:return v;case he:return y}return t});var Me=Ee(function(){return arguments}())?Ee:function(e){return ze(e)&&$.call(e,"callee")&&!Z.call(e,"callee")},Re=Array.isArray,Le=te||function(){return!1};function Fe(e){if(!De(e))return!1;var t=_e(e);return t==c||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function je(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function De(e){var t=g(e);return null!=e&&("object"==t||"function"==t)}function ze(e){return null!=e&&"object"==g(e)}var qe=U?function(e){return function(t){return e(t)}}(U):function(e){return ze(e)&&je(e.length)&&!!E[_e(e)]};function Be(e){return null!=(t=e)&&je(t.length)&&!Fe(t)?function(e,t){var n=Re(e),r=!n&&Me(e),i=!n&&!r&&Le(e),o=!n&&!r&&!i&&qe(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var c in e)!t&&!$.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Oe(c,u))||s.push(c);return s}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||q))return ne(e);var t,n,r=[];for(var i in Object(e))$.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e);var t}e.exports=function(e,t){return Ae(e,t)}}({get exports(){return Qf},set exports(e){Qf=e}},Qf);var Xf,eh,th,nh,rh,ih,oh,ah,sh,uh,ch,lh,dh,fh,hh,ph,vh,gh,mh,yh,wh,bh,Sh,_h=Qf,Eh=function(){function e(){h(this,e)}return v(e,[{key:"serialize",value:function(e){if(null!=e)return JSON.stringify(e)}},{key:"deserialize",value:function(e){if(null!=e)return JSON.parse(e)}}]),e}(),Ah=function(){function e(t){var n=t.storage,r=void 0===n?localStorage:n,i=t.key,o=t.timespan,a=void 0===o?0:o,s=t.canFetch,u=t.fetch,c=t.serializer,l=void 0===c?new Eh:c,d=t.serialize,f=void 0===d||d,p=t.validate,v=void 0===p?function(){return!0}:p;h(this,e),Xf.add(this),eh.set(this,void 0),th.set(this,void 0),nh.set(this,void 0),rh.set(this,void 0),ih.set(this,void 0),oh.set(this,void 0),ah.set(this,void 0),sh.set(this,void 0),B(this,eh,r,"f"),B(this,th,i,"f"),B(this,nh,a,"f"),B(this,rh,s,"f"),B(this,ih,u,"f"),B(this,oh,l,"f"),B(this,ah,f,"f"),B(this,sh,v,"f")}return v(e,[{key:"validityKey",get:function(){return"".concat(q(this,th,"f"),"__expires")}},{key:"get",value:function(){return A(this,void 0,void 0,(function*(){var e=n(yield q(this,Xf,"m",fh).call(this),2),t=e[0],r=e[1];if(t)return r;var i=yield q(this,ih,"f").call(this);return void 0===i?r:(q(this,Xf,"m",uh).call(this,i),q(this,Xf,"m",dh).call(this),i)}))}},{key:"invalidate",value:function(){q(this,eh,"f").removeItem(this.validityKey)}},{key:"getCached",value:function(){return q(this,Xf,"m",ph).call(this)[1]}},{key:"clear",value:function(){q(this,eh,"f").removeItem(q(this,th,"f")),q(this,eh,"f").removeItem(this.validityKey)}}]),e}();eh=new WeakMap,th=new WeakMap,nh=new WeakMap,rh=new WeakMap,ih=new WeakMap,oh=new WeakMap,ah=new WeakMap,sh=new WeakMap,Xf=new WeakSet,uh=function(e){var t=q(this,Xf,"m",lh).call(this,e);"string"==typeof t?q(this,eh,"f").setItem(q(this,th,"f"),t):q(this,eh,"f").removeItem(q(this,th,"f"))},ch=function(e){return q(this,ah,"f")?q(this,oh,"f").deserialize(e):e},lh=function(e){return q(this,ah,"f")?q(this,oh,"f").serialize(e):e},dh=function(){if(0!==q(this,nh,"f")){var e=((new Date).getTime()+q(this,nh,"f")).toString();q(this,eh,"f").setItem(this.validityKey,e)}else q(this,eh,"f").setItem(this.validityKey,"0")},fh=function(){return A(this,void 0,void 0,(function*(){var e=n(q(this,Xf,"m",ph).call(this),2),t=e[0],r=e[1];return q(this,rh,"f").call(this)?void 0===t?[!1,void 0]:q(this,Xf,"m",hh).call(this)?[!1,r]:"function"==typeof q(this,sh,"f")?[yield q(this,sh,"f").call(this,r),r]:[!0,r]:[!0,r]}))},hh=function(){var e=q(this,eh,"f").getItem(this.validityKey),t=parseInt(null!=e?e:"",10);return!!(isNaN(t)||t<0)||t>0&&t<=(new Date).getTime()},ph=function(){var e,t=null!==(e=q(this,eh,"f").getItem(q(this,th,"f")))&&void 0!==e?e:void 0;return[t,q(this,Xf,"m",ch).call(this,t)]};var Ch,kh=function(){function e(t){var n=t.synchronize,r=t.logger,i=t.setTimeoutOverride,o=void 0===i?setTimeout:i,a=t.clearTimeoutOverride,s=void 0===a?clearTimeout:a,u=t.timeout,c=t.start,l=void 0===c||c;h(this,e),vh.add(this),gh.set(this,void 0),mh.set(this,void 0),yh.set(this,void 0),wh.set(this,void 0),bh.set(this,void 0),B(this,gh,n,"f"),B(this,mh,r,"f"),B(this,wh,o,"f"),B(this,bh,s,"f"),B(this,yh,u,"f"),l&&q(this,vh,"m",Sh).call(this)}return v(e,[{key:"trySynchronize",value:function(){var e;return A(this,void 0,void 0,(function*(){q(this,yh,"f")&&q(this,bh,"f").call(this,q(this,yh,"f"));try{yield q(this,gh,"f").call(this)}catch(t){null===(e=q(this,mh,"f"))||void 0===e||e.error({category:"AuthenticationSynchronizer",message:"Error while synchronizing information.",error:t,code:"OS-CLRT-40300"}),q(this,vh,"m",Sh).call(this)}}))}}]),e}();gh=new WeakMap,mh=new WeakMap,yh=new WeakMap,wh=new WeakMap,bh=new WeakMap,vh=new WeakSet,Sh=function(){var e=this;B(this,yh,q(this,wh,"f").call(this,(function(){return e.trySynchronize()}),6e4),"f")},function(e){e[e.Internal=0]="Internal",e[e.External=1]="External"}(Ch||(Ch={}));var Ph,xh,Ih,Th,Oh,Uh,Nh,Mh,Rh,Lh,Fh=Ch,jh="authentication-token-handler",Dh=function(){function e(t){var n=t.authData,r=t.decodeJwt,i=void 0===r?Jf:r,o=t.logger,a=t.tokenValidator,s=void 0===a?Zf:a;h(this,e),Ph.add(this),xh.set(this,void 0),Ih.set(this,void 0),Th.set(this,void 0),Oh.set(this,void 0),Uh.set(this,void 0),Nh.set(this,void 0),B(this,xh,n,"f"),B(this,Oh,i,"f"),B(this,Nh,o,"f"),B(this,Uh,s,"f")}return v(e,[{key:"invalidateAccessToken",value:function(e){"string"==typeof e&&e.length>0&&B(this,Ih,e,"f")}},{key:"isAccessTokenValid",value:function(e,t){return"string"==typeof e&&e!==q(this,Ih,"f")&&(null!=t?t:q(this,Uh,"f"))({token:e,tokenDecoder:q(this,Oh,"f")})}},{key:"isRefreshTokenValid",value:function(e,t){var n=null!=e?e:q(this,xh,"f").readRefreshToken();return"string"==typeof n&&n!==q(this,Th,"f")&&(null!=t?t:q(this,Uh,"f"))({token:n,tokenDecoder:q(this,Oh,"f")})}},{key:"refreshToken",value:function(e){var t,n,r=e.refreshEndpoint,i=e.client,o=e.scope,a=e.clientId;return A(this,void 0,void 0,(function*(){this.invalidateAccessToken(null!==(t=q(this,xh,"f").readAccessToken())&&void 0!==t?t:"");var e=q(this,xh,"f").readRefreshToken();if(e){if(!this.isRefreshTokenValid(e)){if(e===q(this,Th,"f"))return;return q(this,Ph,"m",Mh).call(this,e)}try{B(this,Th,e,"f");var s=yield i.post({url:r,payload:{grant_type:"refresh_token",refresh_token:e,client_id:a,scope:o}});return q(this,Ph,"m",Lh).call(this,s),s}catch(e){return q(this,Ph,"m",Rh).call(this,e)}}else"[]"!==q(this,Th,"f")&&(null===(n=q(this,Nh,"f"))||void 0===n||n.info({category:jh,message:"No refresh token stored. Could not refresh the tokens.",visibility:Fh.Internal}),B(this,Th,"[]","f"))}))}}]),e}();xh=new WeakMap,Ih=new WeakMap,Th=new WeakMap,Oh=new WeakMap,Uh=new WeakMap,Nh=new WeakMap,Ph=new WeakSet,Mh=function(e){var t;B(this,Th,e,"f");var n=new Gf("OS-CLRT-40103","Refresh token not valid.");return null===(t=q(this,Nh,"f"))||void 0===t||t.error({error:n,category:jh,code:n.errorCode}),n},Rh=function(e){var t,n=function(e){return"string"==typeof e?new Error(e):e instanceof Error?e:new Error("Unknown error")}(e),r="Failed to call refresh token endpoint: ".concat(n.message);return null===(t=q(this,Nh,"f"))||void 0===t||t.error({error:n,category:jh,code:"OS-CLRT-40100",message:r}),new Gf("OS-CLRT-40100",r)},Lh=function(e){var t,n;e.access_token!==q(this,Ih,"f")?B(this,Ih,void 0,"f"):null===(t=q(this,Nh,"f"))||void 0===t||t.warning({category:jh,message:"Access token already invalidated."}),e.refresh_token!==q(this,Th,"f")?B(this,Th,void 0,"f"):null===(n=q(this,Nh,"f"))||void 0===n||n.warning({category:jh,message:"Refresh token already invalidated."})};var zh,qh,Bh,Gh,$h,Wh,Vh="/moduleservices/users/userinfosync";!function(e){e.Authorization="authorization_endpoint",e.Token="token_endpoint",e.Logout="end_session_endpoint",e.Refresh="token_endpoint",e.UserInfo="userinfo_endpoint"}(zh||(zh={}));var Hh,Kh="Authentication",Jh=function(){function e(t){var n=this,r=t.scope,i=void 0===r?"":r,o=t.identityEndpoint,a=void 0===o?"https://ubt-odc-dev.outsystems.app/identity/.well-known/openid-configuration":o,s=t.appUrl,u=t.appSyncEndpoint,c=void 0===u?Vh:u,l=t.authData,d=t.httpClient,f=t.decodeJwt,p=void 0===f?Jf:f,v=t.logger,g=t.validator,m=void 0===g?Zf:g,y=t.tokenHandler,w=void 0===y?new Dh({authData:l,decodeJwt:p,logger:v,tokenValidator:m}):y,b=t.synchronizer,S=t.userInfo,_=t.isOnline,E=void 0===_?function(){return!0}:_;h(this,e),qh.add(this),Bh.set(this,void 0),Gh.set(this,void 0),$h.set(this,void 0),this.scope=i,B(this,Bh,a,"f"),this.appUrl=s,this.appSyncEndpoint=c,this.authData=l,this.httpClient=d,this.decodeJwt=p,this.logger=v,this.tokenHandler=w,this.isOnline=E,B(this,Gh,null!=b?b:new kh({synchronize:function(){return n.synchronizeUserInfo()},logger:v}),"f"),this.userInfo=null!=S?S:function(e){var t=this,n=e.fetchEndpoints,r=e.getAccessToken,i=e.logger,o=e.httpClient,a=e.canFetch,s=e.key,u=void 0===s?"user_info":s,c=e.timespan;return new Ah({fetch:function(){return A(t,void 0,void 0,(function*(){try{var e;return function(e){return Object.assign(Object.assign({},e),{os_access:"string"==typeof e.os_access?JSON.parse(e.os_access):{userId:"",roles:[]}})}(yield function(e){var t=e.fetchEndpoints,n=e.getAccessToken,r=e.httpClient;return A(this,void 0,void 0,(function*(){var e=(yield t()).userinfo_endpoint;if(!e)throw new Error("Missing user info endpoint");var i=yield n();if(!i)throw new Error("Missing access token");return yield r.get({url:e,headers:{Authorization:i}})}))}({fetchEndpoints:n,getAccessToken:r,httpClient:o}))}catch(e){return void(null==i||i.error({message:"Failed to load user info",error:e instanceof Error?e:new Error("Unknown error"),category:"UserInfoCache"}))}}))},canFetch:a,key:u,timespan:void 0===c?3e5:c})}({canFetch:function(){return n.isAuthenticated()&&E()},fetchEndpoints:function(){return n.fetchEndpoints()},getAccessToken:function(){return n.getValidAccessToken()},httpClient:d,logger:v})}return v(e,[{key:"getValidAccessToken",value:function(){var e,t,n,r,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return A(this,void 0,void 0,(function*(){if(this.isOnline()){if(this.authData.readToken())return!i&&this.isAccessTokenValid()||(null===(n=this.logger)||void 0===n||n.info({category:Kh,message:"Refreshing tokens."}),yield this.refreshTokens()),null!==(r=this.getAccessToken())&&void 0!==r?r:void 0;null===(t=this.logger)||void 0===t||t.info({category:Kh,message:"Cannot get access token because there is no token stored."})}else null===(e=this.logger)||void 0===e||e.info({category:Kh,message:"Cannot get access token because the device is offline."})}))}},{key:"fetchEndpoints",value:function(){return A(this,void 0,void 0,(function*(){var e=this.authData.readEndpoints();if(e)return e;var t=yield this.httpClient.get({url:q(this,Bh,"f")});return this.authData.storeEndpoints(t),t}))}},{key:"getUserId",value:function(){var e,t;if(!this.isAuthenticated())return null;var n=this.userInfo.getCached();return null!==(t=null===(e=null==n?void 0:n.os_access)||void 0===e?void 0:e.userId)&&void 0!==t?t:null}},{key:"isAuthenticated",value:function(){var e=this.authData.readToken();return!!(null==e?void 0:e.access_token)&&!!(null==e?void 0:e.refresh_token)&&!!(null==e?void 0:e.id_token)}},{key:"getAccessToken",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yf)(this.authData.readToken())}},{key:"isAccessTokenValid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zf,t=this.getAccessToken();return this.tokenHandler.isAccessTokenValid(null!=t?t:"",e)}},{key:"isRefreshTokenValid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zf,t=this.authData.readRefreshToken();return this.tokenHandler.isRefreshTokenValid(null!=t?t:"",e)}},{key:"refreshTokens",value:function(){return q(this,$h,"f")||B(this,$h,q(this,qh,"m",Wh).call(this),"f"),q(this,$h,"f")}},{key:"clearAuthenticationData",value:function(){B(this,$h,void 0,"f"),this.authData.clearAuthData(),this.userInfo.clear()}},{key:"hasRole",value:function(e){var t,n,r,i=this.userInfo.getCached();return null!==(r=null===(n=null===(t=null==i?void 0:i.os_access)||void 0===t?void 0:t.roles)||void 0===n?void 0:n.includes(e))&&void 0!==r&&r}},{key:"buildUrl",value:function(e){return"/".concat(this.appUrl,"/").concat(e).replace(/\/(\/)+/gm,"/")}},{key:"getUserSyncUrl",value:function(){return this.buildUrl(this.appSyncEndpoint)}},{key:"storeTokenInfo",value:function(e){var t;return A(this,void 0,void 0,(function*(){var n=this.authData.readToken();this.authData.storeToken(e);var r=this.userInfo.getCached();this.userInfo.invalidate();var i=yield this.userInfo.get();n&&_h(r,i)||q(this,Gh,"f").trySynchronize();var o=null===(t=null==i?void 0:i.os_access)||void 0===t?void 0:t.userId;if(!o)throw new Gf("OS-CLRT-40111","User ID is missing.");return o}))}},{key:"synchronizeUserInfo",value:function(){return A(this,void 0,void 0,(function*(){if(this.isOnline()&&this.isAuthenticated()){var e=yield this.getValidAccessToken();if(!e)throw new Error("No token available to synchronize user info.");yield this.httpClient.post({url:this.getUserSyncUrl(),headers:{Authorization:e}})}}))}},{key:"getUserInfo",value:function(){var e,t,n;return A(this,void 0,void 0,(function*(){var r=yield this.userInfo.get();return{username:null!==(e=null==r?void 0:r.email)&&void 0!==e?e:"",name:null!==(t=null==r?void 0:r.name)&&void 0!==t?t:"",pictureUrl:null!==(n=null==r?void 0:r.picture)&&void 0!==n?n:""}}))}},{key:"isAuthEndpoint",value:function(e){for(var t,r=n(e.split("?"),1)[0],i=null!==(t=this.authData.readEndpoints())&&void 0!==t?t:{},o=0,a=Object.values(i);o<a.length;o++)if(r===a[o])return!0;return!1}}]),e}();Bh=new WeakMap,Gh=new WeakMap,$h=new WeakMap,qh=new WeakSet,Wh=function(){return A(this,void 0,void 0,(function*(){try{var e=yield this.fetchEndpoints(),t=yield this.tokenHandler.refreshToken({refreshEndpoint:e.token_endpoint,client:this.httpClient,clientId:jf,scope:this.scope});if(!t)return void this.clearAuthenticationData();if(t instanceof Gf)throw this.clearAuthenticationData(),t;yield this.storeTokenInfo(t)}catch(e){throw this.clearAuthenticationData(),e}B(this,$h,void 0,"f")}))};var Yh=function(e){r(a,e);var n=i(a);function a(e){e.appKey;var r,i,s=e.identityProvider,u=e.appUrl,c=e.baseUrl,l=e.region,d=e.poolId,f=e.clientId,p=e.scope,v=void 0===p?"":p,g=e.identityEndpoint,m=e.httpClient,y=void 0===m?new t.HttpClient({baseUrl:c}):m,w=e.appSyncEndpoint,b=void 0===w?Vh:w,S=e.authData,_=void 0===S?new qf:S,E=e.decodeJwt,A=void 0===E?Jf:E,C=e.configureAmplify,k=void 0===C?function(e){return me.configure(e)}:C,P=e.logger,x=e.validator,I=e.tokenHandler,T=e.synchronizer,O=e.isOnline,U=e.userInfo;if(h(this,a),r=n.call(this,{scope:v,identityEndpoint:g,appUrl:u,appSyncEndpoint:b,authData:_,httpClient:y,decodeJwt:A,logger:P,validator:x,tokenHandler:I,synchronizer:T,isOnline:O,userInfo:U}),Hh.set(o(r),void 0),B(o(r),Hh,s,"f"),l&&d&&f)try{k({Auth:{region:l,userPoolId:d,userPoolWebClientId:f}})}catch(e){null===(i=r.logger)||void 0===i||i.error({category:Kh,message:"Error while configuring Amplify",error:e,code:"OS-CLRT-40110"})}return r}return v(a,[{key:"isExternalUser",value:function(){return!0}},{key:"getLoginUrl",value:function(e){var t=e.redirectUri,n=e.callbackUrl;return A(this,void 0,void 0,(function*(){var e=yield this.fetchEndpoints(),r=new URLSearchParams(n?{callback_url:n}:{}).toString(),i={client_id:jf,scope:this.scope,redirect_uri:r?"".concat(t,"?").concat(r):t,response_type:"code",kc_idp_hint:q(this,Hh,"f")},o=new URLSearchParams(i).toString();return"".concat(e.authorization_endpoint,"?").concat(o)}))}},{key:"login",value:function(e){var t=e.redirectUri,n=e.callbackUrl,r=e.navigationHandler,i=void 0===r?function(e){return window.location.replace(e)}:r;return A(this,void 0,void 0,(function*(){var e=yield this.getLoginUrl({redirectUri:t,callbackUrl:n});i(e)}))}},{key:"resumeLogin",value:function(e){var t=e.url,n=e.redirectUri;return A(this,void 0,void 0,(function*(){var e=yield this.fetchEndpoints(),r=new URL(t).searchParams,i=r.get("code"),o=r.get("callback_url"),a=new URLSearchParams(o?{callback_url:o}:{}).toString();if(!i)throw this.authData.clearAuthData(),this.userInfo.clear(),Error("Missing mandatory parameters to continue the login: "+"authz_code: ".concat(i));try{var s=a?"".concat(n,"?").concat(a):n,u=yield this.requestToken(e.token_endpoint,s,i);yield this.storeTokenInfo(u)}catch(e){throw this.authData.clearAuthData(),this.userInfo.clear(),e}return o}))}},{key:"requestToken",value:function(e,t,n){return A(this,void 0,void 0,(function*(){try{return yield this.httpClient.post({url:e,payload:{grant_type:"authorization_code",code:n,redirect_uri:t,client_id:jf}})}catch(e){throw $f.create({name:Bf.IdentityTokenEndpointFailed,message:"Error calling the external auth token endpoint",code:"OS-ID-BIZ-40021"})}}))}},{key:"logout",value:function(e){var t,n=e.redirectUri,r=e.navigationHandler,i=void 0===r?function(e){return window.location.assign(e)}:r,o=e.authSignOut,a=void 0===o?function(){return Of.signOut()}:o;return A(this,void 0,void 0,(function*(){var e=yield this.fetchEndpoints(),r=this.authData.readIdToken();if(!r)throw new Error("No id token stored. Could not logout.");this.authData.clearAuthData(),this.userInfo.clear();try{yield a()}catch(e){null===(t=this.logger)||void 0===t||t.error({category:Kh,message:"Error calling the external auth signout",error:e,code:"OS-CLRT-40108"})}var o=new URLSearchParams({id_token_hint:r,post_logout_redirect_uri:n}).toString(),s="".concat(e.end_session_endpoint,"?").concat(o);i(s)}))}},{key:"getLogoutUrl",value:function(e){var t=e.redirectUri,n=e.callbackUrl;return A(this,void 0,void 0,(function*(){var e=yield this.fetchEndpoints(),r=this.authData.readIdToken();if(!r)throw new Error("No id token stored. Could not logout.");var i=new URLSearchParams(n?{callback_url:n}:{}).toString(),o={id_token_hint:r,post_logout_redirect_uri:i?"".concat(t,"?").concat(i):t},a=new URLSearchParams(o).toString();return"".concat(e.end_session_endpoint,"?").concat(a)}))}},{key:"resumeLogout",value:function(e){var t,n=e.url,r=e.authSignOut,i=void 0===r?function(){return Of.signOut()}:r;return A(this,void 0,void 0,(function*(){var e=new URL(n).searchParams.get("callback_url");try{yield i()}catch(e){throw null===(t=this.logger)||void 0===t||t.error({category:Kh,message:"Error calling the external auth signout",error:e,code:"OS-CLRT-40108"}),e}return this.authData.clearAuthData(),this.userInfo.clear(),e?decodeURIComponent(e):null}))}}]),a}(Jh);e.ExternalAuth=Yh,Hh=new WeakMap;var Zh={};!function(e,t){var n,r,i,o="[object Map]",a="[object Promise]",s="[object Set]",u="[object WeakMap]",c="[object DataView]",l=/^\[object .+?Constructor\]$/,d="object"==g(nt)&&nt&&nt.Object===Object&&nt,f="object"==("undefined"==typeof self?"undefined":g(self))&&self&&self.Object===Object&&self,h=d||f||Function("return this")(),p=t&&!t.nodeType&&t,v=p&&e&&!e.nodeType&&e,m=v&&v.exports===p,y=Function.prototype,w=Object.prototype,b=h["__core-js_shared__"],S=(n=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",_=y.toString,E=w.hasOwnProperty,A=w.toString,C=RegExp("^"+_.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=m?h.Buffer:void 0,P=w.propertyIsEnumerable,x=k?k.isBuffer:void 0,I=(r=Object.keys,i=Object,function(e){return r(i(e))}),T=q(h,"DataView"),O=q(h,"Map"),U=q(h,"Promise"),N=q(h,"Set"),M=q(h,"WeakMap"),R=!P.call({valueOf:1},"valueOf"),L=G(T),F=G(O),j=G(U),D=G(N),z=G(M);function q(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!K(e)||function(e){return!!S&&S in e}(e))&&(H(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?C:l).test(G(e))}(n)?n:void 0}var B=function(e){return A.call(e)};function G(e){if(null!=e){try{return _.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(T&&B(new T(new ArrayBuffer(1)))!=c||O&&B(new O)!=o||U&&B(U.resolve())!=a||N&&B(new N)!=s||M&&B(new M)!=u)&&(B=function(e){var t=A.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?G(n):void 0;if(r)switch(r){case L:return c;case F:return o;case j:return a;case D:return s;case z:return u}return t});var $=Array.isArray;function W(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!H(e)}var V=x||function(){return!1};function H(e){var t=K(e)?A.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function K(e){var t=g(e);return!!e&&("object"==t||"function"==t)}e.exports=function(e){if(W(e)&&($(e)||"string"==typeof e||"function"==typeof e.splice||V(e)||function(e){return function(e){return function(e){return!!e&&"object"==g(e)}(e)&&W(e)}(e)&&E.call(e,"callee")&&(!P.call(e,"callee")||"[object Arguments]"==A.call(e))}(e)))return!e.length;var t=B(e);if(t==o||t==s)return!e.size;if(R||function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||w)}(e))return!I(e).length;for(var n in e)if(E.call(e,n))return!1;return!0}}({get exports(){return Zh},set exports(e){Zh=e}},Zh);var Qh=Zh,Xh={};!function(e,t){var n="__lodash_hash_undefined__",r=9007199254740991,i="[object Arguments]",o="[object Array]",a="[object Boolean]",s="[object Date]",u="[object Error]",c="[object Function]",l="[object Map]",d="[object Number]",f="[object Object]",h="[object Promise]",p="[object RegExp]",v="[object Set]",m="[object String]",y="[object Symbol]",w="[object WeakMap]",b="[object ArrayBuffer]",S="[object DataView]",_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/,A=/^\./,C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k=/\\(\\)?/g,P=/^\[object .+?Constructor\]$/,x=/^(?:0|[1-9]\d*)$/,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[i]=I[o]=I[b]=I[a]=I[S]=I[s]=I[u]=I[c]=I[l]=I[d]=I[f]=I[p]=I[v]=I[m]=I[w]=!1;var T="object"==g(nt)&&nt&&nt.Object===Object&&nt,O="object"==("undefined"==typeof self?"undefined":g(self))&&self&&self.Object===Object&&self,U=T||O||Function("return this")(),N=t&&!t.nodeType&&t,M=N&&e&&!e.nodeType&&e,R=M&&M.exports===N&&T.process,L=function(){try{return R&&R.binding("util")}catch(e){}}(),F=L&&L.isTypedArray;function j(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function D(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function z(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function q(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function B(e,t){return function(n){return e(t(n))}}function G(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var $,W=Array.prototype,V=Function.prototype,H=Object.prototype,K=U["__core-js_shared__"],J=($=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"",Y=V.toString,Z=H.hasOwnProperty,Q=H.toString,X=RegExp("^"+Y.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ee=U.Symbol,te=U.Uint8Array,ne=B(Object.getPrototypeOf,Object),re=H.propertyIsEnumerable,ie=W.splice,oe=Object.getOwnPropertySymbols,ae=B(Object.keys,Object),se=Me(U,"DataView"),ue=Me(U,"Map"),ce=Me(U,"Promise"),le=Me(U,"Set"),de=Me(U,"WeakMap"),fe=Me(Object,"create"),he=We(se),pe=We(ue),ve=We(ce),ge=We(le),me=We(de),ye=ee?ee.prototype:void 0,we=ye?ye.valueOf:void 0,be=ye?ye.toString:void 0;function Se(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _e(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ee(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ae(e){var t=-1,n=e?e.length:0;for(this.__data__=new Ee;++t<n;)this.add(e[t])}function Ce(e){this.__data__=new _e(e)}function ke(e,t){var n=Je(e)||Ke(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!Z.call(e,o)||i&&("length"==o||je(o,r))||n.push(o);return n}function Pe(e,t){for(var n=e.length;n--;)if(He(e[n][0],t))return n;return-1}function xe(e,t){for(var n=0,r=(t=De(t,e)?[t]:Oe(t)).length;null!=e&&n<r;)e=e[$e(t[n++])];return n&&n==r?e:void 0}function Ie(e,t){return null!=e&&t in Object(e)}function Te(e,t,n,r,c){return e===t||(null==e||null==t||!Xe(e)&&!et(t)?e!=e&&t!=t:function(e,t,n,r,c,h){var g=Je(e),w=Je(t),_=o,E=o;g||(_=(_=Fe(e))==i?f:_),w||(E=(E=Fe(t))==i?f:E);var A=_==f&&!z(e),C=E==f&&!z(t),k=_==E;if(k&&!A)return h||(h=new Ce),g||it(e)?Ue(e,t,n,r,c,h):function(e,t,n,r,i,o,c){switch(n){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!r(new te(e),new te(t)));case a:case s:case d:return He(+e,+t);case u:return e.name==t.name&&e.message==t.message;case p:case m:return e==t+"";case l:var f=q;case v:var h=2&o;if(f||(f=G),e.size!=t.size&&!h)return!1;var g=c.get(e);if(g)return g==t;o|=1,c.set(e,t);var w=Ue(f(e),f(t),r,i,o,c);return c.delete(e),w;case y:if(we)return we.call(e)==we.call(t)}return!1}(e,t,_,n,r,c,h);if(!(2&c)){var P=A&&Z.call(e,"__wrapped__"),x=C&&Z.call(t,"__wrapped__");if(P||x){var I=P?e.value():e,T=x?t.value():t;return h||(h=new Ce),n(I,T,r,c,h)}}return!!k&&(h||(h=new Ce),function(e,t,n,r,i,o){var a=2&i,s=ot(e),u=s.length;if(u!=ot(t).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in t:Z.call(t,l)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var f=!0;o.set(e,t),o.set(t,e);for(var h=a;++c<u;){var p=e[l=s[c]],v=t[l];if(r)var g=a?r(v,p,l,t,e,o):r(p,v,l,e,t,o);if(!(void 0===g?p===v||n(p,v,r,i,o):g)){f=!1;break}h||(h="constructor"==l)}if(f&&!h){var m=e.constructor,y=t.constructor;m==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,r,c,h))}(e,t,Te,n,r,c))}function Oe(e){return Je(e)?e:Ge(e)}function Ue(e,t,n,r,i,o){var a=2&i,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var l=-1,d=!0,f=1&i?new Ae:void 0;for(o.set(e,t),o.set(t,e);++l<s;){var h=e[l],p=t[l];if(r)var v=a?r(p,h,l,t,e,o):r(h,p,l,e,t,o);if(void 0!==v){if(v)continue;d=!1;break}if(f){if(!D(t,(function(e,t){if(!f.has(t)&&(h===e||n(h,e,r,i,o)))return f.add(t)}))){d=!1;break}}else if(h!==p&&!n(h,p,r,i,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function Ne(e,t){var n,r,i=e.__data__;return("string"==(r=g(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Me(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Xe(e)||(t=e,J&&J in t))&&(Ze(e)||z(e)?X:P).test(We(e));var t}(n)?n:void 0}Se.prototype.clear=function(){this.__data__=fe?fe(null):{}},Se.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Se.prototype.get=function(e){var t=this.__data__;if(fe){var r=t[e];return r===n?void 0:r}return Z.call(t,e)?t[e]:void 0},Se.prototype.has=function(e){var t=this.__data__;return fe?void 0!==t[e]:Z.call(t,e)},Se.prototype.set=function(e,t){return this.__data__[e]=fe&&void 0===t?n:t,this},_e.prototype.clear=function(){this.__data__=[]},_e.prototype.delete=function(e){var t=this.__data__,n=Pe(t,e);return!(n<0||(n==t.length-1?t.pop():ie.call(t,n,1),0))},_e.prototype.get=function(e){var t=this.__data__,n=Pe(t,e);return n<0?void 0:t[n][1]},_e.prototype.has=function(e){return Pe(this.__data__,e)>-1},_e.prototype.set=function(e,t){var n=this.__data__,r=Pe(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Ee.prototype.clear=function(){this.__data__={hash:new Se,map:new(ue||_e),string:new Se}},Ee.prototype.delete=function(e){return Ne(this,e).delete(e)},Ee.prototype.get=function(e){return Ne(this,e).get(e)},Ee.prototype.has=function(e){return Ne(this,e).has(e)},Ee.prototype.set=function(e,t){return Ne(this,e).set(e,t),this},Ae.prototype.add=Ae.prototype.push=function(e){return this.__data__.set(e,n),this},Ae.prototype.has=function(e){return this.__data__.has(e)},Ce.prototype.clear=function(){this.__data__=new _e},Ce.prototype.delete=function(e){return this.__data__.delete(e)},Ce.prototype.get=function(e){return this.__data__.get(e)},Ce.prototype.has=function(e){return this.__data__.has(e)},Ce.prototype.set=function(e,t){var n=this.__data__;if(n instanceof _e){var r=n.__data__;if(!ue||r.length<199)return r.push([e,t]),this;n=this.__data__=new Ee(r)}return n.set(e,t),this};var Re=oe?B(oe,Object):ut,Le=oe?function(e){for(var t=[];e;)j(t,Re(e)),e=ne(e);return t}:ut,Fe=function(e){return Q.call(e)};function je(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||x.test(e))&&e>-1&&e%1==0&&e<t}function De(e,t){if(Je(e))return!1;var n=g(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!tt(e))||E.test(e)||!_.test(e)||null!=t&&e in Object(t)}function ze(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||H)}function qe(e){return e==e&&!Xe(e)}function Be(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}(se&&Fe(new se(new ArrayBuffer(1)))!=S||ue&&Fe(new ue)!=l||ce&&Fe(ce.resolve())!=h||le&&Fe(new le)!=v||de&&Fe(new de)!=w)&&(Fe=function(e){var t=Q.call(e),n=t==f?e.constructor:void 0,r=n?We(n):void 0;if(r)switch(r){case he:return S;case pe:return l;case ve:return h;case ge:return v;case me:return w}return t});var Ge=Ve((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(tt(e))return be?be.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return A.test(e)&&n.push(""),e.replace(C,(function(e,t,r,i){n.push(r?i.replace(k,"$1"):t||e)})),n}));function $e(e){if("string"==typeof e||tt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function We(e){if(null!=e){try{return Y.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ve(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(Ve.Cache||Ee),n}function He(e,t){return e===t||e!=e&&t!=t}function Ke(e){return function(e){return et(e)&&Ye(e)}(e)&&Z.call(e,"callee")&&(!re.call(e,"callee")||Q.call(e)==i)}Ve.Cache=Ee;var Je=Array.isArray;function Ye(e){return null!=e&&Qe(e.length)&&!Ze(e)}function Ze(e){var t=Xe(e)?Q.call(e):"";return t==c||"[object GeneratorFunction]"==t}function Qe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function Xe(e){var t=g(e);return!!e&&("object"==t||"function"==t)}function et(e){return!!e&&"object"==g(e)}function tt(e){return"symbol"==g(e)||et(e)&&Q.call(e)==y}var rt,it=F?(rt=F,function(e){return rt(e)}):function(e){return et(e)&&Qe(e.length)&&!!I[Q.call(e)]};function ot(e){return Ye(e)?ke(e):function(e){if(!ze(e))return ae(e);var t=[];for(var n in Object(e))Z.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}function at(e){return Ye(e)?ke(e,!0):function(e){if(!Xe(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ze(e),n=[];for(var r in e)("constructor"!=r||!t&&Z.call(e,r))&&n.push(r);return n}(e)}function st(e){return e}function ut(){return[]}e.exports=function(e,t){return null==e?{}:function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=e[a];n(s,a)&&(o[a]=s)}return o}(e,function(e){return function(e,t,n){var r=t(e);return Je(e)?r:j(r,n(e))}(e,at,Le)}(e),function(e){return"function"==typeof e?e:null==e?st:"object"==g(e)?Je(e)?function(e,t){return De(e)&&qe(t)?Be($e(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:xe(e,t);return void 0===r?void 0:r}(n,e);return void 0===r&&r===t?function(e,t){return null!=e&&function(e,t,n){for(var r,i=-1,o=(t=De(t,e)?[t]:Oe(t)).length;++i<o;){var a=$e(t[i]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}return r||!!(o=e?e.length:0)&&Qe(o)&&je(a,o)&&(Je(e)||Ke(e))}(e,t,Ie)}(n,e):Te(t,r,void 0,3)}}(e[0],e[1]):function(e){var t=function(e){for(var t=ot(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,qe(i)]}return t}(e);return 1==t.length&&t[0][2]?Be(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,o=i;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var s=(a=n[i])[0],u=e[s],c=a[1];if(a[2]){if(void 0===u&&!(s in e))return!1}else{var l,d=new Ce;if(!(void 0===l?Te(c,u,r,3,d):l))return!1}}return!0}(n,0,t)}}(e):De(t=e)?(n=$e(t),function(e){return null==e?void 0:e[n]}):function(e){return function(t){return xe(t,e)}}(t);var t,n}(t))}}({get exports(){return Xh},set exports(e){Xh=e}},Xh);var ep,tp,np,rp,ip,op,ap,sp,up,cp,lp,dp,fp,hp,pp,vp,gp,mp,yp=Xh,wp={minimumLength:12,upperCaseLetterRequired:!0,lowerCaseLetterRequired:!0,numberRequired:!0,specialCharacterRequired:!0},bp=["OS-ID-BIZ-40001","OS-ID-BIZ-40051","OS-ID-BIZ-50047","OS-ID-BIZ-40415","OS-ID-BIZ-40052"],Sp=["OS-ID-BIZ-40401"],_p=function(e){r(a,e);var n=i(a);function a(e){e.appKey;var r,i,s=e.identityProvider,u=e.region,c=e.poolId,l=e.clientId,d=e.appUrl,f=e.baseUrl,p=e.scope,v=e.appSyncEndpoint,g=void 0===v?Vh:v,m=e.passwordComplexityPolicy,y=void 0===m?wp:m,w=e.authData,b=void 0===w?new qf:w,S=e.httpClient,_=void 0===S?new t.HttpClient({baseUrl:f}):S,E=e.decodeJwt,A=void 0===E?Jf:E,C=e.configureAmplify,k=void 0===C?function(e){return me.configure(e)}:C,P=e.logger,x=e.persistentStorage,I=void 0===x?localStorage:x,T=e.temporaryStorage,O=void 0===T?sessionStorage:T,U=e.endpointRegistration,N=void 0===U?"/moduleservices/users/registration":U,M=e.endpointResetPass,R=void 0===M?"/moduleservices/users/passwordrecovery":M,L=e.synchronizer,F=e.isOnline,j=e.userInfo;h(this,a),r=n.call(this,{authData:b,httpClient:_,appUrl:d,appSyncEndpoint:g,scope:p,decodeJwt:A,logger:P,synchronizer:L,isOnline:F,userInfo:j}),ep.add(o(r)),tp.set(o(r),void 0),np.set(o(r),void 0),rp.set(o(r),void 0),ip.set(o(r),void 0),op.set(o(r),void 0),ap.set(o(r),void 0),sp.set(o(r),void 0),B(o(r),ip,I,"f"),B(o(r),op,O,"f"),B(o(r),rp,s,"f"),B(o(r),np,l,"f"),B(o(r),tp,y,"f"),B(o(r),ap,N,"f"),B(o(r),sp,R,"f");try{k({Auth:{region:u,userPoolId:c,userPoolWebClientId:l}})}catch(e){null===(i=r.logger)||void 0===i||i.error({category:Kh,message:"Error while configuring Amplify",error:e,code:"OS-CLRT-40110"})}return r}return v(a,[{key:"login",value:function(e){var n,r,i,o,a=e.username,s=e.password,u=e.newPassword,c=e.redirectUri,l=void 0===c?"".concat(window.location.protocol,"//").concat(window.location.host,"/identity"):c,d=e.persistLogin,f=void 0===d||d,h=e.configureAuth,p=void 0===h?function(e){return Of.configure(e)}:h,v=e.authSignIn,g=void 0===v?function(e,t){return Of.signIn(e,t)}:v,m=e.completeNewPassword,y=void 0===m?function(e,t){return Of.completeNewPassword(e,t)}:m,w=e.changePassword,b=void 0===w?function(e,t,n){return Of.changePassword(e,t,n)}:w;return A(this,void 0,void 0,(function*(){try{var e=q(this,ep,"m",fp).call(this,l);p({storage:q(this,f?ip:op,"f")});var c=yield this.fetchEndpoints(),d=yield q(this,ep,"m",lp).call(this,c.authorization_endpoint,e),h=new URL(d).searchParams,v=h.get("code"),m=yield g(a,s);if("NEW_PASSWORD_REQUIRED"===(null==m?void 0:m.challengeName)&&u?yield y(m,u):u&&(yield b(m,s,u)),!v){var w=null==m?void 0:m.getSignInUserSession();if(!w){var S=new Error("Couldn't find current user session.");throw null===(n=this.logger)||void 0===n||n.error({category:Kh,code:"OS-CLRT-40101",error:S,visibility:Fh.Internal}),S}var _=(yield this.httpClient.post({url:q(this,ep,"m",cp).call(this),payload:{clientId:q(this,np,"f"),idToken:w.getIdToken().getJwtToken(),accessToken:w.getAccessToken().getJwtToken(),refreshToken:w.getRefreshToken().getToken()},contentType:t.ContentType.Json})).authCode,E=null!==(r=h.get("redirect_uri"))&&void 0!==r?r:"",A=null!==(i=h.get("state"))&&void 0!==i?i:"",C=yield q(this,ep,"m",dp).call(this,E,_,A),k=new URL(C).searchParams;v=null!==(o=k.get("code"))&&void 0!==o?o:""}var P=yield q(this,ep,"m",vp).call(this,c.token_endpoint,v,e);return yield this.storeTokenInfo(P)}catch(e){throw this.authData.clearAuthData(),this.userInfo.clear(),q(this,ep,"m",up).call(this,e)}}))}},{key:"sendResetPasswordEmail",value:function(e){var t=e.username,n=e.authForgotPassword,r=void 0===n?function(e){return Of.forgotPassword(e)}:n;return A(this,void 0,void 0,(function*(){return r(t)}))}},{key:"confirmRegistration",value:function(e){var t,n=e.username,r=e.password,i=e.code;return A(this,void 0,void 0,(function*(){if(!this.validatePasswordComplexityPolicy(r).isValid)throw $f.create({name:Bf.PasswordComplexityPolicyFailed,message:"Password complexity policy failed.",code:"OS-CLRT-40106"});var e=yield q(this,ep,"m",pp).call(this,{email:n,verificationCode:i},"REGISTRATION");try{yield this.login({username:n,password:e,newPassword:r})}catch(e){var o=e;throw null===(t=this.logger)||void 0===t||t.error({category:Kh,message:"Error confirming user registration",error:o,code:"OS-CLRT-40100",visibility:Fh.External}),o.name===Bf.InvalidCredentials||o.name===Bf.TooManyFailedAttempts?$f.create({name:Bf.InvalidToken,message:"Invalid temporary password.",code:"OS-CLRT-40107"}):o}}))}},{key:"changePassword",value:function(e){var t,n,r,i=e.username,o=e.oldPassword,a=e.newPassword,s=e.authCurrentAuthenticatedUser,u=void 0===s?function(){return Of.currentAuthenticatedUser()}:s,c=e.authChangePassword,l=void 0===c?function(e,t,n){return Of.changePassword(e,t,n)}:c;return A(this,void 0,void 0,(function*(){var e=null;try{e=yield u()}catch(e){null===(t=this.logger)||void 0===t||t.error({category:Kh,message:"Error in current authenticated user",error:e,code:"OS-CLRT-40101"})}if(!e||i!==(null===(n=null==e?void 0:e.attributes)||void 0===n?void 0:n.preferred_username))throw $f.create({name:Bf.InvalidCredentials,message:"Invalid credentials",code:"OS-CLRT-40104"});var s=this.validatePasswordComplexityPolicy(a);if(!a||!s.isValid)throw $f.create({name:Bf.PasswordComplexityPolicyFailed,message:"Password complexity policy failed.",code:"OS-CLRT-40106"});try{yield l(e,o,a)}catch(e){var c=q(this,ep,"m",up).call(this,e);throw null===(r=this.logger)||void 0===r||r.error({category:Kh,message:"Error changing password",error:c,code:c.errorCode,visibility:Fh.External}),c}}))}},{key:"finishResetPassword",value:function(e){var t,n=this,r=e.username,i=e.resetToken,o=e.newPassword,a=e.changePassword,s=void 0===a?function(e,t,r){return n.login({username:e,password:t,newPassword:r})}:a;return A(this,void 0,void 0,(function*(){var e=this.validatePasswordComplexityPolicy(o);if(!o||!e.isValid)throw $f.create({name:Bf.PasswordComplexityPolicyFailed,message:"Password complexity policy failed.",code:"OS-CLRT-40106"});var n=yield q(this,ep,"m",pp).call(this,{email:r,verificationCode:i},"RESET_PASSWORD");try{yield s(r,n,o)}catch(e){throw null===(t=this.logger)||void 0===t||t.error({category:Kh,message:"Error resetting password",error:e,code:"OS-CLRT-40107",visibility:Fh.External}),$f.create({name:Bf.InvalidToken,message:"Invalid password reset token.",code:"OS-CLRT-40107"})}}))}},{key:"resetPassword",value:function(e){var t,n=e.username,r=e.resetToken,i=e.newPassword,o=e.authForgotPassword,a=void 0===o?function(e,t,n){return Of.forgotPasswordSubmit(e,t,n)}:o;return A(this,void 0,void 0,(function*(){var e=this.validatePasswordComplexityPolicy(i);if(!i||!e.isValid)throw $f.create({name:Bf.PasswordComplexityPolicyFailed,message:"Password complexity policy failed.",code:"OS-CLRT-40106"});try{yield a(n,r,i)}catch(e){throw null===(t=this.logger)||void 0===t||t.error({category:Kh,message:"Error resetting password",error:e,code:"OS-CLRT-40107",visibility:Fh.External}),$f.create({name:Bf.InvalidToken,message:"Invalid password reset token.",code:"OS-CLRT-40107"})}}))}},{key:"getPasswordComplexityPolicy",value:function(){return q(this,tp,"f")}},{key:"validatePasswordComplexityPolicy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.length<q(this,tp,"f").minimumLength,n=q(this,tp,"f").upperCaseLetterRequired&&!/[A-Z]/.test(e),r=q(this,tp,"f").lowerCaseLetterRequired&&!/[a-z]/.test(e),i=q(this,tp,"f").numberRequired&&!/\d/.test(e),o=q(this,tp,"f").specialCharacterRequired&&!/[\^$*.[\]{}()?"!@#%&/\\,><':;|_~`=+\- ]/.test(e);return{isValid:!(t||n||r||i||i||o),missingMinimumLength:t,missingUpperCaseLetter:n,missingLowerCaseLetter:r,missingNumber:i,missingSpecialCharacter:o}}},{key:"updateUser",value:function(e){var t,n,r,i=e.username,o=e.name,a=e.pictureUrl,s=e.authCurrentAuthenticatedUser,u=void 0===s?function(){return Of.currentAuthenticatedUser()}:s,c=e.authUpdateUserAttributes,l=void 0===c?function(e,t){return Of.updateUserAttributes(e,t)}:c;return A(this,void 0,void 0,(function*(){var e=null;try{e=yield u()}catch(e){null===(t=this.logger)||void 0===t||t.error({category:Kh,message:"Error in current authenticated user",error:e,code:"OS-CLRT-40101"})}if(!e||i!==(null===(n=null==e?void 0:e.attributes)||void 0===n?void 0:n.preferred_username))throw $f.create({name:Bf.InvalidCredentials,message:"Invalid credentials",code:"OS-CLRT-40104"});try{var s=yp({name:null!=o?o:void 0,given_name:null!=o?o:void 0,family_name:o?" ":void 0,picture:null!=a?a:void 0},(function(e){return void 0!==e}));Qh(s)||(yield l(e,s),this.synchronizeUserInfo())}catch(e){throw null===(r=this.logger)||void 0===r||r.error({category:Kh,message:"Error updating user",error:e,code:"OS-CLRT-40100",visibility:Fh.External}),$f.create({name:Bf.UnknownFailure,message:"Unknown failure!",code:"OS-CLRT-40100"})}}))}},{key:"logout",value:function(e){var t,n,r,i=e.redirectUri,o=e.authSignOut,a=void 0===o?function(){return Of.signOut()}:o;return A(this,void 0,void 0,(function*(){var e=yield this.fetchEndpoints(),o=this.authData.readIdToken();if(this.authData.clearAuthData(),this.userInfo.clear(),o){try{yield a()}catch(e){null===(n=this.logger)||void 0===n||n.error({category:Kh,message:"Error calling the auth signout",error:e,code:"OS-CLRT-40108"})}var s={id_token_hint:o,post_logout_redirect_uri:i};try{yield this.httpClient.get({url:e.end_session_endpoint,params:s,responseType:"none"})}catch(e){null===(r=this.logger)||void 0===r||r.error({category:Kh,message:"Error calling the logout endpoint",error:e,code:"OS-CLRT-40108"})}}else null===(t=this.logger)||void 0===t||t.info({category:Kh,message:"No id token stored. Logout not completed.",visibility:Fh.Internal})}))}},{key:"isExternalUser",value:function(){return!1}}]),a}(Jh);e.BuiltinAuth=_p,tp=new WeakMap,np=new WeakMap,rp=new WeakMap,ip=new WeakMap,op=new WeakMap,ap=new WeakMap,sp=new WeakMap,ep=new WeakSet,up=function(e){var t,n,r,i,o=e,a=null!==(t=o.name)&&void 0!==t?t:Bf.UnknownFailure,s=null!==(n=o.errorCode)&&void 0!==n?n:"OS-CLRT-40100";return"NotAuthorizedException"===o.name?(null===(r=o.message)||void 0===r?void 0:r.includes("Incorrect username or password"))?(a=Bf.InvalidCredentials,s="OS-CLRT-40104"):(null===(i=o.message)||void 0===i?void 0:i.includes("Password attempts exceeded"))&&(a=Bf.TooManyFailedAttempts,s="OS-CLRT-40105"):"LimitExceededException"===o.name&&(a=Bf.TooManyFailedAttempts,s="OS-CLRT-40105"),$f.create({name:a,message:o.message,code:s})},cp=function(){return"/identityapi/v1alpha1/oidc/store-token"},lp=function(e,t){return A(this,void 0,void 0,(function*(){var n={client_id:jf,scope:this.scope,redirect_uri:null!=t?t:"",response_type:"code",kc_idp_hint:q(this,rp,"f")};return this.httpClient.getResponseUrl({url:e,params:n})}))},dp=function(e,t,n){return A(this,void 0,void 0,(function*(){var r={code:t,state:n};return this.httpClient.getResponseUrl({url:e,params:r})}))},fp=function(e){return e.replace("outsystems://","https://")},hp=function(e){return e&&bp.includes(e)?Bf.InvalidToken:e&&Sp.includes(e)?Bf.InvalidCredentials:Bf.UnknownFailure},pp=function(e,n){var r,i,o;return A(this,void 0,void 0,(function*(){try{var a="REGISTRATION"===n?this.buildUrl(q(this,ap,"f")):this.buildUrl(q(this,sp,"f"));return(yield this.httpClient.post({url:a,payload:e,contentType:t.ContentType.Json})).registrationToken}catch(e){var s=e,u=null===(r=s.response)||void 0===r?void 0:r.detail,c="Error getting temporary password"+(u?": ".concat(u):"");throw null===(i=this.logger)||void 0===i||i.error({category:Kh,error:s,message:c}),$f.create({name:q(this,ep,"m",hp).call(this,null===(o=s.response)||void 0===o?void 0:o.errorCode),message:c})}}))},vp=function(e,t,n){return A(this,void 0,void 0,(function*(){try{return yield this.httpClient.post({url:e,payload:{grant_type:"authorization_code",code:t,client_id:jf,redirect_uri:n}})}catch(e){throw q(this,ep,"m",gp).call(this,e)}}))},gp=function(e){var t,n=e instanceof Error?"[Token endpoint] ".concat(e.message):"Token endpoint call failed",r=null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.error_description;return r&&(n+=": ".concat(r)),$f.create({name:Bf.IdentityTokenEndpointFailed,code:"OS-ID-BIZ-40021",message:n})},function(e){e.External="external",e.Builtin="builtin"}(mp||(mp={}));var Ep,Ap,Cp,kp,Pp,xp,Ip,Tp,Op,Up,Np,Mp=mp;e.AuthType=Mp;var Rp,Lp,Fp,jp,Dp,zp,qp,Bp,Gp,$p,Wp,Vp,Hp,Kp=function(){function e(t){var n=t.info,r=t.data,i=void 0===r?new qf:r;h(this,e),Ep.add(this),Ap.set(this,void 0),Cp.set(this,void 0),kp.set(this,""),B(this,Ap,n,"f"),B(this,Cp,i,"f")}return v(e,[{key:"setAuthInfo",value:function(e,t){B(this,Ap,e,"f"),B(this,Cp,new qf,"f"),q(this,Ep,"m",Up).call(this,e)!==q(this,kp,"f")&&(B(this,kp,"","f"),q(this,Cp,"f").clearAuthData()),t&&B(this,Ep,t,"a",xp)}},{key:"getBuiltinAuthInfo",value:function(){var e=q(this,Ep,"m",Ip).call(this);if(q(this,Ep,"m",Tp).call(this,e))return e}},{key:"getExternalAuthInfo",value:function(e){var t=q(this,Ep,"m",Ip).call(this,e,!0);if(q(this,Ep,"m",Op).call(this,t))return t}},{key:"saveConfig",value:function(e,t){var n=q(this,Ep,"m",Np).call(this,t);n&&q(this,Cp,"f").storeCurrentAuthConfig(n),B(this,Ep,e,"a",xp),B(this,kp,q(this,Ep,"m",Up).call(this,t),"f")}},{key:"getAuthType",value:function(){return q(this,Ep,"a",Pp)}},{key:"hasChanges",value:function(e,t){if(e&&e!==q(this,Ep,"a",Pp))return!0;var n=q(this,Ep,"a",Pp)===Mp.Builtin?q(this,Ep,"m",Ip).call(this):q(this,Ep,"m",Ip).call(this,t,!0);return q(this,kp,"f")!==q(this,Ep,"m",Up).call(this,n)}}]),e}();Ap=new WeakMap,Cp=new WeakMap,kp=new WeakMap,Ep=new WeakSet,Pp=function(){var e;return null!==(e=q(this,Cp,"f").readCurrentAuthType())&&void 0!==e?e:void 0},xp=function(e){e&&q(this,Cp,"f").storeCurrentAuthType(e)},Ip=function(e){var t,n=e;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&void 0===n&&(n=null!==(t=q(this,Cp,"f").readCurrentAuthConfig())&&void 0!==t?t:void 0),Object.assign(Object.assign({},q(this,Ap,"f")),null!=n?n:{})},Tp=function(e){return void 0!==e.region&&void 0!==e.poolId&&void 0!==e.clientId&&void 0!==e.identityProvider},Op=function(e){return void 0!==e.clientId&&void 0!==e.identityProvider},Up=function(e){var t=e.identityProvider,n=e.clientId,r=e.passwordComplexityPolicy,i=e.poolId,o=e.region,a=null!=r?r:{},s=a.lowerCaseLetterRequired,u=a.minimumLength,c=a.numberRequired,l=a.specialCharacterRequired,d=a.upperCaseLetterRequired,f="".concat(s).concat(u,"|").concat(c,"|").concat(l,"|").concat(d);return"".concat(t,"|").concat(n,"|").concat(f,"|").concat(i,"|").concat(o)},Np=function(e){var t=e.region,n=e.poolId,r=e.clientId,i=e.identityProvider;if(r&&i)return{region:t,poolId:n,clientId:r,identityProvider:i}};var Jp,Yp=function(){function e(t){var n=t.appKey,r=t.identityProvider,i=t.appUrl,o=t.region,a=t.poolId,s=t.clientId,u=t.scope,c=void 0===u?"":u,l=t.passwordComplexityPolicy,d=t.authData,f=void 0===d?new qf:d,p=t.authInstance,v=t.logger,g=t.httpClient,m=t.configHandler,y=void 0===m?new Kp({info:{identityProvider:r,clientId:s,passwordComplexityPolicy:l,poolId:a,region:o,scope:c},data:f}):m,w=t.isOnline;h(this,e),Rp.add(this),Lp.set(this,void 0),Fp.set(this,void 0),jp.set(this,void 0),Dp.set(this,void 0),zp.set(this,void 0),qp.set(this,void 0),Bp.set(this,void 0),B(this,Lp,n,"f"),B(this,Fp,i,"f"),B(this,jp,p,"f"),B(this,Dp,v,"f"),B(this,zp,g,"f"),B(this,qp,y,"f"),B(this,Bp,w,"f")}return v(e,[{key:"getInstance",value:function(e,t){var n,r=null!=e?e:q(this,qp,"f").getAuthType(),i=q(this,qp,"f").hasChanges(e,t),o=!!(null===(n=q(this,jp,"f"))||void 0===n?void 0:n.isAuthenticated());if(!q(this,jp,"f")&&r)q(this,Rp,"m",Gp).call(this,r,t);else if(!o&&r&&i)q(this,Rp,"m",Gp).call(this,r,t);else if(o&&i)throw new Error("Error getting new instance of auth because a user is already authenticated using another mechanism");return q(this,jp,"f")}},{key:"updateConfig",value:function(e,t){q(this,qp,"f").setAuthInfo(e,t)}}]),e}();e.AuthFactory=Yp,Lp=new WeakMap,Fp=new WeakMap,jp=new WeakMap,Dp=new WeakMap,zp=new WeakMap,qp=new WeakMap,Bp=new WeakMap,Rp=new WeakSet,Gp=function(e,t){switch(e){case Mp.External:return q(this,Rp,"m",Wp).call(this,t);case Mp.Builtin:return q(this,Rp,"m",Vp).call(this);default:throw new Error("Invalid new auth type: ".concat(e))}},$p=function(e,t,n){B(this,jp,e,"f"),q(this,qp,"f").saveConfig(t,n)},Wp=function(e){var t=q(this,qp,"f").getExternalAuthInfo(e);q(this,Rp,"m",Hp).call(this,t);var n=new Yh({appKey:q(this,Lp,"f"),appUrl:q(this,Fp,"f"),scope:t.scope,region:t.region,poolId:t.poolId,clientId:t.clientId,identityProvider:t.identityProvider,logger:q(this,Dp,"f"),httpClient:q(this,zp,"f"),isOnline:q(this,Bp,"f")});q(this,Rp,"m",$p).call(this,n,Mp.External,t)},Vp=function(){var e=q(this,qp,"f").getBuiltinAuthInfo();q(this,Rp,"m",Hp).call(this,e);var t=new _p({appKey:q(this,Lp,"f"),appUrl:q(this,Fp,"f"),scope:e.scope,region:e.region,poolId:e.poolId,clientId:e.clientId,identityProvider:e.identityProvider,passwordComplexityPolicy:e.passwordComplexityPolicy,logger:q(this,Dp,"f"),httpClient:q(this,zp,"f"),isOnline:q(this,Bp,"f")});q(this,Rp,"m",$p).call(this,t,Mp.Builtin,e)},Hp=function(e){var t;if(!e){var n=$f.create({name:"Error loading auth configuration",message:"Identity provider configurations missing.",code:"OS-CLRT-40109"});throw null===(t=q(this,Dp,"f"))||void 0===t||t.error({category:Kh,message:n.message,error:n,code:n.errorCode,visibility:Fh.External}),n}},function(e){e.Auth_Default="OS-CLRT-40100",e.Auth_No_Login="OS-CLRT-40101",e.Auth_Invalid_Mechanism="OS-CLRT-40102",e.Auth_Invalid_RefreshToken="OS-CLRT-40103",e.Auth_Invalid_Credentials="OS-CLRT-40104",e.Auth_Login_Attempts="OS-CLRT-40105",e.Auth_Password_Policy="OS-CLRT-40106",e.Auth_Invalid_Inputs="OS-CLRT-40107",e.Auth_Logout_Failed="OS-CLRT-40108",e.Auth_No_Configuration="OS-CLRT-40109",e.Auth_Configuration_Failed="OS-CLRT-40110",e.Auth_UserIdMissing="OS-CLRT-40111",e.AuthZ_Default="OS-CLRT-40300",e.AuthZ_Screen_No_Roles="OS-CLRT-40301",e.AuthZ_No_Permissions="OS-CLRT-40302",e.AuthZ_Not_Registered="OS-CLRT-40303",e.IdentityTokenFailure="OS-ID-BIZ-40021"}(Jp||(Jp={}));var Zp=Jp;e.AuthErrorCode=Zp,e.Version="1.1.10"}));
define("@outsystems/settings-js",["exports"],(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n);if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key,"string"),"symbol"===t(i)?i:String(i)),o)}var i}var r;Object.defineProperty(e,"__esModule",{value:!0}),e.Version=e.FeaturesManager=e.FeatureKeys=void 0,e.FeatureKeys=r,function(e){e.WebHttpClientForNative="WebHttpClientForNative",e.OpenTelemetryTraces="OpenTelemetryTraces",e.NoInstrumentationFactoryLogs="NoInstrumentationFactoryLogs",e.WriteLogsOnConsoles="WriteLogsOnConsoles"}(r||(e.FeatureKeys=r={}));var o=window.sessionStorage,i=[],a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"readValue",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return null!==(t=null==n?void 0:n.getItem(this.getFeatureKey(e)))&&void 0!==t?t:void 0}},{key:"isEnabled",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,r=this.readValue(e,t),a="true"===(null==r?void 0:r.toLowerCase());return a&&!n.includes(e)?(console.warn('FeaturesManager: Experimental flag "'.concat(e,'" is enabled.')),n.push(e)):!a&&n.includes(e)&&n.splice(n.indexOf(e),1),a}}],null&&n(t.prototype,null),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.FeaturesManager=a,a.getFeatureKey=function(e){return"".concat("ft-").concat(e)},e.Version="0.1.3"}));
define("@outsystems/logger-js",["exports","@outsystems/settings-js","@outsystems/communication-js"],(function(t,e,n){"use strict";var r,i,o,a;function s(t){return function(t){if(Array.isArray(t))return T(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=b(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){if(t){if("string"==typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(t,e):void 0}}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function A(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function P(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}Object.defineProperty(t,"__esModule",{value:!0}),t.Visibility=t.Version=t.Tracer=t.SpanKind=t.Logger=t.LogType=t.KnownAttributes=t.InstrumentationFactory=void 0;var L="object"===("undefined"==typeof globalThis?"undefined":O(globalThis))?globalThis:"object"===("undefined"==typeof self?"undefined":O(self))?self:"object"===("undefined"==typeof window?"undefined":O(window))?window:"object"===("undefined"==typeof global?"undefined":O(global))?global:{},I="1.4.1",R=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,C=function(t){var e=new Set([t]),n=new Set,r=t.match(R);if(!r)return function(){return!1};var i=+r[1],o=+r[2],a=+r[3];if(null!=r[4])return function(e){return e===t};function s(t){return n.add(t),!1}function u(t){return e.add(t),!0}return function(t){if(e.has(t))return!0;if(n.has(t))return!1;var r=t.match(R);if(!r)return s(t);var c=+r[1],l=+r[2],f=+r[3];return null!=r[4]||i!==c?s(t):0===i?o===l&&a<=f?u(t):s(t):o<=l?u(t):s(t)}}(I),N=I.split(".")[0],j=Symbol.for("opentelemetry.js.api."+N),x=L;function M(t,e,n,r){var i;void 0===r&&(r=!1);var o=x[j]=null!==(i=x[j])&&void 0!==i?i:{version:I};if(!r&&o[t]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return n.error(a.stack||a.message),!1}return o.version!==I?(a=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+t+" does not match previously registered API v"+I),n.error(a.stack||a.message),!1):(o[t]=e,n.debug("@opentelemetry/api: Registered a global for "+t+" v1.4.1."),!0)}function D(t){var e,n,r=null===(e=x[j])||void 0===e?void 0:e.version;if(r&&C(r))return null===(n=x[j])||void 0===n?void 0:n[t]}function B(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v1.4.1.");var n=x[j];n&&delete n[t]}var U,F=function(){function t(t){this._namespace=t.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Z("debug",this._namespace,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Z("error",this._namespace,t)},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Z("info",this._namespace,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Z("warn",this._namespace,t)},t.prototype.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Z("verbose",this._namespace,t)},t}();function Z(t,e,n){var r=D("diag");if(r)return n.unshift(e),r[t].apply(r,function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(n),!1))}!function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"}(U||(U={}));var W=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},z=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},V=function(){function t(){function t(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=D("diag");if(r)return r[t].apply(r,z([],W(e),!1))}}var e=this;e.setLogger=function(t,n){var r,i,o;if(void 0===n&&(n={logLevel:U.INFO}),t===e){var a=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return e.error(null!==(r=a.stack)&&void 0!==r?r:a.message),!1}"number"==typeof n&&(n={logLevel:n});var s=D("diag"),u=function(t,e){function n(n,r){var i=e[n];return"function"==typeof i&&t>=r?i.bind(e):function(){}}return t<U.NONE?t=U.NONE:t>U.ALL&&(t=U.ALL),e=e||{},{error:n("error",U.ERROR),warn:n("warn",U.WARN),info:n("info",U.INFO),debug:n("debug",U.DEBUG),verbose:n("verbose",U.VERBOSE)}}(null!==(i=n.logLevel)&&void 0!==i?i:U.INFO,t);if(s&&!n.suppressOverrideMessage){var c=null!==(o=(new Error).stack)&&void 0!==o?o:"<failed to generate stacktrace>";s.warn("Current logger will be overwritten from "+c),u.warn("Current logger will overwrite one already registered from "+c)}return M("diag",u,e,!0)},e.disable=function(){B("diag",e)},e.createComponentLogger=function(t){return new F(t)},e.verbose=t("verbose"),e.debug=t("debug"),e.info=t("info"),e.warn=t("warn"),e.error=t("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}(),H=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G=function(){function t(t){this._entries=t?new Map(t):new Map}return t.prototype.getEntry=function(t){var e=this._entries.get(t);if(e)return Object.assign({},e)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(t,2);return[e[0],e[1]]}))},t.prototype.setEntry=function(e,n){var r=new t(this._entries);return r._entries.set(e,n),r},t.prototype.removeEntry=function(e){var n=new t(this._entries);return n._entries.delete(e),n},t.prototype.removeEntries=function(){for(var e,n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=new t(this._entries);try{for(var a=H(r),s=a.next();!s.done;s=a.next()){var u=s.value;o._entries.delete(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o},t.prototype.clear=function(){return new t},t}(),X=Symbol("BaggageEntryMetadata"),q=V.instance();function K(t){return void 0===t&&(t={}),new G(new Map(Object.entries(t)))}function $(t){return Symbol.for(t)}var Q,Y,J=new function t(e){var n=this;n._currentContext=e?new Map(e):new Map,n.getValue=function(t){return n._currentContext.get(t)},n.setValue=function(e,r){var i=new t(n._currentContext);return i._currentContext.set(e,r),i},n.deleteValue=function(e){var r=new t(n._currentContext);return r._currentContext.delete(e),r}},tt=(Q=function(t,e){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Q(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),et=function(){function t(){}return t.prototype.createHistogram=function(t,e){return pt},t.prototype.createCounter=function(t,e){return ft},t.prototype.createUpDownCounter=function(t,e){return ht},t.prototype.createObservableGauge=function(t,e){return vt},t.prototype.createObservableCounter=function(t,e){return dt},t.prototype.createObservableUpDownCounter=function(t,e){return yt},t.prototype.addBatchObservableCallback=function(t,e){},t.prototype.removeBatchObservableCallback=function(t){},t}(),nt=function(){},rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e.prototype.add=function(t,e){},e}(nt),it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e.prototype.add=function(t,e){},e}(nt),ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e.prototype.record=function(t,e){},e}(nt),at=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.removeCallback=function(t){},t}(),st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e}(at),ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e}(at),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e}(at),lt=new et,ft=new rt,pt=new ot,ht=new it,dt=new st,vt=new ut,yt=new ct;!function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"}(Y||(Y={}));var gt,_t={get:function(t,e){if(null!=t)return t[e]},keys:function(t){return null==t?[]:Object.keys(t)}},mt={set:function(t,e,n){null!=t&&(t[e]=n)}},bt=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Tt=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},Et=function(){function t(){}return t.prototype.active=function(){return J},t.prototype.with=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return e.call.apply(e,Tt([n],bt(r),!1))},t.prototype.bind=function(t,e){return e},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),St=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},wt=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},Ot="context",kt=new Et,At=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(t){return M(Ot,t,V.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(r=this._getContextManager()).with.apply(r,wt([t,e,n],St(i),!1))},t.prototype.bind=function(t,e){return this._getContextManager().bind(t,e)},t.prototype._getContextManager=function(){return D(Ot)||kt},t.prototype.disable=function(){this._getContextManager().disable(),B(Ot,V.instance())},t}();!function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"}(gt||(gt={}));var Pt="0000000000000000",Lt="00000000000000000000000000000000",It={traceId:Lt,spanId:Pt,traceFlags:gt.NONE},Rt=function(){function t(t){void 0===t&&(t=It),this._spanContext=t}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(t,e){return this},t.prototype.setAttributes=function(t){return this},t.prototype.addEvent=function(t,e){return this},t.prototype.setStatus=function(t){return this},t.prototype.updateName=function(t){return this},t.prototype.end=function(t){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(t,e){},t}(),Ct=$("OpenTelemetry Context Key SPAN");function Nt(t){return t.getValue(Ct)||void 0}function jt(){return Nt(At.getInstance().active())}function xt(t,e){return t.setValue(Ct,e)}function Mt(t){return t.deleteValue(Ct)}function Dt(t,e){return xt(t,new Rt(e))}function Bt(t){var e;return null===(e=Nt(t))||void 0===e?void 0:e.spanContext()}var Ut=/^([0-9a-f]{32})$/i,Ft=/^[0-9a-f]{16}$/i;function Zt(t){return Ut.test(t)&&t!==Lt}function Wt(t){return Zt(t.traceId)&&(e=t.spanId,Ft.test(e)&&e!==Pt);var e}function zt(t){return new Rt(t)}var Vt,Ht,Gt,Xt=At.getInstance(),qt=function(){function t(){}return t.prototype.startSpan=function(t,e,n){if(void 0===n&&(n=Xt.active()),Boolean(null==e?void 0:e.root))return new Rt;var r,i=n&&Bt(n);return"object"===O(r=i)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&Wt(i)?new Rt(i):new Rt},t.prototype.startActiveSpan=function(t,e,n,r){var i,o,a;if(!(arguments.length<2)){2===arguments.length?a=e:3===arguments.length?(i=e,a=n):(i=e,o=n,a=r);var s=null!=o?o:Xt.active(),u=this.startSpan(t,i,s),c=xt(s,u);return Xt.with(c,a,void 0,u)}},t}(),Kt=new qt,$t=function(){function t(t,e,n,r){this._provider=t,this.name=e,this.version=n,this.options=r}return t.prototype.startSpan=function(t,e,n){return this._getTracer().startSpan(t,e,n)},t.prototype.startActiveSpan=function(t,e,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Kt},t}(),Qt=new(function(){function t(){}return t.prototype.getTracer=function(t,e,n){return new qt},t}()),Yt=function(){function t(){}return t.prototype.getTracer=function(t,e,n){var r;return null!==(r=this.getDelegateTracer(t,e,n))&&void 0!==r?r:new $t(this,t,e,n)},t.prototype.getDelegate=function(){var t;return null!==(t=this._delegate)&&void 0!==t?t:Qt},t.prototype.setDelegate=function(t){this._delegate=t},t.prototype.getDelegateTracer=function(t,e,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(t,e,n)},t}();!function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Vt||(Vt={})),function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"}(Ht||(Ht={})),function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"}(Gt||(Gt={}));var Jt=At.getInstance(),te=V.instance(),ee=new(function(){function t(){}return t.prototype.getMeter=function(t,e,n){return lt},t}()),ne="metrics",re=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(t){return M(ne,t,V.instance())},t.prototype.getMeterProvider=function(){return D(ne)||ee},t.prototype.getMeter=function(t,e,n){return this.getMeterProvider().getMeter(t,e,n)},t.prototype.disable=function(){B(ne,V.instance())},t}().getInstance(),ie=function(){function t(){}return t.prototype.inject=function(t,e){},t.prototype.extract=function(t,e){return t},t.prototype.fields=function(){return[]},t}(),oe=$("OpenTelemetry Baggage Key");function ae(t){return t.getValue(oe)||void 0}function se(){return ae(At.getInstance().active())}function ue(t,e){return t.setValue(oe,e)}function ce(t){return t.deleteValue(oe)}var le,fe="propagation",pe=new ie,he=function(){function t(){this.createBaggage=K,this.getBaggage=ae,this.getActiveBaggage=se,this.setBaggage=ue,this.deleteBaggage=ce}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(t){return M(fe,t,V.instance())},t.prototype.inject=function(t,e,n){return void 0===n&&(n=mt),this._getGlobalPropagator().inject(t,e,n)},t.prototype.extract=function(t,e,n){return void 0===n&&(n=_t),this._getGlobalPropagator().extract(t,e,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){B(fe,V.instance())},t.prototype._getGlobalPropagator=function(){return D(fe)||pe},t}().getInstance(),de="trace",ve=function(){function t(){this._proxyTracerProvider=new Yt,this.wrapSpanContext=zt,this.isSpanContextValid=Wt,this.deleteSpan=Mt,this.getSpan=Nt,this.getActiveSpan=jt,this.getSpanContext=Bt,this.setSpan=xt,this.setSpanContext=Dt}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(t){var e=M(de,this._proxyTracerProvider,V.instance());return e&&this._proxyTracerProvider.setDelegate(t),e},t.prototype.getTracerProvider=function(){return D(de)||this._proxyTracerProvider},t.prototype.getTracer=function(t,e){return this.getTracerProvider().getTracer(t,e)},t.prototype.disable=function(){B(de,V.instance()),this._proxyTracerProvider=new Yt},t}().getInstance();!function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"}(le||(le={})),U.INFO,le.ParentBasedAlwaysOn,U.ALL,U.VERBOSE,U.DEBUG,U.INFO,U.WARN,U.ERROR,U.NONE,Array(32);var ye,ge=performance;(ye={})["telemetry.sdk.name"]="opentelemetry",ye["process.runtime.name"]="browser",ye["telemetry.sdk.language"]="webjs",ye["telemetry.sdk.version"]="1.13.0";var _e,me,be=Math.pow(10,6),Te=Math.pow(10,9);function Ee(t){var e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*be)]}function Se(t){return function(t,e){var n=[t[0]+e[0],t[1]+e[1]];return n[1]>=Te&&(n[1]-=Te,n[0]+=1),n}(Ee(function(){var t=ge.timeOrigin;if("number"!=typeof t){var e=ge;t=e.timing&&e.timing.fetchStart}return t}()),Ee("number"==typeof t?t:ge.now()))}!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(_e||(_e={})),function(t){t.HTTP="http"}(me||(me={})),Function.prototype.toString.call(Object);var we,Oe=(we=function(t,e){return(we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}we(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){Oe((function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}),t)}(Error);var ke=function(){function t(){var t=this;this._promise=new Promise((function(e,n){t._resolve=e,t._reject=n}))}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(t){this._resolve(t)},t.prototype.reject=function(t){this._reject(t)},t}(),Ae=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Pe=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};!function(){function t(t,e){this._callback=t,this._that=e,this._isCalled=!1,this._deferred=new ke}Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,Pe([this._that],Ae(n),!1))).then((function(t){return e._deferred.resolve(t)}),(function(t){return e._deferred.reject(t)}))}catch(t){this._deferred.reject(t)}}return this._deferred.promise}}();var Le,Ie,Re,Ce,Ne,je=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();E(this,t),this.instant=e}return w(t,null,[{key:"toISOString",value:function(t){return e=t.instant,r=(n=""+"0".repeat(9)+e[1]+"Z").substr(n.length-9-1),new Date(1e3*e[0]).toISOString().replace("000Z",r);var e,n,r}},{key:"toNanoSeconds",value:function(t){return(e=t.instant)[0]*Te+e[1];var e}}]),t}(),xe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Me={exports:{}},De={exports:{}};Me.exports=(Le||(Le=1,De.exports=function(){function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t){return t.charAt(0).toUpperCase()+t.substring(1)}function n(t){return function(){return this[t]}}var r=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],o=["fileName","functionName","source"],a=r.concat(i,o,["args"],["evalOrigin"]);function s(t){if(t)for(var n=0;n<a.length;n++)void 0!==t[a[n]]&&this["set"+e(a[n])](t[a[n]])}s.prototype={getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(t){if(t instanceof s)this.evalOrigin=t;else{if(!(t instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new s(t)}},toString:function(){var t=this.getFileName()||"",e=this.getLineNumber()||"",n=this.getColumnNumber()||"",r=this.getFunctionName()||"";return this.getIsEval()?t?"[eval] ("+t+":"+e+":"+n+")":"[eval]:"+e+":"+n:r?r+" ("+t+":"+e+":"+n+")":t+":"+e+":"+n}},s.fromString=function(t){var e=t.indexOf("("),n=t.lastIndexOf(")"),r=t.substring(0,e),i=t.substring(e+1,n).split(","),o=t.substring(n+1);if(0===o.indexOf("@"))var a=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(o,""),u=a[1],c=a[2],l=a[3];return new s({functionName:r,args:i||void 0,fileName:u,lineNumber:c||void 0,columnNumber:l||void 0})};for(var u=0;u<r.length;u++)s.prototype["get"+e(r[u])]=n(r[u]),s.prototype["set"+e(r[u])]=function(t){return function(e){this[t]=Boolean(e)}}(r[u]);for(var c=0;c<i.length;c++)s.prototype["get"+e(i[c])]=n(i[c]),s.prototype["set"+e(i[c])]=function(e){return function(n){if(!t(n))throw new TypeError(e+" must be a Number");this[e]=Number(n)}}(i[c]);for(var l=0;l<o.length;l++)s.prototype["get"+e(o[l])]=n(o[l]),s.prototype["set"+e(o[l])]=function(t){return function(e){this[t]=String(e)}}(o[l]);return s}()),Ie=De.exports,Re=/(^|@)\S+:\d+/,Ce=/^\s*at .*(\S+:\d+|\(native\))/m,Ne=/^(eval@)?(\[native code])?$/,{parse:function(t){if(void 0!==t.stacktrace||void 0!==t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(Ce))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(t.replace(/[()]/g,""));return[e[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter((function(t){return!!t.match(Ce)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var e=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),n=e.match(/ (\(.+\)$)/);e=n?e.replace(n[0],""):e;var r=this.extractLocation(n?n[1]:e),i=n&&e||void 0,o=["eval","<anonymous>"].indexOf(r[0])>-1?void 0:r[0];return new Ie({functionName:i,fileName:o,lineNumber:r[1],columnNumber:r[2],source:t})}),this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter((function(t){return!t.match(Ne)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new Ie({functionName:t});var e=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=t.match(e),r=n&&n[1]?n[1]:void 0,i=this.extractLocation(t.replace(e,""));return new Ie({functionName:r,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})}),this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(t){for(var e=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),r=[],i=2,o=n.length;i<o;i+=2){var a=e.exec(n[i]);a&&r.push(new Ie({fileName:a[2],lineNumber:a[1],source:n[i]}))}return r},parseOpera10:function(t){for(var e=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),r=[],i=0,o=n.length;i<o;i+=2){var a=e.exec(n[i]);a&&r.push(new Ie({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:n[i]}))}return r},parseOpera11:function(t){return t.stack.split("\n").filter((function(t){return!!t.match(Re)&&!t.match(/^Error created at/)}),this).map((function(t){var e,n=t.split("@"),r=this.extractLocation(n.pop()),i=n.shift()||"",o=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;i.match(/\(([^)]*)\)/)&&(e=i.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var a=void 0===e||"[arguments not available]"===e?void 0:e.split(",");return new Ie({functionName:o,args:a,fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:t})}),this)}});var Be,Ue,Fe=Me.exports,Ze=w((function t(e){E(this,t),this.name=e.name,this.message=e.message,e.stack&&(this.stack=A(t,Be,"m",Ue).call(t,e))}));Be=Ze,Ue=function(t){var e=Fe.parse(t),n=t,r=(null==n?void 0:n.extraStack)?"ExtraStack: ".concat(n.extraStack):"",i=e.map((function(t){return t.source})).join("\n");return"".concat(t.name,": ").concat(t.message,"\n").concat(i,"\n").concat(r)};var We,ze,Ve,He,Ge,Xe=w((function t(e){var n=e.type,r=e.category,i=e.message,o=e.error,a=e.visibility,s=e.timestamp,u=void 0===s?new je:s,c=e.span,l=e.errorCode,f=e.attributes;E(this,t),this.type=n,this.category=r,this.message=i,o&&(this.error=new Ze(o)),this.visibility=a,this.timestamp=u,this.span=c,this.errorCode=l,this.attributes=f})),qe=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;E(this,t),We.add(this),ze.set(this,void 0),P(this,ze,e,"f")}return w(t,[{key:"closeCircuit",value:function(t){A(this,ze,"f").delete(t)}},{key:"run",value:function(t,e){return k(this,void 0,void 0,(function*(){var n=A(this,ze,"f").get(t);return void 0===n?A(this,We,"m",He).call(this,t,e):n.iterationsUntilRetry>0?(n.iterationsUntilRetry--,2):A(this,We,"m",Ge).call(this,t,n,e)}))}}]),t}();ze=new WeakMap,We=new WeakSet,Ve=function(t){A(this,ze,"f").set(t,{retriesFailed:0,iterationsUntilRetry:5})},He=function(t,e){return k(this,void 0,void 0,(function*(){try{return yield e(),0}catch(e){return A(this,We,"m",Ve).call(this,t),console.debug("Circuit breaker ".concat(t," was opened: ").concat(e)),1}}))},Ge=function(t,e,n){return k(this,void 0,void 0,(function*(){try{return yield n(),this.closeCircuit(t),console.debug("Circuit breaker ".concat(t," was closed")),0}catch(t){return e.retriesFailed++,e.iterationsUntilRetry=Math.min(5*e.retriesFailed,10),1}}))};var Ke,$e=new Error("request for lock canceled"),Qe=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Ye=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$e;E(this,t),this._value=e,this._cancelError=n,this._weightedQueues=[],this._weightedWaiters=[]}return w(t,[{key:"acquire",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<=0)throw new Error("invalid weight ".concat(e,": must be positive"));return new Promise((function(n,r){t._weightedQueues[e-1]||(t._weightedQueues[e-1]=[]),t._weightedQueues[e-1].push({resolve:n,reject:r}),t._dispatch()}))}},{key:"runExclusive",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Qe(this,void 0,void 0,(function*(){var n=m(yield this.acquire(e),2),r=n[0],i=n[1];try{return yield t(r)}finally{i()}}))}},{key:"waitForUnlock",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<=0)throw new Error("invalid weight ".concat(e,": must be positive"));return new Promise((function(n){t._weightedWaiters[e-1]||(t._weightedWaiters[e-1]=[]),t._weightedWaiters[e-1].push(n),t._dispatch()}))}},{key:"isLocked",value:function(){return this._value<=0}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(t){this._value=t,this._dispatch()}},{key:"release",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(t<=0)throw new Error("invalid weight ".concat(t,": must be positive"));this._value+=t,this._dispatch()}},{key:"cancel",value:function(){var t=this;this._weightedQueues.forEach((function(e){return e.forEach((function(e){return e.reject(t._cancelError)}))})),this._weightedQueues=[]}},{key:"_dispatch",value:function(){for(var t,e=this._value;e>0;e--){var n=null===(t=this._weightedQueues[e-1])||void 0===t?void 0:t.shift();if(n){var r=this._value,i=e;this._value-=e,e=this._value+1,n.resolve([r,this._newReleaser(i)])}}this._drainUnlockWaiters()}},{key:"_newReleaser",value:function(t){var e=this,n=!1;return function(){n||(n=!0,e.release(t))}}},{key:"_drainUnlockWaiters",value:function(){for(var t=this._value;t>0;t--)this._weightedWaiters[t-1]&&(this._weightedWaiters[t-1].forEach((function(t){return t()})),this._weightedWaiters[t-1]=[])}}]),t}(),Je=function(){function t(e){E(this,t),this._semaphore=new Ye(1,e)}return w(t,[{key:"acquire",value:function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){return m(yield this._semaphore.acquire(),2)[1]}))}},{key:"runExclusive",value:function(t){return this._semaphore.runExclusive((function(){return t()}))}},{key:"isLocked",value:function(){return this._semaphore.isLocked()}},{key:"waitForUnlock",value:function(){return this._semaphore.waitForUnlock()}},{key:"release",value:function(){this._semaphore.isLocked()&&this._semaphore.release()}},{key:"cancel",value:function(){return this._semaphore.cancel()}}]),t}();!function(t){t[t.Debug=1]="Debug",t[t.Info=2]="Info",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Trace=5]="Trace"}(Ke||(Ke={}));var tn={Debug:Ke.Debug,Info:Ke.Info,Warning:Ke.Warning,Error:Ke.Error,Trace:Ke.Trace},en=Ke;t.LogType=en;var nn,rn,on=w((function t(e,n,r,i){E(this,t),this.logId=e,this.log=n,this.logType=r,this.transportId=i})),an="logger-offline-db",sn="byLogType",un="byTransportId",cn="byAggregateSignature",ln="byParentId",fn="logType",pn="transportId",hn="aggregateSignature",dn="parentId",vn=new WeakMap,yn=new WeakMap,gn=new WeakMap,_n=new WeakMap,mn=new WeakMap,bn={get:function(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return yn.get(t);if("objectStoreNames"===e)return t.objectStoreNames||gn.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return En(t[e])},set:function(t,e,n){return t[e]=n,!0},has:function(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function Tn(t){return"function"==typeof t?function(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(rn||(rn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(Cn(this),n),En(vn.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return En(t.apply(Cn(this),n))}:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=t.call.apply(t,[Cn(this),e].concat(r));return gn.set(o,e.sort?e.sort():[e]),En(o)}}(t):(t instanceof IDBTransaction&&function(t){if(!yn.has(t)){var e=new Promise((function(e,n){var r=function(){t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=function(){e(),r()},o=function(){n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)}));yn.set(t,e)}}(t),e=t,(nn||(nn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(t){return e instanceof t}))?new Proxy(t,bn):t);var e}function En(t){if(t instanceof IDBRequest)return e=t,(n=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",o)},i=function(){t(En(e.result)),r()},o=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}))).then((function(t){t instanceof IDBCursor&&vn.set(t,e)})).catch((function(){})),mn.set(n,e),n;var e,n;if(_n.has(t))return _n.get(t);var r=Tn(t);return r!==t&&(_n.set(t,r),mn.set(r,t)),r}var Sn,wn,On,kn,An,Pn,Ln,In,Rn,Cn=function(t){return mn.get(t)},Nn=["get","getKey","getAll","getAllKeys","count"],jn=["put","add","delete","clear"],xn=new Map;function Mn(t,e){if(t instanceof IDBDatabase&&!(e in t)&&"string"==typeof e){if(xn.get(e))return xn.get(e);var n=e.replace(/FromIndex$/,""),r=e!==n,i=jn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Nn.includes(n))){var o=function(){var t,e=(t=function*(t){for(var e,o=this.transaction(t,i?"readwrite":"readonly"),a=o.store,s=arguments.length,u=new Array(s>1?s-1:0),c=1;c<s;c++)u[c-1]=arguments[c];return r&&(a=a.index(u.shift())),(yield Promise.all([(e=a)[n].apply(e,u),i&&o.done]))[0]},function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){_(o,r,i,a,s,"next",t)}function s(t){_(o,r,i,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();return xn.set(e,o),o}}}bn=function(t){return y(y({},t),{},{get:function(e,n,r){return Mn(e,n)||t.get(e,n,r)},has:function(e,n){return!!Mn(e,n)||t.has(e,n)}})}(bn);var Dn=100,Bn="next",Un=function(){function t(e){var n=e.dbName,r=e.tableName,i=e.version,o=e.indices,a=e.cursorToRecord,s=e.propertyKey;E(this,t),Sn.add(this),wn.set(this,void 0),On.set(this,void 0),kn.set(this,void 0),An.set(this,void 0),Pn.set(this,void 0),Ln.set(this,void 0),P(this,wn,n,"f"),P(this,On,r,"f"),P(this,An,i,"f"),P(this,Pn,o,"f"),P(this,Ln,a,"f"),P(this,kn,s,"f")}return w(t,[{key:"open",value:function(){return k(this,void 0,void 0,(function*(){var t=A(this,On,"f"),e=A(this,Pn,"f"),n={keyPath:A(this,kn,"f"),autoIncrement:!A(this,kn,"f")};return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,o=n.blocking,a=n.terminated,s=indexedDB.open(t,e),u=En(s);return i&&s.addEventListener("upgradeneeded",(function(t){i(En(s.result),t.oldVersion,t.newVersion,En(s.transaction),t)})),r&&s.addEventListener("blocked",(function(t){return r(t.oldVersion,t.newVersion,t)})),u.then((function(t){a&&t.addEventListener("close",(function(){return a()})),o&&t.addEventListener("versionchange",(function(t){return o(t.oldVersion,t.newVersion,t)}))})).catch((function(){})),u}(A(this,wn,"f"),A(this,An,"f"),{upgrade:function(r,i){if(i<1){var o,a=r.createObjectStore(t,n),s=d(e);try{for(s.s();!(o=s.n()).done;){var u=o.value;a.createIndex(u.name,u.field)}}catch(t){s.e(t)}finally{s.f()}}}})}))}},{key:"getAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.maxRecords,n=void 0===e?Dn:e,r=t.sortAsc,i=void 0===r||r;return k(this,void 0,void 0,(function*(){var t=yield this.open();try{var e=t.transaction(A(this,On,"f")).objectStore(A(this,On,"f"));return yield A(this,Sn,"m",In).call(this,yield e.openCursor(null,i?Bn:"prev"),n)}finally{t.close()}}))}},{key:"getByIndex",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dn,r=arguments.length>3?arguments[3]:void 0;return k(this,void 0,void 0,(function*(){var i=yield this.open();try{var o=i.transaction(A(this,On,"f")).objectStore(A(this,On,"f"));return yield A(this,Sn,"m",In).call(this,yield o.index(t).openCursor(e),n,r)}finally{i.close()}}))}},{key:"put",value:function(t){return k(this,void 0,void 0,(function*(){var e=yield this.open();try{var n,r=e.transaction(A(this,On,"f"),"readwrite").objectStore(A(this,On,"f")),i=d(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;yield r.put(o)}}catch(t){i.e(t)}finally{i.f()}}finally{e.close()}}))}},{key:"count",value:function(){return k(this,void 0,void 0,(function*(){var t=yield this.open();try{return yield t.count(A(this,On,"f"))}finally{t.close()}}))}},{key:"delete",value:function(t){return k(this,void 0,void 0,(function*(){var e=yield this.open();try{yield e.delete(A(this,On,"f"),t)}finally{e.close()}}))}},{key:"deleteMultiple",value:function(t){return k(this,void 0,void 0,(function*(){var e=this,n=yield this.open();try{var r=t.map((function(t){return n.delete(A(e,On,"f"),t)}));yield Promise.all(r)}finally{n.close()}}))}},{key:"deleteByIndex",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dn;return k(this,void 0,void 0,(function*(){var r=yield this.open();try{var i=r.transaction(A(this,On,"f"),"readwrite").objectStore(A(this,On,"f"));return yield A(this,Sn,"m",Rn).call(this,yield i.index(t).openCursor(e),n)}finally{r.close()}}))}},{key:"deleteRecords",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;return k(this,void 0,void 0,(function*(){var e=yield this.open();try{var n=e.transaction(A(this,On,"f"),"readwrite").objectStore(A(this,On,"f"));return yield A(this,Sn,"m",Rn).call(this,yield n.openCursor(null,Bn),t)}finally{e.close()}}))}}]),t}();wn=new WeakMap,On=new WeakMap,kn=new WeakMap,An=new WeakMap,Pn=new WeakMap,Ln=new WeakMap,Sn=new WeakSet,In=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dn,n=arguments.length>2?arguments[2]:void 0;return k(this,void 0,void 0,(function*(){for(var r=[];t&&r.length<e;){var i=A(this,Ln,"f").call(this,t);n&&!n(i)||r.push(i),t=yield t.continue()}return r}))},Rn=function(t,e){return k(this,void 0,void 0,(function*(){for(var n=0;t&&n<e;)yield t.delete(),n++,t=yield t.continue();return n}))};var Fn,Zn=function(t){u(n,t);var e=l(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an;return E(this,n),e.call(this,{dbName:t,tableName:"logs",cursorToRecord:function(t){return new on(t.primaryKey,t.value.log,t.value.logType,t.value.transportId)},indices:[{name:un,field:pn},{name:sn,field:fn}],version:1})}return w(n,[{key:"getByTransportId",value:function(t,e){return k(this,void 0,void 0,(function*(){return this.getByIndex("byTransportId",t,e)}))}},{key:"getByLogType",value:function(t,e){return k(this,void 0,void 0,(function*(){return this.getByIndex("byLogType",t,e)}))}},{key:"putLog",value:function(t,e){return k(this,void 0,void 0,(function*(){return this.put([{log:t,logType:t.type,transportId:e}])}))}},{key:"deleteByLogType",value:function(t,e){return k(this,void 0,void 0,(function*(){return this.deleteByIndex("byLogType",t,e)}))}}]),n}(Un),Wn=function(){function t(e){var n=e.databaseName,r=e.database,i=void 0===r?new Zn(n):r;E(this,t),Fn.set(this,void 0),P(this,Fn,i,"f")}return w(t,[{key:"readLogs",value:function(t){return k(this,void 0,void 0,(function*(){return A(this,Fn,"f").getAll({sortAsc:!0,maxRecords:t})}))}},{key:"readLogsByTransport",value:function(t,e){return k(this,void 0,void 0,(function*(){return A(this,Fn,"f").getByTransportId(t,e)}))}},{key:"removeLogs",value:function(t){return k(this,void 0,void 0,(function*(){return A(this,Fn,"f").deleteMultiple(t)}))}},{key:"insertLog",value:function(t,e){return k(this,void 0,void 0,(function*(){return A(this,Fn,"f").putLog(t,e)}))}},{key:"countLogs",value:function(){return k(this,void 0,void 0,(function*(){return A(this,Fn,"f").count()}))}},{key:"isFull",value:function(){return k(this,void 0,void 0,(function*(){return(yield A(this,Fn,"f").count())>=1e4}))}},{key:"discardLogs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return k(this,void 0,void 0,(function*(){var e,n=Object.keys(en).filter((function(t){return isNaN(Number(t))})),r=t,i=d(n);try{for(i.s();!(e=i.n()).done;){var o=e.value,a=tn[o];if((r-=(yield A(this,Fn,"f").deleteByLogType(a,r)))<=0)break}}catch(t){i.e(t)}finally{i.f()}return r}))}}]),t}();function zn(t){var e=t.getSpanInformation(),n=t.getContext();return{traceId:n.traceId,spanId:n.spanId,parentSpanId:e.parentSpanId,name:e.name,startTimeUnixNano:e.startTime,endTimeUnixNano:e.endTime,attributes:n.attributes,kind:e.kind,status:e.status}}Fn=new WeakMap;var Vn={exports:{}};!function(t){function e(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function n(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function r(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}var i;t.AggregationAttributes=void 0,(i=t.AggregationAttributes||(t.AggregationAttributes={})).IsAggregateProxy="outsystems.aggregation.proxy",i.AggregationSize="outsystems.aggregation.size",i.IsOutlier="outsystems.aggregation.outlier",i.AverageDuration="outsystems.aggregation.duration.average",i.MaxDuration="outsystems.aggregation.duration.max",i.MinDuration="outsystems.aggregation.duration.min",i.IsNonAggregable="osinternal.spanIsNonAggregable",i.ChildrenNames="osinternal.childrenNames",i.functionKey="outsystems.function.key";function o(t,e){return t<e?-1:e<t?1:0}function a(e){return e.attributes[t.AggregationAttributes.functionKey]}function u(e,n,r){var i,a,s=null!==(i=null==r?void 0:r(e))&&void 0!==i?i:e.name,u=null!==(a=e.attributes[t.AggregationAttributes.ChildrenNames])&&void 0!==a?a:[];u.sort(o);var c=e.attributes[t.AggregationAttributes.IsNonAggregable]?"".concat("NonAggregable","."):"";return"".concat(c).concat(n,".").concat(s,"(").concat(u.join(","),")")}function c(e,n){return!(e.attributes[t.AggregationAttributes.IsNonAggregable]||n.some((function(e){return e.attributes[t.AggregationAttributes.IsNonAggregable]})))}var l,f={absolute:function(t,e){var n=t.min,r=t.max;return"number"==typeof n&&e<n||"number"==typeof r&&e>r},relative:function(t,e,n){var r=t.min,i=t.max;return f.absolute({min:"number"==typeof r?n+r:void 0,max:"number"==typeof i?n+i:void 0},e)},ratio:function(t,e,n){var r=t.lower,i=t.upper,o=t.max,a=t.min;return f.relative({min:"number"==typeof r?Math.min(n*r,null!=a?a:1/0):void 0,max:"number"==typeof i?Math.max(n*i,null!=o?o:-1/0):void 0},e,n)}};function p(t,e,n){return f[t.type](t,e,n)}var h,d,v,y,_,b,T,S,O,k,A=function(){function t(e){E(this,t),l.set(this,void 0),r(this,l,e,"f")}return w(t,[{key:"isOutlier",value:function(t,e){for(var r=0,i=Object.entries(n(this,l,"f"));r<i.length;r++){var o=m(i[r],2),a=o[0],s=o[1],u=t.attributes[a],c=e.attributes[a];if((void 0!==u||void 0!==c)&&(void 0===u||void 0===c||p(s,u,c)))return!0}return!1}}]),t}();l=new WeakMap;var P=function(){function i(e){var n=e.storage,o=e.outlierDetector,s=void 0===o?new A(g({},t.AggregationAttributes.AverageDuration,{type:"ratio",upper:.1,max:5e7})):o,u=e.getSpanObjectId,c=void 0===u?a:u;E(this,i),h.add(this),d.set(this,void 0),v.set(this,void 0),y.set(this,void 0),r(this,d,n,"f"),r(this,v,s,"f"),r(this,y,c,"f")}return w(i,[{key:"aggregate",value:function(t,r){return e(this,void 0,void 0,(function*(){var e=yield n(this,d,"f").readSpansByParentId(t.spanId),i=n(this,h,"m",T).call(this,t);if(c(i,e)){var o=yield n(this,h,"m",_).call(this,i,r);if(o)if(n(this,v,"f").isOutlier(i,o))yield n(this,d,"f").insertSpans([n(this,h,"m",S).call(this,i)],r);else{var a=n(this,h,"m",b).call(this,t,o),u=n(this,h,"m",k).call(this,e,a);yield n(this,d,"f").insertSpans([a].concat(s(u)),r)}else yield n(this,d,"f").insertSpans([i],r)}else yield n(this,d,"f").insertSpans([n(this,h,"m",O).call(this,i)],r)}))}}]),i}();d=new WeakMap,v=new WeakMap,y=new WeakMap,h=new WeakSet,_=function(t,r){return e(this,void 0,void 0,(function*(){var e=u(t,r,n(this,y,"f"));return m(yield n(this,d,"f").readSpansByAggregateSignature(e),1)[0]}))},b=function(e,n){var r,i,o=null!==(i=n.attributes[t.AggregationAttributes.AggregationSize])&&void 0!==i?i:1,a=n.attributes[t.AggregationAttributes.AverageDuration],s=n.attributes[t.AggregationAttributes.MaxDuration],u=n.attributes[t.AggregationAttributes.MinDuration],c=e.endTimeUnixNano-e.startTimeUnixNano;return Object.assign(Object.assign({},n),{attributes:Object.assign(Object.assign({},n.attributes),(r={},g(r,t.AggregationAttributes.IsAggregateProxy,!0),g(r,t.AggregationAttributes.AggregationSize,o+1),g(r,t.AggregationAttributes.AverageDuration,(a*o+c)/(o+1)),g(r,t.AggregationAttributes.MaxDuration,Math.max(s,c)),g(r,t.AggregationAttributes.MinDuration,Math.min(u,c)),r)),parentSpanId:n.parentSpanId===e.spanId?e.parentSpanId:n.parentSpanId})},T=function(e){var n,r=e.endTimeUnixNano-e.startTimeUnixNano;return Object.assign(Object.assign({},e),{attributes:Object.assign(Object.assign({},e.attributes),(n={},g(n,t.AggregationAttributes.IsAggregateProxy,!1),g(n,t.AggregationAttributes.AverageDuration,r),g(n,t.AggregationAttributes.MaxDuration,r),g(n,t.AggregationAttributes.MinDuration,r),n))})},S=function(e){var n;return Object.assign(Object.assign({},e),{attributes:Object.assign(Object.assign({},e.attributes),(n={},g(n,t.AggregationAttributes.IsOutlier,!0),g(n,t.AggregationAttributes.IsNonAggregable,!0),n))})},O=function(e){return Object.assign(Object.assign({},e),{attributes:Object.assign(Object.assign({},e.attributes),g({},t.AggregationAttributes.IsNonAggregable,!0))})},k=function(t,e){return t.flatMap((function(t){return t.spanId!==e.spanId?[Object.assign(Object.assign({},t),{parentSpanId:e.spanId})]:[]}))};t.SpanAggregator=P,t.ThresholdOutlierDetector=A,t.Version="1.3.0",t.makeAggregateSignature=u,Object.defineProperty(t,"__esModule",{value:!0})}(Vn.exports);var Hn,Gn,Xn,qn=w((function t(e){var n=e.spanId,r=e.span,i=e.transportId,o=e.aggregateSignature;E(this,t),this.spanId=n,this.span=r,this.transportId=i,this.parentId=r.parentSpanId,this.aggregateSignature=null!=o?o:""})),Kn=function(t){u(n,t);var e=l(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an,i=arguments.length>1?arguments[1]:void 0;return E(this,n),t=e.call(this,{dbName:r,tableName:"spans",version:1,propertyKey:i,cursorToRecord:function(t){return new qn({spanId:t.primaryKey,span:t.value.span,transportId:t.value.transportId,aggregateSignature:t.value.aggregateSignature})},indices:[{name:un,field:pn},{name:cn,field:hn},{name:ln,field:dn}]}),Hn.add(p(t)),t}return w(n,[{key:"getByAggregateSignature",value:function(t,e){return this.getByIndex("byAggregateSignature",t,e)}},{key:"getByParentId",value:function(t,e){return this.getByIndex("byParentId",t,e)}},{key:"getByTransportId",value:function(t,e){return this.getByIndex("byTransportId",t,e)}},{key:"getTopLevelByTransportId",value:function(t,e){return this.getByIndex("byTransportId",t,e,(function(t){return void 0===t.parentId}))}},{key:"putSpans",value:function(t,e){var n=this;return this.put(t.map((function(t){return A(n,Hn,"m",Gn).call(n,t,e)})))}}]),n}(Un);Hn=new WeakSet,Gn=function(t,e){return{span:t,transportId:e,spanId:t.spanId,aggregateSignature:Vn.exports.makeAggregateSignature(t,e),parentId:t.parentSpanId}};var $n,Qn,Yn,Jn,tr,er,nr,rr,ir,or=function(){function t(e){var n=e.databaseName,r=e.autoincrement,i=void 0===r||r,o=e.database,a=void 0===o?i?new Kn(n):new Kn(n,"spanId"):o;E(this,t),Xn.set(this,void 0),P(this,Xn,a,"f")}return w(t,[{key:"readSpans",value:function(t){return k(this,void 0,void 0,(function*(){return A(this,Xn,"f").getAll({sortAsc:!0,maxRecords:t})}))}},{key:"readSpansByTransport",value:function(t,e){return k(this,void 0,void 0,(function*(){var n=yield A(this,Xn,"f").getTopLevelByTransportId(t,e);return n.length>0?n:A(this,Xn,"f").getByTransportId(t,e)}))}},{key:"readSpansByParentId",value:function(t,e){return k(this,void 0,void 0,(function*(){return A(this,Xn,"f").getByParentId(t,e)}))}},{key:"readSpansByAggregateSignature",value:function(t,e){return k(this,void 0,void 0,(function*(){return A(this,Xn,"f").getByAggregateSignature(t,e)}))}},{key:"removeSpans",value:function(t){return k(this,void 0,void 0,(function*(){return A(this,Xn,"f").deleteMultiple(t)}))}},{key:"insertSpan",value:function(t,e){return k(this,void 0,void 0,(function*(){var n=zn(t);return A(this,Xn,"f").putSpans([n],e)}))}},{key:"insertSerializableSpans",value:function(t,e){return k(this,void 0,void 0,(function*(){return A(this,Xn,"f").putSpans(t,e)}))}},{key:"countSpans",value:function(){return k(this,void 0,void 0,(function*(){return A(this,Xn,"f").count()}))}},{key:"isFull",value:function(){return k(this,void 0,void 0,(function*(){return(yield A(this,Xn,"f").count())>=1e4}))}},{key:"discardSpans",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return k(this,void 0,void 0,(function*(){return A(this,Xn,"f").deleteRecords(t)}))}}]),t}();Xn=new WeakMap;var ar=1e3,sr=new Je,ur=new Je,cr=function(){function t(e){var n=e.databaseNameSuffix,r=e.isOnline,i=void 0===r?function(){return!0}:r,o=e.offlineLogsStorage,a=void 0===o?new Wn({databaseName:"".concat("logs","-").concat(n)}):o,s=e.offlineTracesStorage,u=void 0===s?new or({databaseName:"".concat("spans_v2","-").concat(n),autoincrement:!1}):s,c=e.legacyOfflineTracesStorage,l=void 0===c?new or({databaseName:"".concat("spans","-").concat(n)}):c,f=e.flushLegacyTraces,p=void 0!==f&&f,h=e.aggregateSpans,d=void 0!==h&&h,v=e.spanAggregator,y=void 0===v?function(t){var e=this;return new Vn.exports.SpanAggregator({storage:{insertSpans:function(n,r){return k(e,void 0,void 0,(function*(){yield t.insertSerializableSpans(n,r)}))},readSpansByAggregateSignature:function(n){return k(e,void 0,void 0,(function*(){return(yield t.readSpansByAggregateSignature(n)).map((function(t){return t.span}))}))},readSpansByParentId:function(n){return k(e,void 0,void 0,(function*(){return(yield t.readSpansByParentId(n)).map((function(t){return t.span}))}))}}})}(u):v,g=e.mutexDispatchLogs,_=void 0===g?sr:g,m=e.mutexDispatchSpans,b=void 0===m?ur:m;E(this,t),$n.set(this,void 0),Qn.set(this,void 0),Yn.set(this,void 0),Jn.set(this,!0),tr.set(this,void 0),er.set(this,void 0),nr.set(this,void 0),rr.set(this,void 0),ir.set(this,void 0),P(this,$n,a,"f"),P(this,Qn,u,"f"),P(this,Yn,l,"f"),P(this,tr,i,"f"),P(this,Jn,p,"f"),P(this,er,d,"f"),P(this,nr,y,"f"),P(this,ir,_,"f"),P(this,rr,b,"f")}return w(t,[{key:"writeLog",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return k(this,void 0,void 0,(function*(){try{(yield A(this,$n,"f").isFull())&&(yield A(this,$n,"f").discardLogs()),yield A(this,$n,"f").insertLog(t,e.getTransportId()),(yield A(this,$n,"f").countLogs())>=n&&(yield this.flushTransportLogs(e))}catch(t){console.debug("Error writing log to storage",t)}}))}},{key:"writeSpan",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ar;return k(this,void 0,void 0,(function*(){var r=this;try{(yield A(this,Qn,"f").isFull())&&(yield A(this,Qn,"f").discardSpans()),yield A(this,rr,"f").runExclusive((function(){return k(r,void 0,void 0,(function*(){A(this,er,"f")?yield A(this,nr,"f").aggregate(zn(t),e.getTransportId()):yield A(this,Qn,"f").insertSpan(t,e.getTransportId())}))})),(yield A(this,Qn,"f").countSpans())>=n&&(yield this.flushTransportSpans(e))}catch(t){console.debug("Error writing trace to storage",t)}}))}},{key:"processTransportLogs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return k(this,void 0,void 0,(function*(){var n=this;yield A(this,ir,"f").runExclusive((function(){return k(n,void 0,void 0,(function*(){yield this.internalLogProcess(t,e,!0)}))}))}))}},{key:"flushTransportLogs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return k(this,void 0,void 0,(function*(){var n=this;yield A(this,ir,"f").runExclusive((function(){return k(n,void 0,void 0,(function*(){yield this.internalLogProcess(t,e,!1)}))}))}))}},{key:"internalLogProcess",value:function(t,e,n){return k(this,void 0,void 0,(function*(){if(!t.requiresConnectivity()||A(this,tr,"f").call(this))try{for(var r=n?e:1,i=yield A(this,$n,"f").readLogsByTransport(t.getTransportId(),e);i.length>=r;)yield t.writeAll(i.map((function(t){return t.log}))),yield A(this,$n,"f").removeLogs(i.map((function(t){return t.logId}))),i=yield A(this,$n,"f").readLogsByTransport(t.getTransportId(),e)}catch(t){throw console.debug("Error in internal log processing",t),t}}))}},{key:"processTransportSpans",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ar;return k(this,void 0,void 0,(function*(){var n=this;yield A(this,rr,"f").runExclusive((function(){return k(n,void 0,void 0,(function*(){yield this.internalSpanProcess(t,e,!0)}))}))}))}},{key:"flushTransportSpans",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ar;return k(this,void 0,void 0,(function*(){var n=this;yield A(this,rr,"f").runExclusive((function(){return k(n,void 0,void 0,(function*(){yield this.internalSpanProcess(t,e,!1)}))}))}))}},{key:"internalSpanProcess",value:function(t,e,n){return k(this,void 0,void 0,(function*(){if(!t.requiresConnectivity()||A(this,tr,"f").call(this)){if(A(this,Jn,"f"))try{var r=yield this.writeSpansToTransport({transport:t,spansBatchSize:e,storage:A(this,Yn,"f"),processCompleteBatchOnly:!1});P(this,Jn,r>0,"f")}catch(t){console.warn("Error in processing legacy spans",t)}yield this.writeSpansToTransport({transport:t,spansBatchSize:e,processCompleteBatchOnly:n,storage:A(this,Qn,"f")})}}))}},{key:"writeSpansToTransport",value:function(t){var e=t.transport,n=t.spansBatchSize,r=t.processCompleteBatchOnly,i=t.storage;return k(this,void 0,void 0,(function*(){try{var t=r?n:1,o=yield i.readSpansByTransport(e.getTransportId(),n);if(0===o.length)return 0;for(;o.length>=t;)yield e.writeAll(o.map((function(t){return t.span}))),yield i.removeSpans(o.map((function(t){return t.spanId}))),o=yield i.readSpansByTransport(e.getTransportId(),n);return yield i.countSpans()}catch(t){throw console.debug("Error processing spans",t),t}}))}}]),t}();$n=new WeakMap,Qn=new WeakMap,Yn=new WeakMap,Jn=new WeakMap,tr=new WeakMap,er=new WeakMap,nr=new WeakMap,rr=new WeakMap,ir=new WeakMap;var lr,fr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4;E(this,t),this.timerInterval=e,this.tasksToRun=new Map}return w(t,[{key:"scheduleNextRun",value:function(){var t=this;this.currentTaskTimeout&&clearTimeout(this.currentTaskTimeout),this.currentTaskTimeout=setTimeout((function(){return t.runTask()}),this.timerInterval)}},{key:"runTask",value:function(){return k(this,void 0,void 0,(function*(){if(this.currentTaskTimeout){this.stop();var t=Array.from(this.tasksToRun.values()).map((function(t){return t()}));yield Promise.all(t),this.scheduleNextRun()}}))}},{key:"start",value:function(){this.scheduleNextRun()}},{key:"stop",value:function(){this.currentTaskTimeout&&(clearTimeout(this.currentTaskTimeout),this.currentTaskTimeout=void 0)}},{key:"addTask",value:function(t,e){this.tasksToRun.set(t,e)}},{key:"deleteTask",value:function(t){this.tasksToRun.delete(t)}},{key:"getTask",value:function(t){return this.tasksToRun.get(t)}},{key:"setTimerInterval",value:function(t){this.timerInterval=t,this.start()}}]),t}(),pr=function(){function t(e){var n=this,r=e.logTransports,i=void 0===r?[]:r,o=e.traceTransports,a=void 0===o?[]:o,s=e.databaseNameSuffix,u=e.isOnline,c=e.aggregateSpans,l=e.offlineManager,f=void 0===l?new cr({databaseNameSuffix:s,isOnline:u,flushLegacyTraces:!0,aggregateSpans:c}):l,p=e.taskScheduler,h=void 0===p?new fr:p,d=e.circuitBreakerRunner,v=void 0===d?new qe:d;E(this,t),this.logTransports=i,this.traceTransports=a,this.offlineManager=f,this.taskScheduler=h,this.circuitBreakerRunner=v,this.taskScheduler.addTask("flush-logs",(function(){return k(n,void 0,void 0,(function*(){return this.flushLogs()}))})),this.taskScheduler.addTask("flush-spans",(function(){return k(n,void 0,void 0,(function*(){return this.flushSpans()}))})),this.taskScheduler.start()}return w(t,[{key:"addLogTransport",value:function(t){var e=t.getTransportId();this.logTransports.some((function(t){return t.getTransportId()===e}))||this.logTransports.push(t)}},{key:"addTraceTransport",value:function(t){var e=t.getTransportId();this.traceTransports.some((function(t){return t.getTransportId()===e}))||this.traceTransports.push(t)}},{key:"removeLogTransport",value:function(t){var e=this.logTransports.findIndex((function(e){return e.getTransportId()===t}));-1!==e&&(this.logTransports.splice(e,1),this.circuitBreakerRunner.closeCircuit(t))}},{key:"removeTraceTransport",value:function(t){var e=this.traceTransports.findIndex((function(e){return e.getTransportId()===t}));-1!==e&&(this.traceTransports.splice(e,1),this.circuitBreakerRunner.closeCircuit(t))}},{key:"setAllLogTypeBaselines",value:function(t){var e,n=d(this.logTransports);try{for(n.s();!(e=n.n()).done;)e.value.setLogTypeBaseline(t)}catch(t){n.e(t)}finally{n.f()}}},{key:"enableTracing",value:function(){var t,e=d(this.traceTransports);try{for(e.s();!(t=e.n()).done;)t.value.enableTracing()}catch(t){e.e(t)}finally{e.f()}}},{key:"disableTracing",value:function(){var t,e=d(this.traceTransports);try{for(e.s();!(t=e.n()).done;)t.value.disableTracing()}catch(t){e.e(t)}finally{e.f()}}},{key:"flushLogs",value:function(){return k(this,void 0,void 0,(function*(){var t=this,e=this.logTransports.map((function(e){return k(t,void 0,void 0,(function*(){var t=this,n=e.getTransportId();yield this.circuitBreakerRunner.run(n,(function(){return t.offlineManager.flushTransportLogs(e)}))}))}));yield Promise.all(e)}))}},{key:"flushSpans",value:function(){return k(this,void 0,void 0,(function*(){var t=this,e=this.traceTransports.map((function(e){return k(t,void 0,void 0,(function*(){var t=this,n=e.getTransportId();yield this.circuitBreakerRunner.run(n,(function(){return t.offlineManager.flushTransportSpans(e)}))}))}));yield Promise.all(e)}))}},{key:"processLog",value:function(t){return k(this,void 0,void 0,(function*(){var e,n=this,r=d(this.logTransports.filter((function(e){return e.getLogTypeBaseline()<=t.type})));try{var i=function*(){var r=e.value;if(r.hasWriteBuffer())yield n.offlineManager.writeLog(t,r);else{var i=r.getTransportId();0!==(yield n.circuitBreakerRunner.run(i,(function(){return r.write(t)})))&&(yield n.offlineManager.writeLog(t,r))}};for(r.s();!(e=r.n()).done;)yield*i()}catch(t){r.e(t)}finally{r.f()}}))}},{key:"processSpan",value:function(t){return k(this,void 0,void 0,(function*(){var e,n=this,r=d(this.traceTransports.filter((function(t){return t.isTracingEnabled()})));try{var i=function*(){var r=e.value;if(r.hasWriteBuffer())yield n.offlineManager.writeSpan(t,r);else{var i=r.getTransportId(),o=zn(t);0!==(yield n.circuitBreakerRunner.run(i,(function(){return r.write(o)})))&&(yield n.offlineManager.writeSpan(t,r))}};for(r.s();!(e=r.n()).done;)yield*i()}catch(t){r.e(t)}finally{r.f()}}))}},{key:"setSchedulerTimerInterval",value:function(t){this.taskScheduler.setTimerInterval(t)}}]),t}();!function(t){t[t.Internal=0]="Internal",t[t.External=1]="External"}(lr||(lr={}));var hr=lr;t.Visibility=hr;var dr,vr="object"==O(xe)&&xe&&xe.Object===Object&&xe,yr=vr,gr="object"==("undefined"==typeof self?"undefined":O(self))&&self&&self.Object===Object&&self,_r=yr||gr||Function("return this")(),mr=_r.Symbol,br=mr,Tr=Object.prototype,Er=Tr.hasOwnProperty,Sr=Tr.toString,wr=br?br.toStringTag:void 0,Or=Object.prototype.toString,kr=function(t){var e=Er.call(t,wr),n=t[wr];try{t[wr]=void 0;var r=!0}catch(t){}var i=Sr.call(t);return r&&(e?t[wr]=n:delete t[wr]),i},Ar=mr?mr.toStringTag:void 0,Pr=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ar&&Ar in Object(t)?kr(t):function(t){return Or.call(t)}(t)},Lr=function(t){var e=O(t);return null!=t&&("object"==e||"function"==e)},Ir=Pr,Rr=Lr,Cr=function(t){if(!Rr(t))return!1;var e=Ir(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Nr=_r["__core-js_shared__"],jr=(dr=/[^.]+$/.exec(Nr&&Nr.keys&&Nr.keys.IE_PROTO||""))?"Symbol(src)_1."+dr:"",xr=Function.prototype.toString,Mr=function(t){if(null!=t){try{return xr.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Dr=Cr,Br=function(t){return!!jr&&jr in t},Ur=Lr,Fr=Mr,Zr=/^\[object .+?Constructor\]$/,Wr=Function.prototype,zr=Object.prototype,Vr=Wr.toString,Hr=zr.hasOwnProperty,Gr=RegExp("^"+Vr.call(Hr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xr=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Ur(t)||Br(t))&&(Dr(t)?Gr:Zr).test(Fr(t))}(n)?n:void 0},qr=Xr,Kr=function(){try{var t=qr(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),$r=function(t,e,n){"__proto__"==e&&Kr?Kr(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Qr=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var s=o[++r];if(!1===e(i[s],s,i))break}return t},Yr=function(t){return null!=t&&"object"==O(t)},Jr=Pr,ti=Yr,ei=function(t){return ti(t)&&"[object Arguments]"==Jr(t)},ni=Yr,ri=Object.prototype,ii=ri.hasOwnProperty,oi=ri.propertyIsEnumerable,ai=ei(function(){return arguments}())?ei:function(t){return ni(t)&&ii.call(t,"callee")&&!oi.call(t,"callee")},si=Array.isArray,ui={exports:{}},ci=function(){return!1};!function(t,e){var n=_r,r=ci,i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i?n.Buffer:void 0,s=(a?a.isBuffer:void 0)||r;t.exports=s}(ui,ui.exports);var li=/^(?:0|[1-9]\d*)$/,fi=function(t,e){var n=O(t);return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&li.test(t))&&t>-1&&t%1==0&&t<e},pi=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},hi=Pr,di=pi,vi=Yr,yi={};yi["[object Float32Array]"]=yi["[object Float64Array]"]=yi["[object Int8Array]"]=yi["[object Int16Array]"]=yi["[object Int32Array]"]=yi["[object Uint8Array]"]=yi["[object Uint8ClampedArray]"]=yi["[object Uint16Array]"]=yi["[object Uint32Array]"]=!0,yi["[object Arguments]"]=yi["[object Array]"]=yi["[object ArrayBuffer]"]=yi["[object Boolean]"]=yi["[object DataView]"]=yi["[object Date]"]=yi["[object Error]"]=yi["[object Function]"]=yi["[object Map]"]=yi["[object Number]"]=yi["[object Object]"]=yi["[object RegExp]"]=yi["[object Set]"]=yi["[object String]"]=yi["[object WeakMap]"]=!1;var gi={exports:{}};!function(t,e){var n=vr,r=e&&!e.nodeType&&e,i=r&&t&&!t.nodeType&&t,o=i&&i.exports===r&&n.process,a=function(){try{return i&&i.require&&i.require("util").types||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a}(gi,gi.exports);var _i=function(t){return vi(t)&&di(t.length)&&!!yi[hi(t)]},mi=function(t){return function(e){return t(e)}},bi=gi.exports,Ti=bi&&bi.isTypedArray,Ei=Ti?mi(Ti):_i,Si=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},wi=ai,Oi=si,ki=ui.exports,Ai=fi,Pi=Ei,Li=Object.prototype.hasOwnProperty,Ii=function(t,e){var n=Oi(t),r=!n&&wi(t),i=!n&&!r&&ki(t),o=!n&&!r&&!i&&Pi(t),a=n||r||i||o,s=a?Si(t.length,String):[],u=s.length;for(var c in t)!e&&!Li.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ai(c,u))||s.push(c);return s},Ri=Object.prototype,Ci=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ri)},Ni=function(t,e){return function(n){return t(e(n))}},ji=Ni(Object.keys,Object),xi=Ci,Mi=ji,Di=Object.prototype.hasOwnProperty,Bi=Cr,Ui=pi,Fi=function(t){return null!=t&&Ui(t.length)&&!Bi(t)},Zi=Ii,Wi=Fi,zi=function(t){return Wi(t)?Zi(t):function(t){if(!xi(t))return Mi(t);var e=[];for(var n in Object(t))Di.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)},Vi=Qr,Hi=zi,Gi=function(t,e){return t===e||t!=t&&e!=e},Xi=Gi,qi=function(t,e){for(var n=t.length;n--;)if(Xi(t[n][0],e))return n;return-1},Ki=qi,$i=Array.prototype.splice,Qi=qi,Yi=qi,Ji=qi,to=function(){this.__data__=[],this.size=0};function eo(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}eo.prototype.clear=to,eo.prototype.delete=function(t){var e=this.__data__,n=Ki(e,t);return!(n<0||(n==e.length-1?e.pop():$i.call(e,n,1),--this.size,0))},eo.prototype.get=function(t){var e=this.__data__,n=Qi(e,t);return n<0?void 0:e[n][1]},eo.prototype.has=function(t){return Yi(this.__data__,t)>-1},eo.prototype.set=function(t,e){var n=this.__data__,r=Ji(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var no=eo,ro=no,io=Xr(_r,"Map"),oo=Xr(Object,"create"),ao=oo,so=oo,uo=Object.prototype.hasOwnProperty,co=oo,lo=Object.prototype.hasOwnProperty,fo=oo,po=function(){this.__data__=ao?ao(null):{},this.size=0},ho=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},vo=function(t){var e=this.__data__;if(so){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return uo.call(e,t)?e[t]:void 0};function yo(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}yo.prototype.clear=po,yo.prototype.delete=ho,yo.prototype.get=vo,yo.prototype.has=function(t){var e=this.__data__;return co?void 0!==e[t]:lo.call(e,t)},yo.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=fo&&void 0===e?"__lodash_hash_undefined__":e,this};var go=yo,_o=no,mo=io,bo=function(t,e){var n=t.__data__;return function(t){var e=O(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map},To=bo,Eo=bo,So=bo,wo=bo;function Oo(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Oo.prototype.clear=function(){this.size=0,this.__data__={hash:new go,map:new(mo||_o),string:new go}},Oo.prototype.delete=function(t){var e=To(this,t).delete(t);return this.size-=e?1:0,e},Oo.prototype.get=function(t){return Eo(this,t).get(t)},Oo.prototype.has=function(t){return So(this,t).has(t)},Oo.prototype.set=function(t,e){var n=wo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var ko=Oo,Ao=no,Po=io,Lo=ko,Io=no,Ro=function(){this.__data__=new ro,this.size=0},Co=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},No=function(t){return this.__data__.get(t)},jo=function(t){return this.__data__.has(t)};function xo(t){var e=this.__data__=new Io(t);this.size=e.size}xo.prototype.clear=Ro,xo.prototype.delete=Co,xo.prototype.get=No,xo.prototype.has=jo,xo.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Ao){var r=n.__data__;if(!Po||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Lo(r)}return n.set(t,e),this.size=n.size,this};var Mo=xo,Do=ko;function Bo(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Do;++e<n;)this.add(t[e])}Bo.prototype.add=Bo.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Bo.prototype.has=function(t){return this.__data__.has(t)};var Uo=Bo,Fo=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Zo=function(t,e){return t.has(e)},Wo=function(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t),l=o.get(e);if(c&&l)return c==e&&l==t;var f=-1,p=!0,h=2&n?new Uo:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var d=t[f],v=e[f];if(r)var y=a?r(v,d,f,e,t,o):r(d,v,f,t,e,o);if(void 0!==y){if(y)continue;p=!1;break}if(h){if(!Fo(e,(function(t,e){if(!Zo(h,e)&&(d===t||i(d,t,n,r,o)))return h.push(e)}))){p=!1;break}}else if(d!==v&&!i(d,v,n,r,o)){p=!1;break}}return o.delete(t),o.delete(e),p},zo=_r.Uint8Array,Vo=Gi,Ho=Wo,Go=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},Xo=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},qo=mr?mr.prototype:void 0,Ko=qo?qo.valueOf:void 0,$o=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Qo=$o,Yo=si,Jo=function(t,e,n){var r=e(t);return Yo(t)?r:Qo(r,n(t))},ta=function(){return[]},ea=ta,na=Object.prototype.propertyIsEnumerable,ra=Object.getOwnPropertySymbols,ia=ra?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}(ra(t),(function(e){return na.call(t,e)})))}:ea,oa=Jo,aa=ia,sa=zi,ua=function(t){return oa(t,sa,aa)},ca=Object.prototype.hasOwnProperty,la=Xr(_r,"DataView"),fa=io,pa=Xr(_r,"Promise"),ha=Xr(_r,"Set"),da=Xr(_r,"WeakMap"),va=Pr,ya=Mr,ga="[object Map]",_a="[object Promise]",ma="[object Set]",ba="[object WeakMap]",Ta="[object DataView]",Ea=ya(la),Sa=ya(fa),wa=ya(pa),Oa=ya(ha),ka=ya(da),Aa=va;(la&&Aa(new la(new ArrayBuffer(1)))!=Ta||fa&&Aa(new fa)!=ga||pa&&Aa(pa.resolve())!=_a||ha&&Aa(new ha)!=ma||da&&Aa(new da)!=ba)&&(Aa=function(t){var e=va(t),n="[object Object]"==e?t.constructor:void 0,r=n?ya(n):"";if(r)switch(r){case Ea:return Ta;case Sa:return ga;case wa:return _a;case Oa:return ma;case ka:return ba}return e});var Pa=Mo,La=Wo,Ia=function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new zo(t),new zo(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Vo(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Go;case"[object Set]":var u=1&r;if(s||(s=Xo),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var l=Ho(s(t),s(e),r,i,o,a);return a.delete(t),l;case"[object Symbol]":if(Ko)return Ko.call(t)==Ko.call(e)}return!1},Ra=function(t,e,n,r,i,o){var a=1&n,s=ua(t),u=s.length;if(u!=ua(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:ca.call(e,l)))return!1}var f=o.get(t),p=o.get(e);if(f&&p)return f==e&&p==t;var h=!0;o.set(t,e),o.set(e,t);for(var d=a;++c<u;){var v=t[l=s[c]],y=e[l];if(r)var g=a?r(y,v,l,e,t,o):r(v,y,l,t,e,o);if(!(void 0===g?v===y||i(v,y,n,r,o):g)){h=!1;break}d||(d="constructor"==l)}if(h&&!d){var _=t.constructor,m=e.constructor;_==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof m&&m instanceof m||(h=!1)}return o.delete(t),o.delete(e),h},Ca=Aa,Na=si,ja=ui.exports,xa=Ei,Ma="[object Arguments]",Da="[object Array]",Ba="[object Object]",Ua=Object.prototype.hasOwnProperty,Fa=Yr,Za=function t(e,n,r,i,o){return e===n||(null==e||null==n||!Fa(e)&&!Fa(n)?e!=e&&n!=n:function(t,e,n,r,i,o){var a=Na(t),s=Na(e),u=a?Da:Ca(t),c=s?Da:Ca(e),l=(u=u==Ma?Ba:u)==Ba,f=(c=c==Ma?Ba:c)==Ba,p=u==c;if(p&&ja(t)){if(!ja(e))return!1;a=!0,l=!1}if(p&&!l)return o||(o=new Pa),a||xa(t)?La(t,e,n,r,i,o):Ia(t,e,u,n,r,i,o);if(!(1&n)){var h=l&&Ua.call(t,"__wrapped__"),d=f&&Ua.call(e,"__wrapped__");if(h||d){var v=h?t.value():t,y=d?e.value():e;return o||(o=new Pa),i(v,y,n,r,o)}}return!!p&&(o||(o=new Pa),Ra(t,e,n,r,i,o))}(e,n,r,i,t,o))},Wa=Mo,za=Za,Va=Lr,Ha=function(t){return t==t&&!Va(t)},Ga=Ha,Xa=zi,qa=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},Ka=qa,$a=Pr,Qa=Yr,Ya=function(t){return"symbol"==O(t)||Qa(t)&&"[object Symbol]"==$a(t)},Ja=si,ts=Ya,es=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ns=/^\w*$/,rs=function(t,e){if(Ja(t))return!1;var n=O(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ts(t))||ns.test(t)||!es.test(t)||null!=e&&t in Object(e)},is=ko;function os(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(os.Cache||is),n}os.Cache=is;var as,ss,us,cs=os,ls=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fs=/\\(\\)?/g,ps=function(t){var e=cs(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ls,(function(t,n,r,i){e.push(r?i.replace(fs,"$1"):n||t)})),e})),hs=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},ds=hs,vs=si,ys=Ya,gs=mr?mr.prototype:void 0,_s=gs?gs.toString:void 0,ms=function t(e){if("string"==typeof e)return e;if(vs(e))return ds(e,t)+"";if(ys(e))return _s?_s.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},bs=si,Ts=rs,Es=ps,Ss=function(t,e){return bs(t)?t:Ts(t,e)?[t]:Es(function(t){return null==t?"":ms(t)}(t))},ws=Ya,Os=function(t){if("string"==typeof t||ws(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},ks=Ss,As=Os,Ps=function(t,e){for(var n=0,r=(e=ks(e,t)).length;null!=t&&n<r;)t=t[As(e[n++])];return n&&n==r?t:void 0},Ls=Ps,Is=Ss,Rs=ai,Cs=si,Ns=fi,js=pi,xs=Os,Ms=function(t,e){return null!=t&&e in Object(t)},Ds=Za,Bs=function(t,e){return null!=t&&function(t,e,n){for(var r=-1,i=(e=Is(e,t)).length,o=!1;++r<i;){var a=xs(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&js(i)&&Ns(a,i)&&(Cs(t)||Rs(t))}(t,e,Ms)},Us=rs,Fs=Ha,Zs=qa,Ws=Os,zs=Ps,Vs=rs,Hs=Os,Gs=function(t){var e=function(t){for(var e=Xa(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ga(i)]}return e}(t);return 1==e.length&&e[0][2]?Ka(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],c=t[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var f=new Wa;if(r)var p=r(c,l,u,t,e,f);if(!(void 0===p?za(l,c,3,r,f):p))return!1}}return!0}(n,t,e)}},Xs=function(t,e){return Us(t)&&Fs(e)?Zs(Ws(t),e):function(n){var r=function(t,e,n){var r=null==t?void 0:Ls(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?Bs(n,t):Ds(e,r,3)}},qs=function(t){return t},Ks=si,$s=function(t){return Vs(t)?function(t){return function(e){return null==e?void 0:e[t]}}(Hs(t)):function(t){return function(e){return zs(e,t)}}(t)},Qs=function(t){return"function"==typeof t?t:null==t?qs:"object"==O(t)?Ks(t)?Xs(t[0],t[1]):Gs(t):$s(t)},Ys=$r,Js=function(t,e){return t&&Vi(t,e,Hi)},tu=Qs,eu=$r,nu=Gi,ru=Object.prototype.hasOwnProperty,iu=function(t,e,n){var r=t[e];ru.call(t,e)&&nu(r,n)&&(void 0!==n||e in t)||eu(t,e,n)},ou=Ss,au=fi,su=Lr,uu=Os,cu=Ps,lu=function(t,e,n,r){if(!su(t))return t;for(var i=-1,o=(e=ou(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var u=uu(e[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=a){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=su(l)?l:au(e[i+1])?[]:{})}iu(s,u,c),s=s[u]}return t},fu=Ss,pu=Ni(Object.getPrototypeOf,Object),hu=$o,du=pu,vu=ia,yu=ta,gu=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)hu(e,vu(t)),t=du(t);return e}:yu,_u=Lr,mu=Ci,bu=Object.prototype.hasOwnProperty,Tu=Ii,Eu=function(t){if(!_u(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=mu(t),n=[];for(var r in t)("constructor"!=r||!e&&bu.call(t,r))&&n.push(r);return n},Su=Fi,wu=Jo,Ou=gu,ku=function(t){return Su(t)?Tu(t,!0):Eu(t)},Au=hs,Pu=Qs,Lu=function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=cu(t,a);n(s,a)&&lu(o,fu(a,t),s)}return o},Iu=function(t,e){if(null==t)return{};var n=Au(function(t){return wu(t,ku,Ou)}(t),(function(t){return[t]}));return e=Pu(e),Lu(t,n,(function(t,n){return e(t,n[0])}))},Ru="OS-CLRT-00000",Cu=function(t){var e=function(t,e){var n={};return e=tu(e),Js(t,(function(t,r,i){Ys(n,r,e(t,r,i))})),n}(t,(function(t){return t()}));return Iu(e,(function(t){return null!=t}))},Nu=(g(r={},hr.Internal,1),g(r,hr.External,2),r),ju=function(t){var e,n,r,i={};return t.type===en.Error&&t.error&&(i["exception.type"]=t.error.name,i["exception.message"]=Du(t.error.message),i["exception.stacktrace"]=null!==(e=t.error.stack)&&void 0!==e?e:"",i["outsystems.error.code"]=null!==(r=null===(n=t.errorCode)||void 0===n?void 0:n.toString())&&void 0!==r?r:Ru.toString()),i},xu=function(t){var e=function(t){return"boolean"==typeof t?"boolValue":"number"==typeof t?t%1==0?"intValue":"doubleValue":"stringValue"};return Object.entries(t).map((function(t){var n=m(t,2),r=n[0],i=n[1];return{key:r,value:g({},e(i),i)}}))},Mu=function(t){return t["http.url"]&&(t["http.url"]=Du(t["http.url"])),t},Du=function(t){return t.replace(/((outsystems|https)?:\/\/[^ ]*?)\?[^ ]*/g,"$1")},Bu=function(){function t(e){var n=e.baseAttributes,r=void 0===n?{}:n,i=e.transportManager,o=e.getTimestamp;E(this,t),as.set(this,void 0),ss.set(this,void 0),us.set(this,void 0),P(this,as,i,"f"),P(this,ss,o,"f"),P(this,us,r,"f")}return w(t,[{key:"addTransport",value:function(t){A(this,as,"f").addLogTransport(t)}},{key:"removeTransport",value:function(t){A(this,as,"f").removeLogTransport(t)}},{key:"setLogTypeBaseline",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en.Error;A(this,as,"f").setAllLogTypeBaselines(t)}},{key:"flush",value:function(){return k(this,void 0,void 0,(function*(){A(this,as,"f").flushLogs()}))}},{key:"setSchedulerTimerInterval",value:function(t){A(this,as,"f").setSchedulerTimerInterval(t)}},{key:"error",value:function(t){var e=t.category,n=t.message,r=t.error,i=t.errorCode,o=t.visibility,a=void 0===o?hr.Internal:o,s=t.span,u=new Xe({type:en.Error,category:e,message:n,error:r,visibility:a,timestamp:A(this,ss,"f").call(this),errorCode:i,span:s,attributes:Cu(A(this,us,"f"))});A(this,as,"f").processLog(u)}},{key:"warning",value:function(t){var e=t.category,n=t.message,r=t.visibility,i=void 0===r?hr.Internal:r,o=t.span,a=new Xe({type:en.Warning,category:e,message:n,visibility:i,timestamp:A(this,ss,"f").call(this),span:o,attributes:Cu(A(this,us,"f"))});A(this,as,"f").processLog(a)}},{key:"info",value:function(t){var e=t.category,n=t.message,r=t.visibility,i=void 0===r?hr.External:r,o=t.span,a=new Xe({type:en.Info,category:e,message:n,visibility:i,timestamp:A(this,ss,"f").call(this),span:o,attributes:Cu(A(this,us,"f"))});A(this,as,"f").processLog(a)}},{key:"debug",value:function(t){var e=t.category,n=t.message,r=t.visibility,i=void 0===r?hr.Internal:r,o=t.span,a=new Xe({type:en.Debug,category:e,message:n,visibility:i,timestamp:A(this,ss,"f").call(this),span:o,attributes:Cu(A(this,us,"f"))});A(this,as,"f").processLog(a)}}],[{key:"build",value:function(e){var n=e.transports,r=void 0===n?[]:n,i=e.baseAttributes,o=e.databaseNameSuffix,a=e.transportManager,s=void 0===a?new pr({databaseNameSuffix:o,logTransports:r}):a,u=e.getTimestamp,c=void 0===u?function(){return new je}:u;return k(this,void 0,void 0,(function*(){return new t({baseAttributes:i,transportManager:s,getTimestamp:c})}))}}]),t}();t.Logger=Bu,as=new WeakMap,ss=new WeakMap,us=new WeakMap;var Uu=function(){function t(){this._enabled=!1,this._zoneCounter=0}return t.prototype._activeContextFromZone=function(t){return t&&t.get("OT_ZONE_CONTEXT")||J},t.prototype._bindFunction=function(t,e){var n=this,r=function(){for(var r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return n.with(t,(function(){return e.apply(r,i)}))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:e.length}),r},t.prototype._bindListener=function(t,e){var n=e;return void 0!==n.__ot_listeners||(n.__ot_listeners={},"function"==typeof n.addEventListener&&(n.addEventListener=this._patchAddEventListener(n,n.addEventListener,t)),"function"==typeof n.removeEventListener&&(n.removeEventListener=this._patchRemoveEventListener(n,n.removeEventListener))),e},t.prototype._createZoneName=function(){this._zoneCounter++;var t=Math.random();return this._zoneCounter+"-"+t},t.prototype._createZone=function(t,e){var n;return Zone.current.fork({name:t,properties:(n={},n.OT_ZONE_CONTEXT=e,n)})},t.prototype._getActiveZone=function(){return Zone.current},t.prototype._patchAddEventListener=function(t,e,n){var r=this;return function(i,o,a){void 0===t.__ot_listeners&&(t.__ot_listeners={});var s=t.__ot_listeners[i];void 0===s&&(s=new WeakMap,t.__ot_listeners[i]=s);var u=r.bind(n,o);return s.set(o,u),e.call(this,i,u,a)}},t.prototype._patchRemoveEventListener=function(t,e){return function(n,r){if(void 0===t.__ot_listeners||void 0===t.__ot_listeners[n])return e.call(this,n,r);var i=t.__ot_listeners[n],o=i.get(r);return i.delete(r),e.call(this,n,o||r)}},t.prototype.active=function(){if(!this._enabled)return J;var t=this._getActiveZone();return this._activeContextFromZone(t)||J},t.prototype.bind=function(t,e){return void 0===t&&(t=this.active()),"function"==typeof e?this._bindFunction(t,e):(void 0===(n=e)&&(n={}),"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener&&this._bindListener(t,e),e);var n},t.prototype.disable=function(){return this._enabled=!1,this},t.prototype.enable=function(){return this._enabled=!0,this},t.prototype.with=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=this._createZoneName(),a=this._createZone(o,t);return a.run(e,n,r)},t}();
/**
 * @license Angular v14.2.0-next.0
 * (c) 2010-2022 Google LLC. https://angular.io/
 * License: MIT
 */
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */!function(t){var e=t.performance;function n(t){e&&e.mark&&e.mark(t)}function r(t,n){e&&e.measure&&e.measure(t,n)}n("Zone");var i=t.__Zone_symbol_prefix||"__zone_symbol__";function o(t){return i+t}var a=!0===t[o("forceDuplicateZoneCheck")];if(t.Zone){if(a||"function"!=typeof t.Zone.__symbol__)throw new Error("Zone already loaded.");return t.Zone}var s=function(){function e(t,n){E(this,e),this._parent=t,this._name=n?n.name||"unnamed":"<root>",this._properties=n&&n.properties||{},this._zoneDelegate=new l(this,this._parent&&this._parent._zoneDelegate,n)}return w(e,[{key:"parent",get:function(){return this._parent}},{key:"name",get:function(){return this._name}},{key:"get",value:function(t){var e=this.getZoneWith(t);if(e)return e._properties[t]}},{key:"getZoneWith",value:function(t){for(var e=this;e;){if(e._properties.hasOwnProperty(t))return e;e=e._parent}return null}},{key:"fork",value:function(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)}},{key:"wrap",value:function(t,e){if("function"!=typeof t)throw new Error("Expecting function got: "+t);var n=this._zoneDelegate.intercept(this,t,e),r=this;return function(){return r.runGuarded(n,this,arguments,e)}}},{key:"run",value:function(t,e,n,r){j={parent:j,zone:this};try{return this._zoneDelegate.invoke(this,t,e,n,r)}finally{j=j.parent}}},{key:"runGuarded",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;j={parent:j,zone:this};try{try{return this._zoneDelegate.invoke(this,t,e,n,r)}catch(t){if(this._zoneDelegate.handleError(this,t))throw t}}finally{j=j.parent}}},{key:"runTask",value:function(t,e,n){if(t.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(t.zone||b).name+"; Execution: "+this.name+")");if(t.state!==T||t.type!==R&&t.type!==I){var r=t.state!=k;r&&t._transitionTo(k,O),t.runCount++;var i=x;x=t,j={parent:j,zone:this};try{t.type==I&&t.data&&!t.data.isPeriodic&&(t.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,t,e,n)}catch(t){if(this._zoneDelegate.handleError(this,t))throw t}}finally{t.state!==T&&t.state!==P&&(t.type==R||t.data&&t.data.isPeriodic?r&&t._transitionTo(O,k):(t.runCount=0,this._updateTaskCount(t,-1),r&&t._transitionTo(T,k,T))),j=j.parent,x=i}}}},{key:"scheduleTask",value:function(t){if(t.zone&&t.zone!==this)for(var e=this;e;){if(e===t.zone)throw Error("can not reschedule task to ".concat(this.name," which is descendants of the original zone ").concat(t.zone.name));e=e.parent}t._transitionTo(S,T);var n=[];t._zoneDelegates=n,t._zone=this;try{t=this._zoneDelegate.scheduleTask(this,t)}catch(e){throw t._transitionTo(P,S,T),this._zoneDelegate.handleError(this,e),e}return t._zoneDelegates===n&&this._updateTaskCount(t,1),t.state==S&&t._transitionTo(O,S),t}},{key:"scheduleMicroTask",value:function(t,e,n,r){return this.scheduleTask(new f(L,t,e,n,r,void 0))}},{key:"scheduleMacroTask",value:function(t,e,n,r,i){return this.scheduleTask(new f(I,t,e,n,r,i))}},{key:"scheduleEventTask",value:function(t,e,n,r,i){return this.scheduleTask(new f(R,t,e,n,r,i))}},{key:"cancelTask",value:function(t){if(t.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(t.zone||b).name+"; Execution: "+this.name+")");t._transitionTo(A,O,k);try{this._zoneDelegate.cancelTask(this,t)}catch(e){throw t._transitionTo(P,A),this._zoneDelegate.handleError(this,e),e}return this._updateTaskCount(t,-1),t._transitionTo(T,A),t.runCount=0,t}},{key:"_updateTaskCount",value:function(t,e){var n=t._zoneDelegates;-1==e&&(t._zoneDelegates=null);for(var r=0;r<n.length;r++)n[r]._updateTaskCount(t.type,e)}}],[{key:"assertZonePatched",value:function(){if(t.Promise!==C.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}},{key:"root",get:function(){for(var t=e.current;t.parent;)t=t.parent;return t}},{key:"current",get:function(){return j.zone}},{key:"currentTask",get:function(){return x}},{key:"__load_patch",value:function(i,o){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(C.hasOwnProperty(i)){if(!s&&a)throw Error("Already loaded patch: "+i)}else if(!t["__Zone_disable_"+i]){var u="Zone:"+i;n(u),C[i]=o(t,e,N),r(u,u)}}}]),e}();s.__symbol__=o;var u,c={name:"",onHasTask:function(t,e,n,r){return t.hasTask(n,r)},onScheduleTask:function(t,e,n,r){return t.scheduleTask(n,r)},onInvokeTask:function(t,e,n,r,i,o){return t.invokeTask(n,r,i,o)},onCancelTask:function(t,e,n,r){return t.cancelTask(n,r)}},l=function(){function t(e,n,r){E(this,t),this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=n,this._forkZS=r&&(r&&r.onFork?r:n._forkZS),this._forkDlgt=r&&(r.onFork?n:n._forkDlgt),this._forkCurrZone=r&&(r.onFork?this.zone:n._forkCurrZone),this._interceptZS=r&&(r.onIntercept?r:n._interceptZS),this._interceptDlgt=r&&(r.onIntercept?n:n._interceptDlgt),this._interceptCurrZone=r&&(r.onIntercept?this.zone:n._interceptCurrZone),this._invokeZS=r&&(r.onInvoke?r:n._invokeZS),this._invokeDlgt=r&&(r.onInvoke?n:n._invokeDlgt),this._invokeCurrZone=r&&(r.onInvoke?this.zone:n._invokeCurrZone),this._handleErrorZS=r&&(r.onHandleError?r:n._handleErrorZS),this._handleErrorDlgt=r&&(r.onHandleError?n:n._handleErrorDlgt),this._handleErrorCurrZone=r&&(r.onHandleError?this.zone:n._handleErrorCurrZone),this._scheduleTaskZS=r&&(r.onScheduleTask?r:n._scheduleTaskZS),this._scheduleTaskDlgt=r&&(r.onScheduleTask?n:n._scheduleTaskDlgt),this._scheduleTaskCurrZone=r&&(r.onScheduleTask?this.zone:n._scheduleTaskCurrZone),this._invokeTaskZS=r&&(r.onInvokeTask?r:n._invokeTaskZS),this._invokeTaskDlgt=r&&(r.onInvokeTask?n:n._invokeTaskDlgt),this._invokeTaskCurrZone=r&&(r.onInvokeTask?this.zone:n._invokeTaskCurrZone),this._cancelTaskZS=r&&(r.onCancelTask?r:n._cancelTaskZS),this._cancelTaskDlgt=r&&(r.onCancelTask?n:n._cancelTaskDlgt),this._cancelTaskCurrZone=r&&(r.onCancelTask?this.zone:n._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;var i=r&&r.onHasTask,o=n&&n._hasTaskZS;(i||o)&&(this._hasTaskZS=i?r:c,this._hasTaskDlgt=n,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=e,r.onScheduleTask||(this._scheduleTaskZS=c,this._scheduleTaskDlgt=n,this._scheduleTaskCurrZone=this.zone),r.onInvokeTask||(this._invokeTaskZS=c,this._invokeTaskDlgt=n,this._invokeTaskCurrZone=this.zone),r.onCancelTask||(this._cancelTaskZS=c,this._cancelTaskDlgt=n,this._cancelTaskCurrZone=this.zone))}return w(t,[{key:"fork",value:function(t,e){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,t,e):new s(t,e)}},{key:"intercept",value:function(t,e,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,t,e,n):e}},{key:"invoke",value:function(t,e,n,r,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,t,e,n,r,i):e.apply(n,r)}},{key:"handleError",value:function(t,e){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,t,e)}},{key:"scheduleTask",value:function(t,e){var n=e;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),(n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,t,e))||(n=e);else if(e.scheduleFn)e.scheduleFn(e);else{if(e.type!=L)throw new Error("Task is missing scheduleFn.");_(e)}return n}},{key:"invokeTask",value:function(t,e,n,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,t,e,n,r):e.callback.apply(n,r)}},{key:"cancelTask",value:function(t,e){var n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,t,e);else{if(!e.cancelFn)throw Error("Task is not cancelable");n=e.cancelFn(e)}return n}},{key:"hasTask",value:function(t,e){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,t,e)}catch(e){this.handleError(t,e)}}},{key:"_updateTaskCount",value:function(t,e){var n=this._taskCounts,r=n[t],i=n[t]=r+e;if(i<0)throw new Error("More tasks executed then were scheduled.");if(0==r||0==i){var o={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:t};this.hasTask(this.zone,o)}}}]),t}(),f=function(){function e(n,r,i,o,a,s){if(E(this,e),this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=n,this.source=r,this.data=o,this.scheduleFn=a,this.cancelFn=s,!i)throw new Error("callback is not defined");this.callback=i;var u=this;n===R&&o&&o.useG?this.invoke=e.invokeTask:this.invoke=function(){return e.invokeTask.call(t,u,this,arguments)}}return w(e,[{key:"zone",get:function(){return this._zone}},{key:"state",get:function(){return this._state}},{key:"cancelScheduleRequest",value:function(){this._transitionTo(T,S)}},{key:"_transitionTo",value:function(t,e,n){if(this._state!==e&&this._state!==n)throw new Error("".concat(this.type," '").concat(this.source,"': can not transition to '").concat(t,"', expecting state '").concat(e,"'").concat(n?" or '"+n+"'":"",", was '").concat(this._state,"'."));this._state=t,t==T&&(this._zoneDelegates=null)}},{key:"toString",value:function(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}},{key:"toJSON",value:function(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}],[{key:"invokeTask",value:function(t,e,n){t||(t=this),M++;try{return t.runCount++,t.zone.runTask(t,e,n)}finally{1==M&&m(),M--}}}]),e}(),p=o("setTimeout"),h=o("Promise"),d=o("then"),v=[],y=!1;function g(e){if(u||t[h]&&(u=t[h].resolve(0)),u){var n=u[d];n||(n=u.then),n.call(u,e)}else t[p](e,0)}function _(t){0===M&&0===v.length&&g(m),t&&v.push(t)}function m(){if(!y){for(y=!0;v.length;){var t=v;v=[];for(var e=0;e<t.length;e++){var n=t[e];try{n.zone.runTask(n,null,null)}catch(t){N.onUnhandledError(t)}}}N.microtaskDrainDone(),y=!1}}var b={name:"NO ZONE"},T="notScheduled",S="scheduling",O="scheduled",k="running",A="canceling",P="unknown",L="microTask",I="macroTask",R="eventTask",C={},N={symbol:o,currentZoneFrame:function(){return j},onUnhandledError:D,microtaskDrainDone:D,scheduleMicroTask:_,showUncaughtError:function(){return!s[o("ignoreConsoleErrorUncaughtError")]},patchEventTarget:function(){return[]},patchOnProperties:D,patchMethod:function(){return D},bindArguments:function(){return[]},patchThen:function(){return D},patchMacroTask:function(){return D},patchEventPrototype:function(){return D},isIEOrEdge:function(){return!1},getGlobalObjects:function(){},ObjectDefineProperty:function(){return D},ObjectGetOwnPropertyDescriptor:function(){},ObjectCreate:function(){},ArraySlice:function(){return[]},patchClass:function(){return D},wrapWithCurrentZone:function(){return D},filterProperties:function(){return[]},attachOriginToPatched:function(){return D},_redefineProperty:function(){return D},patchCallbacks:function(){return D},nativeScheduleMicroTask:g},j={parent:null,zone:new s(null,null)},x=null,M=0;function D(){}r("Zone","Zone"),t.Zone=s}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||xe);
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var Fu=Object.getOwnPropertyDescriptor,Zu=Object.defineProperty,Wu=Object.getPrototypeOf,zu=Object.create,Vu=Array.prototype.slice,Hu="addEventListener",Gu="removeEventListener",Xu=Zone.__symbol__(Hu),qu=Zone.__symbol__(Gu),Ku="true",$u="false",Qu=Zone.__symbol__("");function Yu(t,e){return Zone.current.wrap(t,e)}function Ju(t,e,n,r,i){return Zone.current.scheduleMacroTask(t,e,n,r,i)}var tc=Zone.__symbol__,ec="undefined"!=typeof window,nc=ec?window:void 0,rc=ec&&nc||"object"===("undefined"==typeof self?"undefined":O(self))&&self||xe;function ic(t,e){for(var n=t.length-1;n>=0;n--)"function"==typeof t[n]&&(t[n]=Yu(t[n],e+"_"+n));return t}function oc(t){return!t||!1!==t.writable&&!("function"==typeof t.get&&void 0===t.set)}var ac="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,sc=!("nw"in rc)&&void 0!==rc.process&&"[object process]"==={}.toString.call(rc.process),uc=!sc&&!ac&&!(!ec||!nc.HTMLElement),cc=void 0!==rc.process&&"[object process]"==={}.toString.call(rc.process)&&!ac&&!(!ec||!nc.HTMLElement),lc={},fc=function(t){if(t=t||rc.event){var e=lc[t.type];e||(e=lc[t.type]=tc("ON_PROPERTY"+t.type));var n,r=this||t.target||rc,i=r[e];if(uc&&r===nc&&"error"===t.type){var o=t;!0===(n=i&&i.call(this,o.message,o.filename,o.lineno,o.colno,o.error))&&t.preventDefault()}else null==(n=i&&i.apply(this,arguments))||n||t.preventDefault();return n}};function pc(t,e,n){var r=Fu(t,e);if(!r&&n&&Fu(n,e)&&(r={enumerable:!0,configurable:!0}),r&&r.configurable){var i=tc("on"+e+"patched");if(!t.hasOwnProperty(i)||!t[i]){delete r.writable,delete r.value;var o=r.get,a=r.set,s=e.slice(2),u=lc[s];u||(u=lc[s]=tc("ON_PROPERTY"+s)),r.set=function(e){var n=this;n||t!==rc||(n=rc),n&&("function"==typeof n[u]&&n.removeEventListener(s,fc),a&&a.call(n,null),n[u]=e,"function"==typeof e&&n.addEventListener(s,fc,!1))},r.get=function(){var n=this;if(n||t!==rc||(n=rc),!n)return null;var i=n[u];if(i)return i;if(o){var a=o.call(this);if(a)return r.set.call(this,a),"function"==typeof n.removeAttribute&&n.removeAttribute(e),a}return null},Zu(t,e,r),t[i]=!0}}}function hc(t,e,n){if(e)for(var r=0;r<e.length;r++)pc(t,"on"+e[r],n);else{var i=[];for(var o in t)"on"==o.slice(0,2)&&i.push(o);for(var a=0;a<i.length;a++)pc(t,i[a],n)}}var dc=tc("originalInstance");function vc(t){var e=rc[t];if(e){rc[tc(t)]=e,rc[t]=function(){var n=ic(arguments,t);switch(n.length){case 0:this[dc]=new e;break;case 1:this[dc]=new e(n[0]);break;case 2:this[dc]=new e(n[0],n[1]);break;case 3:this[dc]=new e(n[0],n[1],n[2]);break;case 4:this[dc]=new e(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}},_c(rc[t],e);var n,r=new e((function(){}));for(n in r)"XMLHttpRequest"===t&&"responseBlob"===n||function(e){"function"==typeof r[e]?rc[t].prototype[e]=function(){return this[dc][e].apply(this[dc],arguments)}:Zu(rc[t].prototype,e,{set:function(n){"function"==typeof n?(this[dc][e]=Yu(n,t+"."+e),_c(this[dc][e],n)):this[dc][e]=n},get:function(){return this[dc][e]}})}(n);for(n in e)"prototype"!==n&&e.hasOwnProperty(n)&&(rc[t][n]=e[n])}}function yc(t,e,n){for(var r=t;r&&!r.hasOwnProperty(e);)r=Wu(r);!r&&t[e]&&(r=t);var i=tc(e),o=null;if(r&&(!(o=r[i])||!r.hasOwnProperty(i))&&(o=r[i]=r[e],oc(r&&Fu(r,e)))){var a=n(o,i,e);r[e]=function(){return a(this,arguments)},_c(r[e],o)}return o}function gc(t,e,n){var r=null;function i(t){var e=t.data;return e.args[e.cbIdx]=function(){t.invoke.apply(this,arguments)},r.apply(e.target,e.args),t}r=yc(t,e,(function(t){return function(e,r){var o=n(e,r);return o.cbIdx>=0&&"function"==typeof r[o.cbIdx]?Ju(o.name,r[o.cbIdx],o,i):t.apply(e,r)}}))}function _c(t,e){t[tc("OriginalDelegate")]=e}var mc=!1,bc=!1;function Tc(){if(mc)return bc;mc=!0;try{var t=nc.navigator.userAgent;-1===t.indexOf("MSIE ")&&-1===t.indexOf("Trident/")&&-1===t.indexOf("Edge/")||(bc=!0)}catch(t){}return bc}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */Zone.__load_patch("ZoneAwarePromise",(function(t,e,n){var r=Object.getOwnPropertyDescriptor,i=Object.defineProperty,o=n.symbol,a=[],s=!0===t[o("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],u=o("Promise"),c=o("then");n.onUnhandledError=function(t){if(n.showUncaughtError()){var e=t&&t.rejection;e?console.error("Unhandled Promise rejection:",e instanceof Error?e.message:e,"; Zone:",t.zone.name,"; Task:",t.task&&t.task.source,"; Value:",e,e instanceof Error?e.stack:void 0):console.error(t)}},n.microtaskDrainDone=function(){for(var t=function(){var t=a.shift();try{t.zone.runGuarded((function(){if(t.throwOriginal)throw t.rejection;throw t}))}catch(t){!function(t){n.onUnhandledError(t);try{var r=e[l];"function"==typeof r&&r.call(this,t)}catch(t){}}(t)}};a.length;)t()};var l=o("unhandledPromiseRejectionHandler");function f(t){return t&&t.then}function p(t){return t}function h(t){return j.reject(t)}var v=o("state"),y=o("value"),g=o("finally"),_=o("parentPromiseValue"),m=o("parentPromiseState"),b=null,T=!1;function S(t,e){return function(n){try{P(t,e,n)}catch(e){P(t,!1,e)}}}var k=function(){var t=!1;return function(e){return function(){t||(t=!0,e.apply(null,arguments))}}},A=o("currentTaskTrace");function P(t,r,o){var u=k();if(t===o)throw new TypeError("Promise resolved with itself");if(t[v]===b){var c=null;try{"object"!==O(o)&&"function"!=typeof o||(c=o&&o.then)}catch(e){return u((function(){P(t,!1,e)}))(),t}if(r!==T&&o instanceof j&&o.hasOwnProperty(v)&&o.hasOwnProperty(y)&&o[v]!==b)I(o),P(t,o[v],o[y]);else if(r!==T&&"function"==typeof c)try{c.call(o,u(S(t,r)),u(S(t,!1)))}catch(e){u((function(){P(t,!1,e)}))()}else{t[v]=r;var l=t[y];if(t[y]=o,t[g]===g&&!0===r&&(t[v]=t[m],t[y]=t[_]),r===T&&o instanceof Error){var f=e.currentTask&&e.currentTask.data&&e.currentTask.data.__creationTrace__;f&&i(o,A,{configurable:!0,enumerable:!1,writable:!0,value:f})}for(var p=0;p<l.length;)R(t,l[p++],l[p++],l[p++],l[p++]);if(0==l.length&&r==T){t[v]=0;var h=o;try{throw new Error("Uncaught (in promise): "+function(t){return t&&t.toString===Object.prototype.toString?(t.constructor&&t.constructor.name||"")+": "+JSON.stringify(t):t?t.toString():Object.prototype.toString.call(t)}(o)+(o&&o.stack?"\n"+o.stack:""))}catch(t){h=t}s&&(h.throwOriginal=!0),h.rejection=o,h.promise=t,h.zone=e.current,h.task=e.currentTask,a.push(h),n.scheduleMicroTask()}}}return t}var L=o("rejectionHandledHandler");function I(t){if(0===t[v]){try{var n=e[L];n&&"function"==typeof n&&n.call(this,{rejection:t[y],promise:t})}catch(t){}t[v]=T;for(var r=0;r<a.length;r++)t===a[r].promise&&a.splice(r,1)}}function R(t,e,n,r,i){I(t);var o=t[v],a=o?"function"==typeof r?r:p:"function"==typeof i?i:h;e.scheduleMicroTask("Promise.then",(function(){try{var r=t[y],i=!!n&&g===n[g];i&&(n[_]=r,n[m]=o);var s=e.run(a,void 0,i&&a!==h&&a!==p?[]:[r]);P(n,!0,s)}catch(t){P(n,!1,t)}}),n)}var C=function(){},N=t.AggregateError,j=function(t,n){function r(t){E(this,r);var e=this;if(!(e instanceof r))throw new Error("Must be an instanceof Promise.");e[v]=b,e[y]=[];try{var n=k();t&&t(n(S(e,!0)),n(S(e,T)))}catch(t){P(e,!1,t)}}return w(r,[{key:Symbol.toStringTag,get:function(){return"Promise"}},{key:Symbol.species,get:function(){return r}},{key:"then",value:function(t,n){var i,o=null===(i=this.constructor)||void 0===i?void 0:i[Symbol.species];o&&"function"==typeof o||(o=this.constructor||r);var a=new o(C),s=e.current;return this[v]==b?this[y].push(s,a,t,n):R(this,s,a,t,n),a}},{key:"catch",value:function(t){return this.then(null,t)}},{key:"finally",value:function(t){var n,i=null===(n=this.constructor)||void 0===n?void 0:n[Symbol.species];i&&"function"==typeof i||(i=r);var o=new i(C);o[g]=g;var a=e.current;return this[v]==b?this[y].push(a,o,t,t):R(this,a,o,t,t),o}}],[{key:"toString",value:function(){return"function ZoneAwarePromise() { [native code] }"}},{key:"resolve",value:function(t){return P(new this(null),!0,t)}},{key:"reject",value:function(t){return P(new this(null),T,t)}},{key:"any",value:function(t){if(!t||"function"!=typeof t[Symbol.iterator])return Promise.reject(new N([],"All promises were rejected"));var e=[],n=0;try{var i,o=d(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;n++,e.push(r.resolve(a))}}catch(t){o.e(t)}finally{o.f()}}catch(t){return Promise.reject(new N([],"All promises were rejected"))}if(0===n)return Promise.reject(new N([],"All promises were rejected"));var s=!1,u=[];return new r((function(t,r){for(var i=0;i<e.length;i++)e[i].then((function(e){s||(s=!0,t(e))}),(function(t){u.push(t),0==--n&&(s=!0,r(new N(u,"All promises were rejected")))}))}))}},{key:"race",value:function(t){var e,n,r=new this((function(t,r){e=t,n=r}));function i(t){e(t)}function o(t){n(t)}var a,s=d(t);try{for(s.s();!(a=s.n()).done;){var u=a.value;f(u)||(u=this.resolve(u)),u.then(i,o)}}catch(t){s.e(t)}finally{s.f()}return r}},{key:"all",value:function(t){return r.allWithCallback(t)}},{key:"allSettled",value:function(t){return(this&&this.prototype instanceof r?this:r).allWithCallback(t,{thenCallback:function(t){return{status:"fulfilled",value:t}},errorCallback:function(t){return{status:"rejected",reason:t}}})}},{key:"allWithCallback",value:function(t,e){var n,r,i,o=this,a=new this((function(t,e){n=t,r=e})),s=2,u=0,c=[],l=d(t);try{var p=function(){var t=i.value;f(t)||(t=o.resolve(t));var a=u;try{t.then((function(t){c[a]=e?e.thenCallback(t):t,0==--s&&n(c)}),(function(t){e?(c[a]=e.errorCallback(t),0==--s&&n(c)):r(t)}))}catch(t){r(t)}s++,u++};for(l.s();!(i=l.n()).done;)p()}catch(t){l.e(t)}finally{l.f()}return 0==(s-=2)&&n(c),a}}]),r}();j.resolve=j.resolve,j.reject=j.reject,j.race=j.race,j.all=j.all;var x=t[u]=t.Promise;t.Promise=j;var M=o("thenPatched");function D(t){var e=t.prototype,n=r(e,"then");if(!n||!1!==n.writable&&n.configurable){var i=e.then;e[c]=i,t.prototype.then=function(t,e){var n=this;return new j((function(t,e){i.call(n,t,e)})).then(t,e)},t[M]=!0}}return n.patchThen=D,x&&(D(x),yc(t,"fetch",(function(t){return e=t,function(t,n){var r=e.apply(t,n);if(r instanceof j)return r;var i=r.constructor;return i[M]||D(i),r};var e}))),Promise[e.__symbol__("uncaughtPromiseErrors")]=a,j})),
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
Zone.__load_patch("toString",(function(t){var e=Function.prototype.toString,n=tc("OriginalDelegate"),r=tc("Promise"),i=tc("Error"),o=function(){if("function"==typeof this){var o=this[n];if(o)return"function"==typeof o?e.call(o):Object.prototype.toString.call(o);if(this===Promise){var a=t[r];if(a)return e.call(a)}if(this===Error){var s=t[i];if(s)return e.call(s)}}return e.call(this)};o[n]=e,Function.prototype.toString=o;var a=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":a.call(this)}}));
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var Ec=!1;if("undefined"!=typeof window)try{var Sc=Object.defineProperty({},"passive",{get:function(){Ec=!0}});window.addEventListener("test",Sc,Sc),window.removeEventListener("test",Sc,Sc)}catch(t){Ec=!1}var wc={useG:!0},Oc={},kc={},Ac=new RegExp("^"+Qu+"(\\w+)(true|false)$"),Pc=tc("propagationStopped");function Lc(t,e){var n=(e?e(t):t)+$u,r=(e?e(t):t)+Ku,i=Qu+n,o=Qu+r;Oc[t]={},Oc[t].false=i,Oc[t].true=o}function Ic(t,e,n,r){var i=r&&r.add||Hu,o=r&&r.rm||Gu,a=r&&r.listeners||"eventListeners",s=r&&r.rmAll||"removeAllListeners",u=tc(i),c="."+i+":",l=function(t,e,n){if(!t.isRemoved){var r,i=t.callback;"object"===O(i)&&i.handleEvent&&(t.callback=function(t){return i.handleEvent(t)},t.originalDelegate=i);try{t.invoke(t,e,[n])}catch(t){r=t}var a=t.options;if(a&&"object"===O(a)&&a.once){var s=t.originalDelegate?t.originalDelegate:t.callback;e[o].call(e,n.type,s,a)}return r}};function f(n,r,i){if(r=r||t.event){var o=n||r.target||t,a=o[Oc[r.type][i?Ku:$u]];if(a){var s=[];if(1===a.length){var u=l(a[0],o,r);u&&s.push(u)}else for(var c=a.slice(),f=0;f<c.length&&(!r||!0!==r[Pc]);f++){var p=l(c[f],o,r);p&&s.push(p)}if(1===s.length)throw s[0];for(var h=function(){var t=s[d];e.nativeScheduleMicroTask((function(){throw t}))},d=0;d<s.length;d++)h()}}}var p=function(t){return f(this,t,!1)},h=function(t){return f(this,t,!0)};function d(e,n){if(!e)return!1;var r=!0;n&&void 0!==n.useG&&(r=n.useG);var l=n&&n.vh,f=!0;n&&void 0!==n.chkDup&&(f=n.chkDup);var d=!1;n&&void 0!==n.rt&&(d=n.rt);for(var v=e;v&&!v.hasOwnProperty(i);)v=Wu(v);if(!v&&e[i]&&(v=e),!v)return!1;if(v[u])return!1;var y,g=n&&n.eventNameToString,_={},m=v[u]=v[i],b=v[tc(o)]=v[o],T=v[tc(a)]=v[a],E=v[tc(s)]=v[s];function S(t,e){return!Ec&&"object"===O(t)&&t?!!t.capture:Ec&&e?"boolean"==typeof t?{capture:t,passive:!0}:t?"object"===O(t)&&!1!==t.passive?Object.assign(Object.assign({},t),{passive:!0}):t:{passive:!0}:t}n&&n.prepend&&(y=v[tc(n.prepend)]=v[n.prepend]);var w=r?function(t){if(!_.isExisting)return m.call(_.target,_.eventName,_.capture?h:p,_.options)}:function(t){return m.call(_.target,_.eventName,t.invoke,_.options)},k=r?function(t){if(!t.isRemoved){var e,n=Oc[t.eventName];n&&(e=n[t.capture?Ku:$u]);var r=e&&t.target[e];if(r)for(var i=0;i<r.length;i++)if(r[i]===t){r.splice(i,1),t.isRemoved=!0,0===r.length&&(t.allRemoved=!0,t.target[e]=null);break}}if(t.allRemoved)return b.call(t.target,t.eventName,t.capture?h:p,t.options)}:function(t){return b.call(t.target,t.eventName,t.invoke,t.options)},A=n&&n.diff?n.diff:function(t,e){var n=O(e);return"function"===n&&t.callback===e||"object"===n&&t.originalDelegate===e},P=Zone[tc("UNPATCHED_EVENTS")],L=t[tc("PASSIVE_EVENTS")],I=function(e,i,o,a){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return function(){var c=this||t,p=arguments[0];n&&n.transferEventName&&(p=n.transferEventName(p));var h=arguments[1];if(!h)return e.apply(this,arguments);if(sc&&"uncaughtException"===p)return e.apply(this,arguments);var d=!1;if("function"!=typeof h){if(!h.handleEvent)return e.apply(this,arguments);d=!0}if(!l||l(e,h,c,arguments)){var v=Ec&&!!L&&-1!==L.indexOf(p),y=S(arguments[2],v);if(P)for(var m=0;m<P.length;m++)if(p===P[m])return v?e.call(c,p,h,y):e.apply(this,arguments);var b=!!y&&("boolean"==typeof y||y.capture),T=!(!y||"object"!==O(y))&&y.once,E=Zone.current,w=Oc[p];w||(Lc(p,g),w=Oc[p]);var k,I=w[b?Ku:$u],R=c[I],C=!1;if(R){if(C=!0,f)for(var N=0;N<R.length;N++)if(A(R[N],h))return}else R=c[I]=[];var j=c.constructor.name,x=kc[j];x&&(k=x[p]),k||(k=j+i+(g?g(p):p)),_.options=y,T&&(_.options.once=!1),_.target=c,_.capture=b,_.eventName=p,_.isExisting=C;var M=r?wc:void 0;M&&(M.taskData=_);var D=E.scheduleEventTask(k,h,M,o,a);return _.target=null,M&&(M.taskData=null),T&&(y.once=!0),(Ec||"boolean"!=typeof D.options)&&(D.options=y),D.target=c,D.capture=b,D.eventName=p,d&&(D.originalDelegate=h),u?R.unshift(D):R.push(D),s?c:void 0}}};return v[i]=I(m,c,w,k,d),y&&(v.prependListener=I(y,".prependListener:",(function(t){return y.call(_.target,_.eventName,t.invoke,_.options)}),k,d,!0)),v[o]=function(){var e=this||t,r=arguments[0];n&&n.transferEventName&&(r=n.transferEventName(r));var i=arguments[2],o=!!i&&("boolean"==typeof i||i.capture),a=arguments[1];if(!a)return b.apply(this,arguments);if(!l||l(b,a,e,arguments)){var s,u=Oc[r];u&&(s=u[o?Ku:$u]);var c=s&&e[s];if(c)for(var f=0;f<c.length;f++){var p=c[f];if(A(p,a)){if(c.splice(f,1),p.isRemoved=!0,0===c.length&&(p.allRemoved=!0,e[s]=null,"string"==typeof r)){var h=Qu+"ON_PROPERTY"+r;e[h]=null}return p.zone.cancelTask(p),d?e:void 0}}return b.apply(this,arguments)}},v[a]=function(){var e=this||t,r=arguments[0];n&&n.transferEventName&&(r=n.transferEventName(r));for(var i=[],o=Rc(e,g?g(r):r),a=0;a<o.length;a++){var s=o[a],u=s.originalDelegate?s.originalDelegate:s.callback;i.push(u)}return i},v[s]=function(){var e=this||t,r=arguments[0];if(r){n&&n.transferEventName&&(r=n.transferEventName(r));var i=Oc[r];if(i){var a=i.false,u=i.true,c=e[a],l=e[u];if(c)for(var f=c.slice(),p=0;p<f.length;p++){var h=f[p],v=h.originalDelegate?h.originalDelegate:h.callback;this[o].call(this,r,v,h.options)}if(l)for(var y=l.slice(),g=0;g<y.length;g++){var _=y[g],m=_.originalDelegate?_.originalDelegate:_.callback;this[o].call(this,r,m,_.options)}}}else{for(var b=Object.keys(e),T=0;T<b.length;T++){var E=b[T],S=Ac.exec(E),w=S&&S[1];w&&"removeListener"!==w&&this[s].call(this,w)}this[s].call(this,"removeListener")}if(d)return this},_c(v[i],m),_c(v[o],b),E&&_c(v[s],E),T&&_c(v[a],T),!0}for(var v=[],y=0;y<n.length;y++)v[y]=d(n[y],r);return v}function Rc(t,e){if(!e){var n=[];for(var r in t){var i=Ac.exec(r),o=i&&i[1];if(o&&(!e||o===e)){var a=t[r];if(a)for(var s=0;s<a.length;s++)n.push(a[s])}}return n}var u=Oc[e];u||(Lc(e),u=Oc[e]);var c=t[u.false],l=t[u.true];return c?l?c.concat(l):c.slice():l?l.slice():[]}function Cc(t,e){var n=t.Event;n&&n.prototype&&e.patchMethod(n.prototype,"stopImmediatePropagation",(function(t){return function(e,n){e[Pc]=!0,t&&t.apply(e,n)}}))}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function Nc(t,e,n,r,i){var o=Zone.__symbol__(r);if(!e[o]){var a=e[o]=e[r];e[r]=function(o,s,u){return s&&s.prototype&&i.forEach((function(e){var i="".concat(n,".").concat(r,"::")+e,o=s.prototype;try{if(o.hasOwnProperty(e)){var a=t.ObjectGetOwnPropertyDescriptor(o,e);a&&a.value?(a.value=t.wrapWithCurrentZone(a.value,i),t._redefineProperty(s.prototype,e,a)):o[e]&&(o[e]=t.wrapWithCurrentZone(o[e],i))}else o[e]&&(o[e]=t.wrapWithCurrentZone(o[e],i))}catch(t){}})),a.call(e,o,s,u)},t.attachOriginToPatched(e[r],a)}}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function jc(t,e,n){if(!n||0===n.length)return e;var r=n.filter((function(e){return e.target===t}));if(!r||0===r.length)return e;var i=r[0].ignoreProperties;return e.filter((function(t){return-1===i.indexOf(t)}))}function xc(t,e,n,r){t&&hc(t,jc(t,e,n),r)}function Mc(t){return Object.getOwnPropertyNames(t).filter((function(t){return t.startsWith("on")&&t.length>2})).map((function(t){return t.substring(2)}))}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
Zone.__load_patch("util",(function(t,e,n){var r=Mc(t);n.patchOnProperties=hc,n.patchMethod=yc,n.bindArguments=ic,n.patchMacroTask=gc;var i=e.__symbol__("BLACK_LISTED_EVENTS"),o=e.__symbol__("UNPATCHED_EVENTS");t[o]&&(t[i]=t[o]),t[i]&&(e[i]=e[o]=t[i]),n.patchEventPrototype=Cc,n.patchEventTarget=Ic,n.isIEOrEdge=Tc,n.ObjectDefineProperty=Zu,n.ObjectGetOwnPropertyDescriptor=Fu,n.ObjectCreate=zu,n.ArraySlice=Vu,n.patchClass=vc,n.wrapWithCurrentZone=Yu,n.filterProperties=jc,n.attachOriginToPatched=_c,n._redefineProperty=Object.defineProperty,n.patchCallbacks=Nc,n.getGlobalObjects=function(){return{globalSources:kc,zoneSymbolEventNames:Oc,eventNames:r,isBrowser:uc,isMix:cc,isNode:sc,TRUE_STR:Ku,FALSE_STR:$u,ZONE_SYMBOL_PREFIX:Qu,ADD_EVENT_LISTENER_STR:Hu,REMOVE_EVENT_LISTENER_STR:Gu}}}));
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var Dc=tc("zoneTask");function Bc(t,e,n,r){var i=null,o=null;n+=r;var a={};function s(e){var n=e.data;return n.args[0]=function(){return e.invoke.apply(this,arguments)},n.handleId=i.apply(t,n.args),e}function u(e){return o.call(t,e.data.handleId)}i=yc(t,e+=r,(function(n){return function(i,o){if("function"==typeof o[0]){var c={isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?o[1]||0:void 0,args:o},l=o[0];o[0]=function(){try{return l.apply(this,arguments)}finally{c.isPeriodic||("number"==typeof c.handleId?delete a[c.handleId]:c.handleId&&(c.handleId[Dc]=null))}};var f=Ju(e,o[0],c,s,u);if(!f)return f;var p=f.data.handleId;return"number"==typeof p?a[p]=f:p&&(p[Dc]=f),p&&p.ref&&p.unref&&"function"==typeof p.ref&&"function"==typeof p.unref&&(f.ref=p.ref.bind(p),f.unref=p.unref.bind(p)),"number"==typeof p||p?p:f}return n.apply(t,o)}})),o=yc(t,n,(function(e){return function(n,r){var i,o=r[0];"number"==typeof o?i=a[o]:(i=o&&o[Dc])||(i=o),i&&"string"==typeof i.type?"notScheduled"!==i.state&&(i.cancelFn&&i.data.isPeriodic||0===i.runCount)&&("number"==typeof o?delete a[o]:o&&(o[Dc]=null),i.zone.cancelTask(i)):e.apply(t,r)}}))}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function Uc(t){return"function"==typeof t}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */Zone.__load_patch("legacy",(function(t){var e=t[Zone.__symbol__("legacyPatch")];e&&e()})),Zone.__load_patch("queueMicrotask",(function(t,e,n){n.patchMethod(t,"queueMicrotask",(function(t){return function(t,n){e.current.scheduleMicroTask("queueMicrotask",n[0])}}))})),Zone.__load_patch("timers",(function(t){var e="set",n="clear";Bc(t,e,n,"Timeout"),Bc(t,e,n,"Interval"),Bc(t,e,n,"Immediate")})),Zone.__load_patch("requestAnimationFrame",(function(t){Bc(t,"request","cancel","AnimationFrame"),Bc(t,"mozRequest","mozCancel","AnimationFrame"),Bc(t,"webkitRequest","webkitCancel","AnimationFrame")})),Zone.__load_patch("blocking",(function(t,e){for(var n=["alert","prompt","confirm"],r=0;r<n.length;r++)yc(t,n[r],(function(n,r,i){return function(r,o){return e.current.run(n,t,o,i)}}))})),Zone.__load_patch("EventTarget",(function(t,e,n){!function(t,e){e.patchEventPrototype(t,e)}(t,n),function(t,e){if(!Zone[e.symbol("patchEventTarget")]){for(var n=e.getGlobalObjects(),r=n.eventNames,i=n.zoneSymbolEventNames,o=n.TRUE_STR,a=n.FALSE_STR,s=n.ZONE_SYMBOL_PREFIX,u=0;u<r.length;u++){var c=r[u],l=s+(c+a),f=s+(c+o);i[c]={},i[c][a]=l,i[c][o]=f}var p=t.EventTarget;if(p&&p.prototype)e.patchEventTarget(t,e,[p&&p.prototype])}}(t,n);var r=t.XMLHttpRequestEventTarget;r&&r.prototype&&n.patchEventTarget(t,n,[r.prototype])})),Zone.__load_patch("MutationObserver",(function(t,e,n){vc("MutationObserver"),vc("WebKitMutationObserver")})),Zone.__load_patch("IntersectionObserver",(function(t,e,n){vc("IntersectionObserver")})),Zone.__load_patch("FileReader",(function(t,e,n){vc("FileReader")})),Zone.__load_patch("on_property",(function(t,e,n){!function(t,e){if((!sc||cc)&&!Zone[t.symbol("patchEvents")]){var n=e.__Zone_ignore_on_properties,r=[];if(uc){var i=window;r=r.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);var o=function(){try{var t=nc.navigator.userAgent;if(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/"))return!0}catch(t){}return!1}()?[{target:i,ignoreProperties:["error"]}]:[];xc(i,Mc(i),n?n.concat(o):n,Wu(i))}r=r.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(var a=0;a<r.length;a++){var s=e[r[a]];s&&s.prototype&&xc(s.prototype,Mc(s.prototype),n)}}}(n,t)})),Zone.__load_patch("customElements",(function(t,e,n){!function(t,e){var n=e.getGlobalObjects(),r=n.isBrowser,i=n.isMix;(r||i)&&t.customElements&&"customElements"in t&&e.patchCallbacks(e,t.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(t,n)})),Zone.__load_patch("XHR",(function(t,e){!function(t){var u=t.XMLHttpRequest;if(u){var c=u.prototype,l=c[Xu],f=c[qu];if(!l){var p=t.XMLHttpRequestEventTarget;if(p){var h=p.prototype;l=h[Xu],f=h[qu]}}var d="readystatechange",v="scheduled",y=yc(c,"open",(function(){return function(t,e){return t[r]=0==e[2],t[a]=e[1],y.apply(t,e)}})),g=tc("fetchTaskAborting"),_=tc("fetchTaskScheduling"),m=yc(c,"send",(function(){return function(t,n){if(!0===e.current[_])return m.apply(t,n);if(t[r])return m.apply(t,n);var i={target:t,url:t[a],isPeriodic:!1,args:n,aborted:!1},o=Ju("XMLHttpRequest.send",E,i,T,S);t&&!0===t[s]&&!i.aborted&&o.state===v&&o.invoke()}})),b=yc(c,"abort",(function(){return function(t,r){var i=t[n];if(i&&"string"==typeof i.type){if(null==i.cancelFn||i.data&&i.data.aborted)return;i.zone.cancelTask(i)}else if(!0===e.current[g])return b.apply(t,r)}}))}function T(t){var r=t.data,a=r.target;a[o]=!1,a[s]=!1;var u=a[i];l||(l=a[Xu],f=a[qu]),u&&f.call(a,d,u);var c=a[i]=function(){if(a.readyState===a.DONE)if(!r.aborted&&a[o]&&t.state===v){var n=a[e.__symbol__("loadfalse")];if(0!==a.status&&n&&n.length>0){var i=t.invoke;t.invoke=function(){for(var n=a[e.__symbol__("loadfalse")],o=0;o<n.length;o++)n[o]===t&&n.splice(o,1);r.aborted||t.state!==v||i.call(t)},n.push(t)}else t.invoke()}else r.aborted||!1!==a[o]||(a[s]=!0)};return l.call(a,d,c),a[n]||(a[n]=t),m.apply(a,r.args),a[o]=!0,t}function E(){}function S(t){var e=t.data;return e.aborted=!0,b.apply(e.target,e.args)}}(t);var n=tc("xhrTask"),r=tc("xhrSync"),i=tc("xhrListener"),o=tc("xhrScheduled"),a=tc("xhrURL"),s=tc("xhrErrorBeforeScheduled")})),Zone.__load_patch("geolocation",(function(t){t.navigator&&t.navigator.geolocation&&function(t,e){for(var n=t.constructor.name,r=function(){var r=e[i],o=t[r];if(o){if(!oc(Fu(t,r)))return"continue";t[r]=function(t){var e=function(){return t.apply(this,ic(arguments,n+"."+r))};return _c(e,t),e}(o)}},i=0;i<e.length;i++)r()}(t.navigator.geolocation,["getCurrentPosition","watchPosition"])})),Zone.__load_patch("PromiseRejectionEvent",(function(t,e){function n(e){return function(n){Rc(t,e).forEach((function(r){var i=t.PromiseRejectionEvent;if(i){var o=new i(e,{promise:n.promise,reason:n.rejection});r.invoke(o)}}))}}t.PromiseRejectionEvent&&(e[tc("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),e[tc("rejectionHandledHandler")]=n("rejectionhandled"))}));var Fc=console.error.bind(console);function Zc(t,e,n){var r=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:r,writable:!0,value:n})}function Wc(t){t&&t.logger&&(Uc(t.logger)?Fc=t.logger:Fc("new logger isn't a function, not replacing"))}function zc(t,e,n){if(t&&t[e]){if(!n)return Fc("no wrapper function"),void Fc((new Error).stack);if(Uc(t[e])&&Uc(n)){var r=t[e],i=n(r,e);return Zc(i,"__original",r),Zc(i,"__unwrap",(function(){t[e]===i&&Zc(t,e,r)})),Zc(i,"__wrapped",!0),Zc(t,e,i),i}Fc("original object and wrapper must be functions")}else Fc("no original function "+e+" to wrap")}function Vc(t,e){return t&&t[e]?t[e].__unwrap?t[e].__unwrap():void Fc("no original to unwrap to -- has "+e+" already been unwrapped?"):(Fc("no function to unwrap."),void Fc((new Error).stack))}Wc.wrap=zc,Wc.massWrap=function(t,e,n){if(!t)return Fc("must provide one or more modules to patch"),void Fc((new Error).stack);Array.isArray(t)||(t=[t]),e&&Array.isArray(e)?t.forEach((function(t){e.forEach((function(e){zc(t,e,n)}))})):Fc("must provide one or more functions to wrap on modules")},Wc.unwrap=Vc,Wc.massUnwrap=function(t,e){if(!t)return Fc("must provide one or more modules to patch"),void Fc((new Error).stack);Array.isArray(t)||(t=[t]),e&&Array.isArray(e)?t.forEach((function(t){e.forEach((function(e){Vc(t,e)}))})):Fc("must provide one or more functions to unwrap on modules")};var Hc,Gc,Xc=Wc,qc=function(){return(qc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Kc=function(){function t(t,e,n){void 0===n&&(n={}),this.instrumentationName=t,this.instrumentationVersion=e,this._wrap=Xc.wrap,this._unwrap=Xc.unwrap,this._massWrap=Xc.massWrap,this._massUnwrap=Xc.massUnwrap,this._config=qc({enabled:!0},n),this._diag=te.createComponentLogger({namespace:t}),this._tracer=ve.getTracer(t,e),this._meter=re.getMeter(t,e),this._updateMetricInstruments()}return Object.defineProperty(t.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),t.prototype.setMeterProvider=function(t){this._meter=t.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},t.prototype._updateMetricInstruments=function(){},t.prototype.getConfig=function(){return this._config},t.prototype.setConfig=function(t){void 0===t&&(t={}),this._config=Object.assign({},t)},t.prototype.setTracerProvider=function(t){this._tracer=t.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(t.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),t}(),$c=(Hc=function(t,e){return(Hc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Hc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Qc=function(t){function e(e,n,r){void 0===r&&(r={});var i=t.call(this,e,n,r)||this;return i._config.enabled&&i.enable(),i}return $c(e,t),e}(Kc);!function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"}(Gc||(Gc={}));var Yc="object"===("undefined"==typeof globalThis?"undefined":O(globalThis))?globalThis:"object"===("undefined"==typeof self?"undefined":O(self))?self:"object"===("undefined"==typeof window?"undefined":O(window))?window:"object"===("undefined"==typeof global?"undefined":O(global))?global:{};U.INFO,Gc.ParentBasedAlwaysOn,U.ALL,U.VERBOSE,U.DEBUG,U.INFO,U.WARN,U.ERROR,U.NONE,Array(32);var Jc,tl=performance,el="exception.type",nl="exception.message",rl="process.runtime.name",il="telemetry.sdk.name",ol="telemetry.sdk.language",al="telemetry.sdk.version",sl="webjs";(Jc={})[il]="opentelemetry",Jc[rl]="browser",Jc[ol]=sl,Jc[al]="1.9.0";var ul,cl,ll=Math.pow(10,6),fl=Math.pow(10,9);function pl(t){var e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*ll)]}function hl(t){return function(t,e){var n=[t[0]+e[0],t[1]+e[1]];return n[1]>=fl&&(n[1]-=fl,n[0]+=1),n}(pl(function(){var t=tl.timeOrigin;if("number"!=typeof t){var e=tl;t=e.timing&&e.timing.fetchStart}return t}()),pl("number"==typeof t?t:tl.now()))}!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(ul||(ul={})),function(t){t.HTTP="http"}(cl||(cl={})),Function.prototype.toString.call(Object);function dl(t,e){return"string"==typeof e?t===e:!!t.match(e)}var vl=function(){function t(){var t=this;this._promise=new Promise((function(e,n){t._resolve=e,t._reject=n}))}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(t){this._resolve(t)},t.prototype.reject=function(t){this._reject(t)},t}(),yl=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},gl=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};!function(){function t(t,e){this._callback=t,this._that=e,this._isCalled=!1,this._deferred=new vl}Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,gl([this._that],yl(n),!1))).then((function(t){return e._deferred.resolve(t)}),(function(t){return e._deferred.reject(t)}))}catch(t){this._deferred.reject(t)}}return this._deferred.promise}}();var _l=$("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function ml(t){return!0===t.getValue(_l)}var bl="baggage";var Tl=function(){function t(){}return t.prototype.inject=function(t,e,n){var r=he.getBaggage(t);if(r&&!ml(t)){var i=function(t){return t.reduce((function(t,e){var n=t+(""!==t?",":"")+e;return n.length>8192?t:n}),"")}(function(t){return t.getAllEntries().map((function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(t,2),n=e[0],r=e[1],i=encodeURIComponent(n)+"="+encodeURIComponent(r.value);return void 0!==r.metadata&&(i+=";"+r.metadata.toString()),i}))}(r).filter((function(t){return t.length<=4096})).slice(0,180));i.length>0&&n.set(e,bl,i)}},t.prototype.extract=function(t,e,n){var r=n.get(e,bl),i=Array.isArray(r)?r.join(","):r;if(!i)return t;var o={};return 0===i.length?t:(i.split(",").forEach((function(t){var e=function(t){var e=t.split(";");if(!(e.length<=0)){var n=e.shift();if(n){var r=n.split("=");if(2===r.length){var i,o,a=decodeURIComponent(r[0].trim()),s=decodeURIComponent(r[1].trim());return e.length>0&&("string"!=typeof(o=e.join(";"))&&(q.error("Cannot create baggage metadata from unknown type: "+O(o)),o=""),i={__TYPE__:X,toString:function(){return o}}),{key:a,value:s,metadata:i}}}}}(t);if(e){var n={value:e.value};e.metadata&&(n.metadata=e.metadata),o[e.key]=n}})),0===Object.entries(o).length?t:he.setBaggage(t,he.createBaggage(o)))},t.prototype.fields=function(){return[bl]},t}(),El=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sl=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};function wl(t){var e,n,r={};if("object"!==O(t)||null==t)return r;try{for(var i=El(Object.entries(t)),o=i.next();!o.done;o=i.next()){var a=Sl(o.value,2),s=a[0],u=a[1];Ol(s)?kl(u)?Array.isArray(u)?r[s]=u.slice():r[s]=u:te.warn("Invalid attribute value set for key: "+s):te.warn("Invalid attribute key: "+s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Ol(t){return"string"==typeof t&&t.length>0}function kl(t){return null==t||(Array.isArray(t)?function(t){var e,n,r;try{for(var i=El(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(null!=a){if(!r){if(Al(a)){r=O(a);continue}return!1}if(O(a)!==r)return!1}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return!0}(t):Al(t))}function Al(t){switch(O(t)){case"number":case"boolean":case"string":return!0}return!1}var Pl;function Ll(t){try{!function(t){te.error(function(t){return"string"==typeof t?t:JSON.stringify(function(t){for(var e={},n=t;null!==n;)Object.getOwnPropertyNames(n).forEach((function(t){if(!e[t]){var r=n[t];r&&(e[t]=String(r))}})),n=Object.getPrototypeOf(n);return e}(t))}(t))}(t)}catch(t){}}!function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"}(Pl||(Pl={}));var Il="object"===("undefined"==typeof globalThis?"undefined":O(globalThis))?globalThis:"object"===("undefined"==typeof self?"undefined":O(self))?self:"object"===("undefined"==typeof window?"undefined":O(window))?window:"object"===("undefined"==typeof global?"undefined":O(global))?global:{},Rl=["OTEL_SDK_DISABLED"];function Cl(t){return Rl.indexOf(t)>-1}var Nl=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function jl(t){return Nl.indexOf(t)>-1}var xl=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function Ml(t){return xl.indexOf(t)>-1}var Dl={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:U.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:1/0,OTEL_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:1/0,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:Pl.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function Bl(t,e,n){if(void 0!==n[t]){var r=String(n[t]);e[t]="true"===r.toLowerCase()}}function Ul(t,e,n,r,i){if(void 0===r&&(r=-1/0),void 0===i&&(i=1/0),void 0!==n[t]){var o=Number(n[t]);isNaN(o)||(e[t]=o<r?r:o>i?i:o)}}function Fl(t,e,n,r){void 0===r&&(r=",");var i=n[t];"string"==typeof i&&(e[t]=i.split(r).map((function(t){return t.trim()})))}var Zl={ALL:U.ALL,VERBOSE:U.VERBOSE,DEBUG:U.DEBUG,INFO:U.INFO,WARN:U.WARN,ERROR:U.ERROR,NONE:U.NONE};function Wl(t,e,n){var r=n[t];if("string"==typeof r){var i=Zl[r.toUpperCase()];null!=i&&(e[t]=i)}}function zl(t){var e={};for(var n in Dl){var r=n;if("OTEL_LOG_LEVEL"===r)Wl(r,e,t);else if(Cl(r))Bl(r,e,t);else if(jl(r))Ul(r,e,t);else if(Ml(r))Fl(r,e,t);else{var i=t[r];null!=i&&(e[r]=String(i))}}return e}function Vl(){var t=zl(Il);return Object.assign({},Dl,t)}Array(32);var Hl,Gl=performance;(Hl={})[il]="opentelemetry",Hl[rl]="browser",Hl[ol]=sl,Hl[al]="1.9.0";var Xl,ql=Math.pow(10,6),Kl=Math.pow(10,9);function $l(t){var e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*ql)]}function Ql(){var t=Gl.timeOrigin;if("number"!=typeof t){var e=Gl;t=e.timing&&e.timing.fetchStart}return t}function Yl(t){return Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]}function Jl(t){return Yl(t)||"number"==typeof t||t instanceof Date}function tf(t,e){var n=[t[0]+e[0],t[1]+e[1]];return n[1]>=Kl&&(n[1]-=Kl,n[0]+=1),n}!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(Xl||(Xl={}));var ef,nf=function(){function t(t){var e;void 0===t&&(t={}),this._propagators=null!==(e=t.propagators)&&void 0!==e?e:[],this._fields=Array.from(new Set(this._propagators.map((function(t){return"function"==typeof t.fields?t.fields():[]})).reduce((function(t,e){return t.concat(e)}),[])))}return t.prototype.inject=function(t,e,n){var r,i;try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._propagators),a=o.next();!a.done;a=o.next()){var s=a.value;try{s.inject(t,e,n)}catch(t){te.warn("Failed to inject with "+s.constructor.name+". Err: "+t.message)}}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},t.prototype.extract=function(t,e,n){return this._propagators.reduce((function(t,r){try{return r.extract(t,e,n)}catch(t){te.warn("Failed to inject with "+r.constructor.name+". Err: "+t.message)}return t}),t)},t.prototype.fields=function(){return this._fields.slice()},t}(),rf=new RegExp("^(?:[a-z][_0-9a-z-*/]{0,255}|[a-z0-9][_0-9a-z-*/]{0,240}@[a-z][_0-9a-z-*/]{0,13})$"),of=/^[ -~]{0,255}[!-~]$/,af=/,|=/,sf=function(){function t(t){this._internalState=new Map,t&&this._parse(t)}return t.prototype.set=function(t,e){var n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,e),n},t.prototype.unset=function(t){var e=this._clone();return e._internalState.delete(t),e},t.prototype.get=function(t){return this._internalState.get(t)},t.prototype.serialize=function(){var t=this;return this._keys().reduce((function(e,n){return e.push(n+"="+t.get(n)),e}),[]).join(",")},t.prototype._parse=function(t){t.length>512||(this._internalState=t.split(",").reverse().reduce((function(t,e){var n=e.trim(),r=n.indexOf("=");if(-1!==r){var i=n.slice(0,r),o=n.slice(r+1,e.length);(function(t){return rf.test(t)})(i)&&function(t){return of.test(t)&&!af.test(t)}(o)&&t.set(i,o)}return t}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}(),uf="traceparent",cf="tracestate",lf=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$"),ff=function(){function t(){}return t.prototype.inject=function(t,e,n){var r=ve.getSpanContext(t);if(r&&!ml(t)&&Wt(r)){var i="00-"+r.traceId+"-"+r.spanId+"-0"+Number(r.traceFlags||gt.NONE).toString(16);n.set(e,uf,i),r.traceState&&n.set(e,cf,r.traceState.serialize())}},t.prototype.extract=function(t,e,n){var r=n.get(e,uf);if(!r)return t;var i=Array.isArray(r)?r[0]:r;if("string"!=typeof i)return t;var o=function(t){var e=lf.exec(t);return e?"00"===e[1]&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}:null}(i);if(!o)return t;o.isRemote=!0;var a=n.get(e,cf);if(a){var s=Array.isArray(a)?a.join(","):a;o.traceState=new sf("string"==typeof s?s:void 0)}return ve.setSpanContext(t,o)},t.prototype.fields=function(){return[uf,cf]},t}();!function(t){t.HTTP="http"}(ef||(ef={}));var pf,hf,df=Function.prototype.toString,vf=df.call(Object),yf=(pf=Object.getPrototypeOf,hf=Object,function(t){return pf(hf(t))}),gf=Object.prototype,_f=gf.hasOwnProperty,mf=Symbol?Symbol.toStringTag:void 0,bf=gf.toString;function Tf(t){if(!function(t){return null!=t&&"object"==O(t)}(t)||"[object Object]"!==function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":mf&&mf in Object(t)?function(t){var e=_f.call(t,mf),n=t[mf],r=!1;try{t[mf]=void 0,r=!0}catch(t){}var i=bf.call(t);return r&&(e?t[mf]=n:delete t[mf]),i}(t):function(t){return bf.call(t)}(t)}(t))return!1;var e=yf(t);if(null===e)return!0;var n=_f.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&df.call(n)===vf}function Ef(t){return Of(t)?t.slice():t}function Sf(t,e,n,r){var i;if(void 0===n&&(n=0),!(n>20)){if(n++,Pf(t)||Pf(e)||kf(e))i=Ef(e);else if(Of(t)){if(i=t.slice(),Of(e))for(var o=0,a=e.length;o<a;o++)i.push(Ef(e[o]));else if(Af(e))for(o=0,a=(s=Object.keys(e)).length;o<a;o++)i[u=s[o]]=Ef(e[u])}else if(Af(t))if(Af(e)){if(!function(t,e){return!(!Tf(t)||!Tf(e))}(t,e))return e;var s;for(i=Object.assign({},t),o=0,a=(s=Object.keys(e)).length;o<a;o++){var u,c=e[u=s[o]];if(Pf(c))void 0===c?delete i[u]:i[u]=c;else{var l=i[u],f=c;if(wf(t,u,r)||wf(e,u,r))delete i[u];else{if(Af(l)&&Af(f)){var p=r.get(l)||[],h=r.get(f)||[];p.push({obj:t,key:u}),h.push({obj:e,key:u}),r.set(l,p),r.set(f,h)}i[u]=Sf(i[u],c,n,r)}}}}else i=e;return i}}function wf(t,e,n){for(var r=n.get(t[e])||[],i=0,o=r.length;i<o;i++){var a=r[i];if(a.key===e&&a.obj===t)return!0}return!1}function Of(t){return Array.isArray(t)}function kf(t){return"function"==typeof t}function Af(t){return!Pf(t)&&!Of(t)&&!kf(t)&&"object"===O(t)}function Pf(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||void 0===t||t instanceof Date||t instanceof RegExp||null===t}var Lf,If=function(){function t(){var t=this;this._promise=new Promise((function(e,n){t._resolve=e,t._reject=n}))}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(t){this._resolve(t)},t.prototype.reject=function(t){this._reject(t)},t}(),Rf=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Cf=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},Nf=function(){function t(t,e){this._callback=t,this._that=e,this._isCalled=!1,this._deferred=new If}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,Cf([this._that],Rf(n),!1))).then((function(t){return e._deferred.resolve(t)}),(function(t){return e._deferred.reject(t)}))}catch(t){this._deferred.reject(t)}}return this._deferred.promise},t}(),jf=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},xf=function(){function t(t,e,n,r,i,o,a,s,u){void 0===a&&(a=[]),this.attributes={},this.links=[],this.events=[],this.status={code:Gt.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=r,this.parentSpanId=o,this.kind=i,this.links=a;var c=Date.now();this._performanceStartTime=Gl.now(),this._performanceOffset=c-(this._performanceStartTime+Ql()),this._startTimeProvided=null!=s,this.startTime=this._getTime(null!=s?s:c),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,e),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(t,e){return null==e||this._isSpanEnded()?this:0===t.length?(te.warn("Invalid attribute key: "+t),this):kl(e)?(Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)||(this.attributes[t]=this._truncateToSize(e)),this):(te.warn("Invalid attribute value set for key: "+t),this)},t.prototype.setAttributes=function(t){var e,n;try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(t)),i=r.next();!i.done;i=r.next()){var o=jf(i.value,2),a=o[0],s=o[1];this.setAttribute(a,s)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return this},t.prototype.addEvent=function(t,e,n){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return te.warn("No events allowed."),this;this.events.length>=this._spanLimits.eventCountLimit&&(te.warn("Dropping extra events."),this.events.shift()),Jl(e)&&(Jl(n)||(n=e),e=void 0);var r=wl(e);return this.events.push({name:t,attributes:r,time:this._getTime(n)}),this},t.prototype.setStatus=function(t){return this._isSpanEnded()||(this.status=t),this},t.prototype.updateName=function(t){return this._isSpanEnded()||(this.name=t),this},t.prototype.end=function(t){this._isSpanEnded()?te.error("You can only call end() on a span once."):(this._ended=!0,this.endTime=this._getTime(t),this._duration=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return r<0&&(n-=1,r+=Kl),[n,r]}(this.startTime,this.endTime),this._duration[0]<0&&(te.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this))},t.prototype._getTime=function(t){if("number"==typeof t&&t<Gl.now())return e=t+this._performanceOffset,tf($l(Ql()),$l("number"==typeof e?e:Gl.now()));var e;if("number"==typeof t)return $l(t);if(t instanceof Date)return $l(t.getTime());if(Yl(t))return t;if(this._startTimeProvided)return $l(Date.now());var n=Gl.now()-this._performanceStartTime;return tf(this.startTime,$l(n))},t.prototype.isRecording=function(){return!1===this._ended},t.prototype.recordException=function(t,e){var n={};"string"==typeof t?n[nl]=t:t&&(t.code?n[el]=t.code.toString():t.name&&(n[el]=t.name),t.message&&(n[nl]=t.message),t.stack&&(n["exception.stacktrace"]=t.stack)),n[el]||n[nl]?this.addEvent("exception",n,e):te.warn("Failed to record an exception "+t)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&te.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(t,e){return t.length<=e?t:t.substr(0,e)},t.prototype._truncateToSize=function(t){var e=this,n=this._attributeValueLengthLimit;return n<=0?(te.warn("Attribute value limit must be positive, got "+n),t):"string"==typeof t?this._truncateToLimitUtil(t,n):Array.isArray(t)?t.map((function(t){return"string"==typeof t?e._truncateToLimitUtil(t,n):t})):t},t}();!function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Lf||(Lf={}));var Mf=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Lf.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}(),Df=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Lf.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}(),Bf=function(){function t(t){var e,n,r,i;this._root=t.root,this._root||(Ll(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Df),this._remoteParentSampled=null!==(e=t.remoteParentSampled)&&void 0!==e?e:new Df,this._remoteParentNotSampled=null!==(n=t.remoteParentNotSampled)&&void 0!==n?n:new Mf,this._localParentSampled=null!==(r=t.localParentSampled)&&void 0!==r?r:new Df,this._localParentNotSampled=null!==(i=t.localParentNotSampled)&&void 0!==i?i:new Mf}return t.prototype.shouldSample=function(t,e,n,r,i,o){var a=ve.getSpanContext(t);return a&&Wt(a)?a.isRemote?a.traceFlags&gt.SAMPLED?this._remoteParentSampled.shouldSample(t,e,n,r,i,o):this._remoteParentNotSampled.shouldSample(t,e,n,r,i,o):a.traceFlags&gt.SAMPLED?this._localParentSampled.shouldSample(t,e,n,r,i,o):this._localParentNotSampled.shouldSample(t,e,n,r,i,o):this._root.shouldSample(t,e,n,r,i,o)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}(),Uf=function(){function t(t){void 0===t&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(4294967295*this._ratio)}return t.prototype.shouldSample=function(t,e){return{decision:Zt(e)&&this._accumulate(e)<this._upperBound?Lf.RECORD_AND_SAMPLED:Lf.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(t){return"number"!=typeof t||isNaN(t)?0:t>=1?1:t<=0?0:t},t.prototype._accumulate=function(t){for(var e=0,n=0;n<t.length/8;n++){var r=8*n;e=(e^parseInt(t.slice(r,r+8),16))>>>0}return e},t}(),Ff=Vl(),Zf=Pl.AlwaysOn;function Wf(){return{sampler:zf(Ff),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:Vl().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:Vl().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:Vl().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:Vl().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:Vl().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:Vl().OTEL_SPAN_EVENT_COUNT_LIMIT}}}function zf(t){switch(void 0===t&&(t=Vl()),t.OTEL_TRACES_SAMPLER){case Pl.AlwaysOn:return new Df;case Pl.AlwaysOff:return new Mf;case Pl.ParentBasedAlwaysOn:return new Bf({root:new Df});case Pl.ParentBasedAlwaysOff:return new Bf({root:new Mf});case Pl.TraceIdRatio:return new Uf(Vf(t));case Pl.ParentBasedTraceIdRatio:return new Bf({root:new Uf(Vf(t))});default:return te.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+Zf+'".'),new Df}}function Vf(t){if(void 0===t.OTEL_TRACES_SAMPLER_ARG||""===t.OTEL_TRACES_SAMPLER_ARG)return te.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(te.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to 1."),1):e<0||e>1?(te.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to 1."),1):e}var Hf,Gf=function(){function t(t,e){this._exporter=t,this._finishedSpans=[];var n=Vl();this._maxExportBatchSize="number"==typeof(null==e?void 0:e.maxExportBatchSize)?e.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==e?void 0:e.maxQueueSize)?e.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==e?void 0:e.scheduledDelayMillis)?e.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==e?void 0:e.exportTimeoutMillis)?e.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Nf(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(te.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(t,e){},t.prototype.onEnd=function(t){this._shutdownOnce.isCalled||0!=(t.spanContext().traceFlags&gt.SAMPLED)&&this._addToBuffer(t)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var t=this;return Promise.resolve().then((function(){return t.onShutdown()})).then((function(){return t._flushAll()})).then((function(){return t._exporter.shutdown()}))},t.prototype._addToBuffer=function(t){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(t),this._maybeStartTimer())},t.prototype._flushAll=function(){var t=this;return new Promise((function(e,n){for(var r=[],i=0,o=Math.ceil(t._finishedSpans.length/t._maxExportBatchSize);i<o;i++)r.push(t._flushOneBatch());Promise.all(r).then((function(){e()})).catch(n)}))},t.prototype._flushOneBatch=function(){var t=this;return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((function(e,n){var r=setTimeout((function(){n(new Error("Timeout"))}),t._exportTimeoutMillis);Jt.with(function(t){return t.setValue(_l,!0)}(Jt.active()),(function(){t._exporter.export(t._finishedSpans.splice(0,t._maxExportBatchSize),(function(t){var i;clearTimeout(r),t.code===Xl.SUCCESS?e():n(null!==(i=t.error)&&void 0!==i?i:new Error("BatchSpanProcessor: span export failed"))}))}))}))},t.prototype._maybeStartTimer=function(){var t=this;void 0===this._timer&&(this._timer=setTimeout((function(){t._flushOneBatch().then((function(){t._finishedSpans.length>0&&(t._clearTimer(),t._maybeStartTimer())})).catch((function(t){Ll(t)}))}),this._scheduledDelayMillis),this._timer)},t.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},t}(),Xf=(Hf=function(t,e){return(Hf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Hf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),qf=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.onInit(n),r}return Xf(e,t),e.prototype.onInit=function(t){var e=this;!0!==(null==t?void 0:t.disableAutoFlushOnDocumentHide)&&"undefined"!=typeof document&&(this._visibilityChangeListener=function(){"hidden"===document.visibilityState&&e.forceFlush()},this._pageHideListener=function(){e.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},e.prototype.onShutdown=function(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},e}(Gf),Kf=function(){this.generateTraceId=Qf(16),this.generateSpanId=Qf(8)},$f=Array(32);function Qf(t){return function(){for(var e=0;e<2*t;e++)$f[e]=Math.floor(16*Math.random())+48,$f[e]>=58&&($f[e]+=39);return String.fromCharCode.apply(null,$f.slice(0,2*t))}}var Yf,Jf=function(){function t(t,e,n){this._tracerProvider=n;var r,i,o,a,s=(r=e,i={sampler:zf()},o=Wf(),(a=Object.assign({},o,i,r)).generalLimits=Object.assign({},o.generalLimits,r.generalLimits||{}),a.spanLimits=Object.assign({},o.spanLimits,r.spanLimits||{}),a);this._sampler=s.sampler,this._generalLimits=s.generalLimits,this._spanLimits=s.spanLimits,this._idGenerator=e.idGenerator||new Kf,this.resource=n.resource,this.instrumentationLibrary=t}return t.prototype.startSpan=function(t,e,n){var r,i;void 0===e&&(e={}),void 0===n&&(n=Jt.active()),e.root&&(n=ve.deleteSpan(n));var o=ve.getSpan(n);if(ml(n))return te.debug("Instrumentation suppressed, returning Noop Span"),ve.wrapSpanContext(It);var a,s,u,c=null==o?void 0:o.spanContext(),l=this._idGenerator.generateSpanId();c&&ve.isSpanContextValid(c)?(a=c.traceId,s=c.traceState,u=c.spanId):a=this._idGenerator.generateTraceId();var f=null!==(r=e.kind)&&void 0!==r?r:Ht.INTERNAL,p=(null!==(i=e.links)&&void 0!==i?i:[]).map((function(t){return{context:t.context,attributes:wl(t.attributes)}})),h=wl(e.attributes),d=this._sampler.shouldSample(n,a,t,f,h,p),v={traceId:a,spanId:l,traceFlags:d.decision===Vt.RECORD_AND_SAMPLED?gt.SAMPLED:gt.NONE,traceState:s};if(d.decision===Vt.NOT_RECORD)return te.debug("Recording is off, propagating context in a non-recording span"),ve.wrapSpanContext(v);var y=new xf(this,n,t,v,f,u,p,e.startTime),g=wl(Object.assign(h,d.attributes));return y.setAttributes(g),y},t.prototype.startActiveSpan=function(t,e,n,r){var i,o,a;if(!(arguments.length<2)){2===arguments.length?a=e:3===arguments.length?(i=e,a=n):(i=e,o=n,a=r);var s=null!=o?o:Jt.active(),u=this.startSpan(t,i,s),c=ve.setSpan(s,u);return Jt.with(c,a,void 0,u)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t}();!function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"}(Yf||(Yf={})),U.INFO,Yf.ParentBasedAlwaysOn,U.ALL,U.VERBOSE,U.DEBUG,U.INFO,U.WARN,U.ERROR,U.NONE,Array(32);var tp,ep,np,rp=((tp={})[il]="opentelemetry",tp[rl]="browser",tp[ol]=sl,tp[al]="1.9.0",tp);!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(ep||(ep={})),function(t){t.HTTP="http"}(np||(np={})),Function.prototype.toString.call(Object);var ip=function(){function t(){var t=this;this._promise=new Promise((function(e,n){t._resolve=e,t._reject=n}))}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(t){this._resolve(t)},t.prototype.reject=function(t){this._reject(t)},t}(),op=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},ap=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};!function(){function t(t,e){this._callback=t,this._that=e,this._isCalled=!1,this._deferred=new ip}Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,ap([this._that],op(n),!1))).then((function(t){return e._deferred.resolve(t)}),(function(t){return e._deferred.reject(t)}))}catch(t){this._deferred.reject(t)}}return this._deferred.promise}}();var sp,up=function(){function t(t){this.attributes=t}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t(((e={})["service.name"]="unknown_service",e[ol]=rp[ol],e[il]=rp[il],e[al]=rp[al],e))},t.prototype.merge=function(e){return e&&Object.keys(e.attributes).length?new t(Object.assign({},this.attributes,e.attributes)):this},t.EMPTY=new t({}),t}(),cp=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lp=function(){function t(t){this._spanProcessors=t}return t.prototype.forceFlush=function(){var t,e,n=[];try{for(var r=cp(this._spanProcessors),i=r.next();!i.done;i=r.next()){var o=i.value;n.push(o.forceFlush())}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return new Promise((function(t){Promise.all(n).then((function(){t()})).catch((function(e){Ll(e||new Error("MultiSpanProcessor: forceFlush failed")),t()}))}))},t.prototype.onStart=function(t,e){var n,r;try{for(var i=cp(this._spanProcessors),o=i.next();!o.done;o=i.next())o.value.onStart(t,e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.onEnd=function(t){var e,n;try{for(var r=cp(this._spanProcessors),i=r.next();!i.done;i=r.next())i.value.onEnd(t)}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.shutdown=function(){var t,e,n=[];try{for(var r=cp(this._spanProcessors),i=r.next();!i.done;i=r.next()){var o=i.value;n.push(o.shutdown())}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return new Promise((function(t,e){Promise.all(n).then((function(){t()}),e)}))},t}(),fp=function(){function t(){}return t.prototype.onStart=function(t,e){},t.prototype.onEnd=function(t){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}();!function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"}(sp||(sp={}));var pp,hp,dp,vp=function(){function t(t){var e;void 0===t&&(t={}),this._registeredSpanProcessors=[],this._tracers=new Map;var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.shift(),r=new WeakMap;t.length>0;)n=Sf(n,t.shift(),0,r);return n}({},Wf(),function(t){var e,n,r,i,o,a,s,u,c,l,f,p,h=Object.assign({},t.spanLimits),d="undefined"!=typeof process?zl(process.env):zl(Il);return h.attributeCountLimit=null!==(a=null!==(o=null!==(i=null!==(n=null===(e=t.spanLimits)||void 0===e?void 0:e.attributeCountLimit)&&void 0!==n?n:null===(r=t.generalLimits)||void 0===r?void 0:r.attributeCountLimit)&&void 0!==i?i:d.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)&&void 0!==o?o:d.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==a?a:128,h.attributeValueLengthLimit=null!==(p=null!==(f=null!==(l=null!==(u=null===(s=t.spanLimits)||void 0===s?void 0:s.attributeValueLengthLimit)&&void 0!==u?u:null===(c=t.generalLimits)||void 0===c?void 0:c.attributeValueLengthLimit)&&void 0!==l?l:d.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==f?f:d.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==p?p:1/0,Object.assign({},t,{spanLimits:h})}(t));this.resource=null!==(e=n.resource)&&void 0!==e?e:up.empty(),this.resource=up.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var r=this._buildExporterFromEnv();if(void 0!==r){var i=new qf(r);this.activeSpanProcessor=i}else this.activeSpanProcessor=new fp}return t.prototype.getTracer=function(t,e,n){var r=t+"@"+(e||"")+":"+((null==n?void 0:n.schemaUrl)||"");return this._tracers.has(r)||this._tracers.set(r,new Jf({name:t,version:e,schemaUrl:null==n?void 0:n.schemaUrl},this._config,this)),this._tracers.get(r)},t.prototype.addSpanProcessor=function(t){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((function(t){return te.error("Error while trying to shutdown current span processor",t)})),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new lp(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(t){void 0===t&&(t={}),ve.setGlobalTracerProvider(this),void 0===t.propagator&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&Jt.setGlobalContextManager(t.contextManager),t.propagator&&he.setGlobalPropagator(t.propagator)},t.prototype.forceFlush=function(){var t=this._config.forceFlushTimeoutMillis,e=this._registeredSpanProcessors.map((function(e){return new Promise((function(n){var r,i=setTimeout((function(){n(new Error("Span processor did not completed within timeout period of "+t+" ms")),r=sp.timeout}),t);e.forceFlush().then((function(){clearTimeout(i),r!==sp.timeout&&(r=sp.resolved,n(r))})).catch((function(t){clearTimeout(i),r=sp.error,n(t)}))}))}));return new Promise((function(t,n){Promise.all(e).then((function(e){var r=e.filter((function(t){return t!==sp.resolved}));r.length>0?n(r):t()})).catch((function(t){return n([t])}))}))},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(t){var e;return null===(e=this.constructor._registeredPropagators.get(t))||void 0===e?void 0:e()},t.prototype._getSpanExporter=function(t){var e;return null===(e=this.constructor._registeredExporters.get(t))||void 0===e?void 0:e()},t.prototype._buildPropagatorFromEnv=function(){var t=this,e=Array.from(new Set(Vl().OTEL_PROPAGATORS)),n=e.map((function(e){var n=t._getPropagator(e);return n||te.warn('Propagator "'+e+'" requested through environment variable is unavailable.'),n})).reduce((function(t,e){return e&&t.push(e),t}),[]);return 0===n.length?void 0:1===e.length?n[0]:new nf({propagators:n})},t.prototype._buildExporterFromEnv=function(){var t=Vl().OTEL_TRACES_EXPORTER;if("none"!==t&&""!==t){var e=this._getSpanExporter(t);return e||te.error('Exporter "'+t+'" requested through environment variable is unavailable.'),e}},t._registeredPropagators=new Map([["tracecontext",function(){return new ff}],["baggage",function(){return new Tl}]]),t._registeredExporters=new Map,t}(),yp=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},gp=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},_p=function(){function t(){this._enabled=!1,this._currentContext=J}return t.prototype._bindFunction=function(t,e){void 0===t&&(t=J);var n=this,r=function(){for(var r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return n.with(t,(function(){return e.apply(r,i)}))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:e.length}),r},t.prototype.active=function(){return this._currentContext},t.prototype.bind=function(t,e){return void 0===t&&(t=this.active()),"function"==typeof e?this._bindFunction(t,e):e},t.prototype.disable=function(){return this._currentContext=J,this._enabled=!1,this},t.prototype.enable=function(){return this._enabled||(this._enabled=!0,this._currentContext=J),this},t.prototype.with=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=this._currentContext;this._currentContext=t||J;try{return e.call.apply(e,gp([n],yp(r),!1))}finally{this._currentContext=o}},t}(),mp=(pp=function(t,e){return(pp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}pp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),bp=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;if(e.contextManager)throw"contextManager should be defined in register method not in constructor";if(e.propagator)throw"propagator should be defined in register method not in constructor";return n}return mp(e,t),e.prototype.register=function(e){void 0===e&&(e={}),void 0===e.contextManager&&(e.contextManager=new _p),e.contextManager&&e.contextManager.enable(),t.prototype.register.call(this,e)},e}(vp);!function(t){t.CONNECT_END="connectEnd",t.CONNECT_START="connectStart",t.DECODED_BODY_SIZE="decodedBodySize",t.DOM_COMPLETE="domComplete",t.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",t.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",t.DOM_INTERACTIVE="domInteractive",t.DOMAIN_LOOKUP_END="domainLookupEnd",t.DOMAIN_LOOKUP_START="domainLookupStart",t.ENCODED_BODY_SIZE="encodedBodySize",t.FETCH_START="fetchStart",t.LOAD_EVENT_END="loadEventEnd",t.LOAD_EVENT_START="loadEventStart",t.NAVIGATION_START="navigationStart",t.REDIRECT_END="redirectEnd",t.REDIRECT_START="redirectStart",t.REQUEST_START="requestStart",t.RESPONSE_END="responseEnd",t.RESPONSE_START="responseStart",t.SECURE_CONNECTION_START="secureConnectionStart",t.UNLOAD_EVENT_END="unloadEventEnd",t.UNLOAD_EVENT_START="unloadEventStart"}(hp||(hp={})),function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"}(dp||(dp={})),U.INFO,dp.ParentBasedAlwaysOn,U.ALL,U.VERBOSE,U.DEBUG,U.INFO,U.WARN,U.ERROR,U.NONE,Array(32);var Tp,Ep=performance;(Tp={})[il]="opentelemetry",Tp[rl]="browser",Tp[ol]=sl,Tp[al]="1.9.0";var Sp,wp,Op=Math.pow(10,6),kp=Math.pow(10,9);function Ap(t){var e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*Op)]}function Pp(){var t=Ep.timeOrigin;if("number"!=typeof t){var e=Ep;t=e.timing&&e.timing.fetchStart}return t}function Lp(t){if(e=t,Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1])return t;if("number"==typeof t)return t<Pp()?function(t){return function(t,e){var n=[t[0]+e[0],t[1]+e[1]];return n[1]>=kp&&(n[1]-=kp,n[0]+=1),n}(Ap(Pp()),Ap("number"==typeof t?t:Ep.now()))}(t):Ap(t);if(t instanceof Date)return Ap(t.getTime());throw TypeError("Invalid input type");var e}function Ip(t){return t[0]*kp+t[1]}!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(Sp||(Sp={})),function(t){t.HTTP="http"}(wp||(wp={})),Function.prototype.toString.call(Object);var Rp,Cp,Np=function(){function t(){var t=this;this._promise=new Promise((function(e,n){t._resolve=e,t._reject=n}))}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(t){this._resolve(t)},t.prototype.reject=function(t){this._reject(t)},t}(),jp=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},xp=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function Mp(t,e,n){if(e in n&&"number"==typeof n[e])return t.addEvent(e,n[e]),t}function Dp(t,e){Mp(t,hp.FETCH_START,e),Mp(t,hp.DOMAIN_LOOKUP_START,e),Mp(t,hp.DOMAIN_LOOKUP_END,e),Mp(t,hp.CONNECT_START,e),Mp(t,hp.SECURE_CONNECTION_START,e),Mp(t,hp.CONNECT_END,e),Mp(t,hp.REQUEST_START,e),Mp(t,hp.RESPONSE_START,e),Mp(t,hp.RESPONSE_END,e);var n=e[hp.ENCODED_BODY_SIZE];void 0!==n&&t.setAttribute("http.response_content_length",n);var r=e[hp.DECODED_BODY_SIZE];void 0!==r&&n!==r&&t.setAttribute("http.response_content_length_uncompressed",r)}function Bp(t){if("function"==typeof URL)return new URL(t,location.href);var e=(Rp||(Rp=document.createElement("a")),Rp);return e.href=t,e}!function(){function t(t,e){this._callback=t,this._that=e,this._isCalled=!1,this._deferred=new Np}Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,xp([this._that],jp(n),!1))).then((function(t){return e._deferred.resolve(t)}),(function(t){return e._deferred.reject(t)}))}catch(t){this._deferred.reject(t)}}return this._deferred.promise}}(),function(t){t.COMPONENT="component",t.HTTP_ERROR_NAME="http.error_name",t.HTTP_STATUS_TEXT="http.status_text"}(Cp||(Cp={}));var Up,Fp,Zp,Wp,zp,Vp,Hp,Gp=(Up=function(t,e){return(Up=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Up(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Xp=function(t){function e(e){var n=t.call(this,"@opentelemetry/instrumentation-fetch","0.35.0",e)||this;return n.component="fetch",n.version="0.35.0",n.moduleName=n.component,n._usedResources=new WeakSet,n._tasksCount=0,n}return Gp(e,t),e.prototype.init=function(){},e.prototype._getConfig=function(){return this._config},e.prototype._addChildSpan=function(t,e){var n=this.tracer.startSpan("CORS Preflight",{startTime:e[hp.FETCH_START]},ve.setSpan(Jt.active(),t));this._getConfig().ignoreNetworkEvents||Dp(n,e),n.end(e[hp.RESPONSE_END])},e.prototype._addFinalSpanAttributes=function(t,e){var n=Bp(e.url);t.setAttribute("http.status_code",e.status),null!=e.statusText&&t.setAttribute(Cp.HTTP_STATUS_TEXT,e.statusText),t.setAttribute("http.host",n.host),t.setAttribute("http.scheme",n.protocol.replace(":","")),t.setAttribute("http.user_agent",navigator.userAgent)},e.prototype._addHeaders=function(t,e){if(!function(t,e){var n=e||[];return("string"==typeof n||n instanceof RegExp)&&(n=[n]),Bp(t).origin===location.origin||n.some((function(e){return n=t,"string"==typeof(r=e)?n===r:!!n.match(r);var n,r}))}(e,this._getConfig().propagateTraceHeaderCorsUrls)){var n={};return he.inject(Jt.active(),n),void(Object.keys(n).length>0&&this._diag.debug("headers inject skipped due to CORS policy"))}t instanceof Request||t.headers instanceof Headers?he.inject(Jt.active(),t.headers,{set:function(t,e,n){return t.set(e,"string"==typeof n?n:String(n))}}):(n={},he.inject(Jt.active(),n),t.headers=Object.assign({},n,t.headers||{}))},e.prototype._clearResources=function(){0===this._tasksCount&&this._getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)},e.prototype._createSpan=function(t,e){var n;if(void 0===e&&(e={}),!function(t,e){var n,r;if(!e)return!1;try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),o=i.next();!o.done;o=i.next())if(dl(t,o.value))return!0}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}(t,this._getConfig().ignoreUrls)){var r=(e.method||"GET").toUpperCase(),i="HTTP "+r;return this.tracer.startSpan(i,{kind:Ht.CLIENT,attributes:(n={},n[Cp.COMPONENT]=this.moduleName,n["http.method"]=r,n["http.url"]=t,n)})}this._diag.debug("ignoring span as url matches ignored url")},e.prototype._findResourceAndAddNetworkEvents=function(t,e,n){var r=e.entries;if(!r.length){if(!performance.getEntriesByType)return;r=performance.getEntriesByType("resource")}var i=function(t,e,n,r,i,o){void 0===i&&(i=new WeakSet);var a=Bp(t),s=function(t,e,n,r,i,o){var a=Ip(e),s=Ip(n),u=r.filter((function(e){var n=Ip(Lp(e[hp.FETCH_START])),r=Ip(Lp(e[hp.RESPONSE_END]));return e.initiatorType.toLowerCase()===(o||"xmlhttprequest")&&e.name===t&&n>=a&&r<=s}));return u.length>0&&(u=u.filter((function(t){return!i.has(t)}))),u}(t=a.toString(),e,n,r,i,o);if(0===s.length)return{mainRequest:void 0};if(1===s.length)return{mainRequest:s[0]};var u=function(t){return t.slice().sort((function(t,e){var n=t[hp.FETCH_START],r=e[hp.FETCH_START];return n>r?1:n<r?-1:0}))}(s);if(a.origin!==location.origin&&u.length>1){var c=u[0],l=function(t,e,n){for(var r,i=Ip(n),o=Ip(Lp(e)),a=t[1],s=t.length,u=1;u<s;u++){var c=t[u],l=Ip(Lp(c[hp.FETCH_START])),f=i-Ip(Lp(c[hp.RESPONSE_END]));l>=o&&(!r||f<r)&&(r=f,a=c)}return a}(u,c[hp.RESPONSE_END],n),f=c[hp.RESPONSE_END];return l[hp.FETCH_START]<f&&(l=c,c=void 0),{corsPreFlightRequest:c,mainRequest:l}}return{mainRequest:s[0]}}(e.spanUrl,e.startTime,n,r,this._usedResources,"fetch");if(i.mainRequest){var o=i.mainRequest;this._markResourceAsUsed(o);var a=i.corsPreFlightRequest;a&&(this._addChildSpan(t,a),this._markResourceAsUsed(a)),this._getConfig().ignoreNetworkEvents||Dp(t,o)}},e.prototype._markResourceAsUsed=function(t){this._usedResources.add(t)},e.prototype._endSpan=function(t,e,n){var r=this,i=pl(Date.now()),o=hl();this._addFinalSpanAttributes(t,n),setTimeout((function(){var n;null===(n=e.observer)||void 0===n||n.disconnect(),r._findResourceAndAddNetworkEvents(t,e,o),r._tasksCount--,r._clearResources(),t.end(i)}),300)},e.prototype._patchConstructor=function(){var t=this;return function(e){var n=t;return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=this,o=Bp(t[0]instanceof Request?t[0].url:t[0]).href,a=t[0]instanceof Request?t[0]:t[1]||{},s=n._createSpan(o,a);if(!s)return e.apply(this,t);var u=n._prepareSpanData(o);function c(t,e){n._applyAttributesAfterFetch(t,a,e),n._endSpan(t,u,{status:e.status||0,statusText:e.message,url:o})}function l(t,e){n._applyAttributesAfterFetch(t,a,e),e.status>=200&&e.status<400?n._endSpan(t,u,e):n._endSpan(t,u,{status:e.status,statusText:e.statusText,url:o})}function f(t,e,n){try{var r=n.clone(),i=n.clone(),o=r.body;if(o){var a=o.getReader();!function e(){a.read().then((function(n){n.done?l(t,i):e()}),(function(e){c(t,e)}))}()}else l(t,n)}finally{e(n)}}function p(t,e,n){try{c(t,n)}finally{e(n)}}return new Promise((function(t,r){return Jt.with(ve.setSpan(Jt.active(),s),(function(){return n._addHeaders(a,o),n._tasksCount++,e.apply(i,a instanceof Request?[a]:[o,a]).then(f.bind(i,s,t),p.bind(i,s,r))}))}))}}},e.prototype._applyAttributesAfterFetch=function(t,e,n){var r=this,i=this._getConfig().applyCustomAttributesOnSpan;i&&function(t,e,n){var r,i;try{i=t()}catch(t){r=t}finally{return e(r),i}}((function(){return i(t,e,n)}),(function(t){t&&r._diag.error("applyCustomAttributesOnSpan",t)}))},e.prototype._prepareSpanData=function(t){var e=hl(),n=[];if("function"!=typeof PerformanceObserver)return{entries:n,startTime:e,spanUrl:t};var r=new PerformanceObserver((function(e){e.getEntries().forEach((function(e){"fetch"===e.initiatorType&&e.name===t&&n.push(e)}))}));return r.observe({entryTypes:["resource"]}),{entries:n,observer:r,startTime:e,spanUrl:t}},e.prototype.enable=function(){(function(t){return"function"==typeof t&&"function"==typeof t.__original&&"function"==typeof t.__unwrap&&!0===t.__wrapped})(fetch)&&(this._unwrap(Yc,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(Yc,"fetch",this._patchConstructor())},e.prototype.disable=function(){this._unwrap(Yc,"fetch"),this._usedResources=new WeakSet},e}(Qc),qp=function(){function t(e){var n=e.transportManager,r=e.promiseMap,i=void 0===r?new Map:r,o=e.tracer;E(this,t),Fp.add(this),Zp.set(this,void 0),Wp.set(this,void 0),zp.set(this,0),Vp.set(this,void 0),P(this,Zp,n,"f"),P(this,Wp,i,"f"),P(this,Vp,o,"f")}return w(t,[{key:"shutdown",value:function(){return k(this,void 0,void 0,(function*(){yield Promise.all(A(this,Wp,"f").values())}))}},{key:"forceFlush",value:function(){return k(this,void 0,void 0,(function*(){yield Promise.all(A(this,Wp,"f").values())}))}},{key:"onStart",value:function(){}},{key:"onEnd",value:function(t){var e=A(this,Vp,"f").fromOTSpan(t);A(this,Fp,"m",Hp).call(this,e)}}]),t}();Zp=new WeakMap,Wp=new WeakMap,zp=new WeakMap,Vp=new WeakMap,Fp=new WeakSet,Hp=function(t){var e,n,r=(P(this,zp,(n=A(this,zp,"f"),e=n++,n),"f"),e);A(this,Wp,"f").set(r,k(this,void 0,void 0,(function*(){yield A(this,Zp,"f").processSpan(t),A(this,Wp,"f").delete(r)})))};var Kp={Visibility:"outsystems.otel.access.visibility",AccessType:"outsystems.otel.access.type",ChildrenNames:Vn.exports.AggregationAttributes.ChildrenNames,IsNonAggregable:Vn.exports.AggregationAttributes.IsNonAggregable};t.KnownAttributes=Kp;var $p,Qp,Yp,Jp,th,eh,nh,rh,ih,oh,ah,sh,uh,ch,lh,fh=[Kp.IsNonAggregable,Kp.ChildrenNames],ph=function(){function t(e){var n=this,r=e.visibility,i=e.attributes,o=void 0===i?{}:i,a=e.span,s=e.activateSpan,u=e.explicitChildren,c=void 0===u?[]:u;E(this,t),$p.set(this,void 0),Qp.set(this,void 0),Yp.set(this,void 0),Jp.set(this,void 0),P(this,$p,a,"f"),P(this,Qp,s,"f"),P(this,Jp,c,"f"),void 0!==r&&A(this,$p,"f").setAttribute(Kp.Visibility,Nu[r]),A(this,$p,"f").setAttributes(o),this.ended=new Promise((function(t){P(n,Yp,t,"f")}))}return w(t,[{key:"setAttribute",value:function(t,e){A(this,$p,"f").setAttribute(t,e)}},{key:"setStatus",value:function(t,e){A(this,$p,"f").setStatus({code:t,message:e})}},{key:"raiseError",value:function(t,e){A(this,$p,"f").recordException(t),this.setStatus(2,e)}},{key:"getContext",value:function(){var t=A(this,$p,"f").spanContext();return{spanId:t.spanId,traceId:t.traceId,attributes:A(this,$p,"f").attributes,sampled:Boolean(1&t.traceFlags)}}},{key:"addEvent",value:function(t,e){A(this,$p,"f").addEvent(t,e)}},{key:"end",value:function(){var t;return k(this,void 0,void 0,(function*(){yield Promise.all(A(this,Jp,"f").map((function(t){return t.ended}))),A(this,$p,"f").end(),null===(t=A(this,Yp,"f"))||void 0===t||t.call(this)}))}},{key:"fail",value:function(){A(this,$p,"f").setStatus({code:Gt.ERROR})}},{key:"getSpanInformation",value:function(){return{name:A(this,$p,"f").name,kind:A(this,$p,"f").kind,status:A(this,$p,"f").status.code,parentSpanId:A(this,$p,"f").parentSpanId,startTime:je.toNanoSeconds(new je(A(this,$p,"f").startTime)),endTime:je.toNanoSeconds(new je(A(this,$p,"f").endTime)),childrenNames:A(this,$p,"f").attributes[Vn.exports.AggregationAttributes.ChildrenNames]}}},{key:"activate",value:function(){return A(this,Qp,"f").call(this)}},{key:"addExplicitChild",value:function(t){A(this,Jp,"f").push(t)}}]),t}();$p=new WeakMap,Qp=new WeakMap,Yp=new WeakMap,Jp=new WeakMap;var hh,dh,vh,yh=function(){function t(e){var n=e.transports,r=e.baseAttributes,i=void 0===r?{}:r,o=e.staticAttributes,a=void 0===o?[]:o,s=e.databaseNameSuffix,u=e.transportManager,c=void 0===u?new pr({traceTransports:n,databaseNameSuffix:s}):u,l=e.tracerProvider,f=void 0===l?new bp:l,p=e.contextManager,h=void 0===p?new Uu:p,d=e.tracer,v=void 0===d?f.getTracer("@outsystems/logger-js","2.10.6"):d,y=e.exporter,g=e.enabled,_=void 0===g||g,m=e.getActiveSpan,b=void 0===m?function(){return ve.getActiveSpan()}:m,T=e.setSpan,S=void 0===T?function(t,e){return ve.setSpan(t,e)}:T;E(this,t),th.add(this),eh.set(this,void 0),nh.set(this,void 0),rh.set(this,void 0),ih.set(this,void 0),oh.set(this,void 0),ah.set(this,void 0),sh.set(this,void 0),uh.set(this,void 0),ch.set(this,void 0),P(this,eh,c,"f"),P(this,ih,v,"f"),P(this,rh,_,"f"),P(this,ah,b,"f"),P(this,nh,f,"f"),P(this,sh,S,"f"),P(this,oh,h,"f"),P(this,uh,i,"f"),P(this,ch,a,"f");var w=null!=y?y:new qp({transportManager:c,tracer:this});A(this,nh,"f").register({contextManager:h}),A(this,nh,"f").addSpanProcessor(w)}return w(t,[{key:"addTransport",value:function(t){A(this,eh,"f").addTraceTransport(t)}},{key:"removeTransport",value:function(t){A(this,eh,"f").removeTraceTransport(t)}},{key:"startSpan",value:function(t,e,n,r){if(A(this,rh,"f")){!function(t,e){var n,r;if(e){var i=null!==(r=null===(n=e.getSpanInformation())||void 0===n?void 0:n.childrenNames)&&void 0!==r?r:[];i.push(t),e.setAttribute(Vn.exports.AggregationAttributes.ChildrenNames,i)}}(t,null!=n?n:A(this,ah,"f").call(this)?this.fromOTSpan(A(this,ah,"f").call(this)):void 0);var i=n?A(this,ih,"f").startSpan(t,{attributes:{},kind:r},n.activate()):A(this,ih,"f").startSpan(t,{kind:r}),o=this.fromOTSpan(i,e);return null==n||n.addExplicitChild(o),o}}},{key:"startActiveSpan",value:function(t,e,n,r,i){var o=this;if(A(this,rh,"f")){var a=function(t){var i=o.fromOTSpan(t,n);return null==r||r.addExplicitChild(i),e(i)};return r?A(this,ih,"f").startActiveSpan(t,{attributes:{},kind:i},r.activate(),a):A(this,ih,"f").startActiveSpan(t,{kind:i},a)}return e(void 0)}},{key:"getActiveSpan",value:function(){var t=A(this,ah,"f").call(this);return t?this.fromOTSpan(t):void 0}},{key:"setStatus",value:function(t){P(this,rh,t,"f")}},{key:"enableFetchInstrumentation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Xp;t.setTracerProvider(A(this,nh,"f"))}},{key:"flush",value:function(){return k(this,void 0,void 0,(function*(){A(this,eh,"f").flushSpans()}))}},{key:"setSchedulerTimerInterval",value:function(t){A(this,eh,"f").setSchedulerTimerInterval(t)}},{key:"fromOTSpan",value:function(t,e){var n=this,r=A(this,th,"m",lh).call(this,t);return new ph({span:t,attributes:Cu(r),activateSpan:function(){return A(n,sh,"f").call(n,A(n,oh,"f").active(),t)},visibility:e})}}]),t}();t.Tracer=yh,eh=new WeakMap,nh=new WeakMap,rh=new WeakMap,ih=new WeakMap,oh=new WeakMap,ah=new WeakMap,sh=new WeakMap,uh=new WeakMap,ch=new WeakMap,th=new WeakSet,lh=function(t){var e=this,n=Object.assign({},A(this,uh,"f"));return void 0===t.parentSpanId||Object.keys(n).forEach((function(t){A(e,ch,"f").includes(t)&&delete n[t]})),n};var gh=function(){function t(e){var n=e.transportId,r=e.logTypeBaseline,i=void 0===r?en.Debug:r,o=e.formatter,a=e.transportConsole,s=void 0===a?console:a,u=e.shouldWriteLogsOnConsoles,c=void 0===u?function(){return!1}:u;E(this,t),hh.add(this),dh.set(this,void 0),this.formatConsoleLog=function(t){var e,n,r,i,o={errorCode:t.type===en.Error?null!==(e=t.errorCode)&&void 0!==e?e:Ru:void 0,category:null!==(n=t.category)&&void 0!==n?n:"Application",message:null!==(i=null===(r=null==t?void 0:t.error)||void 0===r?void 0:r.message)&&void 0!==i?i:t.message,timestamp:je.toISOString(t.timestamp)};return"".concat(o.timestamp,":").concat(o.errorCode?" "+o.errorCode:""," [").concat(o.category,"] ").concat(o.message)},this.transportId=n,this.logTypeBaseline=i,this.formatter=o,this.transportConsole=s,P(this,dh,c,"f")}return w(t,[{key:"getTransportId",value:function(){return this.transportId}},{key:"requiresConnectivity",value:function(){return!1}},{key:"hasWriteBuffer",value:function(){return!1}},{key:"getLogTypeBaseline",value:function(){return this.logTypeBaseline}},{key:"setLogTypeBaseline",value:function(t){this.logTypeBaseline=t}},{key:"write",value:function(t){return k(this,void 0,void 0,(function*(){if(A(this,hh,"m",vh).call(this,t)){var e=this.formatter?this.formatter.format(t):this.formatConsoleLog(t);switch(t.type){case en.Debug:this.transportConsole.debug(e);break;case en.Info:this.transportConsole.log(e);break;case en.Warning:this.transportConsole.warn(e);break;case en.Error:this.transportConsole.error(e,t.error);break;default:this.transportConsole.log(e)}}}))}},{key:"writeAll",value:function(t){return k(this,void 0,void 0,(function*(){var e,n=d(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;yield this.write(r)}}catch(t){n.e(t)}finally{n.f()}}))}}]),t}();dh=new WeakMap,hh=new WeakSet,vh=function(t){return t.visibility===hr.External||A(this,dh,"f").call(this)};var _h,mh,bh,Th,Eh=function(){function t(){E(this,t)}return w(t,[{key:"format",value:function(t){var e,n,r=null!==(e=t.visibility)&&void 0!==e?e:hr.External,i=ju(t),o=Object.assign(Object.assign(g({},Kp.Visibility,Nu[r]),i),t.attributes),a=Mu(o),s=je.toISOString(t.timestamp);return{name:t.category,message:null!==(n=t.message)&&void 0!==n?n:"",attributes:a,instant:s}}}]),t}(),Sh=(g(i={},en.Debug,"logDebug"),g(i,en.Info,"logInfo"),g(i,en.Warning,"logWarning"),g(i,en.Error,"logError"),g(i,en.Trace,"logTrace"),i),wh=function(){function t(e){var n=e.transportId,r=e.logTypeBaseline,i=e.nativeLoggerV2,o=e.formatter,a=void 0===o?new Eh:o;E(this,t),this.transportId=n,this.logTypeBaseline=r,this.nativeLoggerV2=i,this.formatter=a}return w(t,[{key:"getTransportId",value:function(){return this.transportId}},{key:"requiresConnectivity",value:function(){return!1}},{key:"hasWriteBuffer",value:function(){return!1}},{key:"getLogTypeBaseline",value:function(){return this.logTypeBaseline}},{key:"setLogTypeBaseline",value:function(t){this.logTypeBaseline=t}},{key:"write",value:function(t){return k(this,void 0,void 0,(function*(){var e=this.formatter.format(t),n=Sh[t.type];return this.nativeLoggerV2[n](e)}))}},{key:"writeAll",value:function(t){return k(this,void 0,void 0,(function*(){var e,n=d(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;yield this.write(r)}}catch(t){n.e(t)}finally{n.f()}}))}}]),t}(),Oh=(g(o={},en.Trace,1),g(o,en.Debug,5),g(o,en.Info,9),g(o,en.Warning,13),g(o,en.Error,17),o),kh=(g(a={},en.Debug,"Debug"),g(a,en.Info,"Information"),g(a,en.Warning,"Warning"),g(a,en.Error,"Error"),g(a,en.Trace,"Trace"),a),Ah=function(){function t(e){var n=e.resourceAttributes,r=void 0===n?{}:n;E(this,t),this.resourceAttributes=r}return w(t,[{key:"format",value:function(t){return this.formatAll([t])}},{key:"formatAll",value:function(t){var e=Object.assign(g({},Kp.AccessType,3),this.resourceAttributes);return{resourceLogs:[{resource:{attributes:xu(e)},instrumentationLibraryLogs:[{instrumentationLibrary:{name:"@outsystems/logger-js",version:"2.10.6"},logs:t.map((function(t){var e,n=null!==(e=t.visibility)&&void 0!==e?e:hr.External,r=ju(t),i=function(t){var e={},n=t.span;return n&&(e.traceId=n.traceId,e.spanId=n.spanId),e}(t),o=function(t){var e={};return t.category&&(e["outsystems.log.message.tag"]=t.category),e}(t),a=Object.assign(Object.assign(Object.assign(g({},Kp.Visibility,Nu[n]),r),o),t.attributes),s=Mu(a),u=xu(s),c=Oh[t.type],l=kh[t.type],f=je.toNanoSeconds(t.timestamp),p=function(t){var e={body:{stringValue:""}};if(t.message){var n=t.message.length>2e3?"".concat(t.message.substring(0,1997),"..."):t.message;e.body={stringValue:n}}return e}(t);return Object.assign(Object.assign(Object.assign({},p),i),{timeUnixNano:f,severityNumber:c,severityText:l,attributes:u})}))}]}]}}}]),t}(),Ph=function(){function t(e){var r=e.transportId,i=e.resourceAttributes,o=e.logTypeBaseline,a=e.logsEndpoint,s=void 0===a?"/v1/logs":a,u=e.logsCollectorBaseUrl,c=e.apiKey,l=e.enableWriteBuffer,f=void 0===l||l,p=e.httpClient,h=void 0===p?new n.HttpClient({baseUrl:u,headers:c?{"api-key":c}:{}}):p,d=e.formatter,v=void 0===d?new Ah({resourceAttributes:i}):d;E(this,t),this.transportId=r,this.logTypeBaseline=o,this.logsEndpoint=s,this.enableWriteBuffer=f,this.httpClient=h,this.formatter=v}return w(t,[{key:"getTransportId",value:function(){return this.transportId}},{key:"requiresConnectivity",value:function(){return!0}},{key:"hasWriteBuffer",value:function(){return this.enableWriteBuffer}},{key:"getLogTypeBaseline",value:function(){return this.logTypeBaseline}},{key:"setLogTypeBaseline",value:function(t){this.logTypeBaseline=t}},{key:"write",value:function(t){return k(this,void 0,void 0,(function*(){var e=this.formatter.format(t);return this.httpClient.post({url:this.logsEndpoint,payload:e,contentType:n.ContentType.Json})}))}},{key:"writeAll",value:function(t){return k(this,void 0,void 0,(function*(){var e=this.formatter.formatAll(t);return this.httpClient.post({url:this.logsEndpoint,payload:e,contentType:n.ContentType.Json})}))}}]),t}(),Lh=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.resourceAttributes,r=void 0===n?{}:n;E(this,t),_h.add(this),mh.set(this,void 0),P(this,mh,r,"f")}return w(t,[{key:"format",value:function(t){return this.formatAll([t])}},{key:"formatAll",value:function(t){var e=this,n=Object.assign(g({},Kp.AccessType,3),A(this,mh,"f"));return{resourceSpans:[{resource:{attributes:xu(n)},instrumentationLibrarySpans:[{instrumentationLibrary:{name:"@outsystems/logger-js",version:"2.10.6"},spans:t.map((function(t){var n=Object.assign(g({},Kp.Visibility,Nu[hr.External]),A(e,_h,"m",bh).call(e,t.attributes)),r=Mu(n),i=xu(r);return Object.assign({traceId:t.traceId,spanId:t.spanId,parentSpanId:t.parentSpanId,name:t.name,startTimeUnixNano:t.startTimeUnixNano,endTimeUnixNano:t.endTimeUnixNano,status:{code:0!==t.status?t.status:1},attributes:i},t.kind?{kind:t.kind}:{})}))}]}]}}}]),t}();mh=new WeakMap,_h=new WeakSet,bh=function(t){return Object.entries(t).reduce((function(t,e){var n=m(e,2),r=n[0],i=n[1];return fh.includes(r)||(t[r]=i),t}),{})};var Ih,Rh,Ch,Nh,jh,xh,Mh,Dh,Bh,Uh=function(){function t(e){var r=e.transportId,i=e.resourceAttributes,o=e.enabled,a=void 0===o||o,s=e.tracesEndpoint,u=void 0===s?"/v1/traces":s,c=e.tracesCollectorBaseUrl,l=e.apiKey,f=e.enableWriteBuffer,p=void 0===f||f,h=e.httpClient,d=void 0===h?new n.HttpClient({baseUrl:c,headers:l?{"api-key":l}:{}}):h,v=e.formatter,y=void 0===v?new Lh({resourceAttributes:i}):v;E(this,t),Th.set(this,void 0),this.transportId=r,P(this,Th,a,"f"),this.tracesEndpoint=u,this.enableWriteBuffer=p,this.httpClient=d,this.formatter=y}return w(t,[{key:"getTransportId",value:function(){return this.transportId}},{key:"isTracingEnabled",value:function(){return A(this,Th,"f")}},{key:"enableTracing",value:function(){P(this,Th,!0,"f")}},{key:"disableTracing",value:function(){P(this,Th,!1,"f")}},{key:"requiresConnectivity",value:function(){return!0}},{key:"hasWriteBuffer",value:function(){return this.enableWriteBuffer}},{key:"write",value:function(t){return k(this,void 0,void 0,(function*(){var e=this.formatter.format(t);return this.httpClient.post({url:this.tracesEndpoint,payload:e,contentType:n.ContentType.Json})}))}},{key:"writeAll",value:function(t){return k(this,void 0,void 0,(function*(){var e=this.formatter.formatAll(t);return this.httpClient.post({url:this.tracesEndpoint,payload:e,contentType:n.ContentType.Json})}))}}]),t}();Th=new WeakMap;var Fh,Zh=function(){function t(n){var r=n.databaseNameSuffix,i=n.logTransports,o=n.traceTransports,a=n.baseLogAttributes,s=void 0===a?{}:a,u=n.baseSpanAttributes,c=void 0===u?{}:u,l=n.staticSpanAttributes,f=void 0===l?[]:l,p=n.isOnline,h=n.aggregateSpans,d=n.transportManager,v=void 0===d?new pr({databaseNameSuffix:r,logTransports:i,traceTransports:o,isOnline:p,aggregateSpans:h}):d,y=n.tracerInstance,g=n.loggerInstance;E(this,t),Ih.add(this),Rh.set(this,void 0),Ch.set(this,void 0),Nh.set(this,void 0),jh.set(this,void 0),xh.set(this,void 0),Mh.set(this,void 0),Dh.set(this,void 0),P(this,Rh,v,"f"),P(this,Ch,y,"f"),P(this,Nh,g,"f"),P(this,jh,(function(){return e.FeaturesManager.isEnabled(e.FeatureKeys.WriteLogsOnConsoles)}),"f"),P(this,xh,s,"f"),P(this,Mh,c,"f"),P(this,Dh,f,"f")}return w(t,[{key:"init",value:function(){return k(this,void 0,void 0,(function*(){yield this.getLogger(),this.getTracer()}))}},{key:"getLogger",value:function(){return k(this,void 0,void 0,(function*(){return A(this,Nh,"f")||P(this,Nh,yield Bu.build({transportManager:A(this,Rh,"f"),baseAttributes:A(this,xh,"f")}),"f"),A(this,Nh,"f")}))}},{key:"getTracer",value:function(){return A(this,Ch,"f")||P(this,Ch,new yh({transportManager:A(this,Rh,"f"),baseAttributes:A(this,Mh,"f"),staticAttributes:A(this,Dh,"f")}),"f"),A(this,Ch,"f")}},{key:"useNativeLoggerTransport",value:function(t){var e=t.plugin,n=t.logTypeBaseline,r=t.logAttributes;return k(this,void 0,void 0,(function*(){(yield this.getLogger()).addTransport(new wh({transportId:"native-logger-transport",nativeLoggerV2:e,logTypeBaseline:n,logAttributes:r}))}))}},{key:"useOpenTelemetryLoggerTransport",value:function(t){var e=t.resourceAttributes,n=t.logTypeBaseline,r=t.collectorBaseUrl,i=t.apiKey;return k(this,void 0,void 0,(function*(){(yield this.getLogger()).addTransport(new Ph({transportId:"otel-logger-transport",resourceAttributes:e,logTypeBaseline:n,logsCollectorBaseUrl:r,apiKey:i}))}))}},{key:"useConsoleLoggerTransport",value:function(t){return k(this,void 0,void 0,(function*(){(yield this.getLogger()).addTransport(new gh({transportId:"console-transport",logTypeBaseline:t,shouldWriteLogsOnConsoles:A(this,jh,"f")}))}))}},{key:"useOpenTelemetryTracerTransport",value:function(t){var e=t.resourceAttributes,n=t.enabled,r=void 0===n||n,i=t.collectorBaseUrl,o=t.apiKey;this.getTracer().addTransport(new Uh({transportId:"otel-tracer-transport",resourceAttributes:e,enabled:r,apiKey:o,tracesCollectorBaseUrl:i}))}},{key:"useConsoleTracerTransport",value:function(){return k(this,void 0,void 0,(function*(){throw new Error("Not implemented")}))}},{key:"useFetchInstrumentation",value:function(){this.getTracer().enableFetchInstrumentation()}},{key:"setLogLevel",value:function(t){A(this,Rh,"f").setAllLogTypeBaselines(t)}},{key:"setTracerStatus",value:function(t){this.getTracer().setStatus(t)}},{key:"setSchedulerTimerInterval",value:function(t){A(this,Rh,"f").setSchedulerTimerInterval(t)}},{key:"flushInstrumentationData",value:function(){return k(this,void 0,void 0,(function*(){yield Promise.all([A(this,Rh,"f").flushLogs(),A(this,Rh,"f").flushSpans()])}))}},{key:"logError",value:function(t){var e=t.category,n=t.message,r=t.error,i=t.errorCode,o=t.visibility,a=t.failSpan,s=void 0===a||a;return k(this,void 0,void 0,(function*(){if(s){var t=this.getTracer().getActiveSpan();null==t||t.fail()}(yield this.getLogger()).error({category:e,message:n,error:r,errorCode:i,visibility:o,span:A(this,Ih,"m",Bh).call(this)})}))}},{key:"logWarning",value:function(t){var e=t.category,n=t.message,r=t.visibility;return k(this,void 0,void 0,(function*(){(yield this.getLogger()).warning({category:e,message:n,visibility:r,span:A(this,Ih,"m",Bh).call(this)})}))}},{key:"logInfo",value:function(t){var e=t.category,n=t.message,r=t.visibility;return k(this,void 0,void 0,(function*(){(yield this.getLogger()).info({category:e,message:n,visibility:r,span:A(this,Ih,"m",Bh).call(this)})}))}},{key:"logDebug",value:function(t){var e=t.category,n=t.message,r=t.visibility;return k(this,void 0,void 0,(function*(){(yield this.getLogger()).debug({category:e,message:n,visibility:r,span:A(this,Ih,"m",Bh).call(this)})}))}},{key:"startSpan",value:function(t,e,n,r){return this.getTracer().startSpan(t,e,n,r)}},{key:"startActiveSpan",value:function(t,e,n,r,i){return this.getTracer().startActiveSpan(t,e,n,r,i)}},{key:"getActiveSpan",value:function(){return this.getTracer().getActiveSpan()}}]),t}();t.InstrumentationFactory=Zh,Rh=new WeakMap,Ch=new WeakMap,Nh=new WeakMap,jh=new WeakMap,xh=new WeakMap,Mh=new WeakMap,Dh=new WeakMap,Ih=new WeakSet,Bh=function(){var t=this.getTracer().getActiveSpan();return t?zn(t):void 0},t.SpanKind=Fh,function(t){t[t.Internal=0]="Internal",t[t.Client=2]="Client"}(Fh||(t.SpanKind=Fh={})),t.Version="2.10.6"}));
define("OutSystems/ClientRuntime/TransitionAnimation",["require","exports"],(function(i,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransitionAnimation=void 0,function(i){i[i.None=0]="None",i[i.Default=1]="Default",i[i.Fade=2]="Fade",i[i.SlideFromLeft=3]="SlideFromLeft",i[i.SlideFromRight=4]="SlideFromRight",i[i.SlideFromBottom=5]="SlideFromBottom",i[i.SlideFromTop=6]="SlideFromTop"}(e.TransitionAnimation||(e.TransitionAnimation={}))}));
define("OutSystems/ClientRuntime/Transitions",["require","exports","./TransitionAnimation"],(function(n,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reverseTransition=e.createTransition=e.sanitizeTransition=e.setDefaultTransition=e.Default=e.Transition=e.TransitionAnimation=void 0,e.TransitionAnimation=i.TransitionAnimation;class t{constructor(n=""){this.name=n}}e.Transition=t;const r=new t,a=new t("fade"),o=new t("slide-from-left"),s=new t("slide-from-right"),u=new t("slide-from-bottom"),m=new t("slide-from-top");e.Default=new t,e.setDefaultTransition=function(n){e.Default=n},e.sanitizeTransition=function(n){return new t(n?n.name:"")},e.createTransition=function(n,i){if("string"==typeof n)return new t(n);switch(n){case e.TransitionAnimation.None:return r;case e.TransitionAnimation.Fade:return a;case e.TransitionAnimation.SlideFromLeft:return o;case e.TransitionAnimation.SlideFromRight:return s;case e.TransitionAnimation.SlideFromBottom:return u;case e.TransitionAnimation.SlideFromTop:return m;case e.TransitionAnimation.Default:return e.Default;default:return i}},e.reverseTransition=function(n){if(!(null==n?void 0:n.name))return new t("");switch(n.name){case a.name:return new t(a.name);case u.name:return new t(m.name);case o.name:return new t(s.name);case s.name:return new t(o.name);case m.name:return new t(u.name);default:return new t(n.name+"-back")}}}));
define("OutSystems/ClientRuntime/ApplicationInfo",["require","exports","./Transitions"],(function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getAppUrl=n.getBasePath=n.moduleBelongsToApp=n.getClientRuntimeVersion=n.getBuildServiceVersion=n.showWatermark=n.isWebApplication=n.getErrorPageConfig=n.getDefaultTransition=n.setServerRequestTimeoutOverrideInSeconds=n.getServerRequestTimeoutOverrideInSeconds=n.getHomeModuleLanguageResourcesName=n.getHomeModuleControllerName=n.debugUseWebSockets=n.isDebugEnabled=n.getUserProviderName=n.getDefaultModuleHomeScreenURL=n.getScreenDefinitionFromScreenName=n.getScreenDefinition=n.getHomeModuleDefinition=n.getHomeModuleKey=n.getHomeModuleName=n.setDatabaseName=n.setClientEntitiesModules=n.getClientEntitiesModules=n.getHomeScreen=n.getModuleFromKey=n.getModules=n.setModules=n.getDatabaseName=n.getApplicationName=n.getApplicationKey=n.getEnvironmentName=n.getEnvironmentKey=n.setApplicationDefinition=void 0;let o={environmentKey:"",environmentName:"",applicationKey:"",applicationName:"",userProviderName:"",debugEnabled:!1,debugUseWebSockets:!1,homeModuleName:"",homeModuleKey:"",modules:{},homeModuleControllerName:"",homeModuleLanguageResourcesName:"",clientEntitiesModules:[],serverRequestTimeoutOverrideInSeconds:void 0,isWeb:!1,showWatermark:!1,buildServiceVersion:"",clientRuntimeVersion:""};function i(){return o.applicationKey}function r(e){return(null==e?void 0:e.homeScreenName)?s(e,e.homeScreenName):(null==e?void 0:e.screens)&&e.screens.length>0?e.screens[0]:null}function u(){return o.homeModuleName}function l(){if(o.homeModuleName&&o.modules){const e=o.modules[o.homeModuleKey];return e||null}return null}function s(e,n){for(const t of e.screens)if(t.screenName===n)return t;return null}function a({applicationHomeModule:e=u}={}){var n,t;return`/${null!==(t=null===(n=("undefined"!=typeof window?window:globalThis).OutSystemsApp)||void 0===n?void 0:n.basePath)&&void 0!==t?t:e()}/`.replace(/\/(\/)+/gm,"/")}n.setApplicationDefinition=function(e){o=e},n.getEnvironmentKey=function(){return o.environmentKey},n.getEnvironmentName=function(){return o.environmentName},n.getApplicationKey=i,n.getApplicationName=function(){return o.applicationName},n.getDatabaseName=function(){var e;return null!==(e=o.databaseName)&&void 0!==e?e:""},n.setModules=function(e){o.modules=e},n.getModules=function(){var e;return null!==(e=o.modules)&&void 0!==e?e:{}},n.getModuleFromKey=function(e){const n=o.modules;return!(null==n?void 0:n[e])&&n&&(n[e]={moduleName:null,homeScreenName:null,splashScreenName:null,screens:[],staticEntities:{}}),null==n?void 0:n[e]},n.getHomeScreen=r,n.getClientEntitiesModules=function(){return o.clientEntitiesModules},n.setClientEntitiesModules=function(e){o.clientEntitiesModules=e},n.setDatabaseName=function(e){o.databaseName=e},n.getHomeModuleName=u,n.getHomeModuleKey=function(){return o.homeModuleKey},n.getHomeModuleDefinition=l,n.getScreenDefinition=function(e,n){for(const t of e.screens)if(t.screenUrl===n)return t;return null},n.getScreenDefinitionFromScreenName=s,n.getDefaultModuleHomeScreenURL=function(){const e=l(),n=r(e);return n?`/${null==e?void 0:e.moduleName}/${n.screenUrl}`:null},n.getUserProviderName=function(){return o.userProviderName},n.isDebugEnabled=function(){var e;return null!==(e=o.debugEnabled)&&void 0!==e&&e},n.debugUseWebSockets=function(){var e;return null!==(e=o.debugUseWebSockets)&&void 0!==e&&e},n.getHomeModuleControllerName=function(){return o.homeModuleControllerName},n.getHomeModuleLanguageResourcesName=function(){return o.homeModuleLanguageResourcesName},n.getServerRequestTimeoutOverrideInSeconds=function(){return o.serverRequestTimeoutOverrideInSeconds},n.setServerRequestTimeoutOverrideInSeconds=function(e){o.serverRequestTimeoutOverrideInSeconds=e},n.getDefaultTransition=function(){var e;const n=t.TransitionAnimation[null!==(e=o.defaultTransition)&&void 0!==e?e:t.TransitionAnimation.None];return t.createTransition(n)},n.getErrorPageConfig=function(){return o.errorPageConfig},n.isWebApplication=function(){var e;return null!==(e=o.isWeb)&&void 0!==e&&e},n.showWatermark=function(){var e;return null!==(e=o.showWatermark)&&void 0!==e&&e},n.getBuildServiceVersion=function(){var e;return null!==(e=o.buildServiceVersion)&&void 0!==e?e:""},n.getClientRuntimeVersion=function(){var e;return null!==(e=o.clientRuntimeVersion)&&void 0!==e?e:""},n.moduleBelongsToApp=function(e){var n,t;const r=null!==(n=o.modules)&&void 0!==n?n:{};return(null===(t=Object.keys(r).map(e=>r[e]).filter(n=>n.moduleName===e)[0])||void 0===t?void 0:t.ownerAppKey)===i()},n.getBasePath=a,n.getAppUrl=function({windowLocation:e=window.location,applicationHomeModule:n=u}={}){return`${e.protocol}//${e.host}${a({applicationHomeModule:n})}`}}));
define("OutSystems/ClientRuntime/modules/Storage/StorageType",["require","exports"],(function(e,t){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Persistent=0]="Persistent",e[e.Session=1]="Session"}(s||(s={})),t.default=s}));
define("OutSystems/ClientRuntime/modules/Storage/InMemoryStorage",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{get length(){return Object.keys(this.storageObj).length}clear(){this.storageObj={}}getItem(e){return this.storageObj.hasOwnProperty(e)?this.storageObj[e]:null}key(e){const t=Object.keys(this.storageObj);return e<t.length?t[e]:null}removeItem(e){this.storageObj.hasOwnProperty(e)&&delete this.storageObj[e]}setItem(e,t){this.storageObj[e]=t}constructor(e){if(this.storageObj={},e){let t=0,s=e.key(t);for(;null!==s;)this.storageObj[s]=e.getItem(s),s=e.key(++t)}}}}));
define("OutSystems/ClientRuntime/modules/Storage/StorageNaming",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDefaultStorageNamespace=t.getDefaultStorageNamespace=t.OS_STORAGE_PREFIX=void 0,t.OS_STORAGE_PREFIX="$OS_";let a="OS";t.getDefaultStorageNamespace=function(){return a},t.setDefaultStorageNamespace=function(e){a=e}}));
define("OutSystems/ClientRuntime/modules/Storage/StorageEnvironment",["require","exports","./InMemoryStorage","./StorageNaming","./StorageType"],(function(e,t,o,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryExpandStorage=t.setCustomSessionStorage=t.setCustomPersistentStorage=t.getSessionStorage=t.getPersistentStorage=t.isSpecificStorageAvailable=void 0;const i="undefined"==typeof window?void 0:window.localStorage,r="undefined"==typeof window?void 0:window.sessionStorage,a=e=>e===s.default.Persistent?i:r;let u=c(s.default.Persistent)?a(s.default.Persistent):new o.default,S=c(s.default.Session)?a(s.default.Session):new o.default;function c(e){const t=n.OS_STORAGE_PREFIX+"test";try{const o=a(e);o.setItem(t,"1");const n="1"===o.getItem(t);return o.removeItem(t),n}catch(e){return!1}}t.isSpecificStorageAvailable=c,t.getPersistentStorage=function(){return u},t.getSessionStorage=function(){return S},t.setCustomPersistentStorage=function(e){u=e},t.setCustomSessionStorage=function(e){S=e},t.tryExpandStorage=function(e){return e===s.default.Persistent&&u!==i?(console.warn("The localStorage is full... Proceding with a static Javascript object"),u=new o.default(u),!0):e===s.default.Session&&S!==r&&(console.warn("The sessionStorage is full... Proceding with a static Javascript object"),S=new o.default(S),!0)}}));
define("OutSystems/ClientRuntime/modules/Storage/StorageObject",["require","exports","./StorageEnvironment","./StorageNaming","./StorageType"],(function(e,t,s,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=Object.freeze(Object());t.default=class{constructor(e,t,s,r){this.storageType=e,this.key=t,this.defaultValue=s,this.getStorageName=()=>(0,a.getDefaultStorageNamespace)(),this.clearCache(),r&&(this.getStorageName=r)}get(){return this.getValue()}set(e){this.setValueInStorage(e)}remove(){this.storage.removeItem(this.storageKey),this.clearCache()}isDefined(){const e=this.storage.getItem(this.storageKey);return null!=e&&"undefined"!==e}get storageKey(){return a.OS_STORAGE_PREFIX+this.getStorageName()+"$"+this.key}get storage(){return this.storageType===r.default.Persistent?(0,s.getPersistentStorage)():(0,s.getSessionStorage)()}getValue(){return this.cachedValue===i&&(this.cachedValue=this.getValueFromStorage()),this.cachedValue}getValueFromStorage(){const e=this.storage.getItem(this.storageKey);return null===e?this.defaultValue:"undefined"===e||void 0===e?void 0:JSON.parse(e)}setValueInStorage(e){const t=this.storageKey,a=JSON.stringify(e),r=this.storage;if(!(null==r?void 0:r.setItem))throw Error("The storage object for "+this.key+" is invalid.");try{r.setItem(t,a),this.cachedValue=e}catch(e){if(!(0,s.tryExpandStorage)(this.storageType))throw e;this.storage.setItem(t,a)}}clearCache(){this.cachedValue=i}}}));
define("OutSystems/ClientRuntime/StorageProvider",["require","exports","./modules/Storage/StorageType","./modules/Storage/InMemoryStorage","./modules/Storage/StorageObject","./modules/Storage/StorageNaming","./modules/Storage/StorageEnvironment"],(function(e,t,r,o,n,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCustomSessionStorage=t.setCustomPersistentStorage=t.getSessionStorage=t.getPersistentStorage=t.getDefaultStorageNamespace=t.setDefaultStorageNamespace=t.StorageObject=t.DummyStorage=t.StorageType=void 0,Object.defineProperty(t,"StorageType",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"DummyStorage",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"StorageObject",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"setDefaultStorageNamespace",{enumerable:!0,get:function(){return a.setDefaultStorageNamespace}}),Object.defineProperty(t,"getDefaultStorageNamespace",{enumerable:!0,get:function(){return a.getDefaultStorageNamespace}}),Object.defineProperty(t,"getPersistentStorage",{enumerable:!0,get:function(){return s.getPersistentStorage}}),Object.defineProperty(t,"getSessionStorage",{enumerable:!0,get:function(){return s.getSessionStorage}}),Object.defineProperty(t,"setCustomPersistentStorage",{enumerable:!0,get:function(){return s.setCustomPersistentStorage}}),Object.defineProperty(t,"setCustomSessionStorage",{enumerable:!0,get:function(){return s.setCustomSessionStorage}})}));
define("OutSystems/ClientRuntime/ClientInfo",["require","exports","./StorageProvider"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClientInfo=t.setClientInfo=void 0;class r{constructor(e){this._device=e}get device(){return this._device}}class n{constructor(e,t,i,r,n,o,s,u){this._platform=e,this._version=t,this._manufacturer=i,this._model=r,this._uuid=n,this._serial=o,this._cordova=s,this._isVirtual=u}get platform(){return this._platform}get version(){return this._version}get manufacturer(){return this._manufacturer}get model(){return this._model}get uuid(){return this._uuid}get serial(){return this._serial}get cordova(){return this._cordova}get isVirtual(){return this._isVirtual}}var o;!function(e){function t(e){if(e)return{platform:e.platform,version:e.version,manufacturer:e.manufacturer,model:e.model,uuid:e.uuid,serial:e.serial,cordova:e.cordova,isVirtual:e.isVirtual}}e.serializeClientInfo=function(e){const i=function(e){if(!e)return;return{device:e.device?t(e.device):void 0}}(e);if(i)return JSON.stringify(i)},e.deserializeClientInfo=function(e){let t;try{t=JSON.parse(e)}catch(e){}if(t)return function(e){if(!e)return;return new r(function(e){if(!e)return;return new n("string"==typeof e.platform?e.platform:void 0,"string"==typeof e.version?e.version:void 0,"string"==typeof e.manufacturer?e.manufacturer:void 0,"string"==typeof e.model?e.model:void 0,"string"==typeof e.uuid?e.uuid:void 0,"string"==typeof e.serial?e.serial:void 0,"string"==typeof e.cordova?e.cordova:void 0,"boolean"==typeof e.isVirtual?e.isVirtual:void 0)}(e.device))}(t)}}(o||(o={}));const s=new i.StorageObject(i.StorageType.Persistent,"ClientInfo");t.setClientInfo=function(){const e=window.device;if(e){const t=new r(new n(e.platform,e.version,e.manufacturer,e.model,e.uuid,e.serial,e.cordova,e.isVirtual));s.set(o.serializeClientInfo(t))}},t.getClientInfo=function(){const e=s.get();if(e)return o.deserializeClientInfo(e)}}));
define("OutSystems/ClientRuntime/CookiesManager",["require","exports"],(function(e,t){"use strict";let i;Object.defineProperty(t,"__esModule",{value:!0}),t.readCookie=t.initialize=void 0,t.initialize=function(e){i=e},t.readCookie=function(e){const t=e+"=",n=(i?i.getCookies():document.cookie).split(";");for(let e=0;e<n.length;e++){let i=n[e];for(;" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null}}));
define("OutSystems/ClientRuntime/Exceptions",["require","exports"],(function(e,t){"use strict";var s;function n(e,t,n=""){return t===s.Exception||e instanceof t&&(""===n||!!e.specificType&&e.specificType===n)}function r(e){if(void 0===e)return"";if(e instanceof Error)return e.message;{const t=e.toString();return"[object SQLError]"===t?e.message.toString():t}}function c(e){return(void 0!==e.extraStack?e.extraStack+"\r\n ":"")+(e.stack||"")||""}Object.defineProperty(t,"__esModule",{value:!0}),t.isApplicationOffline=t.isSystem=t.getException=t.getExceptionInfo=t.getStack=t.getMessage=t.isInstanceOf=t.Exceptions=void 0,function(e){e.CustomError=function(e){const t=Error.call(this,e);"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(t,this.constructor.prototype):t.__proto__=this.constructor.prototype,"stack"in this&&""!==this.stack||(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=t.stack)},e.CustomError.prototype=Error.prototype;class t extends e.CustomError{constructor(e,t,s,n){super(null!=e?e:""),this.extraStack=t,this.message=null!=e?e:"",this.name="Exception",this.errorCode=s,this.category=n}}e.Exception=t;e.ServerException=class extends t{constructor(e,t,s,n){super(t,s,n),this.specificType=e,this.name=e}};class s extends t{constructor(e,t,s,n){super(t,s,n),this.specificType=e,this.name=e}}e.DataBaseException=s;e.OpenDatabaseException=class extends s{constructor(e,t,s){super("OpenDatabaseException",e,t,s)}};e.CommunicationException=class extends t{constructor(e,t,s,n){super(e,t,s,n),this.name="CommunicationException"}};e.NumberOverflowException=class extends t{constructor(e,t){super(e,t),this.name="NumberOverflowException"}valueOf(){return this.name+": "+this.message}};e.InvalidJavascriptType=class extends t{constructor(e,t){super(e,t),this.name="InvalidJavascriptType"}valueOf(){return this.name+": "+this.message}};class r extends t{constructor(e,t,s){super(e,t,s),this.name="SecurityException"}}e.SecurityException=r;e.InvalidLoginException=class extends r{constructor(e,t,s){super(e,t,s),this.name="InvalidLoginException"}};e.NotRegisteredException=class extends r{constructor(e,t,s,n){super(t,s,n),this.specificType=e,this.name=e}};class c extends t{constructor(e,t){super(e,t),this.name="SystemException"}}e.SystemException=c;class o extends c{constructor(e,t){super(e,t),this.name="IgnorableSystemException"}}e.IgnorableSystemException=o;e.ViewHasChangedException=class extends o{constructor(e,t){super(e,t),this.name="ViewHasChangedException"}};e.OutOfContextException=class extends o{constructor(e,t){super(e,t),this.name="OutOfContextException"}};e.RedirectOccurredException=class extends o{constructor(e,t){super(e,t),this.name="RedirectOccurredException"}};class i extends o{constructor(e,t){super(e,t),this.name="UnhandledOrIgnoredErrorInEventException"}get handleErrorResult(){return this._handleErrorResult}static create(e,t,s){const n=new i(t,s);return n._handleErrorResult=e,n}static ignore(e){if(!n(e,i))throw e}}e.UnhandledOrIgnoredErrorInEventException=i;e.ApplicationBackendUnavailableException=class extends c{constructor(e,t){super(e,t),this.name="ApplicationBackendUnavailableException"}};e.LicensingException=class extends c{constructor(e,t){super(e,t),this.name="LicensingException"}};e.IncompatibleProducerException=class extends c{constructor(e,t){super(e,t),this.name="IncompatibleProducerException"}};e.ControllerDisposedException=class extends o{constructor(e,t){super(e,t),this.name="ControllerDisposedException"}};e.AbortActivityChangeException=class extends t{constructor(e,t,s){super(e,t,s),this.name="AbortActivityChangeException"}};e.UserException=class extends t{constructor(e,t,s,n,r){super(t,s,n,r),this.specificType=e,this.name=e}}}(s=t.Exceptions||(t.Exceptions={})),t.isInstanceOf=n,t.getMessage=r,t.getStack=c,t.getExceptionInfo=function(e){var t,s,n;return{name:e.name,message:r(e),stack:c(e),extraStack:null!==(t=e.extraStack)&&void 0!==t?t:void 0,errorCode:null!==(s=e.errorCode)&&void 0!==s?s:"OS-CLRT-00000",category:null!==(n=e.category)&&void 0!==n?n:void 0}},t.getException=function(e){return e.name?e.specificType?new s[e.name](e.specificType,e.message,e.extraStack,e.errorCode,e.category):new s[e.name](e.message,e.extraStack,e.errorCode,e.category):new s.Exception(e.message,e.extraStack,e.errorCode,e.category)},t.isSystem=function(e){return n(e,s.SystemException)},t.isApplicationOffline=function(e){return n(e,s.LicensingException)}}));
define("OutSystems/ClientRuntime/Flow",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.whileTrueAsync=n.doWhileAsync=n.forEachAsync=n.whileAsync=n.executeAsyncFlow=n.tryFinally=n.tryCatch=n.tryCatchFinally=n.executeSequence=n.throwAsync=n.returnAsync=n.continueAsync=n.breakAsync=n.resolve=n.promise=n.isPromiseCompatible=void 0;class t{constructor(e){this.returnValue=e}}const r=new Object,c=new Object;function u(e){const n=e;return n&&"function"==typeof n.then&&"function"==typeof n.catch}function o(e,n){switch(n){case c:return e();case r:return;default:return Promise.reject(n)}}function i(e){return e()?Promise.resolve(void 0):s()}function s(){return Promise.reject(r)}function l(e){return function e(n,t){let r=void 0,c=void 0;const o=()=>{throw c},i=()=>{clearTimeout(t),t=window.setTimeout(o,0)};function s(n,u){return c?u?(clearTimeout(t),e(()=>u(c))):(i(),e(o,t)):e(n?()=>n(r):()=>r)}try{r=n()}catch(e){c=e,i()}if(u(r))return r;return{then:function(e,n){return s(e,n)},catch:function(e){return s(void 0,e)}}}(e)}function f(e,n=(e=>Promise.reject(e)),t=(()=>Promise.resolve(void 0))){return l(e).catch(n).then(e=>l(t).then(n=>null!=n?n:e),e=>l(t).then(()=>Promise.reject(e)))}function h(e,n){return function t(){return i(e).then(n).then(t,o.bind(null,t))}()}function y(e){return e instanceof t?e.returnValue:Promise.reject(e)}n.isPromiseCompatible=u,n.promise=function(e){return new Promise(e)},n.resolve=function(e){return Promise.resolve(e)},n.breakAsync=s,n.continueAsync=function(){return Promise.reject(c)},n.returnAsync=function(e){return Promise.reject(new t(e))},n.throwAsync=function(e){return Promise.reject(e)},n.executeSequence=l,n.tryCatchFinally=f,n.tryCatch=function(e,n){return f(e,n,void 0)},n.tryFinally=function(e,n){return f(e,void 0,n)},n.executeAsyncFlow=function(e=(()=>{})){return l(e).catch(y)},n.whileAsync=h,n.forEachAsync=function(e,n){let t=0;return h(()=>t<e.length,()=>{const r=e[t++];return n(r)})},n.doWhileAsync=function(e,n){function t(){return i(e).then(r,o.bind(null,r))}function r(){return l(n).then(()=>i(e)).then(r,o.bind(null,t))}return r()},n.whileTrueAsync=h.bind(null,()=>!0)}));
define("OutSystems/ClientRuntime/modules/Database/AutoNumber",["require","exports"],(function(e,t){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.No=0]="No",e[e.Yes=1]="Yes",e[e.YesIfEmpty=2]="YesIfEmpty"}(s||(s={})),t.default=s}));
define("OutSystems/ClientRuntime/modules/Database/DBDataType",["require","exports"],(function(E,e){"use strict";var T;Object.defineProperty(e,"__esModule",{value:!0}),function(E){E[E.TEXT=0]="TEXT",E[E.BINARY_DATA=1]="BINARY_DATA",E[E.BOOLEAN=2]="BOOLEAN",E[E.INTEGER=3]="INTEGER",E[E.LONGINTEGER=4]="LONGINTEGER",E[E.DECIMAL=5]="DECIMAL",E[E.DATE_TIME=6]="DATE_TIME",E[E.DATE=7]="DATE",E[E.TIME=8]="TIME",E[E.UNKNOWN=9]="UNKNOWN"}(T||(T={})),e.default=T}));
define("OutSystems/ClientRuntime/Interfaces",["require","exports","./modules/Database/AutoNumber","./modules/Database/DBDataType"],(function(e,t,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackMessage=t.Model=t.ClientDB=t.Application=void 0,function(e){let t;!function(e){e[e.Full=0]="Full",e[e.Minimal=1]="Minimal"}(t=e.InitializationType||(e.InitializationType={}))}(t.Application||(t.Application={})),function(e){e.AutoNumber=a.default,e.DBDataType=n.default}(t.ClientDB||(t.ClientDB={})),function(e){let t;!function(e){e[e.Fetching=0]="Fetching",e[e.Fetched=1]="Fetched",e[e.Error=2]="Error"}(t=e.DataFetchStatus||(e.DataFetchStatus={}))}(t.Model||(t.Model={})),function(e){let t;!function(e){e[e.Info=0]="Info",e[e.Success=1]="Success",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(t=e.FeedbackMessageType||(e.FeedbackMessageType={}))}(t.FeedbackMessage||(t.FeedbackMessage={}))}));
define("path-to-regexp",["exports"],(function(e){"use strict";function t(e,t){void 0===t&&(t={});for(var n=function(e){for(var t=[],n=0;n<e.length;){var r=e[n];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)t.push({type:"CHAR",index:n,value:e[n++]});else{var o=1,i="";if("?"===e[c=n+1])throw new TypeError('Pattern cannot start with "?" at '.concat(c));for(;c<e.length;)if("\\"!==e[c]){if(")"===e[c]){if(0===--o){c++;break}}else if("("===e[c]&&(o++,"?"!==e[c+1]))throw new TypeError("Capturing groups are not allowed at ".concat(c));i+=e[c++]}else i+=e[c++]+e[c++];if(o)throw new TypeError("Unbalanced pattern at ".concat(n));if(!i)throw new TypeError("Missing pattern at ".concat(n));t.push({type:"PATTERN",index:n,value:i}),n=c}else{for(var a="",c=n+1;c<e.length;){var f=e.charCodeAt(c);if(!(f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||95===f))break;a+=e[c++]}if(!a)throw new TypeError("Missing parameter name at ".concat(n));t.push({type:"NAME",index:n,value:a}),n=c}else t.push({type:"CLOSE",index:n,value:e[n++]});else t.push({type:"OPEN",index:n,value:e[n++]});else t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});else t.push({type:"MODIFIER",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}(e),r=t.prefixes,i=void 0===r?"./":r,a="[^".concat(o(t.delimiter||"/#?"),"]+?"),c=[],f=0,u=0,p="",s=function(e){if(u<n.length&&n[u].type===e)return n[u++].value},d=function(e){var t=s(e);if(void 0!==t)return t;var r=n[u],o=r.type,i=r.index;throw new TypeError("Unexpected ".concat(o," at ").concat(i,", expected ").concat(e))},v=function(){for(var e,t="";e=s("CHAR")||s("ESCAPED_CHAR");)t+=e;return t};u<n.length;){var l=s("CHAR"),h=s("NAME"),x=s("PATTERN");if(h||x){var m=l||"";-1===i.indexOf(m)&&(p+=m,m=""),p&&(c.push(p),p=""),c.push({name:h||f++,prefix:m,suffix:"",pattern:x||a,modifier:s("MODIFIER")||""})}else{var E=l||s("ESCAPED_CHAR");if(E)p+=E;else if(p&&(c.push(p),p=""),s("OPEN")){m=v();var g=s("NAME")||"",y=s("PATTERN")||"",w=v();d("CLOSE"),c.push({name:g||(y?f++:""),pattern:g&&!y?a:y,prefix:m,suffix:w,modifier:s("MODIFIER")||""})}else d("END")}}return c}function n(e,t){void 0===t&&(t={});var n=i(t),r=t.encode,o=void 0===r?function(e){return e}:r,a=t.validate,c=void 0===a||a,f=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:".concat(e.pattern,")$"),n)}));return function(t){for(var n="",r=0;r<e.length;r++){var i=e[r];if("string"!=typeof i){var a=t?t[i.name]:void 0,u="?"===i.modifier||"*"===i.modifier,p="*"===i.modifier||"+"===i.modifier;if(Array.isArray(a)){if(!p)throw new TypeError('Expected "'.concat(i.name,'" to not repeat, but got an array'));if(0===a.length){if(u)continue;throw new TypeError('Expected "'.concat(i.name,'" to not be empty'))}for(var s=0;s<a.length;s++){var d=o(a[s],i);if(c&&!f[r].test(d))throw new TypeError('Expected all "'.concat(i.name,'" to match "').concat(i.pattern,'", but got "').concat(d,'"'));n+=i.prefix+d+i.suffix}}else if("string"!=typeof a&&"number"!=typeof a){if(!u){var v=p?"an array":"a string";throw new TypeError('Expected "'.concat(i.name,'" to be ').concat(v))}}else{d=o(String(a),i);if(c&&!f[r].test(d))throw new TypeError('Expected "'.concat(i.name,'" to match "').concat(i.pattern,'", but got "').concat(d,'"'));n+=i.prefix+d+i.suffix}}else n+=i}return n}}function r(e,t,n){void 0===n&&(n={});var r=n.decode,o=void 0===r?function(e){return e}:r;return function(n){var r=e.exec(n);if(!r)return!1;for(var i=r[0],a=r.index,c=Object.create(null),f=function(e){if(void 0===r[e])return"continue";var n=t[e-1];"*"===n.modifier||"+"===n.modifier?c[n.name]=r[e].split(n.prefix+n.suffix).map((function(e){return o(e,n)})):c[n.name]=o(r[e],n)},u=1;u<r.length;u++)f(u);return{path:i,index:a,params:c}}}function o(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function i(e){return e&&e.sensitive?"":"i"}function a(e,t,n){void 0===n&&(n={});for(var r=n.strict,a=void 0!==r&&r,c=n.start,f=void 0===c||c,u=n.end,p=void 0===u||u,s=n.encode,d=void 0===s?function(e){return e}:s,v=n.delimiter,l=void 0===v?"/#?":v,h=n.endsWith,x="[".concat(o(void 0===h?"":h),"]|$"),m="[".concat(o(l),"]"),E=f?"^":"",g=0,y=e;g<y.length;g++){var w=y[g];if("string"==typeof w)E+=o(d(w));else{var T=o(d(w.prefix)),A=o(d(w.suffix));if(w.pattern)if(t&&t.push(w),T||A)if("+"===w.modifier||"*"===w.modifier){var R="*"===w.modifier?"?":"";E+="(?:".concat(T,"((?:").concat(w.pattern,")(?:").concat(A).concat(T,"(?:").concat(w.pattern,"))*)").concat(A,")").concat(R)}else E+="(?:".concat(T,"(").concat(w.pattern,")").concat(A,")").concat(w.modifier);else"+"===w.modifier||"*"===w.modifier?E+="((?:".concat(w.pattern,")").concat(w.modifier,")"):E+="(".concat(w.pattern,")").concat(w.modifier);else E+="(?:".concat(T).concat(A,")").concat(w.modifier)}}if(p)a||(E+="".concat(m,"?")),E+=n.endsWith?"(?=".concat(x,")"):"$";else{var C=e[e.length-1],b="string"==typeof C?m.indexOf(C[C.length-1])>-1:void 0===C;a||(E+="(?:".concat(m,"(?=").concat(x,"))?")),b||(E+="(?=".concat(m,"|").concat(x,")"))}return new RegExp(E,i(n))}function c(e,n,r){return e instanceof RegExp?function(e,t){if(!t)return e;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,o=n.exec(e.source);o;)t.push({name:o[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),o=n.exec(e.source);return e}(e,n):Array.isArray(e)?function(e,t,n){var r=e.map((function(e){return c(e,t,n).source}));return new RegExp("(?:".concat(r.join("|"),")"),i(n))}(e,n,r):function(e,n,r){return a(t(e,r),n,r)}(e,n,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.compile=function(e,r){return n(t(e,r),r)},e.match=function(e,t){var n=[];return r(c(e,n,t),n,t)},e.parse=t,e.pathToRegexp=c,e.regexpToFunction=r,e.tokensToFunction=n,e.tokensToRegexp=a}));
define("OutSystems/ClientRuntime/modules/Common/IndexedStack",["require","exports"],(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){this.stack=[],this.map={},this.counter=0}push(t){const e=this.counter++;return this.stack.push(e),this.map[e]=t,e}remove(t){const e=this.stack.indexOf(t),s=e>-1;return s&&(this.stack.splice(e,1),delete this.map[t]),s}pop(){if(0===this.stack.length)throw new Error("IndexedStack: pop from empty stack.");const t=this.stack.pop(),e=this.map[t];return delete this.map[t],e}clear(){this.stack=[],this.map={}}get isEmpty(){return 0===this.stack.length}}}));
define("OutSystems/ClientRuntime/modules/Native/IOutSystemsNativeHost",["require","exports"],(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isIOutSystemsNativeHost=void 0,e.isIOutSystemsNativeHost=function(t){return!!(null==t?void 0:t.OutSystemsNative)}}));
define("OutSystems/ClientRuntime/modules/Injector/Injector",["require","exports","../../Logger"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=t.removeRegistrationListener=t.addRegistrationListener=t.unregister=t.register=void 0;const i={},n={};function s(e,t){try{r.debug("Injector",`Registering ${e} service`);const s=t();return i[e]=s,e in n&&n[e].forEach(t=>t(e,s)),!0}catch(t){return r.warning("Injector",`Failed to initialize ${e} service: ${t}`),!1}}function o(e){delete i[e]}function u(e,t){e in n?n[e].push(t):n[e]=[t]}function c(e,t){e in n&&(n[e]=n[e].filter(e=>e!==t))}function g(e){return i[e]}t.register=s,t.unregister=o,t.addRegistrationListener=u,t.removeRegistrationListener=c,t.resolve=g;const a={register:s,unregister:o,resolve:g,addRegistrationListener:u,removeRegistrationListener:c};t.default=a}));
define("OutSystems/ClientRuntime/modules/Injector/KnownServices",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceNames=void 0,function(e){e.DeviceHelperClassProvider="DeviceHelperClassProvider",e.ClientVariablesService="ClientVariablesService",e.TranslationsService="TranslationsService",e.LocaleService="LocaleService",e.EntityService="EntityService",e.GlobalExceptionHandler="GlobalExceptionHandler",e.SettingsManager="SettingsManager",e.AuthConfigsManager="AuthConfigsManager",e.Auth="Auth",e.HttpClient="HttpClient",e.UnauthenticatedHttpClient="UnauthenticatedHttpClient",e.DebuggerHttpClient="DebuggerHttpClient",e.NonDebuggerHttpClient="NonDebuggerHttpClient",e.NativeStatus="NativeStatus",e.LifecycleEventsManager="LifecycleEventsManager",e.Debugger="Debugger",e.InstrumentationFactory="InstrumentationFactory"}(t.ServiceNames||(t.ServiceNames={}))}));
define("OutSystems/ClientRuntime/modules/Native/NativeStatus",["require","exports","tslib","@outsystems/logger-js","../../Logger","./NativeHelper"],(function(e,i,t,a,d,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default=class{constructor({win:e=window,isRunningOnNativeFn:i=n.isRunningOnNative,deviceReadyPromise:t=n.whenDeviceReady}={}){this.cachedReadyValue=null,this.win=e,this.isRunningOnNativeFn=i,this.deviceReadyPromise=t}raiseCordovaNotLoadedError(){const e="Running on native but cordova wasn't loaded";throw d.error("NativeStatus",e,"OS-CLRT-00000",void 0,a.Visibility.External),new Error(e)}ensureIsReady(){return t.__awaiter(this,void 0,void 0,(function*(){return null===this.cachedReadyValue?(d.debug("NativeStatus","Waiting for 'deviceready' event"),this.isRunningOnNativeFn()?void 0===this.win.cordova?(this.cachedReadyValue=!1,this.raiseCordovaNotLoadedError()):(yield this.deviceReadyPromise(),this.cachedReadyValue=!0,!0):(d.debug("NativeStatus","'deviceready' event wait ignored"),this.cachedReadyValue=!0,!0)):!!this.cachedReadyValue||this.raiseCordovaNotLoadedError()}))}}}));
define("OutSystems/ClientRuntime/modules/Native/NativeHelper",["require","exports","tslib","../Injector/Injector","../Injector/KnownServices","./NativeStatus"],(function(e,i,t,n,a,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getNativeOTLogger=i.exitApp=i.addNativeEventListener=i.ensureNativeReady=i.whenDeviceReady=i.isIOS=i.isAndroid=i.getPlatformName=i.isRunningOnNative=void 0;const d="Android",o="iOS";i.isRunningOnNative=(e=navigator)=>false;i.getPlatformName=(e=window)=>{var i;return null===(i=null==e?void 0:e.device)||void 0===i?void 0:i.platform};const v=(e,t=i.isRunningOnNative,n=window)=>t()&&(0,i.getPlatformName)(n)===e;i.isAndroid=(e=i.isRunningOnNative,t=window)=>v(d,e,t);i.isIOS=(e=i.isRunningOnNative,t=window)=>v(o,e,t);const s=(e,i,t=document)=>!!(null==t?void 0:t.addEventListener)&&(t.addEventListener(e,i),!0);i.whenDeviceReady=(e=document)=>new Promise((i,t)=>{s("deviceready",()=>i(),e)||i()});i.ensureNativeReady=()=>{let e=n.default.resolve(a.ServiceNames.NativeStatus);return e||(n.default.register(a.ServiceNames.NativeStatus,()=>new r.default),e=n.default.resolve(a.ServiceNames.NativeStatus)),e.ensureIsReady()};i.addNativeEventListener=(e,n,a=i.ensureNativeReady,r=s)=>t.__awaiter(void 0,void 0,void 0,(function*(){yield a(),r(e,n)}));i.exitApp=(e=i.isAndroid,t=navigator)=>!!e()&&(t.app.exitApp(),!0);i.getNativeOTLogger=(e=i.ensureNativeReady,n=u)=>t.__awaiter(void 0,void 0,void 0,(function*(){var i,t;try{yield e();const a=n();return null!==(t=null===(i=null==a?void 0:a.OutSystemsNative)||void 0===i?void 0:i.OTLogger)&&void 0!==t?t:null}catch(e){return console.error("Native is not ready",e),null}}));const u=()=>window}));
define("OutSystems/ClientRuntime/modules/Native/NativeAuth",["require","exports","tslib","./../../Logger","./IOutSystemsNativeHost","./NativeHelper"],(function(t,e,i,r,a,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.startExternalAuthFlow=void 0;e.startExternalAuthFlow=({url:t,redirectUri:e,w:u,awaitNative:n})=>i.__awaiter(void 0,void 0,void 0,(function*(){var s;const l=yield(({w:t=window,awaitNative:e=o.ensureNativeReady})=>i.__awaiter(void 0,void 0,void 0,(function*(){if(yield e(),(0,a.isIOutSystemsNativeHost)(t)&&t.OutSystemsNative.Auth)return t.OutSystemsNative.Auth;throw new Error("Could not find the OSAuth plugin.")})))({w:u,awaitNative:n});try{return yield l.startFlow(t,e)}catch(t){throw r.error("NativeAuthPlugin",null!==(s=t.message)&&void 0!==s?s:"Error starting the external auth flow","OS-CLRT-40100",t instanceof Error?t:void 0),new Error("Error starting the external auth flow")}}))}));
define("OutSystems/ClientRuntime/RegExpHelper",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escape=t.replace=t.matches=t.Match=void 0;class n{constructor(e,t){this._groups=e,this._index=t-this._groups[0].length}get value(){return this._groups[0]}get index(){return this._index}get length(){return this._groups[0].length}get groups(){return this._groups}}function r(e,t,r=!1){const s=[],u=new RegExp(t,"g"+(r?"i":""));let i=u.exec(e);for(;i;)s.push(new n(i,u.lastIndex)),i=u.exec(e);return s}t.Match=n,t.matches=r,t.replace=function(e,t,n=!1,s){const u=r(e,t,n);let i=e,c=0;for(let e=0;e<u.length;e++){const t=u[e],n=s(t);i=i.substr(0,t.index+c)+n+i.substr(c+t.index+t.length),c+=n.length-t.length}return i},t.escape=function(e){return e?e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):e}}));
define("OutSystems/ClientRuntime/Navigation",["require","exports","tslib","@outsystems/logger-js","path-to-regexp","./ApplicationInfo","./Exceptions","./Flow","./Logger","./modules/Auth/Authentication","./modules/Common/IndexedStack","./modules/Native/NativeAuth","./modules/Native/NativeHelper","./RegExpHelper"],(function(e,t,n,o,r,a,i,c,l,s,u,d,g,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VersionedURL=t.buildApplicationRelativeUrl=t.generateScreenURL=t.locationReachedFromHistory=t.ensureRequestSecurity=t.switchUrlProtocol=t.navigateForward=t.navigateBack=t.navigateTo=t.urlBelongsToPrefix=t.onBeforeNavigate=t.getUrlInfo=t.unregisterBackNavigationHandler=t.registerBackNavigationHandler=t.reloadCurrentLocation=t.reloadApplication=t.addInvalidationSuffixToUrl=t.currentLocationHasTimestamp=t.changeWindowLocation=t.hasPendingReload=t.getLocationFromUrl=t.urlBelongsToCurrentApplication=t.getSearchParameterValue=t.getCurrentLocation=t.resetReloadState=t.willReloadInNextNavigation=t.forceReloadOnNextNavigation=t.removeNavigationCallbacks=t.getNavigationCallbacks=t.setNavigationCallbacks=t.throwRedirectOccurredExceptionIfNeeded=t.isValidContext=t.validateContext=t.SCREEN_URL_PART_SEPARATOR=t.NAVIGATE_FROM_HISTORY_ACTION=t.NAVIGATE_TO_URL_ACTION=void 0;const f=new RegExp("/([^/]*)"),h=new RegExp(/\/(\/)+/gm),m=["localhost","10.0.2.2"];t.NAVIGATE_TO_URL_ACTION="PUSH",t.NAVIGATE_FROM_HISTORY_ACTION="POP",t.SCREEN_URL_PART_SEPARATOR="-";const w=[],v=[],R=new u.default;function N(e){if(!x(e))throw new i.Exceptions.OutOfContextException}function x(e){return!e||!e.isOutOfContext}function C(e){if(e)throw new i.Exceptions.RedirectOccurredException}function O(){return v[v.length-1]}t.validateContext=N,t.isValidContext=x,t.throwRedirectOccurredExceptionIfNeeded=C,t.setNavigationCallbacks=function(e){v.push(e)},t.getNavigationCallbacks=O,t.removeNavigationCallbacks=function(){return v.pop()};let E=!1,L=!1;t.forceReloadOnNextNavigation=function(e=!1){l.debug("Navigation","Next navigation will force a reload..."),E=!0,L=e},t.willReloadInNextNavigation=function(){return E},t.resetReloadState=function(e=!1,t=!1){E=e,L=t};t.getCurrentLocation=()=>{const{protocol:e,pathname:t,href:n,search:o}=window.location;return{protocol:e,pathname:t,href:n,search:o,hostname:window.location.hostname||window.location.host.split(":")[0]}};t.getSearchParameterValue=e=>{if(void 0===e)return null;return I(window.location.search.substr(1))[e]};t.urlBelongsToCurrentApplication=(e,{getLocation:n=t.getCurrentLocation,getBasePath:o=a.getBasePath}={})=>{if(!("http:"===e.protocol||"https:"===e.protocol||"outsystems:"===e.protocol))return!1;const r=n().hostname;if(r!==(""!==e.hostname?e.hostname:r))return!1;const i=f.exec(e.pathname);if(!i||i.length<2)return!1;return new RegExp("^"+(0,p.escape)(o()),"i").test(e.pathname+"/")};t.getLocationFromUrl=function(e){const t=document.createElement("a");return t.href=e,t};let T=!1;t.hasPendingReload=function(){return T};function A(e){const t=`${e.indexOf("?")<0?"?":"&"}_ts=${(new Date).valueOf()}`,n=e.indexOf("#");return n>=0?[e.slice(0,n),t,e.slice(n)].join(""):`${e}${t}`}t.changeWindowLocation=function(e,t=!1,n=!1){t&&(e=A(e)),l.debug("Navigation",`Reloading application with url: '${e}' (replace = ${n})`);const o=()=>{n?window.location.replace(e):window.location.href=e};T=!0,l.flush().then(o).catch(o)},t.currentLocationHasTimestamp=function(){return"undefined"!=typeof window&&window.location.search.indexOf("_ts")>=0},t.addInvalidationSuffixToUrl=A,t.reloadApplication=function(e=!1){const n=S();(0,t.changeWindowLocation)(n,e)},t.reloadCurrentLocation=function(e=!1){(0,t.changeWindowLocation)((0,t.getCurrentLocation)().href,e,!0)},t.registerBackNavigationHandler=function(e){return R.push(e)},t.unregisterBackNavigationHandler=function(e){R.remove(e)};function I(e){const t={};return e.length>0&&e.split("&").forEach(e=>{const n=e.split("=");if(2===n.length){const e=U(n[0]),o=U(n[1]);t[e]=o}}),t}function U(e){return decodeURIComponent(e.replace(/\+/g," "))}function y(e,t,n){return t.replace(/\/$/,"")===e||n.screens.some(n=>{const o=S(t,n.screenUrl);return r.pathToRegexp(o).test(e)})}function $(){a.isWebApplication()&&window.stop&&"complete"===document.readyState&&(l.debug("Navigation","Stopping all currently pending resources."),window.stop())}function b(e,t,n){return n+e.substring(t.length)}function _(e){return e.action.toUpperCase()===t.NAVIGATE_FROM_HISTORY_ACTION}function P(e){return""===e||null==e}function S(...e){return(0===e.length?a.getBasePath():"/"+e.join("/")).replace(h,"/")}t.getUrlInfo=function(e){let n,o=!1,r="",i=e;const c=-1!==e.indexOf(":")||0===e.indexOf("/"),l=i.indexOf("#");-1!==l&&(n=i.substr(l+1).trim(),i=i.substr(0,l));const s=i.indexOf("?");if(-1!==s&&(r=i.substr(s+1).trim(),i=i.substr(0,s)),c){const e=(0,t.getLocationFromUrl)(i);o=(0,t.urlBelongsToCurrentApplication)(e),o&&(i=e.pathname)}else i=function(e){return S(a.getBasePath(),e)}(i),o=!0;return{url:e,isInternal:o,path:i,queryParams:I(r),hash:n}},t.onBeforeNavigate=function(e,n){const o=E;if(E&&(E=!1),n&&!R.isEmpty){const e=R.pop();return c.tryCatch(e,e=>{l.error(a.getHomeModuleName(),"Error while navigating back without an empty stack","OS-CLRT-00000",e)}),!1}const r=_(e);if(r||o){const n=(0,t.getUrlInfo)(e.pathname),i=a.getModules(),c=a.getBasePath();let l;if(n.isInternal){l=!0;for(const e in i)if(i.hasOwnProperty(e)){const t=n.url.replace(/\/$/,""),o=i[e];if(y(t,S(c),o)||o.moduleName!==a.getHomeModuleName()&&o.moduleName&&y(t,o.moduleName,o)){l=!1;break}}}else l=!1;if(o||l){let n;if(l)n=S();else{const t=e.search||"";n=c===e.pathname&&""===t?/\/$/.test(e.pathname)?e.pathname:e.pathname+"/":e.pathname+t}return(0,t.changeWindowLocation)(n,L,r),!l}}return R.clear(),!0},t.urlBelongsToPrefix=y,t.navigateTo=function(e,r,i=null,c,u){if(N(i),function(e){const t=(new Date).getTime(),n=t-1e3;for(;w.length>0&&w[0].timestamp<n;)w.shift();return w.reduce((function(t,n){return n.url===e?t+1:t}),0)<10?(w.push({timestamp:t,url:e}),!1):(l.log("Navigation",`Identified a recursive navigation to '${e}'.`,o.Visibility.Internal),!0)}(e))throw Error("Too many redirects.");c||$();const p=(0,t.getUrlInfo)(e);if(v&&O().goTo&&p.isInternal)O().goTo(p,r,u);else{if((0,g.isRunningOnNative)()&&(0,s.isAuthEndpoint)({url:e}))return function(e){var o,r,i;return n.__awaiter(this,void 0,void 0,(function*(){const n=null!==(o=e.queryParams.redirect_uri)&&void 0!==o?o:e.queryParams.post_logout_redirect_uri;if(!n)throw new Error("Can't perform an external login without a redirect URI");const c=yield(0,d.startExternalAuthFlow)({url:e.url,redirectUri:n}),[l]=n.split("?"),s=a.getBasePath(),u=null!==(i=null===(r=l.match(new RegExp(s+".*")))||void 0===r?void 0:r[0])&&void 0!==i?i:"";(0,t.changeWindowLocation)(c?`${u}?${c}`:u)}))}(p);(0,t.changeWindowLocation)(e)}C(c)},t.navigateBack=function(e,t,n){N(t),n||$(),v&&O().goBack?O().goBack(e):window.history.back(),C(n)},t.navigateForward=function(e,t,n){N(t),n||$(),v&&O().goForward?O().goForward(e):window.history.forward(),C(n)},t.switchUrlProtocol=b,t.ensureRequestSecurity=function(){const e=(0,t.getCurrentLocation)();if("http:"===e.protocol.toLocaleLowerCase()){const n=e.hostname.toLocaleLowerCase();if(!m.includes(n)){const n=b(e.href,e.protocol,"https:");return(0,t.changeWindowLocation)(n,!1,!0),!0}console.warn("Navigation",`Accessing through http://${n} is not supported. Please access the application using the hostname instead.`)}return!1},t.locationReachedFromHistory=_,t.generateScreenURL=function(e,t,n){let i,c=e,s=e;return"string"==typeof t?(s=t,i=function(e,t,n){const i=function(e,t){const n=r.parse(t);return Object.keys(e).filter(e=>!n.some(t=>"string"!=typeof t&&t.name===e)).reduce((t,n)=>(t[n]=e[n],t),{})}(null!=n?n:{},t),c=(s=null!=n?n:{},u=i,Object.keys(s).filter(e=>""!==s[e]&&!(e in u)).reduce((e,t)=>(e[t]=s[t],e),{}));var s,u;return function(e,t){const n=r.parse(t).filter(e=>"string"!=typeof e&&"?"===e.modifier).map(t=>{var n;return{name:t.name,value:null!==(n=e[t.name])&&void 0!==n?n:""}});let o,a=!1;n.forEach(e=>{if(a&&!P(e.value))throw new Error(`Error processing optional parameters on path ${t}. The parameter ${o.name} has an empty value while ${e.name} has a non-empty value. All optional parameters before ${e.name} must have a value when ${e.name} has a value.`);P(e.value)&&(o=e,a=!0)})}(c,t),function(e,t,n,i){const c=Object.keys(i).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(i[e])}`).join("&");try{const o=r.compile(t,{encode:e=>encodeURIComponent(e)}),i=`${o(n)}${c.length>0?"?"+c:""}`;return function(e,t){const n=a.getBasePath(),o=t.replace(/^\//,""),r=a.getHomeModuleName();return e===r?`${n}${o}`:`/${e}/${o}`}(e,i)}catch(n){const r=new RegExp('^Expected "(.*)" to be a string$',"g").exec(n.message);if(r){const a=r[1],i=`Error building URL for ${t}. Parameter ${a} is missing or has an empty value`;return void l.error(e,i,"OS-CLRT-00000",n instanceof Error?n:void 0,o.Visibility.External)}throw n}}(e,t,c,i)}(c,s,n)):(c="",i=function(e,t){const n=Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&");return`${e}${n.length>0?"?"+n:""}`}(s,n=t)),i},t.buildApplicationRelativeUrl=S,function(e){let t=e=>e;e.setUrlVersionProvider=function(e){t=e},e.getVersionedUrl=function(e){return t(e)}}(t.VersionedURL||(t.VersionedURL={}))}));
define("OutSystems/ClientRuntime/modules/Common/UrlUtils",["require","exports","../../RegExpHelper"],(function(e,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sanitizeUrl=r.getHttpScheme=r.getCurrentUrl=r.buildURLFromVersionedResource=r.replaceBasePath=void 0;r.replaceBasePath=(e,r,l)=>{if(r.toLowerCase()===l.toLowerCase())return e;const t=new RegExp("^"+(0,o.escape)(r),"i");return e.replace(t,l)};r.buildURLFromVersionedResource=(e,r)=>`${e}${r}`;r.getCurrentUrl=(e=window)=>{var r,o;return null!==(o=null===(r=null==e?void 0:e.location)||void 0===r?void 0:r.href)&&void 0!==o?o:""};r.getHttpScheme=(e=window)=>{var r,o,l;return null!==(l=null===(o=null===(r=null==e?void 0:e.location)||void 0===r?void 0:r.protocol)||void 0===o?void 0:o.replace(/:/g,""))&&void 0!==l?l:""};r.sanitizeUrl=e=>e.replace(/([^:]\/)\/+/g,"$1")}));
define("OutSystems/ClientRuntime/modules/Native/NativeApplicationInfo",["require","exports","tslib","./NativeHelper"],(function(e,i,t,n){"use strict";function r(){var e;const i=window;if(null===(e=null==i?void 0:i.OutSystemsNative)||void 0===e?void 0:e.ApplicationInfo)return i.OutSystemsNative.ApplicationInfo}Object.defineProperty(i,"__esModule",{value:!0}),i.getAppPackageIdentifier=i.isVersionGreaterOrEqualTo=i.getAppVersionNumber=i.getAppVersion=i.getNativeShellVersion=i.getPlatformVersion=void 0,i.getPlatformVersion=function(){return t.__awaiter(this,void 0,void 0,(function*(){return yield(0,n.ensureNativeReady)(),new Promise((e,i)=>{const t=r();if(!t)return i(new Error("NativeAppInfo API is not available"));t.getPlatformVersion(e,i)})}))},i.getNativeShellVersion=function(){return t.__awaiter(this,void 0,void 0,(function*(){return yield(0,n.ensureNativeReady)(),new Promise((e,i)=>{const t=r();if(!t)return i(new Error("NativeAppInfo API is not available"));t.getNativeShellVersion(e,i)})}))},i.getAppVersion=function(){return t.__awaiter(this,void 0,void 0,(function*(){return yield(0,n.ensureNativeReady)(),new Promise((e,i)=>{const t=r();if(!t)return i(new Error("NativeAppInfo API is not available"));t.getAppVersion(e,i)})}))},i.getAppVersionNumber=function(){return t.__awaiter(this,void 0,void 0,(function*(){return yield(0,n.ensureNativeReady)(),new Promise((e,i)=>{const t=r();if(!t)return i(new Error("NativeAppInfo API is not available"));t.getAppVersionNumber(e,i)})}))},i.isVersionGreaterOrEqualTo=function(e,i){return!(!e||!i)&&function e(i,t,n){return!!isNaN(t[n])||((i[n]||0)>(t[n]||0)||!(i[n]<(t[n]||0))&&e(i,t,n+1))}(e.split(".").map(e=>parseInt(e,10)),i.split(".").map(e=>parseInt(e,10)),0)};i.getAppPackageIdentifier=({nativeReady:e=n.ensureNativeReady,nativeApplicationInfo:i=r}={})=>t.__awaiter(void 0,void 0,void 0,(function*(){return yield e(),new Promise((e,t)=>{const n=i();return n?n.getAppPackageIdentifier(e,t):t(new Error("NativeAppInfo API is not available"))})}))}));
define("OutSystems/ClientRuntime/modules/Auth/Authentication",["require","exports","tslib","@outsystems/auth-js","@outsystems/logger-js","../../ApplicationInfo","../../Exceptions","../../Logger","../../Navigation","../Common/UrlUtils","../Injector/Injector","../Injector/KnownServices","../Native/NativeApplicationInfo","../Native/NativeHelper"],(function(e,t,r,i,o,n,a,s,l,u,d,c,v,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAuthEndpoint=t.getUserProfile=t.updateUser=t.changePassword=t.sendResetPasswordEmail=t.finishUserRegistration=t.isExternalUser=t.finishResetPassword=t.resetPassword=t.validatePasswordComplexity=t.getPasswordComplexityPolicy=t.isAuthenticated=t.getUserId=t.refreshTokens=t.resumeLogout=t.getExternalLogoutUrl=t.logout=t.resumeLogin=t.builtinLogin=t.externalLogin=t.getExternalLoginUrl=t.LOGOUT_REDIRECT_PATH=t.LOGIN_REDIRECT_PATH=void 0;t.LOGIN_REDIRECT_PATH="_RedirectLogin",t.LOGOUT_REDIRECT_PATH="_RedirectLogout";const g=({path:e,params:t={isRunningOnNative:h.isRunningOnNative,getAppUrl:n.getAppUrl,getHost:()=>{var e;return null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.host},getPlatform:()=>(0,h.getPlatformName)(),getPackageId:()=>r.__awaiter(void 0,void 0,void 0,(function*(){return(yield(0,v.getAppPackageIdentifier)()).toLowerCase()})),getBasePath:n.getBasePath}})=>r.__awaiter(void 0,void 0,void 0,(function*(){var r,i,o,n,a;if(t.isRunningOnNative()){const a=yield null===(r=t.getPackageId)||void 0===r?void 0:r.call(t),s=null===(i=t.getHost)||void 0===i?void 0:i.call(t),l=null===(o=t.getPlatform)||void 0===o?void 0:o.call(t),d=null===(n=t.getBasePath)||void 0===n?void 0:n.call(t);if(!a)throw new Error("Could not get the package id");if(!s)throw new Error("Could not get host name");if(!l)throw new Error("Could not get the platform");if(!d)throw new Error("Could not get the base path");return(0,u.sanitizeUrl)(`${a}://${s}/${l}/${d}/${e}`)}{const r=null===(a=t.getAppUrl)||void 0===a?void 0:a.call(t);if(!r)throw new Error("Could not get the application url");return(0,u.sanitizeUrl)(`${r}/${e}`)}})),w=e=>r.__awaiter(void 0,void 0,void 0,(function*(){return g({path:t.LOGIN_REDIRECT_PATH,params:e})})),f=e=>r.__awaiter(void 0,void 0,void 0,(function*(){return g({path:t.LOGOUT_REDIRECT_PATH,params:e})}));t.getExternalLoginUrl=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,{callbackUrl:r="",redirectUrlParams:o,redirectUri:n=w(o),authConfigs:a,auth:l=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance(i.AuthType.External,a)),actionName:u="getExternalLoginUrl"}=void 0===e?{}:e;try{if(s.debug("Authentication","Retrieving the external login url."),!l)throw m(u);const e=p(u,l),t=yield n;return e.getLoginUrl({redirectUri:t,callbackUrl:r})}catch(e){throw s.error("Authentication","Error retrieving the external login url.","OS-CLRT-40100",e),e}}));t.externalLogin=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,{callbackUrl:r="",redirectUrlParams:o,redirectUri:n=w(o),auth:u=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance(i.AuthType.External)),actionName:v="externalLogin"}=void 0===e?{}:e;try{if(s.debug("Authentication","External login flow started."),!u)throw m(v);const e=p(v,u),t=yield n;yield e.login({redirectUri:t,callbackUrl:r,navigationHandler:l.navigateTo})}catch(e){throw s.error("Authentication","Error in the external login flow.","OS-CLRT-40100",e),new a.Exceptions.InvalidLoginException("Login Failed",(0,a.getStack)(e))}}));t.builtinLogin=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,r,{username:o,password:n,persistLogin:a,auth:l=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance(i.AuthType.Builtin)),actionName:u="builtinLogin"}=e;try{if(s.debug("Authentication","Builtin login flow started."),!l)throw m(u);return yield A(u,l).login({username:o,password:n,persistLogin:a})}catch(e){throw s.error("Authentication","Error in the builtin login flow.",null!==(r=e.errorCode)&&void 0!==r?r:"OS-CLRT-40100",e),e}}));t.resumeLogin=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,{url:r,redirectUrlParams:o,redirectUri:n=w(o),auth:l=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance(i.AuthType.External)),actionName:u="resumeLogin"}=e;try{if(s.debug("Authentication","Login flow resumed."),!l)throw m(u);const e=yield n;return yield p(u,l).resumeLogin({url:r,redirectUri:e})}catch(e){throw s.error("Authentication","Error while resuming login.","OS-CLRT-40100",e),new a.Exceptions.InvalidLoginException("Login Failed",(0,a.getStack)(e))}}));t.logout=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,{callbackUrl:r="",redirectUrlParams:i,redirectUri:o=f(i),auth:n=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance()),actionName:a="logout"}=void 0===e?{}:e;try{if(s.debug("Authentication","Logout flow started."),!n)throw m(a);const e=yield o;yield A(a,n,"Use GetExternalLogoutURL instead.").logout({redirectUri:e})}catch(e){throw s.error("Authentication","Error in the logout flow.","OS-CLRT-40100",e),e}}));t.getExternalLogoutUrl=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,{callbackUrl:r="",redirectUrlParams:o,redirectUri:n=f(o),auth:a=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance(i.AuthType.External)),actionName:l="getExternalLogoutUrl"}=void 0===e?{}:e;try{if(s.debug("Authentication","Retrieving the external logout url."),!a)throw m(l);const e=yield n;return yield p(l,a).getLogoutUrl({redirectUri:e,callbackUrl:r})}catch(e){throw s.error("Authentication","Error retrieving the external logout url.","OS-CLRT-40100",e),e}}));t.resumeLogout=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,{url:r,auth:o=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance(i.AuthType.External)),actionName:n="resumeLogout"}=e;try{if(s.debug("Authentication","Logout flow resumed."),!o)throw m("resumeLogout");return yield p(n,o).resumeLogout({url:r})}catch(e){throw s.error("Authentication","Error while resuming logout.","OS-CLRT-40100",e),new a.Exceptions.InvalidLoginException("Logout Failed",(0,a.getStack)(e))}}));t.refreshTokens=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,{auth:r=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance())}=void 0===e?{}:e;try{if(s.debug("Authentication","Refresh flow started."),!r)throw m("refreshTokens");yield r.refreshTokens()}catch(e){throw s.error("Authentication","Error in the refresh flow.","OS-CLRT-40103",e),e}}));t.getUserId=e=>{var t,r,{auth:i=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance())}=void 0===e?{}:e;return null!==(r=null==i?void 0:i.getUserId())&&void 0!==r?r:""};t.isAuthenticated=e=>{var t,r,{auth:i=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance())}=void 0===e?{}:e;return null!==(r=null==i?void 0:i.isAuthenticated())&&void 0!==r&&r};t.getPasswordComplexityPolicy=e=>{var t,{auth:r=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance(i.AuthType.Builtin)),actionName:o="getPasswordComplexityPolicy"}=void 0===e?{}:e;try{if(!r)throw m(o);return A(o,r).getPasswordComplexityPolicy()}catch(e){throw s.error("Authentication","Error getting the password complexity policy","OS-CLRT-40100",e),e}};t.validatePasswordComplexity=e=>{var t,{password:r,auth:o=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance(i.AuthType.Builtin)),actionName:n="validatePasswordComplexity"}=e;try{if(!o)throw m("validatePasswordComplexity");return A(n,o).validatePasswordComplexityPolicy(r)}catch(e){throw s.error("Authentication","Error validating the password complexity","OS-CLRT-40100",e),e}};t.resetPassword=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,{username:r,resetToken:o,newPassword:n,auth:a=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance(i.AuthType.Builtin)),actionName:l="resetPassword"}=e;try{if(!a)throw m(l);return yield A(l,a).resetPassword({username:r,resetToken:o,newPassword:n})}catch(e){throw s.error("Authentication","Error resetting password","OS-CLRT-40100",e),e}}));t.finishResetPassword=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,{username:r,resetToken:o,newPassword:n,auth:a=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance(i.AuthType.Builtin)),actionName:l="finishResetPassword"}=e;try{if(!a)throw m(l);return yield A(l,a).finishResetPassword({username:r,resetToken:o,newPassword:n})}catch(e){throw s.error("Authentication","Error finishing reset password","OS-CLRT-40100",e),e}}));t.isExternalUser=e=>{var t,{auth:r=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance()),actionName:i="isExternalUser"}=void 0===e?{}:e;try{if(!r)throw m(i);return r.isExternalUser()}catch(e){throw s.error("Authentication","Error determining if user is external","OS-CLRT-40100",e),e}};t.finishUserRegistration=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,{username:r,password:o,temporaryPassword:n,auth:a=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance(i.AuthType.Builtin)),actionName:l="finishUserRegistration"}=e;try{if(!a)throw m(l);return yield A(l,a).confirmRegistration({username:r,password:o,code:n})}catch(e){throw s.error("Authentication","Error completing user registration","OS-CLRT-40100",e),e}}));t.sendResetPasswordEmail=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,{username:r,auth:o=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance(i.AuthType.Builtin)),actionName:n="sendResetPasswordEmail"}=e;try{if(!o)throw m(n);return yield A(n,o).sendResetPasswordEmail({username:r})}catch(e){throw s.error("Authentication","Error sending reset password email","OS-CLRT-40100",e),e}}));t.changePassword=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,{username:r,oldPassword:o,newPassword:n,auth:a=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance(i.AuthType.Builtin)),actionName:l="changePassword"}=e;try{if(!a)throw m("changePassword");return yield A(l,a).changePassword({username:r,oldPassword:o,newPassword:n})}catch(e){throw s.error("Authentication","Error changing password","OS-CLRT-40100",e),e}}));t.updateUser=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,{username:r,name:o,pictureUrl:n,auth:a=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance(i.AuthType.Builtin)),actionName:l="updateUser"}=e;try{if(!a)throw m(l);return yield A(l,a).updateUser({username:r,name:o,pictureUrl:n})}catch(e){throw s.error("Authentication","Error updating user","OS-CLRT-40100",e),e}}));t.getUserProfile=e=>r.__awaiter(void 0,void 0,void 0,(function*(){var t,{auth:r=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance()),actionName:i="getUserProfile"}=void 0===e?{}:e;try{if(!r)throw m(i);return yield r.getUserInfo()}catch(e){throw s.error("Authentication","Error getting user profile","OS-CLRT-40100",e),e}}));t.isAuthEndpoint=e=>{var t,r,{url:i,auth:o=(null===(t=d.default.resolve(c.ServiceNames.Auth))||void 0===t?void 0:t.getInstance()),actionName:n="isAuthEndpoint"}=e;try{return null!==(r=null==o?void 0:o.isAuthEndpoint(i))&&void 0!==r&&r}catch(e){throw s.error("Authentication","Error checking if a url corresponds to an auth endpoint","OS-CLRT-40100",e),e}};const m=e=>{const t=`Error '${e}': User is not authenticated.`,r=new Error(t);return s.error("Authentication",t,"OS-CLRT-40100",r,o.Visibility.External),r},p=(e,t,r)=>{if(!(e=>void 0!==e.resumeLogin)(t)){const t=`Error '${e}': only supported for external authentication. ${r}`,i=new Error(t);throw s.error("Authentication",t,"OS-CLRT-40100",i,o.Visibility.External),i}return t},A=(e,t,r)=>{if(!(e=>void 0!==e.finishResetPassword)(t)){const t=`Error '${e}': only supported for builtin authentication. ${r}`,i=new Error(t);throw s.error("Authentication",t,"OS-CLRT-40100",i,o.Visibility.External),i}return t}}));
define("OutSystems/ClientRuntime/modules/Common/BrowserUtils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalObject=t.getUserAgent=t.isSafari=t.windowInsideIframe=void 0,t.windowInsideIframe=function(e){try{return e.self!==e.top}catch(e){return!0}},t.isSafari=function(e){return/^((?!chrome|android).)*safari/i.test(e)};t.getUserAgent=(e=navigator)=>{var t;return null!==(t=null==e?void 0:e.userAgent)&&void 0!==t?t:""};t.getGlobalObject=(e=window,t=globalThis)=>null!=e?e:t}));
define("OutSystems/ClientRuntime/modules/Communication/NetworkStatus",["require","exports","../Common/BrowserUtils"],(function(n,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addOnOfflineEventListener=e.addOnOnlineEventListener=e.isOnline=void 0,e.isOnline=function(n=i.getGlobalObject){var e;const t=n();return(null==t?void 0:t.cordova)&&(null===(e=null==t?void 0:t.navigator)||void 0===e?void 0:e.connection)?"none"!==t.navigator.connection.type:t.navigator.onLine},e.addOnOnlineEventListener=function(n,e=window){e.addEventListener("online",n)},e.addOnOfflineEventListener=function(n,e=window){e.addEventListener("offline",n)}}));
define("OutSystems/ClientRuntime/VersionDefinition",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toObject=t.getPackageVersion=t.registerPackage=t.clientRuntimeKey=void 0;const n=new Map;let i;t.clientRuntimeKey="Client Runtime Packages",t.registerPackage=function(e,t){i=null,n.set(e,t)};t.getPackageVersion=({versionsMap:e=n,packageKey:t})=>{var i;return null!==(i=null==e?void 0:e.get(t))&&void 0!==i?i:null},t.toObject=function(){if(!i){const e={"Client Runtime Packages":""};n.forEach((n,i)=>{n&&i&&(e[t.clientRuntimeKey]+=`${i}= ${n};`)}),i=e}return i}}));
define("OutSystems/ClientRuntime/Logger",["require","exports","tslib","@outsystems/logger-js","@outsystems/settings-js","./ApplicationInfo","./modules/Auth/Authentication","./modules/Common/BrowserUtils","./modules/Common/UrlUtils","./modules/Communication/NetworkStatus","./modules/Injector/Injector","./modules/Injector/KnownServices","./modules/Native/NativeHelper","./VersionDefinition"],(function(e,t,n,r,i,s,o,a,l,u,c,g,v,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startSpan=t.setActiveSpanAsNonAggregable=t.startActiveSpan=t.setSchedulerTimerInterval=t.setLogLevel=t.flush=t.error=t.warning=t.log=t.debug=t.initialize=void 0;t.initialize=({applicationName:e,applicationKey:i,version:d,clientRuntimeVersion:p,buildServiceVersion:f,basePath:S,isRunningOnNative:b=!1,getCurrentScreenName:I=(()=>""),getUserId:A=o.getUserId,getLibVersion:N=m.getPackageVersion,getHttpScheme:h=l.getHttpScheme,getUserAgent:w=a.getUserAgent,getCurrentUrl:L=l.getCurrentUrl,getNativeLogger:F=v.getNativeOTLogger,getDatabaseSuffix:T=s.getApplicationKey,isWebApplication:_=s.isWebApplication,isOnlineMethod:K=u.isOnline,settingsManager:O=c.default.resolve(g.ServiceNames.SettingsManager),instrumentationFactory:k})=>n.__awaiter(void 0,void 0,void 0,(function*(){try{const n=Object.assign(Object.assign({},y(A,N,f)),{"http.scheme":h,"http.url":L,"http.user_agent":w}),s=null!=k?k:new r.InstrumentationFactory({databaseNameSuffix:T(),isOnline:K,baseLogAttributes:n,baseSpanAttributes:Object.assign(Object.assign({},n),{"outsystems.runtime.screen":I}),staticSpanAttributes:["http.scheme","http.user_agent","outsystems.client.runtime.core.version","outsystems.client.runtime.widgets.version","outsystems.client.runtime.reactview.version","outsystems.compiler.version"],aggregateSpans:O.readBool("EnableSpanAggregation")});c.default.register(g.ServiceNames.InstrumentationFactory,()=>s),yield s.init();const o=O.readLogLevel();if(b){const e=yield F();e&&s.useNativeLoggerTransport({plugin:e,logTypeBaseline:o})}else s.useOpenTelemetryLoggerTransport({resourceAttributes:{"service.name":"ClientRuntime","service.version":p,"outsystems.app.name":e,"outsystems.app.versiontoken":d,"outsystems.app.key":i,"outsystems.env.key":O.readString("EnvironmentKey"),"outsystems.tenant.key":O.readString("TenantID")},logTypeBaseline:o,collectorBaseUrl:S,apiKey:O.readString("LoggerApiKey")});_()&&O.readBool("EnableOpenTelemetryTraces")&&s.useOpenTelemetryTracerTransport({resourceAttributes:{"service.name":"ClientRuntime","service.version":p,"outsystems.app.name":e,"outsystems.app.versiontoken":d,"outsystems.app.key":i,"outsystems.env.key":O.readString("EnvironmentKey"),"outsystems.tenant.key":O.readString("TenantID")},collectorBaseUrl:S,apiKey:O.readString("LoggerApiKey"),enabled:!0}),s.useConsoleLoggerTransport(o);const a=O.readNumber("LoggerSchedulerTimeInterval");a>0&&(0,t.setSchedulerTimerInterval)(a,s)}catch(e){console.error("Error while initializing the logger.",e)}}));t.debug=(e,t,r=c.default.resolve(g.ServiceNames.InstrumentationFactory))=>n.__awaiter(void 0,void 0,void 0,(function*(){const n=p(e),i=f(t);d(r,null==r?void 0:r.logDebug,null!=n?n:"",null!=i?i:"")||(yield null==r?void 0:r.logDebug({category:n,message:f(t)}))}));t.log=(e,t,r,i=c.default.resolve(g.ServiceNames.InstrumentationFactory))=>n.__awaiter(void 0,void 0,void 0,(function*(){d(i,null==i?void 0:i.logInfo,e,t)||(yield null==i?void 0:i.logInfo({category:e,message:t,visibility:r}))}));t.warning=(e,t,r,i=c.default.resolve(g.ServiceNames.InstrumentationFactory))=>n.__awaiter(void 0,void 0,void 0,(function*(){d(i,null==i?void 0:i.logWarning,e,t)||(yield null==i?void 0:i.logWarning({category:e,message:t,visibility:r}))}));t.error=(e,t,r,i,s,o=c.default.resolve(g.ServiceNames.InstrumentationFactory))=>n.__awaiter(void 0,void 0,void 0,(function*(){var n;const{error:a,message:l}=S(t,i);if(!d(o,null==o?void 0:o.logError,e,null!=l?l:"")){const t=("OS-CLRT-00000"===r||null==r)&&null!==(n=a.errorCode)&&void 0!==n?n:r;e=null!=e?e:a.category,yield null==o?void 0:o.logError({category:e,message:l,error:a,errorCode:t,visibility:s})}}));const d=(e,t,n,r)=>(!e&&i.FeaturesManager.isEnabled(i.FeatureKeys.NoInstrumentationFactoryLogs)?console.warn(`No instrumentation factory: ${n} - ${r}`):!t&&i.FeaturesManager.isEnabled(i.FeatureKeys.NoInstrumentationFactoryLogs)&&console.warn(`Factory function not defined: ${n} - ${r}`),!e||!t);t.flush=(e=c.default.resolve(g.ServiceNames.InstrumentationFactory))=>n.__awaiter(void 0,void 0,void 0,(function*(){yield null==e?void 0:e.flushInstrumentationData()}));t.setLogLevel=(e,t=c.default.resolve(g.ServiceNames.InstrumentationFactory))=>{null==t||t.setLogLevel(e)};t.setSchedulerTimerInterval=(e,t=c.default.resolve(g.ServiceNames.InstrumentationFactory))=>{null==t||t.setSchedulerTimerInterval(e)},t.startActiveSpan=function(e,t,n,r,i,s=c.default.resolve(g.ServiceNames.InstrumentationFactory)){return s?s.startActiveSpan(e,t,n,r,i):t(void 0)},t.setActiveSpanAsNonAggregable=function(e=c.default.resolve(g.ServiceNames.InstrumentationFactory)){const t=null==e?void 0:e.getActiveSpan();null==t||t.setAttribute(r.KnownAttributes.IsNonAggregable,"true")},t.startSpan=function(e,t,n,r,i=c.default.resolve(g.ServiceNames.InstrumentationFactory)){return null==i?void 0:i.startSpan(e,t,n,r)};const y=(e,t,n)=>({"enduser.id":e,"outsystems.client.runtime.core.version":()=>{var e;return null!==(e=t({packageKey:"client-runtime-core"}))&&void 0!==e?e:""},"outsystems.client.runtime.widgets.version":()=>{var e;return null!==(e=t({packageKey:"client-runtime-widgets"}))&&void 0!==e?e:""},"outsystems.client.runtime.reactview.version":()=>{var e;return null!==(e=t({packageKey:"client-runtime-view-framework-react"}))&&void 0!==e?e:""},"outsystems.compiler.version":()=>n}),p=e=>{if(e){if("string"==typeof e)return e;{const t=e.constructor.name;return"Function"===t?e.name:t}}},f=e=>{if(e)return"string"==typeof e?e:e()},S=(e,t)=>{const n=null!=t?t:"string"==typeof e?new Error(e):e;let r=t&&"string"==typeof e?e:void 0;return n.message===r&&(r=void 0),{error:n,message:r}}}));
define("OutSystems/ClientRuntime/Database",["require","exports","@outsystems/logger-js","./Exceptions","./Flow","./Interfaces","./Logger","./modules/Native/NativeHelper","./RegExpHelper"],(function(e,t,n,a,s,r,i,o,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SqlDbIntrospector=t.SqlDbProvider=t.MockSqlDatabase=void 0;class l{constructor(e){this.callback=e}}class u extends l{constructor(e){super(e),this.callback=e}}class h extends l{constructor(e){super(e),this.callback=e}}class d{constructor(e,t=!0){this.tx=e,this.allowTraces=t,this.chain=[],this.pendingResult=null,this.hasPendingResult=!1,this.pendingError=null,this.hasPendingError=!1,this.parent=null}cloneForNext(){const e=new d(this.tx,this.allowTraces);return e.parent=this,e}andThen(e){return this.hasPendingError||(this.chain.push(new u(e)),this.triggerPendingResults()),this}withoutTraces(e){return this.andThen((t,n)=>(t.allowTraces=!1,e(t,n)))}andThenAll(e){return this.andThen((t,n)=>{const a=e(n);let s=t.feed(void 0);if(a)for(let e=0;e<a.length;e++)s=s.andThen(a[e]);return s.andThen(()=>{})})}extractScalar(e){const t=Object.keys(e);if(1===t.length){return e[t[0]]}throw new a.Exceptions.DataBaseException("",`Invalid use of 'extractScalar': the row should have a single column, but found '${t.join("', '")}'`)}executeScalar(e,t){return this.executeQueryRaw(e,t).andThen((e,t)=>0===(null==t?void 0:t.rows.length)?void 0:this.extractScalar(null==t?void 0:t.rows.item(0)))}executeQuery(e,t,n){return this.executeQueryRaw(e,n).andThen((e,n)=>{const a=new Array(n.rows.length);for(let e=0;e<n.rows.length;e++){const s=n.rows.item(e);a[e]=t(s)}return a})}executeNonQuery(e,t){return this.executeQueryRaw(e,t).andThen((e,t)=>{})}executeQueryRaw(e,t){const n=d.queryCount++,a=null!=t?t:[];return this.traceQuery(n,e,a),this.tx.executeSql(e,t,(e,t)=>{try{this.continueWithNext(t)}catch(t){this.abortExplicitly(e,t)}},(e,t)=>(i.warning("TxExecutor",`SQL command #${n} failed with error ${t.message}`),this.abort(t))),this}feed(e){return this.hasPendingResult=!0,this.pendingResult=e,this}onError(e){return this.chain.push(new h(e)),this.triggerPendingError(),this}nextCallback(e){for(let t=0;t<this.chain.length;t++)if(e(this.chain[t])){const e=this.chain[t].callback;return this.chain=this.chain.slice(t+1,this.chain.length),e}return null}nextErrorCallback(){return this.nextCallback(e=>e instanceof h)}hasErrorCallback(){return this.chain.some(e=>e instanceof h)}nextSuccessCallback(){return this.nextCallback(e=>e instanceof u)}abort(e){const t=this.nextErrorCallback();if(t){this.pendingError=null,this.hasPendingError=!1;try{let n=!1;const a=t(e,()=>{n=!0});return n?this.chain=[]:this.continueWithNext(a),n}catch(e){if(this.hasErrorCallback())return this.abort(e);if(this.parent)return this.parent.abort(e);throw e}}else this.pendingError=e,this.hasPendingError=!0;return!this.parent||this.parent.abort(e)}abortExplicitly(e,t){this.abort(t)&&e.executeSql("ABORT_TRANSACTION",void 0,()=>{},()=>!0)}continueWithNext(e){if(this.hasPendingResult=!1,e instanceof d)e.andThen((e,t)=>{this.continueWithNext(t)});else if(e instanceof Array&&0!==e.length&&e[0]instanceof d){let t=0;const n=()=>{t<e.length?(e[t].andThen(n),t++):this.continueWithNext(e)};n()}else{if(this.chain.length>0){const t=this.nextSuccessCallback();if(t)return void this.continueWithNext(this.tryNextItem(t,this.cloneForNext(),e))}this.hasPendingResult=!0,this.pendingResult=e}}tryNextItem(e,t,n){try{return e(t,n)}catch(e){this.abortExplicitly(this.tx,e)}}triggerPendingResults(){this.hasPendingResult&&(this.hasPendingResult=!1,this.continueWithNext(this.pendingResult))}triggerPendingError(){this.hasPendingError&&(this.hasPendingError=!1,this.abort(this.pendingError))}traceQuery(e,t,n){this.allowTraces&&i.debug("TxExecutor",()=>{const a=(n||[]).map(e=>String(e).substr(0,80));return`Executing SQL command #${e}: ${t} with arguments ${a}`})}static for(e){return new d(e)}}d.queryCount=0;class b{constructor(e,t){this.dbName=e,this.db=t,this.txCount=0,this.setDispose()}setDispose(){const e=this.db;window&&e&&e.close&&window.addEventListener("unload",()=>{this.debug("Closing database "+this.name),e.close(()=>this.debug(`Database ${this.name} closed successfully`),e=>i.error("SqlDatabase",`Database ${this.name} failed to close`,"OS-CLRT-60400",e))},!1)}get name(){return this.dbName}get isMock(){return!1}executeTransaction(e,t=!0){return this.innerExecuteTransaction(e,!1,t)}executeReadTransaction(e,t=!0){return this.innerExecuteTransaction(e,!0,t)}innerExecuteTransaction(e,t,n){const r=t?"READ":"WRITE",o=t?this.db.readTransaction:this.db.transaction,c=++this.txCount;return s.promise((t,s)=>{let l,u;this.debug(`Opening local storage ${r} transaction #${c} on database ${this.name}`,n),o.call(this.db,t=>{this.debug(`Executing local storage ${r} transaction #${c} on database ${this.name}`,n);let a=d.for(t).feed(void 0);return a=n?a.andThen(e):a.withoutTraces(e),a.andThen((e,t)=>l=t).onError((e,t)=>{u=e,t()})},e=>{u=u||e;const t=(null==u?void 0:u.message)?u:new Error(u),o=`Rolled back local storage ${r} transaction #${c} on database ${this.name}: ${t.message}`;return n&&i.warning("SqlDatabase",o),s(new a.Exceptions.DataBaseException("",t.message.toString())),!0},()=>{this.debug(`Committed local storage ${r} transaction #${c} on database ${this.name}`,n),t(l)})})}testConnection(){let e=0;return i.log("SqlDatabase","Starting to test on database connections. Performing #5 test queries.",n.Visibility.Internal),Promise.all(Array.apply(null,{length:5}).map((t,n)=>new Promise(t=>{this.executeTransaction(t=>t.executeQueryRaw("SELECT 1").onError((t,n)=>{g(t),e++})).catch(t=>{g(t),e++}).then(()=>{t()})}))).then(()=>{i.log("SqlDatabase",`Finished tests on database connections. #${5-e} out of #5 successfull queries.`,n.Visibility.Internal)})}debug(e,t=!0){t&&i.debug("SqlDatabase",e)}}class p{constructor(e){this.dbName=e}get name(){return this.dbName}get isMock(){return!0}executeTransaction(e,t=!0){return s.resolve()}executeReadTransaction(e,t=!0){return s.resolve()}testConnection(){return Promise.resolve()}}function g(e){i.error("Database","Failed to execute canary query (probably due to zombie transaction)","OS-CLRT-60407"),"undefined"!=typeof SQLError&&e instanceof SQLError?i.error("Database",`SQLError ${e.code}: ${e.message}`,"OS-CLRT-60407"):i.error("Database","Error while executing a transaction","OS-CLRT-60400",e)}t.MockSqlDatabase=p;var E;t.SqlDbProvider=new class{constructor(){this.dbCache={}}debug(e){i.debug("SqlDbProviderClass",e)}asSafeDbName(e){return e||""}openDb(e){return e=this.asSafeDbName(e),s.promise((t,n)=>{this.dbCache[e]?t(this.dbCache[e]):o.ensureNativeReady().then(()=>{if("undefined"==typeof window)return n(new a.Exceptions.SystemException("Database is only available in the browser/web view"));const s=window;if(o.isRunningOnNative())if(s.sqlitePlugin){this.debug(`Opening database '${e}'`);try{s.sqlitePlugin.openDatabase({name:e,location:"default"},s=>{s?(this.debug(`Database '${e}' opened successfully`),this.dbCache[e]=new b(e,s),t(this.dbCache[e])):(i.warning("SqlDbProviderClass",`Error opening database '${e}'`),n(new a.Exceptions.OpenDatabaseException(`Could not open database '${e}'`)))},t=>{i.warning("SqlDbProviderClass",`Error opening database '${e}' : ${t.message}`),n(new a.Exceptions.OpenDatabaseException(`Could not open database '${e}': ${t.message.toString()}`))})}catch(t){n(new a.Exceptions.OpenDatabaseException(`Could not open database '${e}': ${t.message.toString()}`))}}else n(new a.Exceptions.OpenDatabaseException("No database driver available"));else if(s.openDatabase)try{this.debug(`Opening database '${e}'`);const r=s.openDatabase(e,"1.0",e,5242880);r?(this.debug(`Database '${e}' opened successfully`),this.dbCache[e]=new b(e,r),t(this.dbCache[e])):(i.warning("SqlDbProviderClass",`Error opening database '${e}'`),n(new a.Exceptions.OpenDatabaseException(`Could not open database '${e}'`)))}catch(t){n(new a.Exceptions.OpenDatabaseException(`Could not open database '${e}': ${t.message.toString()}`))}else{const e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),t=!!s.chrome,r="Your app requires native access to a Local Storage database that is not available in your browser.\n\nPlease test your app in your mobile device"+(e||t?"":", or use Google Chrome or Safari web browsers")+".";alert(r),n(new a.Exceptions.SystemException(r))}}).catch(n)})}mockDb(e){return s.resolve(new p(e))}},function(e){e[e.Full=0]="Full",e[e.Type=1]="Type",e[e.Length=3]="Length",e[e.Decimals=5]="Decimals"}(E||(E={}));t.SqlDbIntrospector=new class{tableExists(e,t){return e.executeReadTransaction(e=>e.executeScalar("SELECT COUNT(*) FROM sqlite_master WHERE type = 'table' AND name = UPPER(?)",[t]).andThen((e,t)=>0!==t))}columnExists(e,t,n){return e.executeReadTransaction(e=>e.executeScalar(`SELECT "${t}"."${n}" FROM "${t}" LIMIT 1`)).then(()=>!0).catch(()=>!1)}dbTypeFromSchemaType(e){switch((e=e||"").toUpperCase()){case"INTEGER":return r.ClientDB.DBDataType.INTEGER;case"BIGINT":return r.ClientDB.DBDataType.LONGINTEGER;case"REAL":return r.ClientDB.DBDataType.DECIMAL;case"BOOLEAN":return r.ClientDB.DBDataType.BOOLEAN;case"TEXT":return r.ClientDB.DBDataType.TEXT;case"DATE":return r.ClientDB.DBDataType.DATE;case"TIME":return r.ClientDB.DBDataType.TIME;case"DATETIME":return r.ClientDB.DBDataType.DATE_TIME;case"BLOB":return r.ClientDB.DBDataType.BINARY_DATA;default:return r.ClientDB.DBDataType.UNKNOWN}}pragmaToTableInfo(e,t,n){return{tableName:e,idIsAutoNumber:(t=t||"").search(/INTEGER PRIMARY KEY AUTOINCREMENT/i)>=0?r.ClientDB.AutoNumber.YesIfEmpty:r.ClientDB.AutoNumber.No,attributes:n.map(e=>{const t=c.matches(e.type,"^([a-z]+)(\\(([0-9]+)(\\,([0-9]+))?\\))?$",!0).shift();if(t){const n=this.dbTypeFromSchemaType(t.groups[1]);return{name:e.name,columnName:e.name?e.name.toUpperCase():null,type:n,length:t.groups[3]?parseInt(t.groups[3],10):void 0,decimals:t.groups[5]?parseInt(t.groups[5],10):void 0,isEntityReference:"NULL"===e.dflt_value&&this.isIdentifierUnderlyingType(n),isPrimaryKey:1===e.pk}}})}}isIdentifierUnderlyingType(e){switch(e){case r.ClientDB.DBDataType.INTEGER:case r.ClientDB.DBDataType.LONGINTEGER:case r.ClientDB.DBDataType.TEXT:return!0;default:return!1}}introspectTableInfo(e,t){if(!o.isRunningOnNative())return e.feed(null);let n;return e.executeScalar(`SELECT sql FROM sqlite_master WHERE type = 'table' AND name = '${t}'`).andThen((e,t)=>n=t).andThen((e,n)=>e.executeQuery(`PRAGMA table_info('${t}')`,e=>e)).andThen((e,a)=>this.pragmaToTableInfo(t,n,a))}}}));
!function(n){"use strict";var e,i,t,r,s=9e15,o=1e9,u="0123456789abcdef",c="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",f="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",a={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-s,maxE:s,crypto:!1},h=!0,l="[DecimalError] ",d=l+"Invalid argument: ",p=l+"Precision limit exceeded",g=l+"crypto unavailable",m=Math.floor,w=Math.pow,v=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,N=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,b=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,E=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,x=1e7,y=c.length-1,M=f.length-1,q={name:"[object Decimal]"};function O(n){var e,i,t,r=n.length-1,s="",o=n[0];if(0<r){for(s+=o,e=1;e<r;e++)(i=7-(t=n[e]+"").length)&&(s+=I(i)),s+=t;(i=7-(t=(o=n[e])+"").length)&&(s+=I(i))}else if(0===o)return"0";for(;o%10==0;)o/=10;return s+o}function D(n,e,i){if(n!==~~n||n<e||i<n)throw Error(d+n)}function F(n,e,i,t){for(var r,s,o=n[0];10<=o;o/=10)--e;return--e<0?(e+=7,r=0):(r=Math.ceil((e+1)/7),e%=7),o=w(10,7-e),s=n[r]%o|0,null==t?e<3?(0==e?s=s/100|0:1==e&&(s=s/10|0),i<4&&99999==s||3<i&&49999==s||5e4==s||0==s):(i<4&&s+1==o||3<i&&s+1==o/2)&&(n[r+1]/o/100|0)==w(10,e-2)-1||(s==o/2||0==s)&&0==(n[r+1]/o/100|0):e<4?(0==e?s=s/1e3|0:1==e?s=s/100|0:2==e&&(s=s/10|0),(t||i<4)&&9999==s||!t&&3<i&&4999==s):((t||i<4)&&s+1==o||!t&&3<i&&s+1==o/2)&&(n[r+1]/o/1e3|0)==w(10,e-3)-1}function A(n,e,i){for(var t,r,s=[0],o=0,c=n.length;o<c;){for(r=s.length;r--;)s[r]*=e;for(s[0]+=u.indexOf(n.charAt(o++)),t=0;t<s.length;t++)s[t]>i-1&&(void 0===s[t+1]&&(s[t+1]=0),s[t+1]+=s[t]/i|0,s[t]%=i)}return s.reverse()}q.absoluteValue=q.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),L(n)},q.ceil=function(){return L(new this.constructor(this),this.e+1,2)},q.comparedTo=q.cmp=function(n){var e,i,t,r,s=this,o=s.d,u=(n=new s.constructor(n)).d,c=s.s,f=n.s;if(!o||!u)return c&&f?c!==f?c:o===u?0:!o^c<0?1:-1:NaN;if(!o[0]||!u[0])return o[0]?c:u[0]?-f:0;if(c!==f)return c;if(s.e!==n.e)return s.e>n.e^c<0?1:-1;for(e=0,i=(t=o.length)<(r=u.length)?t:r;e<i;++e)if(o[e]!==u[e])return o[e]>u[e]^c<0?1:-1;return t===r?0:r<t^c<0?1:-1},q.cosine=q.cos=function(){var n,e,i=this,t=i.constructor;return i.d?i.d[0]?(n=t.precision,e=t.rounding,t.precision=n+Math.max(i.e,i.sd())+7,t.rounding=1,i=function(n,e){var i,t,r=e.d.length;t=r<32?(1/G(4,i=Math.ceil(r/3))).toString():(i=16,"2.3283064365386962890625e-10"),n.precision+=i,e=z(n,1,e.times(t),new n(1));for(var s=i;s--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return n.precision-=i,e}(t,K(t,i)),t.precision=n,t.rounding=e,L(2==r||3==r?i.neg():i,n,e,!0)):new t(1):new t(NaN)},q.cubeRoot=q.cbrt=function(){var n,e,i,t,r,s,o,u,c,f,a=this,l=a.constructor;if(!a.isFinite()||a.isZero())return new l(a);for(h=!1,(s=a.s*w(a.s*a,1/3))&&Math.abs(s)!=1/0?t=new l(s.toString()):(i=O(a.d),(s=((n=a.e)-i.length+1)%3)&&(i+=1==s||-2==s?"0":"00"),s=w(i,1/3),n=m((n+1)/3)-(n%3==(n<0?-1:2)),(t=new l(i=s==1/0?"5e"+n:(i=s.toExponential()).slice(0,i.indexOf("e")+1)+n)).s=a.s),o=(n=l.precision)+3;;)if(f=(c=(u=t).times(u).times(u)).plus(a),t=S(f.plus(a).times(u),f.plus(c),o+2,1),O(u.d).slice(0,o)===(i=O(t.d)).slice(0,o)){if("9999"!=(i=i.slice(o-3,o+1))&&(r||"4999"!=i)){+i&&(+i.slice(1)||"5"!=i.charAt(0))||(L(t,n+1,1),e=!t.times(t).times(t).eq(a));break}if(!r&&(L(u,n+1,0),u.times(u).times(u).eq(a))){t=u;break}o+=4,r=1}return h=!0,L(t,n,l.rounding,e)},q.decimalPlaces=q.dp=function(){var n,e=this.d,i=NaN;if(e){if(i=7*((n=e.length-1)-m(this.e/7)),n=e[n])for(;n%10==0;n/=10)i--;i<0&&(i=0)}return i},q.dividedBy=q.div=function(n){return S(this,new this.constructor(n))},q.dividedToIntegerBy=q.divToInt=function(n){var e=this.constructor;return L(S(this,new e(n),0,1,1),e.precision,e.rounding)},q.equals=q.eq=function(n){return 0===this.cmp(n)},q.floor=function(){return L(new this.constructor(this),this.e+1,3)},q.greaterThan=q.gt=function(n){return 0<this.cmp(n)},q.greaterThanOrEqualTo=q.gte=function(n){var e=this.cmp(n);return 1==e||0===e},q.hyperbolicCosine=q.cosh=function(){var n,e,i,t,r,s=this,o=s.constructor,u=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return u;i=o.precision,t=o.rounding,o.precision=i+Math.max(s.e,s.sd())+4,o.rounding=1,e=(r=s.d.length)<32?(1/G(4,n=Math.ceil(r/3))).toString():(n=16,"2.3283064365386962890625e-10"),s=z(o,1,s.times(e),new o(1),!0);for(var c,f=n,a=new o(8);f--;)c=s.times(s),s=u.minus(c.times(a.minus(c.times(a))));return L(s,o.precision=i,o.rounding=t,!0)},q.hyperbolicSine=q.sinh=function(){var n,e,i,t,r=this,s=r.constructor;if(!r.isFinite()||r.isZero())return new s(r);if(e=s.precision,i=s.rounding,s.precision=e+Math.max(r.e,r.sd())+4,s.rounding=1,(t=r.d.length)<3)r=z(s,2,r,r,!0);else{n=16<(n=1.4*Math.sqrt(t))?16:0|n,r=z(s,2,r=r.times(1/G(5,n)),r,!0);for(var o,u=new s(5),c=new s(16),f=new s(20);n--;)o=r.times(r),r=r.times(u.plus(o.times(c.times(o).plus(f))))}return L(r,s.precision=e,s.rounding=i,!0)},q.hyperbolicTangent=q.tanh=function(){var n,e,i=this,t=i.constructor;return i.isFinite()?i.isZero()?new t(i):(n=t.precision,e=t.rounding,t.precision=n+7,t.rounding=1,S(i.sinh(),i.cosh(),t.precision=n,t.rounding=e)):new t(i.s)},q.inverseCosine=q.acos=function(){var n,e=this,i=e.constructor,t=e.abs().cmp(1),r=i.precision,s=i.rounding;return-1!==t?0===t?e.isNeg()?k(i,r,s):new i(0):new i(NaN):e.isZero()?k(i,r+4,s).times(.5):(i.precision=r+6,i.rounding=1,e=e.asin(),n=k(i,r+4,s).times(.5),i.precision=r,i.rounding=s,n.minus(e))},q.inverseHyperbolicCosine=q.acosh=function(){var n,e,i=this,t=i.constructor;return i.lte(1)?new t(i.eq(1)?0:NaN):i.isFinite()?(n=t.precision,e=t.rounding,t.precision=n+Math.max(Math.abs(i.e),i.sd())+4,t.rounding=1,h=!1,i=i.times(i).minus(1).sqrt().plus(i),h=!0,t.precision=n,t.rounding=e,i.ln()):new t(i)},q.inverseHyperbolicSine=q.asinh=function(){var n,e,i=this,t=i.constructor;return!i.isFinite()||i.isZero()?new t(i):(n=t.precision,e=t.rounding,t.precision=n+2*Math.max(Math.abs(i.e),i.sd())+6,t.rounding=1,h=!1,i=i.times(i).plus(1).sqrt().plus(i),h=!0,t.precision=n,t.rounding=e,i.ln())},q.inverseHyperbolicTangent=q.atanh=function(){var n,e,i,t,r=this,s=r.constructor;return r.isFinite()?0<=r.e?new s(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(n=s.precision,e=s.rounding,t=r.sd(),Math.max(t,n)<2*-r.e-1?L(new s(r),n,e,!0):(s.precision=i=t-r.e,r=S(r.plus(1),new s(1).minus(r),i+n,1),s.precision=n+4,s.rounding=1,r=r.ln(),s.precision=n,s.rounding=e,r.times(.5))):new s(NaN)},q.inverseSine=q.asin=function(){var n,e,i,t,r=this,s=r.constructor;return r.isZero()?new s(r):(e=r.abs().cmp(1),i=s.precision,t=s.rounding,-1!==e?0===e?((n=k(s,i+4,t).times(.5)).s=r.s,n):new s(NaN):(s.precision=i+6,s.rounding=1,r=r.div(new s(1).minus(r.times(r)).sqrt().plus(1)).atan(),s.precision=i,s.rounding=t,r.times(2)))},q.inverseTangent=q.atan=function(){var n,e,i,t,r,s,o,u,c,f=this,a=f.constructor,l=a.precision,d=a.rounding;if(f.isFinite()){if(f.isZero())return new a(f);if(f.abs().eq(1)&&l+4<=M)return(o=k(a,l+4,d).times(.25)).s=f.s,o}else{if(!f.s)return new a(NaN);if(l+4<=M)return(o=k(a,l+4,d).times(.5)).s=f.s,o}for(a.precision=u=l+10,a.rounding=1,n=i=Math.min(28,u/7+2|0);n;--n)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(h=!1,e=Math.ceil(u/7),t=1,c=f.times(f),o=new a(f),r=f;-1!==n;)if(r=r.times(c),s=o.minus(r.div(t+=2)),r=r.times(c),void 0!==(o=s.plus(r.div(t+=2))).d[e])for(n=e;o.d[n]===s.d[n]&&n--;);return i&&(o=o.times(2<<i-1)),h=!0,L(o,a.precision=l,a.rounding=d,!0)},q.isFinite=function(){return!!this.d},q.isInteger=q.isInt=function(){return!!this.d&&m(this.e/7)>this.d.length-2},q.isNaN=function(){return!this.s},q.isNegative=q.isNeg=function(){return this.s<0},q.isPositive=q.isPos=function(){return 0<this.s},q.isZero=function(){return!!this.d&&0===this.d[0]},q.lessThan=q.lt=function(n){return this.cmp(n)<0},q.lessThanOrEqualTo=q.lte=function(n){return this.cmp(n)<1},q.logarithm=q.log=function(n){var e,i,t,r,s,o,u,c,f=this,a=f.constructor,l=a.precision,d=a.rounding;if(null==n)n=new a(10),e=!0;else{if(i=(n=new a(n)).d,n.s<0||!i||!i[0]||n.eq(1))return new a(NaN);e=n.eq(10)}if(i=f.d,f.s<0||!i||!i[0]||f.eq(1))return new a(i&&!i[0]?-1/0:1!=f.s?NaN:i?0:1/0);if(e)if(1<i.length)s=!0;else{for(r=i[0];r%10==0;)r/=10;s=1!==r}if(h=!1,o=$(f,u=l+5),t=e?_(a,u+10):$(n,u),F((c=S(o,t,u,1)).d,r=l,d))do{if(o=$(f,u+=10),t=e?_(a,u+10):$(n,u),c=S(o,t,u,1),!s){+O(c.d).slice(r+1,r+15)+1==1e14&&(c=L(c,l+1,0));break}}while(F(c.d,r+=10,d));return h=!0,L(c,l,d)},q.minus=q.sub=function(n){var e,i,t,r,s,o,u,c,f,a,l,d,p=this,g=p.constructor;if(n=new g(n),!p.d||!n.d)return p.s&&n.s?p.d?n.s=-n.s:n=new g(n.d||p.s!==n.s?p:NaN):n=new g(NaN),n;if(p.s!=n.s)return n.s=-n.s,p.plus(n);if(f=p.d,d=n.d,u=g.precision,c=g.rounding,!f[0]||!d[0]){if(d[0])n.s=-n.s;else{if(!f[0])return new g(3===c?-0:0);n=new g(p)}return h?L(n,u,c):n}if(i=m(n.e/7),a=m(p.e/7),f=f.slice(),s=a-i){for(o=(l=s<0)?(e=f,s=-s,d.length):(e=d,i=a,f.length),(t=Math.max(Math.ceil(u/7),o)+2)<s&&(s=t,e.length=1),e.reverse(),t=s;t--;)e.push(0);e.reverse()}else{for((l=(t=f.length)<(o=d.length))&&(o=t),t=0;t<o;t++)if(f[t]!=d[t]){l=f[t]<d[t];break}s=0}for(l&&(e=f,f=d,d=e,n.s=-n.s),o=f.length,t=d.length-o;0<t;--t)f[o++]=0;for(t=d.length;s<t;){if(f[--t]<d[t]){for(r=t;r&&0===f[--r];)f[r]=x-1;--f[r],f[t]+=x}f[t]-=d[t]}for(;0===f[--o];)f.pop();for(;0===f[0];f.shift())--i;return f[0]?(n.d=f,n.e=U(f,i),h?L(n,u,c):n):new g(3===c?-0:0)},q.modulo=q.mod=function(n){var e,i=this,t=i.constructor;return n=new t(n),!i.d||!n.s||n.d&&!n.d[0]?new t(NaN):!n.d||i.d&&!i.d[0]?L(new t(i),t.precision,t.rounding):(h=!1,9==t.modulo?(e=S(i,n.abs(),0,3,1)).s*=n.s:e=S(i,n,0,t.modulo,1),e=e.times(n),h=!0,i.minus(e))},q.naturalExponential=q.exp=function(){return j(this)},q.naturalLogarithm=q.ln=function(){return $(this)},q.negated=q.neg=function(){var n=new this.constructor(this);return n.s=-n.s,L(n)},q.plus=q.add=function(n){var e,i,t,r,s,o,u,c,f,a,l=this,d=l.constructor;if(n=new d(n),!l.d||!n.d)return l.s&&n.s?l.d||(n=new d(n.d||l.s===n.s?l:NaN)):n=new d(NaN),n;if(l.s!=n.s)return n.s=-n.s,l.minus(n);if(f=l.d,a=n.d,u=d.precision,c=d.rounding,!f[0]||!a[0])return a[0]||(n=new d(l)),h?L(n,u,c):n;if(s=m(l.e/7),t=m(n.e/7),f=f.slice(),r=s-t){for((o=(o=r<0?(i=f,r=-r,a.length):(i=a,t=s,f.length))<(s=Math.ceil(u/7))?s+1:o+1)<r&&(r=o,i.length=1),i.reverse();r--;)i.push(0);i.reverse()}for((o=f.length)-(r=a.length)<0&&(r=o,i=a,a=f,f=i),e=0;r;)e=(f[--r]=f[r]+a[r]+e)/x|0,f[r]%=x;for(e&&(f.unshift(e),++t),o=f.length;0==f[--o];)f.pop();return n.d=f,n.e=U(f,t),h?L(n,u,c):n},q.precision=q.sd=function(n){var e;if(void 0!==n&&n!==!!n&&1!==n&&0!==n)throw Error(d+n);return this.d?(e=C(this.d),n&&this.e+1>e&&(e=this.e+1)):e=NaN,e},q.round=function(){var n=this.constructor;return L(new n(this),this.e+1,n.rounding)},q.sine=q.sin=function(){var n,e,i=this,t=i.constructor;return i.isFinite()?i.isZero()?new t(i):(n=t.precision,e=t.rounding,t.precision=n+Math.max(i.e,i.sd())+7,t.rounding=1,i=function(n,e){var i,t=e.d.length;if(t<3)return z(n,2,e,e);i=16<(i=1.4*Math.sqrt(t))?16:0|i,e=z(n,2,e=e.times(1/G(5,i)),e);for(var r,s=new n(5),o=new n(16),u=new n(20);i--;)r=e.times(e),e=e.times(s.plus(r.times(o.times(r).minus(u))));return e}(t,K(t,i)),t.precision=n,t.rounding=e,L(2<r?i.neg():i,n,e,!0)):new t(NaN)},q.squareRoot=q.sqrt=function(){var n,e,i,t,r,s,o=this,u=o.d,c=o.e,f=o.s,a=o.constructor;if(1!==f||!u||!u[0])return new a(!f||f<0&&(!u||u[0])?NaN:u?o:1/0);for(h=!1,t=0==(f=Math.sqrt(+o))||f==1/0?(((e=O(u)).length+c)%2==0&&(e+="0"),f=Math.sqrt(e),c=m((c+1)/2)-(c<0||c%2),new a(e=f==1/0?"5e"+c:(e=f.toExponential()).slice(0,e.indexOf("e")+1)+c)):new a(f.toString()),i=(c=a.precision)+3;;)if(t=(s=t).plus(S(o,s,i+2,1)).times(.5),O(s.d).slice(0,i)===(e=O(t.d)).slice(0,i)){if("9999"!=(e=e.slice(i-3,i+1))&&(r||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(L(t,c+1,1),n=!t.times(t).eq(o));break}if(!r&&(L(s,c+1,0),s.times(s).eq(o))){t=s;break}i+=4,r=1}return h=!0,L(t,c,a.rounding,n)},q.tangent=q.tan=function(){var n,e,i=this,t=i.constructor;return i.isFinite()?i.isZero()?new t(i):(n=t.precision,e=t.rounding,t.precision=n+10,t.rounding=1,(i=i.sin()).s=1,i=S(i,new t(1).minus(i.times(i)).sqrt(),n+10,0),t.precision=n,t.rounding=e,L(2==r||4==r?i.neg():i,n,e,!0)):new t(NaN)},q.times=q.mul=function(n){var e,i,t,r,s,o,u,c,f,a=this.constructor,l=this.d,d=(n=new a(n)).d;if(n.s*=this.s,!(l&&l[0]&&d&&d[0]))return new a(!n.s||l&&!l[0]&&!d||d&&!d[0]&&!l?NaN:l&&d?0*n.s:n.s/0);for(i=m(this.e/7)+m(n.e/7),(c=l.length)<(f=d.length)&&(s=l,l=d,d=s,o=c,c=f,f=o),s=[],t=o=c+f;t--;)s.push(0);for(t=f;0<=--t;){for(e=0,r=c+t;t<r;)u=s[r]+d[t]*l[r-t-1]+e,s[r--]=u%x|0,e=u/x|0;s[r]=(s[r]+e)%x|0}for(;!s[--o];)s.pop();return e?++i:s.shift(),n.d=s,n.e=U(s,i),h?L(n,a.precision,a.rounding):n},q.toBinary=function(n,e){return Q(this,2,n,e)},q.toDecimalPlaces=q.toDP=function(n,e){var i=this.constructor,t=new i(this);return void 0===n?t:(D(n,0,o),void 0===e?e=i.rounding:D(e,0,8),L(t,n+t.e+1,e))},q.toExponential=function(n,e){var i=this,t=i.constructor,r=void 0===n?T(i,!0):(D(n,0,o),void 0===e?e=t.rounding:D(e,0,8),T(i=L(new t(i),n+1,e),!0,n+1));return i.isNeg()&&!i.isZero()?"-"+r:r},q.toFixed=function(n,e){var i,t=this,r=t.constructor,s=void 0===n?T(t):(D(n,0,o),void 0===e?e=r.rounding:D(e,0,8),T(i=L(new r(t),n+t.e+1,e),!1,n+i.e+1));return t.isNeg()&&!t.isZero()?"-"+s:s},q.toFraction=function(n){var e,i,t,r,s,o,u,c,f,a,l,p,g=this,m=g.d,v=g.constructor;if(!m)return new v(g);if(f=i=new v(1),t=c=new v(0),o=(s=(e=new v(t)).e=C(m)-g.e-1)%7,e.d[0]=w(10,o<0?7+o:o),null==n)n=0<s?e:f;else{if(!(u=new v(n)).isInt()||u.lt(f))throw Error(d+u);n=u.gt(e)?0<s?e:f:u}for(h=!1,u=new v(O(m)),a=v.precision,v.precision=s=7*m.length*2;l=S(u,e,0,1,1),1!=(r=i.plus(l.times(t))).cmp(n);)i=t,t=r,r=f,f=c.plus(l.times(r)),c=r,r=e,e=u.minus(l.times(r)),u=r;return r=S(n.minus(i),t,0,1,1),c=c.plus(r.times(f)),i=i.plus(r.times(t)),c.s=f.s=g.s,p=S(f,t,s,1).minus(g).abs().cmp(S(c,i,s,1).minus(g).abs())<1?[f,t]:[c,i],v.precision=a,h=!0,p},q.toHexadecimal=q.toHex=function(n,e){return Q(this,16,n,e)},q.toNearest=function(n,e){var i=(t=this).constructor,t=new i(t);if(null==n){if(!t.d)return t;n=new i(1),e=i.rounding}else{if(n=new i(n),void 0===e?e=i.rounding:D(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(h=!1,t=S(t,n,0,e,1).times(n),h=!0,L(t)):(n.s=t.s,t=n),t},q.toNumber=function(){return+this},q.toOctal=function(n,e){return Q(this,8,n,e)},q.toPower=q.pow=function(n){var e,i,t,r,s,o,u=this,c=u.constructor,f=+(n=new c(n));if(!(u.d&&n.d&&u.d[0]&&n.d[0]))return new c(w(+u,f));if((u=new c(u)).eq(1))return u;if(t=c.precision,s=c.rounding,n.eq(1))return L(u,t,s);if((e=m(n.e/7))>=n.d.length-1&&(i=f<0?-f:f)<=9007199254740991)return r=H(c,u,i,t),n.s<0?new c(1).div(r):L(r,t,s);if((o=u.s)<0){if(e<n.d.length-1)return new c(NaN);if(0==(1&n.d[e])&&(o=1),0==u.e&&1==u.d[0]&&1==u.d.length)return u.s=o,u}return(e=0!=(i=w(+u,f))&&isFinite(i)?new c(i+"").e:m(f*(Math.log("0."+O(u.d))/Math.LN10+u.e+1)))>c.maxE+1||e<c.minE-1?new c(0<e?o/0:0):(h=!1,c.rounding=u.s=1,i=Math.min(12,(e+"").length),(r=j(n.times($(u,t+i)),t)).d&&F((r=L(r,t+5,1)).d,t,s)&&(e=t+10,+O((r=L(j(n.times($(u,e+i)),e),e+5,1)).d).slice(t+1,t+15)+1==1e14&&(r=L(r,t+1,0))),r.s=o,h=!0,L(r,t,c.rounding=s))},q.toPrecision=function(n,e){var i=this,t=i.constructor,r=void 0===n?T(i,i.e<=t.toExpNeg||i.e>=t.toExpPos):(D(n,1,o),void 0===e?e=t.rounding:D(e,0,8),T(i=L(new t(i),n,e),n<=i.e||i.e<=t.toExpNeg,n));return i.isNeg()&&!i.isZero()?"-"+r:r},q.toSignificantDigits=q.toSD=function(n,e){var i=this.constructor;return void 0===n?(n=i.precision,e=i.rounding):(D(n,1,o),void 0===e?e=i.rounding:D(e,0,8)),L(new i(this),n,e)},q.toString=function(){var n=this,e=n.constructor,i=T(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+i:i},q.truncated=q.trunc=function(){return L(new this.constructor(this),this.e+1,1)},q.valueOf=q.toJSON=function(){var n=this,e=n.constructor,i=T(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+i:i};var S=function(n,e,t,r,s,o){var u,c,f,a,h,l,d,p,g,w,v,N,b,E,y,M,q,O,D,F,A=n.constructor,S=n.s==e.s?1:-1,T=n.d,U=e.d;if(!(T&&T[0]&&U&&U[0]))return new A(n.s&&e.s&&(T?!U||T[0]!=U[0]:U)?T&&0==T[0]||!U?0*S:S/0:NaN);for(c=o?(h=1,n.e-e.e):(o=x,h=7,m(n.e/h)-m(e.e/h)),D=U.length,q=T.length,w=(g=new A(S)).d=[],f=0;U[f]==(T[f]||0);f++);if(U[f]>(T[f]||0)&&c--,null==t?(E=t=A.precision,r=A.rounding):E=s?t+(n.e-e.e)+1:t,E<0)w.push(1),l=!0;else{if(E=E/h+2|0,f=0,1==D){for(U=U[a=0],E++;(f<q||a)&&E--;f++)y=a*o+(T[f]||0),w[f]=y/U|0,a=y%U|0;l=a||f<q}else{for(1<(a=o/(U[0]+1)|0)&&(U=Z(U,a,o),T=Z(T,a,o),D=U.length,q=T.length),M=D,N=(v=T.slice(0,D)).length;N<D;)v[N++]=0;for((F=U.slice()).unshift(0),O=U[0],U[1]>=o/2&&++O;a=0,(u=P(U,v,D,N))<0?(b=v[0],D!=N&&(b=b*o+(v[1]||0)),1<(a=b/O|0)?(o<=a&&(a=o-1),1==(u=P(d=Z(U,a,o),v,p=d.length,N=v.length))&&(a--,R(d,D<p?F:U,p,o))):(0==a&&(u=a=1),d=U.slice()),(p=d.length)<N&&d.unshift(0),R(v,d,N,o),-1==u&&(u=P(U,v,D,N=v.length))<1&&(a++,R(v,D<N?F:U,N,o)),N=v.length):0===u&&(a++,v=[0]),w[f++]=a,u&&v[0]?v[N++]=T[M]||0:(v=[T[M]],N=1),(M++<q||void 0!==v[0])&&E--;);l=void 0!==v[0]}w[0]||w.shift()}if(1==h)g.e=c,i=l;else{for(f=1,a=w[0];10<=a;a/=10)f++;g.e=f+c*h-1,L(g,s?t+g.e+1:t,r,l)}return g};function Z(n,e,i){var t,r=0,s=n.length;for(n=n.slice();s--;)t=n[s]*e+r,n[s]=t%i|0,r=t/i|0;return r&&n.unshift(r),n}function P(n,e,i,t){var r,s;if(i!=t)s=t<i?1:-1;else for(r=s=0;r<i;r++)if(n[r]!=e[r]){s=n[r]>e[r]?1:-1;break}return s}function R(n,e,i,t){for(var r=0;i--;)n[i]-=r,r=n[i]<e[i]?1:0,n[i]=r*t+n[i]-e[i];for(;!n[0]&&1<n.length;)n.shift()}function L(n,e,i,t){var r,s,o,u,c,f,a,l,d,p=n.constructor;n:if(null!=e){if(!(l=n.d))return n;for(r=1,u=l[0];10<=u;u/=10)r++;if((s=e-r)<0)s+=7,o=e,c=(a=l[d=0])/w(10,r-o-1)%10|0;else if(d=Math.ceil((s+1)/7),(u=l.length)<=d){if(!t)break n;for(;u++<=d;)l.push(0);a=c=0,o=(s%=7)-7+(r=1)}else{for(a=u=l[d],r=1;10<=u;u/=10)r++;c=(o=(s%=7)-7+r)<0?0:a/w(10,r-o-1)%10|0}if(t=t||e<0||void 0!==l[d+1]||(o<0?a:a%w(10,r-o-1)),f=i<4?(c||t)&&(0==i||i==(n.s<0?3:2)):5<c||5==c&&(4==i||t||6==i&&(0<s?0<o?a/w(10,r-o):0:l[d-1])%10&1||i==(n.s<0?8:7)),e<1||!l[0])return l.length=0,f?(e-=n.e+1,l[0]=w(10,(7-e%7)%7),n.e=-e||0):l[0]=n.e=0,n;if(0==s?(l.length=d,u=1,d--):(l.length=d+1,u=w(10,7-s),l[d]=0<o?(a/w(10,r-o)%w(10,o)|0)*u:0),f)for(;;){if(0==d){for(s=1,o=l[0];10<=o;o/=10)s++;for(o=l[0]+=u,u=1;10<=o;o/=10)u++;s!=u&&(n.e++,l[0]==x&&(l[0]=1));break}if(l[d]+=u,l[d]!=x)break;l[d--]=0,u=1}for(s=l.length;0===l[--s];)l.pop()}return h&&(n.e>p.maxE?(n.d=null,n.e=NaN):n.e<p.minE&&(n.e=0,n.d=[0])),n}function T(n,e,i){if(!n.isFinite())return W(n);var t,r=n.e,s=O(n.d),o=s.length;return e?(i&&0<(t=i-o)?s=s.charAt(0)+"."+s.slice(1)+I(t):1<o&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(n.e<0?"e":"e+")+n.e):r<0?(s="0."+I(-r-1)+s,i&&0<(t=i-o)&&(s+=I(t))):o<=r?(s+=I(r+1-o),i&&0<(t=i-r-1)&&(s=s+"."+I(t))):((t=r+1)<o&&(s=s.slice(0,t)+"."+s.slice(t)),i&&0<(t=i-o)&&(r+1===o&&(s+="."),s+=I(t))),s}function U(n,e){var i=n[0];for(e*=7;10<=i;i/=10)e++;return e}function _(n,e,i){if(y<e)throw h=!0,i&&(n.precision=i),Error(p);return L(new n(c),e,1,!0)}function k(n,e,i){if(M<e)throw Error(p);return L(new n(f),e,i,!0)}function C(n){var e=n.length-1,i=7*e+1;if(e=n[e]){for(;e%10==0;e/=10)i--;for(e=n[0];10<=e;e/=10)i++}return i}function I(n){for(var e="";n--;)e+="0";return e}function H(n,e,i,t){var r,s=new n(1),o=Math.ceil(t/7+4);for(h=!1;;){if(i%2&&X((s=s.times(e)).d,o)&&(r=!0),0===(i=m(i/2))){i=s.d.length-1,r&&0===s.d[i]&&++s.d[i];break}X((e=e.times(e)).d,o)}return h=!0,s}function B(n){return 1&n.d[n.d.length-1]}function V(n,e,i){for(var t,r=new n(e[0]),s=0;++s<e.length;){if(!(t=new n(e[s])).s){r=t;break}r[i](t)&&(r=t)}return r}function j(n,e){var i,t,r,s,o,u,c,f=0,a=0,l=0,d=n.constructor,p=d.rounding,g=d.precision;if(!n.d||!n.d[0]||17<n.e)return new d(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(c=null==e?(h=!1,g):e,u=new d(.03125);-2<n.e;)n=n.times(u),l+=5;for(c+=t=Math.log(w(2,l))/Math.LN10*2+5|0,i=s=o=new d(1),d.precision=c;;){if(s=L(s.times(n),c,1),i=i.times(++a),O((u=o.plus(S(s,i,c,1))).d).slice(0,c)===O(o.d).slice(0,c)){for(r=l;r--;)o=L(o.times(o),c,1);if(null!=e)return d.precision=g,o;if(!(f<3&&F(o.d,c-t,p,f)))return L(o,d.precision=g,p,h=!0);d.precision=c+=10,i=s=u=new d(1),a=0,f++}o=u}}function $(n,e){var i,t,r,s,o,u,c,f,a,l,d,p=1,g=n,m=g.d,w=g.constructor,v=w.rounding,N=w.precision;if(g.s<0||!m||!m[0]||!g.e&&1==m[0]&&1==m.length)return new w(m&&!m[0]?-1/0:1!=g.s?NaN:m?0:g);if(a=null==e?(h=!1,N):e,w.precision=a+=10,t=(i=O(m)).charAt(0),!(Math.abs(s=g.e)<15e14))return f=_(w,a+2,N).times(s+""),g=$(new w(t+"."+i.slice(1)),a-10).plus(f),w.precision=N,null==e?L(g,N,v,h=!0):g;for(;t<7&&1!=t||1==t&&3<i.charAt(1);)t=(i=O((g=g.times(n)).d)).charAt(0),p++;for(s=g.e,1<t?(g=new w("0."+i),s++):g=new w(t+"."+i.slice(1)),c=o=g=S((l=g).minus(1),g.plus(1),a,1),d=L(g.times(g),a,1),r=3;;){if(o=L(o.times(d),a,1),O((f=c.plus(S(o,new w(r),a,1))).d).slice(0,a)===O(c.d).slice(0,a)){if(c=c.times(2),0!==s&&(c=c.plus(_(w,a+2,N).times(s+""))),c=S(c,new w(p),a,1),null!=e)return w.precision=N,c;if(!F(c.d,a-10,v,u))return L(c,w.precision=N,v,h=!0);w.precision=a+=10,f=o=g=S(l.minus(1),l.plus(1),a,1),d=L(g.times(g),a,1),r=u=1}c=f,r+=2}}function W(n){return String(n.s*n.s/0)}function J(n,e){var i,t,r;for(-1<(i=e.indexOf("."))&&(e=e.replace(".","")),0<(t=e.search(/e/i))?(i<0&&(i=t),i+=+e.slice(t+1),e=e.substring(0,t)):i<0&&(i=e.length),t=0;48===e.charCodeAt(t);t++);for(r=e.length;48===e.charCodeAt(r-1);--r);if(e=e.slice(t,r)){if(r-=t,n.e=i=i-t-1,n.d=[],t=(i+1)%7,i<0&&(t+=7),t<r){for(t&&n.d.push(+e.slice(0,t)),r-=7;t<r;)n.d.push(+e.slice(t,t+=7));t=7-(e=e.slice(t)).length}else t-=r;for(;t--;)e+="0";n.d.push(+e),h&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function z(n,e,i,t,r){var s,o,u,c,f=n.precision,a=Math.ceil(f/7);for(h=!1,c=i.times(i),u=new n(t);;){if(o=S(u.times(c),new n(e++*e++),f,1),u=r?t.plus(o):t.minus(o),t=S(o.times(c),new n(e++*e++),f,1),void 0!==(o=u.plus(t)).d[a]){for(s=a;o.d[s]===u.d[s]&&s--;);if(-1==s)break}s=u,u=t,t=o,o=s}return h=!0,o.d.length=a+1,o}function G(n,e){for(var i=n;--e;)i*=n;return i}function K(n,e){var i,t=e.s<0,s=k(n,n.precision,1),o=s.times(.5);if((e=e.abs()).lte(o))return r=t?4:1,e;if((i=e.divToInt(s)).isZero())r=t?3:2;else{if((e=e.minus(i.times(s))).lte(o))return r=B(i)?t?2:3:t?4:1,e;r=B(i)?t?1:4:t?3:2}return e.minus(s).abs()}function Q(n,e,t,r){var s,c,f,a,h,l,d,p,g,m=n.constructor,w=void 0!==t;if(w?(D(t,1,o),void 0===r?r=m.rounding:D(r,0,8)):(t=m.precision,r=m.rounding),n.isFinite()){for(w?(s=2,16==e?t=4*t-3:8==e&&(t=3*t-2)):s=e,0<=(f=(d=T(n)).indexOf("."))&&(d=d.replace(".",""),(g=new m(1)).e=d.length-f,g.d=A(T(g),10,s),g.e=g.d.length),c=h=(p=A(d,10,s)).length;0==p[--h];)p.pop();if(p[0]){if(f<0?c--:((n=new m(n)).d=p,n.e=c,p=(n=S(n,g,t,r,0,s)).d,c=n.e,l=i),f=p[t],a=s/2,l=l||void 0!==p[t+1],l=r<4?(void 0!==f||l)&&(0===r||r===(n.s<0?3:2)):a<f||f===a&&(4===r||l||6===r&&1&p[t-1]||r===(n.s<0?8:7)),p.length=t,l)for(;++p[--t]>s-1;)p[t]=0,t||(++c,p.unshift(1));for(h=p.length;!p[h-1];--h);for(f=0,d="";f<h;f++)d+=u.charAt(p[f]);if(w){if(1<h)if(16==e||8==e){for(f=16==e?4:3,--h;h%f;h++)d+="0";for(h=(p=A(d,s,e)).length;!p[h-1];--h);for(f=1,d="1.";f<h;f++)d+=u.charAt(p[f])}else d=d.charAt(0)+"."+d.slice(1);d=d+(c<0?"p":"p+")+c}else if(c<0){for(;++c;)d="0"+d;d="0."+d}else if(++c>h)for(c-=h;c--;)d+="0";else c<h&&(d=d.slice(0,c)+"."+d.slice(c))}else d=w?"0p+0":"0";d=(16==e?"0x":2==e?"0b":8==e?"0o":"")+d}else d=W(n);return n.s<0?"-"+d:d}function X(n,e){return n.length>e&&(n.length=e,1)}function Y(n){return new this(n).abs()}function nn(n){return new this(n).acos()}function en(n){return new this(n).acosh()}function tn(n,e){return new this(n).plus(e)}function rn(n){return new this(n).asin()}function sn(n){return new this(n).asinh()}function on(n){return new this(n).atan()}function un(n){return new this(n).atanh()}function cn(n,e){n=new this(n),e=new this(e);var i,t=this.precision,r=this.rounding,s=t+4;return n.s&&e.s?n.d||e.d?!e.d||n.isZero()?(i=e.s<0?k(this,t,r):new this(0)).s=n.s:!n.d||e.isZero()?(i=k(this,s,1).times(.5)).s=n.s:i=e.s<0?(this.precision=s,this.rounding=1,i=this.atan(S(n,e,s,1)),e=k(this,s,1),this.precision=t,this.rounding=r,n.s<0?i.minus(e):i.plus(e)):this.atan(S(n,e,s,1)):(i=k(this,s,1).times(0<e.s?.25:.75)).s=n.s:i=new this(NaN),i}function fn(n){return new this(n).cbrt()}function an(n){return L(n=new this(n),n.e+1,2)}function hn(n){if(!n||"object"!=typeof n)throw Error(l+"Object expected");for(var e,i,t=!0===n.defaults,r=["precision",1,o,"rounding",0,8,"toExpNeg",-s,0,"toExpPos",0,s,"maxE",0,s,"minE",-s,0,"modulo",0,9],u=0;u<r.length;u+=3)if(e=r[u],t&&(this[e]=a[e]),void 0!==(i=n[e])){if(!(m(i)===i&&r[u+1]<=i&&i<=r[u+2]))throw Error(d+e+": "+i);this[e]=i}if(e="crypto",t&&(this[e]=a[e]),void 0!==(i=n[e])){if(!0!==i&&!1!==i&&0!==i&&1!==i)throw Error(d+e+": "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(g);this[e]=!0}else this[e]=!1}return this}function ln(n){return new this(n).cos()}function dn(n){return new this(n).cosh()}function pn(n,e){return new this(n).div(e)}function gn(n){return new this(n).exp()}function mn(n){return L(n=new this(n),n.e+1,3)}function wn(){var n,e,i=new this(0);for(h=!1,n=0;n<arguments.length;)if((e=new this(arguments[n++])).d)i.d&&(i=i.plus(e.times(e)));else{if(e.s)return h=!0,new this(1/0);i=e}return h=!0,i.sqrt()}function vn(n){return n instanceof e||n&&"[object Decimal]"===n.name||!1}function Nn(n){return new this(n).ln()}function bn(n,e){return new this(n).log(e)}function En(n){return new this(n).log(2)}function xn(n){return new this(n).log(10)}function yn(){return V(this,arguments,"lt")}function Mn(){return V(this,arguments,"gt")}function qn(n,e){return new this(n).mod(e)}function On(n,e){return new this(n).mul(e)}function Dn(n,e){return new this(n).pow(e)}function Fn(n){var e,i,t,r,s=0,u=new this(1),c=[];if(void 0===n?n=this.precision:D(n,1,o),t=Math.ceil(n/7),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(t));s<t;)429e7<=(r=e[s])?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:c[s++]=r%1e7;else{if(!crypto.randomBytes)throw Error(g);for(e=crypto.randomBytes(t*=4);s<t;)214e7<=(r=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((127&e[s+3])<<24))?crypto.randomBytes(4).copy(e,s):(c.push(r%1e7),s+=4);s=t/4}else for(;s<t;)c[s++]=1e7*Math.random()|0;for(n%=7,(t=c[--s])&&n&&(r=w(10,7-n),c[s]=(t/r|0)*r);0===c[s];s--)c.pop();if(s<0)c=[i=0];else{for(i=-1;0===c[0];i-=7)c.shift();for(t=1,r=c[0];10<=r;r/=10)t++;t<7&&(i-=7-t)}return u.e=i,u.d=c,u}function An(n){return L(n=new this(n),n.e+1,this.rounding)}function Sn(n){return(n=new this(n)).d?n.d[0]?n.s:0*n.s:n.s||NaN}function Zn(n){return new this(n).sin()}function Pn(n){return new this(n).sinh()}function Rn(n){return new this(n).sqrt()}function Ln(n,e){return new this(n).sub(e)}function Tn(n){return new this(n).tan()}function Un(n){return new this(n).tanh()}function _n(n){return L(n=new this(n),n.e+1,1)}(e=function n(i){var t,r,s;function o(n){var i,t,r,s=this;if(!(s instanceof o))return new o(n);if(n instanceof(s.constructor=o))return s.s=n.s,void(h?!n.d||n.e>o.maxE?(s.e=NaN,s.d=null):n.e<o.minE?(s.e=0,s.d=[0]):(s.e=n.e,s.d=n.d.slice()):(s.e=n.e,s.d=n.d?n.d.slice():n.d));if("number"==(r=typeof n)){if(0===n)return s.s=1/n<0?-1:1,s.e=0,void(s.d=[0]);if(n<0?(n=-n,s.s=-1):s.s=1,n===~~n&&n<1e7){for(i=0,t=n;10<=t;t/=10)i++;return void(h?o.maxE<i?(s.e=NaN,s.d=null):i<o.minE?(s.e=0,s.d=[0]):(s.e=i,s.d=[n]):(s.e=i,s.d=[n]))}return 0*n!=0?(n||(s.s=NaN),s.e=NaN,void(s.d=null)):J(s,n.toString())}if("string"!=r)throw Error(d+n);return 45===(t=n.charCodeAt(0))?(n=n.slice(1),s.s=-1):(43===t&&(n=n.slice(1)),s.s=1),(E.test(n)?J:function(n,i){var t,r,s,o,u,c,f,a,l;if("Infinity"===i||"NaN"===i)return+i||(n.s=NaN),n.e=NaN,n.d=null,n;if(N.test(i))t=16,i=i.toLowerCase();else if(v.test(i))t=2;else{if(!b.test(i))throw Error(d+i);t=8}for(u=0<=(o=(i=0<(o=i.search(/p/i))?(f=+i.slice(o+1),i.substring(2,o)):i.slice(2)).indexOf(".")),r=n.constructor,u&&(o=(c=(i=i.replace(".","")).length)-o,s=H(r,new r(t),o,2*o)),o=l=(a=A(i,t,x)).length-1;0===a[o];--o)a.pop();return o<0?new r(0*n.s):(n.e=U(a,l),n.d=a,h=!1,u&&(n=S(n,s,4*c)),f&&(n=n.times(Math.abs(f)<54?w(2,f):e.pow(2,f))),h=!0,n)})(s,n)}if(o.prototype=q,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=hn,o.clone=n,o.isDecimal=vn,o.abs=Y,o.acos=nn,o.acosh=en,o.add=tn,o.asin=rn,o.asinh=sn,o.atan=on,o.atanh=un,o.atan2=cn,o.cbrt=fn,o.ceil=an,o.cos=ln,o.cosh=dn,o.div=pn,o.exp=gn,o.floor=mn,o.hypot=wn,o.ln=Nn,o.log=bn,o.log10=xn,o.log2=En,o.max=yn,o.min=Mn,o.mod=qn,o.mul=On,o.pow=Dn,o.random=Fn,o.round=An,o.sign=Sn,o.sin=Zn,o.sinh=Pn,o.sqrt=Rn,o.sub=Ln,o.tan=Tn,o.tanh=Un,o.trunc=_n,void 0===i&&(i={}),i&&!0!==i.defaults)for(s=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<s.length;)i.hasOwnProperty(r=s[t++])||(i[r]=this[r]);return o.config(i),o}(a)).default=e.Decimal=e,c=new e(c),f=new e(f),"function"==typeof define&&define.amd?define("decimal",[],(function(){return e})):"undefined"!=typeof module&&module.exports?("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(q[Symbol.for("nodejs.util.inspect.custom")]=q.toString,q[Symbol.toStringTag]="Decimal"),module.exports=e):(n=n||("undefined"!=typeof self&&self&&self.self==self?self:window),t=n.Decimal,e.noConflict=function(){return n.Decimal=t,e},n.Decimal=e)}(this);
!function(o){"use strict";function r(o){return o.prototype.toFormat=function(o,r,e){if(!this.e&&0!==this.e)return this.toString();var t,i,a,n,p,f,u,c,s,S,d,l,m,g,z,G=this.format||{},y=this.constructor.format||{};if(o!=p?"object"==typeof o?(e=o,o=p):r!=p?"object"==typeof r?(e=r,r=p):"object"!=typeof e&&(e={}):e={}:e={},c=(t=this.toFixed(o,r).split("."))[0],s=t[1],f=(u=this.s<0?c.slice(1):c).length,(S=e.decimalSeparator)==p&&(S=G.decimalSeparator)==p&&(S=y.decimalSeparator)==p&&(S="."),(d=e.groupSeparator)==p&&(d=G.groupSeparator)==p&&(d=y.groupSeparator),d&&((l=e.groupSize)==p&&(l=G.groupSize)==p&&(l=y.groupSize)==p&&(l=0),(m=e.secondaryGroupSize)==p&&(m=G.secondaryGroupSize)==p&&(m=y.secondaryGroupSize)==p&&(m=0),m?(i=+m,f-=a=+l):(i=+l,a=+m),0<i&&0<f)){for(n=f%i||i,c=u.substr(0,n);n<f;n+=i)c+=d+u.substr(n,i);0<a&&(c+=d+u.slice(n)),this.s<0&&(c="-"+c)}return s?((g=e.fractionGroupSeparator)==p&&(g=G.fractionGroupSeparator)==p&&(g=y.fractionGroupSeparator),g&&((z=e.fractionGroupSize)==p&&(z=G.fractionGroupSize)==p&&(z=y.fractionGroupSize)==p&&(z=0),(z=+z)&&(s=s.replace(new RegExp("\\d{"+z+"}\\B","g"),"$&"+g))),c+S+s):c},o.format={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"",fractionGroupSize:0},o}"function"==typeof define&&define.amd?define("toformat",["require","exports","module"],(function(o,e){e.default=r})):"undefined"!=typeof module&&module.exports?module.exports=r:(o||(o="undefined"!=typeof self&&self&&self.self==self?self:window),noConflict=o.toFormat,r.noConflict=function(){return o.toFormat=noConflict,r},o.toFormat=r)}(this);
define("OutSystems/ClientRuntime/Decimal",["require","exports","decimal","toformat"],(function(n,e,t,r){"use strict";var u,a;Object.defineProperty(e,"__esModule",{value:!0}),(0,r.default)(t.Decimal),function(n){n[n.roundUp=0]="roundUp",n[n.roundDown=1]="roundDown",n[n.roundCeil=2]="roundCeil",n[n.roundFloor=3]="roundFloor",n[n.roundHalfUp=4]="roundHalfUp",n[n.roundHalfDown=5]="roundHalfDown",n[n.roundHalfEven=6]="roundHalfEven",n[n.roundHalfCeil=7]="roundHalfCeil",n[n.roundHalfFloor=8]="roundHalfFloor"}(a||(a={}));const l=t.Decimal.config({precision:30,toExpNeg:-1024,toExpPos:1024,rounding:null===(u=t.Decimal.Decimal)||void 0===u?void 0:u.ROUND_HALF_EVEN});class i{constructor(n){this.add=this.plus,this.sub=this.minus,this.eq=this.equals,this.lt=this.lessThan,this.lte=this.lessThanOrEqualTo,this.gt=this.greaterThan,this.gte=this.greaterThanOrEqualTo;const e=i.unwrapInputValue(n);this.internalValue=new l(e)}static unwrapInputValue(n){return"string"==typeof n||"number"==typeof n?n:"internalValue"in n?n.internalValue:n}static max(n,e){const[t,r]=[i.unwrapInputValue(n),i.unwrapInputValue(e)],u=l.max(t,r);return new i(u)}static min(n,e){const[t,r]=[i.unwrapInputValue(n),i.unwrapInputValue(e)],u=l.min(t,r);return new i(u)}abs(){const n=this.internalValue.abs();return new i(n)}neg(){const n=this.internalValue.neg();return new i(n)}sqrt(){const n=this.internalValue.sqrt();return new i(n)}trunc(){const n=this.internalValue.trunc();return new i(n)}round(){const n=this.internalValue.round();return new i(n)}isNaN(){return this.internalValue.isNaN()}isInteger(){return this.internalValue.isInteger()}decimalPlaces(){return this.internalValue.decimalPlaces()}plus(n){const e=i.unwrapInputValue(n),t=this.internalValue.plus(e);return new i(t)}minus(n){const e=i.unwrapInputValue(n),t=this.internalValue.minus(e);return new i(t)}times(n){const e=i.unwrapInputValue(n),t=this.internalValue.times(e);return new i(t)}div(n){const e=i.unwrapInputValue(n),t=this.internalValue.div(e);return new i(t)}pow(n){const e=i.unwrapInputValue(n),t=this.internalValue.pow(e);return new i(t)}mod(n){const e=i.unwrapInputValue(n),t=this.internalValue.mod(e);return new i(t)}equals(n){const e=i.unwrapInputValue(n);return this.internalValue.equals(e)}lessThan(n){const e=i.unwrapInputValue(n);return this.internalValue.lessThan(e)}lessThanOrEqualTo(n){const e=i.unwrapInputValue(n);return this.internalValue.lessThanOrEqualTo(e)}greaterThan(n){const e=i.unwrapInputValue(n);return this.internalValue.greaterThan(e)}greaterThanOrEqualTo(n){const e=i.unwrapInputValue(n);return this.internalValue.greaterThanOrEqualTo(e)}toString(){return this.internalValue.toString()}toNumber(){return this.internalValue.toNumber()}valueOf(){return this.internalValue.valueOf()}toFixed(n){return this.internalValue.toFixed(n)}toFormat(...n){return this.internalValue.toFormat(...n)}toDecimalPlaces(n){const e=this.internalValue.toDecimalPlaces(n);return new i(e)}}i.rounding=l.rounding,i.defaultValue=new i(0),e.default=i}));
define("OutSystems/ClientRuntime/Format",["require","exports"],(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ApplicationFormatInfo=e.NumberFormatInfo=e.DateTimeFormatInfo=void 0;const r={};function a(t,e){const a=r[t];if(void 0!==a)return a;const m=t.replace(new RegExp("["+e.join("")+"]","gi"),"").substr(0,1),i=[];let n;for(n=0;n<e.length;n++)i.push({index:t.toLowerCase().indexOf(e[n]),character:e[n],length:t.replace(new RegExp("[^"+e[n]+"]","gi"),"").length});i.sort((t,e)=>t.index<e.index?-1:1);const s={format:t,separator:m,parts:{},regExp:"^"};for(n=0;n<i.length;n++){let e="";switch(i[n].character.toLowerCase()){case"h":case"m":case"d":e="1,2";break;case"s":s.regExp+="(?"+m,e="1,2";break;default:e=i[n].length}n>0&&(s.regExp+="\\"+m),s.regExp+="([0-9]{"+e+"})"+("s"===i[n].character?")?":""),s.parts[i[n].character+"Index"]=n,s.parts[i[n].character+"Format"]=t.slice(i[n].index,i[n].index+i[n].length)}return s.regExp+="$",r[t]=s,s}class m{static getDayName(t){return m.DayNames[t]}static getShortDayName(t){return m.DayNames[t].slice(0,3)}static getMonthName(t){return m.MonthNames[t-1]}static getShortMonthName(t){return m.MonthNames[t-1].slice(0,3)}static get12HourNotation(t){return t<12?"AM":"PM"}static getTimezoneInformationFull(t){return t=-t,m.getTimezoneSignal(t)+m.padLeadingZeros(Math.floor(t/60).toString(),2)+":"+m.padLeadingZeros(Math.floor(t%60).toString(),2)}static getTimezoneInformationHoursFull(t){return t=-t,m.getTimezoneSignal(t)+m.padLeadingZeros(Math.floor(t/60).toString(),2)}static getTimezoneInformationHoursShort(t){return t=-t,m.getTimezoneSignal(t)+Math.floor(t/60)}static getTimezoneSignal(t){return t<0?"-":"+"}static padLeadingZeros(t,e){let r=t||"";for(;r.length<e;)r="0"+r;return r}static removeTrailingZeros(t){return(t||"").replace(/0+$/gm,"")}constructor(t,e,r=" ",m=""){this.dateFmt=function(t){return a(t,["y","m","d"])}(t),this.timeFmt=function(t){return a(t,["h","m","s"])}(e),this.dateTimeSep=r,this.tzInformation=m}get dateFormat(){return this.dateFmt.format}get timeFormat(){return this.timeFmt.format}get dateTimeFormat(){return this.dateFmt.format+this.dateTimeSeparator+this.timeFmt.format}getRegExpForDate(){return new RegExp(this.dateFmt.regExp,"i")}get yearIndexForDate(){return this.dateFmt.parts.yIndex}get monthIndexForDate(){return this.dateFmt.parts.mIndex}get dayIndexForDate(){return this.dateFmt.parts.dIndex}get yearFormatForDate(){return this.dateFmt.parts.yFormat}get monthFormatForDate(){return this.dateFmt.parts.mFormat}get dayFormatForDate(){return this.dateFmt.parts.dFormat}get dateSeparator(){return this.dateFmt.separator}getRegExpForTime(){return new RegExp(this.timeFmt.regExp,"i")}get hoursIndexForTime(){return this.timeFmt.parts.hIndex}get minutesIndexForTime(){return this.timeFmt.parts.mIndex}get secondsIndexForTime(){return this.timeFmt.parts.sIndex}get timeSeparator(){return this.timeFmt.separator}get dateTimeSeparator(){return this.dateTimeSep}getRegExpForDateTime(){return new RegExp(this.dateFmt.regExp.substring(0,this.dateFmt.regExp.length-1)+this.dateTimeSeparator+this.timeFmt.regExp.substring(1,this.timeFmt.regExp.length-1)+this.tzInformation+"$","i")}get yearIndexForDateTime(){return this.dateFmt.parts.yIndex}get monthIndexForDateTime(){return this.dateFmt.parts.mIndex}get dayIndexForDateTime(){return this.dateFmt.parts.dIndex}get hoursIndexForDateTime(){return this.timeFmt.parts.hIndex+3}get hoursFormatForTime(){return this.timeFmt.parts.hFormat}get minutesFormatForTime(){return this.timeFmt.parts.mFormat}get secondsFormatForTime(){return this.timeFmt.parts.sFormat}get minutesIndexForDateTime(){return this.timeFmt.parts.mIndex+3}get secondsIndexForDateTime(){return this.timeFmt.parts.sIndex+3}}m.DayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m.MonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],e.DateTimeFormatInfo=m;e.NumberFormatInfo=class{constructor(t,e){this.decimalSep=t,this.groupSep=e,this.generateFormatRegExps(t,e)}generateFormatRegExps(t,e){const r="\\"+t,a="(([0-9]{1,3}("+(e?"\\"+e:"")+"[0-9]{3})*)|([0-9]+))";this.integerFmtRegExp="^[-]?"+a+"$",this.decimalFmtRegExp="^[-]?(("+a+"("+r+"([0-9]+)?)?)|(("+a+")?"+r+"[0-9]+))$"}get decimalSeparator(){return this.decimalSep}get groupSeparator(){return this.groupSep}getRegExpForInteger(){return new RegExp(this.integerFmtRegExp,"i")}getRegExpForDecimal(){return new RegExp(this.decimalFmtRegExp,"i")}getRegExpForJSNumber(){return new RegExp("^-?(?:0|[1-9]\\d*)(?:\\.\\d+)?(?:[eE][+-]?\\d+)?$","i")}};e.ApplicationFormatInfo=class{constructor(t,e){this.defaultDateTimeFormats=[new m("yyyy-MM-dd","HH:mm:ss"),new m("yyyy-MM-dd","HH:mm:ss"),new m("yyyy/MM/dd","HH:mm:ss"),new m("yyyy.MM.dd","HH:mm:ss")],this.defaultNumberFmt=e,this.currentNumberFmt=e,this.defaultDateTimeFormats[0]=t}get defaultDateTimeFormat(){return this.defaultDateTimeFormats[0]}get dateTimeFormats(){return this.defaultDateTimeFormats}set dateTimeFormat(t){this.defaultDateTimeFormats[0]=t}get defaultNumberFormat(){return this.defaultNumberFmt}get numberFormat(){return this.currentNumberFmt}set numberFormat(t){this.currentNumberFmt=t}}}));
define("OutSystems/ClientRuntime/LightImmutable",["require","exports"],(function(t,e){"use strict";function s(t){let e=t.length;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s}Object.defineProperty(e,"__esModule",{value:!0}),e.ImmutableList=e.defineRecordClass=void 0;e.defineRecordClass=function(t){const e=Object.keys(t);function s(t){e.forEach(e=>{this[e]=t[e]})}const n=class{constructor(e){this._=null!=e?e:t}get(t){return this._[t]}set(t,e){const l=new s(this._);return l[t]=e,new n(l)}toJS(){const t={};return e.forEach(e=>{t[e]=this._[e]}),t}};return n};class n{constructor(t,e){if(void 0!==e)this._values=t,this._lengths=e;else if(void 0!==t){const e=n.fromJS(t);this._values=e._values,this._lengths=e._lengths}else this._values=[],this._lengths=[]}clear(){return new n}clone(){return this}count(){let t=0,e=this._lengths.length;for(;e-- >0;)t+=this._lengths[e];return t}isEmpty(){return 0===this._lengths.length}get(t){let e=0,s=t;const n=this._lengths.length;for(;e<n&&t>=0;){if(s<this._lengths[e])return this._values[e][s];s-=this._lengths[e],e++}}set(t,e){let l=0,r=t;const h=s(this._values),i=this._lengths,o=i.length;for(;l<o&&t>=0;){if(r<this._lengths[l])return h[l]=s(h[l]),h[l][r]=e,new n(h,i);r-=i[l],l++}}push(t){let e,l,r=this._values.length-1;r<0?(r=0,e=[[]],l=[0]):(e=s(this._values),l=s(this._lengths));const h=e[r];if(h.length<128){const s=h.length,n=new Array(s+1);let i=s;for(;i-- >0;)n[i]=h[i];n[s]=t,e[r]=n,l[r]++}else{const s=[t];e.push(s),l.push(1)}return new n(e,l)}insert(t,e){let l=0,r=t;const h=s(this._values),i=s(this._lengths);let o=i.length;for(;l<o&&r>=0;){if(r<i[l]){if(128===i[l]){const t=64,e=128-t;i.splice(l,1,t,e);const s=new Array(t),n=new Array(e);for(let e=0;e<t;e++)s[e]=h[l][e];for(let s=0,r=t;s<e;)n[s++]=h[l][r++];h.splice(l,1,s,n),o++;continue}let t=0;const s=i[l],u=new Array(s+1),c=h[l];for(;t<r;t++)u[t]=c[t];u[r]=e;let a=t+1;for(;t<s;)u[a++]=c[t++];return i[l]++,h[l]=u,new n(h,i)}r-=i[l],l++}return i.push(1),h.push([e]),new n(h,i)}remove(t){let e=0,l=t;const r=s(this._lengths),h=s(this._values),i=r.length;for(;e<i&&l>=0;){if(l<r[e]){const t=--r[e],s=new Array(t);let i=0,o=0;for(;i<t;)i===l&&o++,s[i++]=h[e][o++];return h[e]=s,0===r[e]&&(r.splice(e,1),h.splice(e,1)),new n(h,r)}l-=r[e],e++}}reduce(t,e){for(let s=0;s<this._values.length;s++){const n=this._values[s];for(let s=0;s<n.length;s++)e=t(e,n[s])}return e}map(t){const e=new Array(this.count());let s=0;for(let n=0;n<this._values.length;n++){const l=this._values[n];for(let n=0;n<l.length;n++)e[s]=t(l[n],s),s++}return e}pushAll(t){if(0===t.length)return this;const e=new n(t),s=this._values.concat(e._values),l=this._lengths.concat(e._lengths);return new n(s,l)}forEach(t){for(let e=0;e<this._values.length;e++){const s=this._values[e];for(let e=0;e<s.length;e++)t(s[e])}}addFromOther(t){if(0===t.count())return this;if(0===this._values.length)return t;const e=new Array(this._lengths.length+t._lengths.length),s=new Array(this._values.length+t._values.length);let l=0,r=0;for(;l<this._values.length;)s[l]=this._values[l],e[l]=this._lengths[l],l++;for(;r<t._values.length;)s[l]=t._values[r],e[l]=t._lengths[r],l++,r++;return new n(s,e)}static fromJS(t){const e=0|Math.ceil(t.length/128),s=new Array(e),l=new Array(e);let r=0,h=0;for(let n=0;n<e;n++){h=t.length-r;const e=h>128?128:h;l[n]=e,s[n]=new Array(e);for(let l=0;l<e;l++)s[n][l]=t[r+l];r+=e}return new n(s,l)}}e.ImmutableList=n}));
!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("long",[],i):"object"==typeof exports?exports.Long=i():t.Long=i()}("undefined"!=typeof self?self:this,(function(){return function(t){function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}var n={};return i.m=t,i.c=n,i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:e})},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=0)}([function(t,i){function n(t,i,n){this.low=0|t,this.high=0|i,this.unsigned=!!n}function e(t){return!0===(t&&t.__isLong__)}function r(t,i){var n,e,r;return i?(r=0<=(t>>>=0)&&t<256)&&(e=l[t])?e:(n=h(t,(0|t)<0?-1:0,!0),r&&(l[t]=n),n):(r=-128<=(t|=0)&&t<128)&&(e=f[t])?e:(n=h(t,t<0?-1:0,!1),r&&(f[t]=n),n)}function s(t,i){if(isNaN(t))return i?p:m;if(i){if(t<0)return p;if(t>=c)return q}else{if(t<=-v)return _;if(t+1>=v)return E}return t<0?s(-t,i).neg():h(t%d|0,t/d|0,i)}function h(t,i,e){return new n(t,i,e)}function u(t,i,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return m;if("number"==typeof i?(n=i,i=!1):i=!!i,(n=n||10)<2||36<n)throw RangeError("radix");var e;if((e=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===e)return u(t.substring(1),i,n).neg();for(var r=s(a(n,8)),h=m,o=0;o<t.length;o+=8){var g=Math.min(8,t.length-o),f=parseInt(t.substring(o,o+g),n);if(g<8){var l=s(a(n,g));h=h.mul(l).add(s(f))}else h=(h=h.mul(r)).add(s(f))}return h.unsigned=i,h}function o(t,i){return"number"==typeof t?s(t,i):"string"==typeof t?u(t,i):h(t.low,t.high,"boolean"==typeof i?i:t.unsigned)}t.exports=n;var g=null;try{g=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=e;var f={},l={};n.fromInt=r,n.fromNumber=s,n.fromBits=h;var a=Math.pow;n.fromString=u,n.fromValue=o;var d=4294967296,c=d*d,v=c/2,w=r(1<<24),m=r(0);n.ZERO=m;var p=r(0,!0);n.UZERO=p;var y=r(1);n.ONE=y;var b=r(1,!0);n.UONE=b;var N=r(-1);n.NEG_ONE=N;var E=h(-1,2147483647,!1);n.MAX_VALUE=E;var q=h(-1,-1,!0);n.MAX_UNSIGNED_VALUE=q;var _=h(0,-2147483648,!1);n.MIN_VALUE=_;var B=n.prototype;B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},B.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var i=s(t),n=this.div(i),e=n.mul(i).sub(this);return n.toString(t)+e.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var r=s(a(t,6),this.unsigned),h=this,u="";;){var o=h.div(r),g=(h.sub(o.mul(r)).toInt()>>>0).toString(t);if((h=o).isZero())return g+u;for(;g.length<6;)g="0"+g;u=""+g+u}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&0==(t&1<<i);i--);return 0!=this.high?i+33:i+1},B.isZero=function(){return 0===this.high&&0===this.low},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return 1==(1&this.low)},B.isEven=function(){return 0==(1&this.low)},B.equals=function(t){return e(t)||(t=o(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},B.eq=B.equals,B.notEquals=function(t){return!this.eq(t)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(t){return this.comp(t)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(t){return this.comp(t)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(t){return this.comp(t)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(t){return this.comp(t)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(t){if(e(t)||(t=o(t)),this.eq(t))return 0;var i=this.isNegative(),n=t.isNegative();return i&&!n?-1:!i&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(y)},B.neg=B.negate,B.add=function(t){e(t)||(t=o(t));var i=this.high>>>16,n=65535&this.high,r=this.low>>>16,s=65535&this.low,u=t.high>>>16,g=65535&t.high,f=t.low>>>16,l=0,a=0,d=0,c=0;return d+=(c+=s+(65535&t.low))>>>16,a+=(d+=r+f)>>>16,l+=(a+=n+g)>>>16,l+=i+u,h((d&=65535)<<16|(c&=65535),(l&=65535)<<16|(a&=65535),this.unsigned)},B.subtract=function(t){return e(t)||(t=o(t)),this.add(t.neg())},B.sub=B.subtract,B.multiply=function(t){if(this.isZero())return m;if(e(t)||(t=o(t)),g)return h(g.mul(this.low,this.high,t.low,t.high),g.get_high(),this.unsigned);if(t.isZero())return m;if(this.eq(_))return t.isOdd()?_:m;if(t.eq(_))return this.isOdd()?_:m;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(w)&&t.lt(w))return s(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,n=65535&this.high,r=this.low>>>16,u=65535&this.low,f=t.high>>>16,l=65535&t.high,a=t.low>>>16,d=65535&t.low,c=0,v=0,p=0,y=0;return p+=(y+=u*d)>>>16,v+=(p+=r*d)>>>16,p&=65535,v+=(p+=u*a)>>>16,c+=(v+=n*d)>>>16,v&=65535,c+=(v+=r*a)>>>16,v&=65535,c+=(v+=u*l)>>>16,c+=i*d+n*a+r*l+u*f,h((p&=65535)<<16|(y&=65535),(c&=65535)<<16|(v&=65535),this.unsigned)},B.mul=B.multiply,B.divide=function(t){if(e(t)||(t=o(t)),t.isZero())throw Error("division by zero");if(g)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?h((this.unsigned?g.div_u:g.div_s)(this.low,this.high,t.low,t.high),g.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?p:m;var i,n,r;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return p;if(t.gt(this.shru(1)))return b;r=p}else{if(this.eq(_))return t.eq(y)||t.eq(N)?_:t.eq(_)?y:(i=this.shr(1).div(t).shl(1)).eq(m)?t.isNegative()?y:N:(n=this.sub(t.mul(i)),r=i.add(n.div(t)));if(t.eq(_))return this.unsigned?p:m;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();r=m}for(n=this;n.gte(t);){i=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var u=Math.ceil(Math.log(i)/Math.LN2),f=u<=48?1:a(2,u-48),l=s(i),d=l.mul(t);d.isNegative()||d.gt(n);)d=(l=s(i-=f,this.unsigned)).mul(t);l.isZero()&&(l=y),r=r.add(l),n=n.sub(d)}return r},B.div=B.divide,B.modulo=function(t){return e(t)||(t=o(t)),g?h((this.unsigned?g.rem_u:g.rem_s)(this.low,this.high,t.low,t.high),g.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return h(~this.low,~this.high,this.unsigned)},B.and=function(t){return e(t)||(t=o(t)),h(this.low&t.low,this.high&t.high,this.unsigned)},B.or=function(t){return e(t)||(t=o(t)),h(this.low|t.low,this.high|t.high,this.unsigned)},B.xor=function(t){return e(t)||(t=o(t)),h(this.low^t.low,this.high^t.high,this.unsigned)},B.shiftLeft=function(t){return e(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?h(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):h(0,this.low<<t-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(t){return e(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?h(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):h(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(t){if(e(t)&&(t=t.toInt()),0==(t&=63))return this;var i=this.high;return t<32?h(this.low>>>t|i<<32-t,i>>>t,this.unsigned):h(32===t?i:i>>>t-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.toSigned=function(){return this.unsigned?h(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:h(this.low,this.high,!0)},B.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},B.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},n.fromBytes=function(t,i,e){return e?n.fromBytesLE(t,i):n.fromBytesBE(t,i)},n.fromBytesLE=function(t,i){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},n.fromBytesBE=function(t,i){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)}}])}));
define("OutSystems/ClientRuntime/LongInteger",["require","exports","long"],(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=t("long");class a{constructor(t,e,n){this.neg=this.negate,this.eq=this.equals,this.lt=this.lessThan,this.lte=this.lessThanOrEqual,this.gt=this.greaterThan,this.gte=this.greaterThanOrEqual,this.internalValue=new r(t,e,n)}static fromNumber(t){const e=new a(0);return e.internalValue=n.fromNumber(t),e}static fromString(t){const e=new a(0);return e.internalValue=n.fromString(t),e}static fromValue(t){const e="object"==typeof t?t.internalValue:t,r=new a(0);return r.internalValue=n.fromValue(e),r}static fromObject(t){const e=n.fromValue(t);return a.fromString(e.toString())}static unwrapInputValue(t){return"string"==typeof t||"number"==typeof t?t:"internalValue"in t?t.internalValue:t}negate(){const t=this.internalValue.negate();return a.fromObject(t)}add(t){const e=a.unwrapInputValue(t),n=this.internalValue.add(e);return a.fromObject(n)}sub(t){const e=a.unwrapInputValue(t),n=this.internalValue.sub(e);return a.fromObject(n)}mul(t){const e=a.unwrapInputValue(t),n=this.internalValue.mul(e);return a.fromObject(n)}div(t){const e=a.unwrapInputValue(t),n=this.internalValue.div(e);return a.fromObject(n)}and(t){const e=a.unwrapInputValue(t),n=this.internalValue.and(e);return a.fromObject(n)}equals(t){const e=a.unwrapInputValue(t);return this.internalValue.equals(e)}lessThan(t){const e=a.unwrapInputValue(t);return this.internalValue.lessThan(e)}lessThanOrEqual(t){const e=a.unwrapInputValue(t);return this.internalValue.lessThanOrEqual(e)}greaterThan(t){const e=a.unwrapInputValue(t);return this.internalValue.greaterThan(e)}greaterThanOrEqual(t){const e=a.unwrapInputValue(t);return this.internalValue.greaterThanOrEqual(e)}toNumber(){return this.internalValue.toNumber()}toString(){return this.internalValue.toString()}valueOf(){return this.internalValue.valueOf()}}a.defaultValue=a.fromObject(n.ZERO),a.MIN_VALUE=a.fromObject(n.MIN_VALUE),a.MAX_VALUE=a.fromObject(n.MAX_VALUE),e.default=a}));
define("OutSystems/ClientRuntime/modules/Communication/Constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_DEBUG_TIMEOUT=t.CUSTOM_HEADER_PREFIX=void 0,t.CUSTOM_HEADER_PREFIX="outsystems-",t.DEFAULT_DEBUG_TIMEOUT=60}));
define("OutSystems/ClientRuntime/modules/Communication/Headers",["require","exports","./Constants"],(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractCustomHeaders=t.buildCustomHeaders=void 0,t.buildCustomHeaders=function(e,t){if(t=null!=t?t:o.CUSTOM_HEADER_PREFIX,"object"!=typeof e||null===e)return;const n={};for(const[o,s]of Object.entries(e))n[t+o]=s;return n},t.extractCustomHeaders=function(e,t){const n=(t=null!=t?t:o.CUSTOM_HEADER_PREFIX).toLowerCase();if("object"!=typeof e||null===e)return{};const s={};for(const[o,r]of Object.entries(e))o.toLowerCase().startsWith(n)&&(s[o.substring(t.length)]=r);return s}}));
define("OutSystems/ClientRuntime/modules/Communication/Communication",["require","exports","tslib","@outsystems/communication-js","@outsystems/logger-js","../../ApplicationInfo","../../Exceptions","../../Logger","../Auth/Authentication","../Injector/Injector","../Injector/KnownServices","./Constants","./Headers"],(function(e,o,t,n,r,i,s,a,l,u,d,c,p){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.post=o.getResponseUrl=o.get=void 0;o.get=({url:e,params:o,headers:n,responseType:r,useLocaleInfo:i,timeout:s,timeoutHandler:a,baseURL:l,httpClient:c=u.default.resolve(d.ServiceNames.HttpClient)})=>t.__awaiter(void 0,void 0,void 0,(function*(){if(!c)throw new Error("Could not resolve the http client instance.");try{return yield c.get({url:e,params:o,headers:n,responseType:r,useLocaleInfo:i,timeout:s,timeoutHandler:a,baseURL:l})}catch(e){throw m(e)}}));o.getResponseUrl=({url:e,params:o,headers:n,useLocaleInfo:r,timeout:i,timeoutHandler:s,baseURL:a,httpClient:l=u.default.resolve(d.ServiceNames.HttpClient)})=>t.__awaiter(void 0,void 0,void 0,(function*(){if(!l)throw new Error("Could not resolve the http client instance.");return l.getResponseUrl({url:e,params:o,headers:n,useLocaleInfo:r,timeout:i,timeoutHandler:s,baseURL:a})}));o.post=({url:e,payload:o,params:r,headers:s,contentType:a,timeout:C,timeoutHandler:g,useLocaleInfo:y,baseURL:E,responseHandler:w,refreshAuthTokens:b=l.refreshTokens,httpClient:H=u.default.resolve(d.ServiceNames.HttpClient),lifecycleEventsManager:I=u.default.resolve(d.ServiceNames.LifecycleEventsManager)})=>t.__awaiter(void 0,void 0,void 0,(function*(){if(!H)throw new Error("Could not resolve the http client instance.");const t=(0,p.buildCustomHeaders)(s),l=Object.assign(Object.assign({},t),{"content-type":"application/json; charset=UTF-8"}),u=i.isDebugEnabled()?c.DEFAULT_DEBUG_TIMEOUT:C;try{const t=yield H.post({url:e,payload:o,params:r,headers:l,contentType:null!=a?a:n.ContentType.Json,timeout:u,timeoutHandler:g,useLocaleInfo:y,baseURL:E,responseHandler:v(w)}),i=h(t);if(i)throw i;return(null==t?void 0:t.shouldRefreshToken)&&(yield b()),(null==t?void 0:t.versionInfo)&&f(t,(e,o)=>null==I?void 0:I.onNewVersion(e,o)),null==t?void 0:t.data}catch(e){throw m(e)}}));const v=e=>{if("function"==typeof e)return({data:o,responseHeaders:t})=>{const n=(0,p.extractCustomHeaders)(t);e({data:o,responseHeaders:n})}},m=e=>{var o,t,i,l,u,d;if("OS-CLRT-40103"===e.errorCode)throw a.error("Communication","User is not logged in",e.errorCode,e,r.Visibility.Internal),new s.Exceptions.SecurityException("Not authorized",(0,s.getStack)(e));if((d=e.errorCode)&&Object.values(n.ErrorCodes).includes(d)){const n=null!==(t=null===(o=e.response)||void 0===o?void 0:o.exception)&&void 0!==t?t:e;throw new s.Exceptions.CommunicationException("CommunicationException: "+(null!==(i=n.message)&&void 0!==i?i:e.message),(0,s.getStack)(n),e.errorCode,e.category)}return e.errorCode=null!==(l=e.errorCode)&&void 0!==l?l:n.ErrorCodes.Communication_Default,e.category=null!==(u=e.category)&&void 0!==u?u:"Communication",e},f=(e,o)=>{var t,n,r,i;if(null===(t=e.versionInfo)||void 0===t?void 0:t.hasModuleVersionChanged){if(null===(n=e.versionInfo)||void 0===n?void 0:n.hasApiVersionChanged)throw o(!0,!!(null===(r=e.versionInfo)||void 0===r?void 0:r.isAutoUpgradeEnabled)),new s.Exceptions.ViewHasChangedException("View has changed.");o(!1,!!(null===(i=e.versionInfo)||void 0===i?void 0:i.isAutoUpgradeEnabled))}},h=e=>{var o;if(null==e?void 0:e.exception){const t=(0,s.getException)(e.exception);return a.error("Communication","Post request failed: "+t.message,null!==(o=t.errorCode)&&void 0!==o?o:n.ErrorCodes.Communication_Default,t),t}return null}}));
define("OutSystems/ClientRuntime/DataTypes",["require","exports","tslib","./Decimal","./Exceptions","./Flow","./Format","./LightImmutable","./LongInteger","./modules/Communication/Communication"],(function(t,e,r,s,i,a,n,o,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypeValidations=e.ComplexTypeKeyedTypeFactory=e.BasicTypeKeyedTypeFactory=e.TypeKeyedTypeFactory=e.RecordTypeFactory=e.ErrorHandlerOutputType=e.JSONSerializeOutputType=e.RecordWithStaticConstructor=e.VariableHolder=e.BasicVariableHolder=e.TextList=e.BinaryDataList=e.BooleanList=e.PhoneNumberList=e.EmailList=e.CurrencyList=e.DecimalList=e.TimeList=e.DateTimeList=e.DateList=e.LongIntegerList=e.IntegerList=e.GenericRecordList=e.BasicTypeList=e.List=e.GenericRecord=e.Record=e.ImmutableBase=e.ImmutableListWithTracking=e.defaultForType=e.areBinaryNulls=e.equals=e.compare=e.ListCache=e.Cache=e.Constants=e.DateTime=e.BinaryData=e.LongInteger=e.Decimal=e.mapDataTypeToName=e.DataTypes=void 0,e.Decimal=s.default,e.LongInteger=u.default;function h(t,e){return null==t?e:t}var l;!function(t){t[t.Integer=0]="Integer",t[t.LongInteger=1]="LongInteger",t[t.Decimal=2]="Decimal",t[t.Currency=3]="Currency",t[t.Text=4]="Text",t[t.PhoneNumber=5]="PhoneNumber",t[t.Email=6]="Email",t[t.Boolean=7]="Boolean",t[t.Date=8]="Date",t[t.DateTime=9]="DateTime",t[t.Time=10]="Time",t[t.Record=11]="Record",t[t.RecordList=12]="RecordList",t[t.BinaryData=13]="BinaryData",t[t.Object=14]="Object"}(l=e.DataTypes||(e.DataTypes={}));e.mapDataTypeToName=t=>{switch(t){case l.Integer:return"Integer";case l.LongInteger:return"Long Integer";case l.Decimal:return"Decimal";case l.Currency:return"Currency";case l.Text:return"Text";case l.PhoneNumber:return"Phone Number";case l.Email:return"Email";case l.Boolean:return"Boolean";case l.Date:return"Date";case l.DateTime:return"Date Time";case l.Time:return"Time";case l.Record:return"Record";case l.RecordList:return"List";case l.BinaryData:return"Binary Data";case l.Object:return"Object";default:return"Unknown: "+t}};class d{constructor(t,e,r){this._url=e,this.getOfflineContent=r,this._cachedBlob=null,this.authenticatedUrlsRegex=[/screenservices\/.*\/_BinaryContent\/.*/],"undefined"!=typeof Blob&&t instanceof Blob?(this._cachedBlob=t,this.getOfflineContent=()=>this._content?Promise.resolve(this._content):d.blobToBase64(this._cachedBlob)):this._content=t||null}get url(){return this._url}set url(t){this._url=t,this.clearCachedBlob()}get cachedBlob(){return this._cachedBlob}get content(){return this._content}set content(t){this._content=t,this.clearCachedBlob()}needsAuthentication(){var t;const e=null!==(t=this._url)&&void 0!==t?t:"";return this.authenticatedUrlsRegex.some(t=>t.test(e))}loadBlobData(){var t;return r.__awaiter(this,void 0,void 0,(function*(){return(0,c.get)({url:null!==(t=this._url)&&void 0!==t?t:"",responseType:"blob"}).then(t=>t)}))}loadContent(){return r.__awaiter(this,void 0,void 0,(function*(){return this.needsAuthentication()?this.loadBlobData().then(t=>(this._cachedBlob=t,Promise.resolve(this))):this.getOfflineContent?this.getOfflineContent().then(t=>(this.content=t,Promise.resolve(this))):a.executeSequence(()=>this)}))}hasContent(){return!!(this._url&&!this.needsAuthentication()||this._content)}fastEquals(t){return t&&this.constructor===t.constructor&&this._url===t._url&&this._content===t._content&&(!!this.getOfflineContent&&!!t.getOfflineContent||!this.getOfflineContent&&!t.getOfflineContent)}base64toHex(t){const e=atob(t);let r="";for(let t=0;t<e.length;t++){const s=e.charCodeAt(t).toString(16);r+=2===s.length?s:"0"+s}return r}getContentType(){if(this._content){const t=this.base64toHex(this._content.substr(0,16));return"00000100"===t.substr(0,8)?"image/x-icon":"ffd8ffdb"===t.substr(0,8)||"ffd8ffe0"===t.substr(0,8)||"ffd8ffe1"===t.substr(0,8)?"image/jpeg":"49492a00"===t.substr(0,8)||"4d4d002a"===t.substr(0,8)?"image/tiff":"424d"===t.substr(0,4)?"image/bmp":"474946"===t.substr(0,6)?"image/gif":"89504e47"===t.substr(0,8)?"image/png":"application/octet-stream"}return null}toDataURI(){return this._content?`data:${this.getContentType()};base64,${this._content}`:null}toBlob(){var t;if(!this._cachedBlob&&this._content){const e=null!==(t=this.getContentType())&&void 0!==t?t:void 0;this._cachedBlob=d.base64toBlob(this._content,e)}return this._cachedBlob}toArrayBuffer(){return this._content?d.base64ToArrayBuffer(this._content):null}get length(){const t=this.toBlob();return t?t.size:0}static blobToBase64(t){return new Promise((e,r)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=()=>{const t=s.result;e(t.substring(t.indexOf(",")+1))},s.onerror=()=>{r(s.error)}})}static base64toBlob(t,e="",r=512){const s=atob((t||"").replace(/\s/g,"")),i=[];for(let t=0;t<s.length;t+=r){const e=s.slice(t,t+r),a=new Array(e.length);for(let t=0;t<e.length;t++)a[t]=e.charCodeAt(t);const n=new Uint8Array(a);i.push(n)}return new Blob(i,{type:e})}static base64ToArrayBuffer(t){return Uint8Array.from(atob(t),t=>t.charCodeAt(0)).buffer}clearCachedBlob(){this._cachedBlob=null}}d.defaultValue=new d,e.BinaryData=d;class m{static get defaultValue(){return m.defaultValueField}constructor(t,e,r,s,i,a,n){if(0===arguments.length)this.date=new Date(1900,0,1,0,0,0,0);else if(1===arguments.length)if(t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)){const e=t.getTime();isNaN(e)?this.date=new Date(1900,0,1,0,0,0,0):this.date=new Date(e)}else this.date=new Date(t);else h(t,1900)<100?(this.date=new Date(100,0,1,0,0,0,0),this.date.setFullYear(h(t,1900)),this.date.setMonth(h(e,1)-1),this.date.setDate(h(r,1)),this.date.setHours(h(s,0)),this.date.setMinutes(h(i,0)),this.date.setSeconds(h(a,0)),this.date.setMilliseconds(h(n,0))):this.date=new Date(h(t,1900),h(e,1)-1,h(r,1),h(s,0),h(i,0),h(a,0),h(n,0))}get year(){return this.date.getFullYear()}get month(){return this.date.getMonth()+1}get day(){return this.date.getDate()}get hours(){return this.date.getHours()}get minutes(){return this.date.getMinutes()}get seconds(){return this.date.getSeconds()}get milliseconds(){return this.date.getMilliseconds()}get weekDay(){return this.date.getDay()}addYears(t){const e=new m(this.year+t,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds);return 2===this.month&&29===this.day&&3===e.month?new m(e.year,2,28,e.hours,e.minutes,e.seconds,e.milliseconds):e}daysInMonth(t,e){return new Date(e,t,0).getDate()}addMonths(t){const e=new m(this.year,this.month+t,this.day,this.hours,this.minutes,this.seconds,this.milliseconds);return e.day===this.day?e:new m(e.year,e.month-1,this.daysInMonth(e.month-1,e.year),e.hours,e.minutes,e.seconds,e.milliseconds)}addDays(t){return new m(this.year,this.month,this.day+t,this.hours,this.minutes,this.seconds,this.milliseconds)}addHours(t){return new m(this.year,this.month,this.day,this.hours+t,this.minutes,this.seconds,this.milliseconds)}addMinutes(t){return new m(this.year,this.month,this.day,this.hours,this.minutes+t,this.seconds,this.milliseconds)}addSeconds(t){return new m(this.year,this.month,this.day,this.hours,this.minutes,this.seconds+t,this.milliseconds)}addMilliseconds(t){return new m(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds+t)}equals(t){return!!t&&this.date.getTime()===t.date.getTime()}eq(t){return this.equals(t)}greaterThan(t){return this.date>t.date}gt(t){return this.greaterThan(t)}greaterThanOrEqualTo(t){return this.date>=t.date}gte(t){return this.greaterThanOrEqualTo(t)}lessThan(t){return this.date<t.date}lt(t){return this.lessThan(t)}lessThanOrEqualTo(t){return this.date<=t.date}lte(t){return this.lessThanOrEqualTo(t)}toNative(){return new Date(this.date.getTime())}getTime(){return this.date.getTime()}valueOf(){return this.date.valueOf()}static fromISODate(t){return p.RFC3339_DATEPART.test(t)?m.internalFromUTCWithoutConversion(t+"T00:00:00Z"):m.defaultValue}toISODate(){return this.toString(p.RFC3339_DATEPART_FORMAT)}static fromISOTime(t){return p.RFC3339_TIMEPART.test(t)?m.internalFromUTCWithoutConversion("1900-01-01T"+t+"Z"):m.defaultValue}toISOTime(){return this.toString(p.RFC3339_TIMEPART_FORMAT)}static fromISODateTime(t){if(""===(t=t||"")||t.indexOf("1900-01-01")>=0&&t.indexOf("00:00:00")>=0)return m.defaultValue;if(t.indexOf("T")>0&&!/([+\-]\d{2}((:\d{2})|(\d{2})?)|Z)$/.test(t))return m.internalFromUTCWithoutConversion(t.trim()+"Z");t=t.replace(/([+-]\d{2})$/,(function(t){return t+"00"}));const e=Date.parse(t);return isNaN(e)?m.defaultValue:new m(e)}static internalFromUTCWithoutConversion(t){const e=Date.parse(t);if(!isNaN(e)){const t=new Date(e);return new m(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())}return m.defaultValue}getMillisecondsString(){return(this.milliseconds/1e3).toFixed(3).substring(2,5)}toString(t){return void 0===t?this.equals(m.defaultValue)?"1900-01-01T00:00:00":this.date.toISOString():t.replace(/(\\.)|dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|ff?f?|FF?F?|\.FF?F?|tt?|zz?z?/g,t=>{if(0===t.indexOf("\\"))return t.substring(1);switch(t){case"hh":case"h":const e=this.hours<13?this.hours:this.hours-12;return n.DateTimeFormatInfo.padLeadingZeros((0===this.hours?12:e).toString(),t.length);case"HH":case"H":return n.DateTimeFormatInfo.padLeadingZeros(this.hours.toString(),t.length);case"mm":case"m":return n.DateTimeFormatInfo.padLeadingZeros(this.minutes.toString(),t.length);case"ss":case"s":return n.DateTimeFormatInfo.padLeadingZeros(this.seconds.toString(),t.length);case"fff":return this.getMillisecondsString();case"ff":return this.getMillisecondsString().substring(0,2);case"f":return this.getMillisecondsString().substring(0,1);case".FFF":case".FF":case".F":return 0===this.milliseconds?"":"."+n.DateTimeFormatInfo.removeTrailingZeros(this.getMillisecondsString());case"FFF":return n.DateTimeFormatInfo.removeTrailingZeros(this.getMillisecondsString());case"FF":return n.DateTimeFormatInfo.removeTrailingZeros(this.getMillisecondsString()).substring(0,2);case"F":return n.DateTimeFormatInfo.removeTrailingZeros(this.getMillisecondsString()).substring(0,1);case"yyyy":case"yyy":const r=this.year.toString();return"0"===r.charAt(0)?this.year.toString().substring(1):r;case"yy":return this.year.toString().substring(2,4);case"y":return Number(this.year.toString().substring(2,4)).toString();case"dddd":return n.DateTimeFormatInfo.getDayName(this.weekDay);case"ddd":return n.DateTimeFormatInfo.getShortDayName(this.weekDay);case"dd":case"d":return n.DateTimeFormatInfo.padLeadingZeros(this.day.toString(),t.length);case"MMMM":return n.DateTimeFormatInfo.getMonthName(this.month);case"MMM":return n.DateTimeFormatInfo.getShortMonthName(this.month);case"MM":case"M":return n.DateTimeFormatInfo.padLeadingZeros(this.month.toString(),t.length);case"t":return n.DateTimeFormatInfo.get12HourNotation(this.hours).substring(0,1);case"tt":return n.DateTimeFormatInfo.get12HourNotation(this.hours);case"zzz":return n.DateTimeFormatInfo.getTimezoneInformationFull(this.date.getTimezoneOffset());case"zz":return n.DateTimeFormatInfo.getTimezoneInformationHoursFull(this.date.getTimezoneOffset());case"z":return n.DateTimeFormatInfo.getTimezoneInformationHoursShort(this.date.getTimezoneOffset());default:return t}})}}var p;m.defaultValueField=new m,e.DateTime=m,function(t){t.RFC3339_TIMEPART=/^([01][0-9]|2[0-3]):([0-5][0-9])(:[0-5][0-9](\.\d+)?)?$/,t.RFC3339_DATEPART=/^\d{4,}-(0\d|1[012])-([0-2]\d|3[01])$/,t.RFC3339_TIMEPART_FORMAT="HH:mm:ss",t.RFC3339_DATEPART_FORMAT="yyyy-MM-dd",t.MIN_INTEGER_VALUE=-2147483648,t.MAX_INTEGER_VALUE=2147483647,t.MIN_LONGINTEGER_VALUE=u.default.MIN_VALUE,t.MAX_LONGINTEGER_VALUE=u.default.MAX_VALUE,t.MIN_DECIMAL_VALUE=new s.default("2").pow(96).neg(),t.MAX_DECIMAL_VALUE=new s.default("2").pow(96).minus(1),t.MIN_DATE_VALUE=new m(1753,1,1),t.MAX_DATE_VALUE=new m(9999,12,31),t.MIN_TIME_VALUE=m.defaultValue,t.MAX_TIME_VALUE=m.defaultValue.addHours(23).addMinutes(59).addSeconds(59),t.MIN_DATETIME_VALUE=new m(1753,1,1,0,0,0),t.MAX_DATETIME_VALUE=new m(9999,12,31,23,59,59),t.DEFAULT_INTEGER=0,t.DEFAULT_LONGINTEGER=u.default.defaultValue,t.DEFAULT_DECIMAL=s.default.defaultValue,t.DEFAULT_CURRENCY=s.default.defaultValue,t.DEFAULT_TEXT="",t.DEFAULT_PHONENUMBER="",t.DEFAULT_EMAIL="",t.DEFAULT_BOOLEAN=!1,t.DEFAULT_DATE=m.defaultValue,t.DEFAULT_DATETIME=m.defaultValue,t.DEFAULT_TIME=m.defaultValue,t.DEFAULT_BINARYDATA=d.defaultValue,t.DEFAULT_OBJECT=null,t.FORMAT=new n.ApplicationFormatInfo(new n.DateTimeFormatInfo("yyyy-MM-dd","HH:mm:ss"),new n.NumberFormatInfo(".","")),t.ISO_DATE_FORMAT_REGEXP=/^\d{4,}-(0\d|1[012])-([0-2]\d|3[01])([T ]\d{2}:\d{2}(:\d{2}(\.\d+)?(([+\-]\d{2}((:\d{2})|(\d{2})?))|Z)?)?)?$/i}(p=e.Constants||(e.Constants={}));class g{constructor(){this.map={}}getItem(t){return this.map[t]}setItem(t,e){this.map[t]=e}invalidate(t){void 0===t?this.map={}:this.setItem(t,void 0)}clone(){const t=new g;for(const e in this.map)t.setItem(e,this.map[e]);return t}}e.Cache=g;class T{constructor(){this.list=[]}getItem(t){if(!(t>=this.length))return this.list[t]}append(t){this.list.push(t)}appendMultiple(t){this.list=this.list.concat(new Array(t))}setItem(t,e){this.list[t]=e}insert(t,e){this.list.splice(t,0,e)}invalidate(t){void 0===t?this.list=[]:this.list.splice(t,1)}get length(){return this.list.length}}function y(t,e){if("string"==typeof t){const r=e;return t.localeCompare(r)}return"number"==typeof t?t-e:"boolean"==typeof t?!t&&e?-1:t&&!e?1:0:t.lessThan(e)?-1:t.greaterThan(e)?1:0}function f(t,e){return t&&e&&e.equals instanceof Function?e.equals(t):e===t}function I(t){switch(t){case l.Integer:return p.DEFAULT_INTEGER;case l.LongInteger:return p.DEFAULT_LONGINTEGER;case l.Decimal:return p.DEFAULT_DECIMAL;case l.Currency:return p.DEFAULT_CURRENCY;case l.Text:return p.DEFAULT_TEXT;case l.PhoneNumber:return p.DEFAULT_PHONENUMBER;case l.Email:return p.DEFAULT_EMAIL;case l.Date:return p.DEFAULT_DATE;case l.DateTime:return p.DEFAULT_DATETIME;case l.Time:return p.DEFAULT_TIME;case l.Boolean:return p.DEFAULT_BOOLEAN;case l.BinaryData:return p.DEFAULT_BINARYDATA;case l.Object:return p.DEFAULT_OBJECT;default:throw new TypeError("Records and Record lists are not basic types")}}e.ListCache=T,e.compare=y,e.equals=f,e.areBinaryNulls=function(t,e){return!t.hasContent()&&!e.hasContent()},e.defaultForType=I;class E{constructor(t,e,r,s,i){if(this.emptyListItem=t,this.data=null!=e?e:new o.ImmutableList,this.itemIds=null!=r?r:new o.ImmutableList,this._itemIdSeed=null!=s?s:0,this._modelId=i||E.nextModelId++,e&&!r)for(let t=0,e=this.data.count();t<e;t++)this.itemIds=this.itemIds.push(this._itemIdSeed),this._itemIdSeed=this._itemIdSeed+1|0}get modelId(){return this._modelId}push(t){return new E(this.emptyListItem,this.data.push(t),this.itemIds.push(this._itemIdSeed),this._itemIdSeed+1|0,this._modelId)}addFromOther(t){return new E(this.emptyListItem,this.data.addFromOther(t.data),this.itemIds.pushAll(t.data.map(()=>this._itemIdSeed++)),this._itemIdSeed,this._modelId)}pushAll(t){return new E(this.emptyListItem,this.data.pushAll(t),this.itemIds.pushAll(t.map(()=>this._itemIdSeed++)),this._itemIdSeed,this._modelId)}remove(t){return new E(this.emptyListItem,this.data.remove(t),this.itemIds.remove(t),this._itemIdSeed,this._modelId)}insert(t,e){return new E(this.emptyListItem,this.data.insert(t,e),this.itemIds.insert(t,this._itemIdSeed),this._itemIdSeed+1|0,this._modelId)}sort(t,e,r){const s=this.data.map((r,s)=>({item:t(s),itemId:this.itemIds.get(s),by:e(t(s))})),i=r?1:-1;s.sort((t,e)=>i*y(t.by,e.by));const a=o.ImmutableList.fromJS(s.map(t=>t.item)),n=o.ImmutableList.fromJS(s.map(t=>t.itemId));return new E(this.emptyListItem,a,n,this._itemIdSeed,this._modelId)}getEmptyListItem(){return this.emptyListItem}setEmptyListItem(t){return new E(t,this.data,this.itemIds,this._itemIdSeed,this._modelId)}get(t){return this.data.get(t)}getId(t){return`${this.modelId}_${this.itemIds.get(t)}`}count(){return this.data.count()}isEmpty(){return this.data.isEmpty()}set(t,e){return new E(this.emptyListItem,this.data.set(t,e),this.itemIds,this._itemIdSeed,this._modelId)}clear(){return new E(this.emptyListItem,this.data.clear(),this.itemIds.clear(),this._itemIdSeed,this._modelId)}forEach(t){this.data.forEach(t)}reduce(t,e){return this.data.reduce(t,e)}static fromJS(t,e){return new E(e,o.ImmutableList.fromJS(t))}static fromJSON(t,e){return new E(e,o.ImmutableList.fromJS(t))}clone(){return new E(this.emptyListItem,this.data.clone(),this.itemIds.clone(),this._itemIdSeed)}}E.nextModelId=1,e.ImmutableListWithTracking=E;class D{constructor(){this.writePropagateHandler=this.defaultWritePropagate,this.propagationParent=this}static getData(t){if(void 0!==t&&t.constructor!==E)return t.data}static setPropagationHandler(t,e,r,s){t.writePropagateHandler=s,D.setPropagationParent(t,e),D.setPropagationKey(t,r)}static setPropagationParent(t,e){t.propagationParent=e}static setPropagationKey(t,e){t.propagationKey=e}writePropagate(t,e){var r;if((null===(r=this.data)||void 0===r?void 0:r.constructor)!==(null==t?void 0:t.constructor))throw new Error("Unexpected new data type");this.data=t,this.writePropagateHandler.apply(this.propagationParent,[this.propagationKey,t,e])}defaultWritePropagate(t,e,r){this.onDefaultWritePropagate(r)}onDefaultWritePropagate(t){}}e.ImmutableBase=D;class L extends D{constructor(t,e){super(),this.cache=null!=e?e:new g,this.data=t||this.constructor.createDefaultData()}static createDefaultData(){const t=this.RecordClass;if(t)return new t}getBasicProperty(t){return this.data.get(t)}setBasicProperty(t,e,r,s){this.data.get(t)!==e&&(L.checkType(r,e,s),this.writePropagate(this.data.set(t,e),this.cache),this.onPropertyValueChanged(t))}onPropertyValueChanged(t){}getComplexProperty(t,e){let r=this.cache.getItem(t);if(r)return L.setPropagationParent(r,this),r;const s=this.data.get(t),i=this.cache.getItem(t+"__cache");return r=new e(s,i||null),this.cache.setItem(t,r),i&&this.cache.invalidate(t+"__cache"),L.setPropagationHandler(r,this,t,this.internalSetComplexProperty),r}setComplexProperty(t,e,r,s){this.setProperties([{name:t,value:e,expectedType:r,valueType:s,isBasicType:!1}])}internalSetComplexProperty(t,e,r){this.internalSetProperties([{name:t,value:e,isBasicType:!1}],r)}setProperties(t){var e;const r=[];for(const s of t){const t=null!==(e=L.getData(s.value))&&void 0!==e?e:s.value;this.data.get(s.name)!==t&&(void 0!==s.expectedType&&L.checkType(s.expectedType,s.value,s.valueType),r.push({name:s.name,value:t,isBasicType:s.isBasicType}))}r.length>0&&this.internalSetProperties(r)}internalSetProperties(t,e){let r=this.data;const s=this.cloneCache();for(const i of t)r=r.set(i.name,i.value),i.isBasicType||(s.invalidate(i.name),s.invalidate(i.name+"__cache"),e&&s.setItem(i.name+"__cache",e));this.writePropagate(r,s);for(const e of t)this.onPropertyValueChanged(e.name)}cloneCache(){return this.cache.clone()}onDefaultWritePropagate(t){this.cache=t}static checkType(t,e,r){switch(t){case l.Integer:L.ensureValidInteger(e);break;case l.LongInteger:L.ensureValidLongInteger(e);break;case l.Decimal:case l.Currency:L.ensureValidDecimal(e);break;case l.Text:case l.PhoneNumber:L.ensureValidText(e);break;case l.Email:L.ensureValidEmail(e);break;case l.Boolean:L.ensureValidBoolean(e);break;case l.Date:L.ensureValidDate(e);break;case l.Time:L.ensureValidTime(e);break;case l.DateTime:L.ensureValidDateTime(e);break;case l.Record:case l.RecordList:L.ensureValidComplexType(e,r);break;case l.BinaryData:L.ensureValidBinaryData(e);break;case l.Object:break;default:throw new TypeError("Unexpected data type: "+t)}}static ensureValidBinaryData(t){if(!("string"==typeof t||t instanceof d))throw new TypeError("Expecting a Binary Data, found: "+t)}static ensureValidInteger(t){if("number"!=typeof t||isNaN(t)||t%1!=0)throw new TypeError("Expecting an Integer, found: "+t);if(t<p.MIN_INTEGER_VALUE)throw new TypeError("Integers must be greater than "+p.MIN_INTEGER_VALUE+", found: "+t);if(t>p.MAX_INTEGER_VALUE)throw new TypeError("Integers must be lower than "+p.MAX_INTEGER_VALUE+", found: "+t)}static ensureValidLongInteger(t){if(!t||t.constructor!==u.default)throw new TypeError("Expecting a LongInteger, found: "+t);if(t.lessThan(p.MIN_LONGINTEGER_VALUE))throw new TypeError("Long Integers must be greater than "+p.MIN_LONGINTEGER_VALUE.toString()+", found: "+t.toString());if(t.greaterThan(p.MAX_LONGINTEGER_VALUE))throw new TypeError("Long Integers must be lower than "+p.MAX_LONGINTEGER_VALUE.toString()+", found: "+t.toString())}static ensureValidDecimal(t){if(!t||t.constructor!==s.default)throw new TypeError("Expecting a Decimal, found: "+t);if(t.lessThan(p.MIN_DECIMAL_VALUE))throw new TypeError("Decimals must be greater than "+p.MIN_DECIMAL_VALUE.toString()+", found: "+t.toString());if(t.greaterThan(p.MAX_DECIMAL_VALUE))throw new TypeError("Decimals must be lower than "+p.MAX_DECIMAL_VALUE.toString()+", found: "+t.toString())}static ensureValidText(t){if("string"!=typeof t)throw new TypeError("Expecting a Text, found: "+t)}static ensureValidEmail(t){if("string"!=typeof t)throw new TypeError("Expecting an Email, found: "+t)}static ensureValidBoolean(t){if("boolean"!=typeof t)throw new TypeError("Expecting a Boolean, found: "+t)}static ensureValidDate(t){if(!t||t.constructor!==m)throw new TypeError("Expecting a Date, found: "+t)}static ensureValidTime(t){if(!t||t.constructor!==m)throw new TypeError("Expecting a Time, found: "+t)}static ensureValidDateTime(t){if(!t||t.constructor!==m)throw new TypeError("Expecting a DateTime, found: "+t)}static ensureValidComplexType(t,e){if(t){if(t.constructor===e)return;if(void 0!==t.isCompatibleWith){if(t.isCompatibleWith(e))return;throw new TypeError(`Expecting a ${e.name} type, found:  ${t.constructor.name}`)}}throw new TypeError("Expecting a Record or RecordList, found: "+t)}replaceWith(t){const e=L.getData(t);this.writePropagate(e,new g)}fastEquals(t){return this===t}equals(t){return!(!t||this.constructor!==t.constructor)}static defineRecordClass(t){return(0,o.defineRecordClass)(t)}clone(){return new(0,this.constructor)(this.data,this.cloneCache())}}e.Record=L;class _{constructor(t,e,r,s,i,a,n,o,u){this.name=t,this.attrName=e,this.nameForJson=r,this.mandatory=s,this.ignoreForServer=i,this.dataType=a,this.optimizeList=o,this.complexType=u,this.defaultValue=n()}}class A{constructor(t,e,r,s,i,a,n,o,u){this.name=t,this.attrName=e,this.nameForJson=r,this.mandatory=s,this.ignoreForServer=i,this.dataType=a,this.defaultValueGetter=n,this.optimizeList=o,this.complexType=u}get defaultValue(){return this.defaultValueGetter()}}class b extends L{static get isGenericRecordType(){return!0}getAttributes(){return this.constructor.Attributes||[]}static getAttributes(){return this.Attributes||[]}static isAnonymousRecord(){return this._isAnonymousRecord}constructor(t,e){super(t,e)}static attr(t,e,r,s,i,a,n,o=!0,u){let c;return"boolean"!=typeof o?(u=o,c=!0):c=o,a===l.DateTime||a===l.Date||a===l.Time?new A(t,e,r,s,i,a,n,c,u):new _(t,e,r,s,i,a,n,c,u)}static attributesToDeclare(){return[]}static init(){const t=this,e=t.attributesToDeclare();t.Attributes=e,e.forEach(e=>{e.attrName in t.prototype||(e.dataType===l.Record||e.dataType===l.RecordList?t.defineComplexProperty(e.attrName,e.dataType,e.complexType):t.defineBasicProperty(e.attrName,e.dataType))}),t.RecordClass=L.defineRecordClass(e.reduce((t,e)=>(t[e.attrName]=null,t),{})),t.prototype.equals=function(t){let r=b.prototype.equals.call(this,t);return e.forEach(e=>{var s;(s=e.dataType)===l.Record||s===l.RecordList||s===l.LongInteger||s===l.Decimal||s===l.Currency||s===l.DateTime||s===l.Time||s===l.Date?r&&(r=this[e.attrName].equals(t[e.attrName])):r&&(r=this[e.attrName]===t[e.attrName])}),r}}static createDefaultData(){const t=this,e=t.RecordClass;if(e){const r={};for(const e of t.Attributes)e.dataType===l.Record||e.dataType===l.RecordList?r[e.attrName]=L.getData(e.defaultValue):r[e.attrName]=e.defaultValue;return new e(r)}}static defineBasicProperty(t,e){Object.defineProperty(this.prototype,t,{enumerable:!0,configurable:!0,get:function(){return this.getBasicProperty(t)},set:function(r){this.setBasicProperty(t,r,e)}})}static defineComplexProperty(t,e,r){Object.defineProperty(this.prototype,t,{enumerable:!0,configurable:!0,get:function(){return this.getComplexProperty(t,r)},set:function(s){this.setComplexProperty(t,s,e,r)}})}static isCompatibleWith(t){return this===t||this.isAnonymousRecord()&&t.isAnonymousRecord()&&this.UniqueId===t.UniqueId}isCompatibleWith(t){return t.prototype instanceof b&&this.constructor.isCompatibleWith(t)}getNonSerializableAttributes(){return this.getAttributes().filter(t=>t.dataType===l.Object).map(t=>t.attrName)}}b.UniqueId="",b._isAnonymousRecord=!1,e.GenericRecord=b;class w extends D{static getItemType(){return this.itemType}getCache(){return null}newItem(t){throw new Error("@abstract")}resetEmptyListItem(){this.data=this.data.setEmptyListItem(this.newItem())}get emptyListItem(){return this.isEmpty?this.data.getEmptyListItem():this.data.get(0)}set emptyListItem(t){if(this.isEmpty){if(this.data.getEmptyListItem()===t)return;this.writePropagate(this.data.setEmptyListItem(t),this.getCache())}else{if(this.data.get(0)===t)return;this.writePropagate(this.data.set(0,t),this.getCache())}}get modelId(){return this.data.modelId}get isEmpty(){return this.data.isEmpty()}get length(){return this.data.count()}isValidIndex(t,e=!1){return t%1==0&&t>=0&&t<this.length+(e?1:0)}checkIndex(t,e=!1){if(!this.isValidIndex(t,e)){let e="Index out of bounds. Index "+t+" for ";throw this.isEmpty?e+="empty list.":e+="bounds [0, "+(this.length-1)+"].",new Error(e)}}idOf(t){return this.checkIndex(t),this.data.getId(t)}append(t){this.writePropagate(this.data.push(t),this.getCache())}appendAll(t){t.length>0&&this.writePropagate(this.data.addFromOther(t.data),this.getCache())}pushAll(t){t.length>0&&this.writePropagate(this.data.pushAll(t),this.getCache())}insert(t,e){this.checkIndex(t,!0),this.writePropagate(this.data.insert(t,e),this.getCache())}remove(t){this.checkIndex(t),1===this.length&&this.resetEmptyListItem(),this.writePropagate(this.data.remove(t),this.getCache())}clear(){this.resetEmptyListItem(),this.writePropagate(this.data.clear(),this.getCache())}indexOf(t){for(let e=0;e<this.length;e++)if(t(this.getItem(e)))return e;return-1}any(t){return-1!==this.indexOf(t)}all(t){return!this.any(e=>!t(e))}filter(t){const e=new this.constructor,r=[];for(let e=0;e<this.length;e++){const s=this.getItem(e);t(s)&&r.push(s)}return e.pushAll(r),e}distinct(){const t=new this.constructor,e=new Array;for(let r=0;r<this.length;r++){const s=this.getItem(r);let i=!0;for(let t=0;t<e.length;t++)if(f(s,this.getItem(e[t]))){i=!1;break}i&&(e.push(r),t.append(s))}return t}sort(t,e){const r=[];for(let t=0;t<this.length;t++)r[t]=this.getItem(t);const s=e?1:-1;r.sort((e,r)=>s*y(t(e),t(r))),this.clear(),this.pushAll(r)}getCurrent(t){if(this.isEmpty)return this.emptyListItem;{const e=this.getCurrentRowNumber(t);return this.getItem(e)}}getCurrentRowNumber(t){return t.getCurrentRowNumber(this)}getItem(t){return this.checkIndex(t),this.data.get(t)}setCurrent(t,e){if(this.isEmpty)this.emptyListItem=e;else{const r=this.getCurrentRowNumber(t);this.setItem(r,e)}}setItem(t,e){this.checkIndex(t),this.data.get(t)!==e&&this.writePropagate(this.data.set(t,e),this.getCache())}fastEquals(t){return this===t}equals(t){if(!t||this.constructor!==t.constructor||this.length!==t.length)return!1;if(this.isEmpty){return f(this.emptyListItem,t.emptyListItem)}for(let e=0;e<this.length;e++){if(!f(this.getItem(e),t.getItem(e)))return!1}return!0}}e.List=w;class N extends w{constructor(t){super(),this.data=t||new E(this.newItem())}static get isBasicTypeListType(){return!0}static getTypeDefaultValue(){throw new Error("Not implemented: getTypeDefaultValue")}newItem(){return this.constructor.getTypeDefaultValue()}clone(){return new(0,this.constructor)(this.data.clone())}}e.BasicTypeList=N;class C extends w{constructor(t,e){if(super(),this._recordType=this.constructor.getItemType(),!this._recordType)throw new TypeError("GenericRecordLists must define a RecordType");this.data=t||new E(b.getData(this.newItem())),this.cache=null!=e?e:new T}static get isGenericRecordListType(){return!0}getCache(){return this.cache}newItem(t){return new(this.getRecordType())(t)}resetEmptyListItem(){this.data=this.data.setEmptyListItem(b.getData(this.newItem()))}getRecordType(){return this._recordType}get emptyListItem(){return this.internalGetItem(0,this.isEmpty)}set emptyListItem(t){this.isEmpty?this.internalSetEmptyListItem(0,t):this.internalSetItem(0,t)}append(t){this.isEmpty&&this.cache.invalidate(0),super.append(b.getData(t)),this.cache.append(void 0)}appendAll(t){this.isEmpty&&this.cache.invalidate(0),super.appendAll(t),this.cache.appendMultiple(t.length)}pushAll(t){this.isEmpty&&this.cache.invalidate(0),super.pushAll(t.map(t=>L.getData(t))),this.cache.appendMultiple(t.length)}insert(t,e){this.checkIndex(t,!0),this.isEmpty&&this.cache.invalidate(0),super.insert(t,b.getData(e)),this.cache.insert(t,void 0)}getItem(t){return this.internalGetItem(t,!1)}internalGetItem(t,e){e||this.checkIndex(t);let r=this.cache.getItem(t);return r?(C.setPropagationParent(r,this),C.setPropagationKey(r,t),r):(e?(r=this.newItem(this.data.getEmptyListItem()),C.setPropagationHandler(r,this,t,this.internalSetEmptyListItem)):(r=this.newItem(this.data.get(t)),C.setPropagationHandler(r,this,t,this.internalSetItem)),this.cache.setItem(t,r),r)}setItem(t,e){this.internalSetItem(t,e)}internalSetItem(t,e,r){var s;const i=null!==(s=b.getData(e))&&void 0!==s?s:e;this.checkIndex(t),this.data.get(t)!==i&&(this.writePropagate(this.data.set(t,i),this.cache),this.cache.setItem(t,void 0))}internalSetEmptyListItem(t,e,r){var s;const i=null!==(s=b.getData(e))&&void 0!==s?s:e;this.data.getEmptyListItem()!==i&&(this.writePropagate(this.data.setEmptyListItem(i),this.cache),this.cache.setItem(t,void 0))}remove(t){super.remove(t),this.cache.invalidate(t)}clear(){super.clear(),this.cache.invalidate()}readAll(t,e){const r=[];for(let s=0;s<e.length;s++){const i=this.newItem();t(i,e.item(s)),r.push(i)}this.pushAll(r)}clone(){return new(0,this.constructor)(this.data.clone())}static isCompatibleWith(t){return this===t||this.getItemType().isCompatibleWith(t.getItemType())}isCompatibleWith(t){return t.prototype instanceof C&&this.constructor.isCompatibleWith(t)}}e.GenericRecordList=C;class M extends N{constructor(t){super(t)}static getTypeDefaultValue(){return p.DEFAULT_INTEGER}}M.itemType=l.Integer,e.IntegerList=M;class F extends N{constructor(t){super(t)}static getTypeDefaultValue(){return p.DEFAULT_LONGINTEGER}}F.itemType=l.LongInteger,e.LongIntegerList=F;class V extends N{constructor(t){super(t)}static getTypeDefaultValue(){return p.DEFAULT_DATE}}V.itemType=l.Date,e.DateList=V;class x extends N{constructor(t){super(t)}static getTypeDefaultValue(){return p.DEFAULT_DATETIME}}x.itemType=l.DateTime,e.DateTimeList=x;class R extends N{constructor(t){super(t)}static getTypeDefaultValue(){return p.DEFAULT_TIME}}R.itemType=l.Time,e.TimeList=R;class v extends N{constructor(t){super(t)}static getTypeDefaultValue(){return p.DEFAULT_DECIMAL}}v.itemType=l.Decimal,e.DecimalList=v;class U extends N{constructor(t){super(t)}static getTypeDefaultValue(){return p.DEFAULT_CURRENCY}}U.itemType=l.Currency,e.CurrencyList=U;class S extends N{constructor(t){super(t)}static getTypeDefaultValue(){return p.DEFAULT_EMAIL}}S.itemType=l.Email,e.EmailList=S;class B extends N{constructor(t){super(t)}static getTypeDefaultValue(){return p.DEFAULT_PHONENUMBER}}B.itemType=l.PhoneNumber,e.PhoneNumberList=B;class O extends N{constructor(t){super(t)}static getTypeDefaultValue(){return p.DEFAULT_BOOLEAN}}O.itemType=l.Boolean,e.BooleanList=O;class P extends N{constructor(t){super(t)}static getTypeDefaultValue(){return p.DEFAULT_BINARYDATA}}P.itemType=l.BinaryData,e.BinaryDataList=P;class G extends N{constructor(t){super(t)}static getTypeDefaultValue(){return p.DEFAULT_TEXT}}G.itemType=l.Text,e.TextList=G;class H{constructor(t){this.varValue=t}get value(){return this.varValue}set value(t){this.setValue(t)}setValue(t){this.varValue=t}}e.BasicVariableHolder=H;function k(){return t=>{const e=t;void 0!==e.init&&e.init()}}e.VariableHolder=class extends H{constructor(t){super(t)}setValue(t){super.setValue(t?t.clone():t)}},e.RecordWithStaticConstructor=k;let q=class extends b{constructor(t,e){super(t,e)}static attributesToDeclare(){return[this.attr("JSON","jSONOut","jSONOut",!0,!0,l.Text,()=>I(l.Text))].concat(super.attributesToDeclare())}};q=r.__decorate([t=>{const e=t;void 0!==e.init&&e.init()}],q),e.JSONSerializeOutputType=q;let W=class extends b{constructor(t,e){super(t,e)}static attributesToDeclare(){return[this.attr("ExceptionMessage","exceptionMessageAttr","exceptionMessageAttr",!0,!0,l.Text,()=>I(l.Text))].concat(super.attributesToDeclare())}};W=r.__decorate([t=>{const e=t;void 0!==e.init&&e.init()}],W),e.ErrorHandlerOutputType=W;class z{constructor(){this.typeDefinitions=new Map,this.typeCache=new Map}isTypeRegistered(t){return void 0!==this.typeDefinitions.get(t)}registerTypeDefinition(t,e){this.typeDefinitions.set(t,e)}getType(t){const e=this.typeCache.get(t);if(e)return e;const s=this.typeDefinitions.get(t);if(!s)throw new TypeError(`Type ${t} was not registered`);let i=class extends b{constructor(t,e){super(t,e)}static attributesToDeclare(){return s?s.map(t=>{var e,r,s;return this.attr(t.name,t.attrName,t.nameForJson||t.attrName,null!==(e=t.mandatory)&&void 0!==e&&e,null===(r=t.ignoreForServer)||void 0===r||r,t.dataType,t.defaultValue,null===(s=t.optimizeList)||void 0===s||s,t.complexType)}).concat(super.attributesToDeclare()):[]}};return i=r.__decorate([t=>{const e=t;void 0!==e.init&&e.init()}],i),this.typeCache.set(t,i),i}}e.RecordTypeFactory=z;class X extends z{constructor(t,e,r){super(),this.mainAttributeName=t,this.mainAttributeAttrName=e,this.additionalAttributes=r}registerTypeDefinition(t,e){throw new Error("Invalid operation")}createMainAttributeInfo(t){return{name:this.mainAttributeName,attrName:this.mainAttributeAttrName,mandatory:!0,dataType:this.getDataType(t),defaultValue:this.getDefaultValue(t),complexType:this.getComplexType(t)}}registerTypeIfNeeded(t){if(!this.isTypeRegistered(t)){let e=[this.createMainAttributeInfo(t)];this.additionalAttributes&&(e=e.concat(this.additionalAttributes)),super.registerTypeDefinition(t,e)}}getType(t){return this.registerTypeIfNeeded(t),super.getType(t)}}e.TypeKeyedTypeFactory=X;e.BasicTypeKeyedTypeFactory=class extends X{constructor(t,e,r){super(t,e,r)}getDataType(t){return t}getDefaultValue(t){return()=>I(t)}getComplexType(t){}};e.ComplexTypeKeyedTypeFactory=class extends X{constructor(t,e,r){super(t,e,r)}getDataType(t){return l.Record}getDefaultValue(t){return()=>D.getData(new t)}getComplexType(t){return t}},function(t){function e(t){return t&&t.constructor===s.default}function r(t){return"string"==typeof t}function a(t){return"boolean"==typeof t}function n(t){return o(t)&&!isNaN(t)}function o(t){return"number"==typeof t}function c(t){return t&&t.constructor===u.default}function h(t){return t instanceof m}function l(t){return h(t)&&!isNaN(t.getTime())}function g(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}t.isDecimal=e,t.isBinaryData=function(t){var e;return(null===(e=null==t?void 0:t.value)||void 0===e?void 0:e.constructor)===d},t.isValidDecimal=function(t){return e(t)&&!t.isNaN()},t.isWithinDecimalRange=function(t){return p.MIN_DECIMAL_VALUE.lessThanOrEqualTo(t)&&p.MAX_DECIMAL_VALUE.greaterThanOrEqualTo(t)},t.isText=r,t.isBoolean=a,t.isBasicType=function(t){return r(t)||o(t)||a(t)||h(t)||c(t)||e(t)},t.isValidInteger=function(t){return n(t)&&t%1==0},t.isValidJsNumber=n,t.isJsNumber=o,t.isWithinIntegerRange=function(t){return t>=p.MIN_INTEGER_VALUE&&t<=p.MAX_INTEGER_VALUE},t.isValidLongInteger=function(t){return c(t)},t.isLongInteger=c,t.isValidDate=function(t){return l(t)&&t.hours===p.DEFAULT_DATE.hours&&t.minutes===p.DEFAULT_DATE.minutes&&t.seconds===p.DEFAULT_DATE.seconds},t.isValidTime=function(t){return l(t)&&t.year===p.DEFAULT_TIME.year&&t.month===p.DEFAULT_TIME.month&&t.day===p.DEFAULT_TIME.day},t.isDateTime=h,t.isValidDateTime=l,t.isJsDate=g,t.isValidJsDate=function(t){return g(t)&&!isNaN(t.getTime())},t.hasBinaryDataInterface=function(t){return!!t&&(void 0!==t.content||void 0!==t.url)};t.ensureNumberInsideBounds=function(t){let e="",r="";if(t.greaterThan(9007199254740991))e="maximum",r=9007199254740991..toString();else{if(!t.lessThan(-9007199254740991))return;e="minimum",r=(-9007199254740991).toString()}const s=`Unable to convert ${t.toString()} to the Javascript Number type since exceeds the ${e} value allowed which is ${r}.`;throw new i.Exceptions.NumberOverflowException(s)},t.ensureNumberPrecision=function(t){if(t.decimalPlaces()>16){const e=`Unable to convert ${t.toString()} to the Javascript Number type because it will lead to precision loss. The maximum safe number of digits after the decimal point is 16.`;throw new i.Exceptions.NumberOverflowException(e)}};class T{static get None(){return""}static get Minimum(){return"minimum"}static get Maximum(){return"maximum"}}function y(t,e,r,s){let a=T.None,n="";const o=Math.max(e,-9007199254740991),u=Math.min(r,9007199254740991);if(t<o)a=T.Minimum,n=o.toString();else{if(!(t>u))return;a=T.Maximum,n=u.toString()}throw new i.Exceptions.NumberOverflowException(function(t,e,r,s){return`Unable to convert ${t} to the ${e} type since it exceeds the ${r} value allowed which is ${s}.`}(t.toString(),s,a,n))}t.ensureIntegerInsideBounds=function(t){y(t,p.MIN_INTEGER_VALUE,p.MAX_INTEGER_VALUE,"Integer")},t.ensureLongIntegerInsideBounds=function(t){y(t,p.MIN_LONGINTEGER_VALUE.toNumber(),p.MAX_LONGINTEGER_VALUE.toNumber(),"Long Integer")},t.ensureDecimalInsideBounds=function(t){y(t,p.MIN_DECIMAL_VALUE.toNumber(),p.MAX_DECIMAL_VALUE.toNumber(),"Decimal")}}(e.TypeValidations||(e.TypeValidations={}))}));
define("OutSystems/ClientRuntime/modules/Auth/Authorization",["require","exports","../../Exceptions","../../Logger","../Injector/Injector","../Injector/KnownServices"],(function(e,o,t,i,r,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.hasRole=o.ensureUserHasRole=void 0;o.ensureUserHasRole=e=>{var o,u,s,{roles:l,auth:d=(null===(o=r.default.resolve(n.ServiceNames.Auth))||void 0===o?void 0:o.getInstance())}=e;if(!(null==d?void 0:d.isAuthenticated()))throw i.debug("Authorization","Not authorized: User is not logged in"),new t.Exceptions.SecurityException("Not authorized","User is not logged in");if(!l.find(e=>!!e&&d.hasRole(e.roleKey)))throw i.debug("Authorization","Not authorized: No roles found on current user"),null!==(s=null===(u=l[l.length-1])||void 0===u?void 0:u.roleException)&&void 0!==s?s:new t.Exceptions.SecurityException("Not authorized","User doesn't have the required role")};o.hasRole=e=>{var o,{roleKey:t,auth:u=(null===(o=r.default.resolve(n.ServiceNames.Auth))||void 0===o?void 0:o.getInstance())}=e;return(null==u?void 0:u.isAuthenticated())?u.hasRole(t):(i.debug("Authorization","Not authorized: User is not logged in"),!1)}}));
define("OutSystems/ClientRuntime/RolesInfo",["require","exports","./Exceptions","./Logger","./modules/Auth/Authentication","./modules/Auth/Authorization"],(function(e,t,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkRoles=t.checkRegistered=t.ROLES_INFO_MODULE_NAME=void 0,t.ROLES_INFO_MODULE_NAME="RolesInfo",t.checkRegistered=function(){if(!s.isAuthenticated())throw i.debug(t.ROLES_INFO_MODULE_NAME,"Not authorized: User is not logged in"),new o.Exceptions.SecurityException("Not authorized","User is not logged in");i.debug(t.ROLES_INFO_MODULE_NAME,"Authorized: User is logged in")},t.checkRoles=function(e){n.ensureUserHasRole({roles:e})}}));
define("OutSystems/ClientRuntime/BuiltinFunctions",["require","exports","./ApplicationInfo","./DataTypes","./Logger","./modules/Auth/Authentication","./modules/Injector/Injector","./modules/Injector/KnownServices","./Navigation","./RolesInfo"],(function(e,t,n,r,o,i,a,u,s,c){"use strict";function T(e=r.Constants.FORMAT.defaultDateTimeFormat){return{year:parseInt(RegExp["$"+(e.yearIndexForDate+1)],10),month:parseInt(RegExp["$"+(e.monthIndexForDate+1)],10),day:parseInt(RegExp["$"+(e.dayIndexForDate+1)],10)}}function l(e=r.Constants.FORMAT.defaultDateTimeFormat){const t=parseInt(RegExp["$"+(e.secondsIndexForTime+1)],10);return{hours:parseInt(RegExp["$"+(e.hoursIndexForTime+1)],10),minutes:parseInt(RegExp["$"+(e.minutesIndexForTime+1)],10),seconds:isNaN(t)?0:t}}function m(e=r.Constants.FORMAT.defaultDateTimeFormat){const t=parseInt(RegExp["$"+(e.secondsIndexForDateTime+1)],10);return{year:parseInt(RegExp["$"+(e.yearIndexForDateTime+1)],10),month:parseInt(RegExp["$"+(e.monthIndexForDateTime+1)],10),day:parseInt(RegExp["$"+(e.dayIndexForDateTime+1)],10),hours:parseInt(RegExp["$"+(e.hoursIndexForDateTime+1)],10),minutes:parseInt(RegExp["$"+(e.minutesIndexForDateTime+1)],10),seconds:isNaN(t)?0:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.iif=t.getUserId=t.getOwnerURLPath=t.getBookmarkableURL=t.getAppName=t.getUserAgent=t.getCurrentLocale=t.emailAddressValidate=t.formatText=t.formatPhoneNumber=t.formatPercent=t.formatDecimal=t.formatCurrency=t.formatDateTime=t.toObject=t.objectToDateTime=t.objectToTime=t.objectToDate=t.objectToText=t.objectToDecimal=t.objectToBoolean=t.objectToLongInteger=t.objectToInteger=t.textToIdentifier=t.textToBoolean=t.textToLongInteger=t.textToLongIntegerValidate=t.textToInteger=t.textToIntegerValidate=t.textToDecimal=t.textToDecimalValidate=t.timeToText=t.textToTime=t.textToTimeValidate=t.textToDateTime=t.textToDateTimeValidate=t.textToDate=t.textToDateValidate=t.nullBinary=t.nullObject=t.nullDate=t.nullTextIdentifier=t.nullIdentifier=t.integerToDecimal=t.integerToText=t.integerToBoolean=t.integerToIdentifier=t.integerToLongInteger=t.identifierToText=t.identifierToLongInteger=t.identifierToInteger=t.longIntegerToText=t.longIntegerToIdentifier=t.longIntegerToInteger=t.longIntegerToIntegerValidate=t.longIntegerToDecimal=t.decimalToLongInteger=t.decimalToLongIntegerValidate=t.decimalToInteger=t.decimalToIntegerValidate=t.decimalToText=t.decimalToBoolean=t.dateToDateTime=t.dateToText=t.dateTimeToText=t.dateTimeToTime=t.dateTimeToDate=t.booleanToText=t.booleanToDecimal=t.booleanToLongInteger=t.booleanToInteger=t.newTime=t.newDateTime=t.newDate=t.second=t.minute=t.hour=t.day=t.month=t.year=t.diffSeconds=t.diffMinutes=t.diffHours=t.diffDays=t.dayOfWeek=t.currTime=t.currDateTime=t.currDate=t.buildDateTime=t.addMonths=t.addYears=t.addSeconds=t.addMinutes=t.addHours=t.addDays=t.like=t.trimEnd=t.trimStart=t.trim=t.toUpper=t.toLower=t.substr=t.replace=t.length=t.index=t.encodeUrl=t.encodeJavascript=t.encodeHtml=t.concat=t.chr=t.sign=t.min=t.max=t.trunc=t.sqrt=t.round=t.power=t.mod=t.abs=void 0,t.abs=function(e){const t=e.abs();return t.isNaN()?r.Constants.DEFAULT_DECIMAL:t},t.mod=function(e,t){const n=e.mod(t);return n.isNaN()?r.Constants.DEFAULT_DECIMAL:n},t.power=function(e,t){const n=e.pow(t);return n.isNaN()?r.Constants.DEFAULT_DECIMAL:n},t.round=function(e,t=0){const n=e.toDecimalPlaces(t);return n.isNaN()?r.Constants.DEFAULT_DECIMAL:n},t.sqrt=function(e){try{const t=e.sqrt();return t.isNaN()?r.Constants.DEFAULT_DECIMAL:t}catch(e){return r.Constants.DEFAULT_DECIMAL}},t.trunc=function(e){const t=e.trunc();return t.isNaN()?r.Constants.DEFAULT_DECIMAL:t},t.max=function(e,t){const n=r.Decimal.max(e,t);return n.isNaN()?r.Constants.DEFAULT_DECIMAL:n},t.min=function(e,t){const n=r.Decimal.min(e,t);return n.isNaN()?r.Constants.DEFAULT_DECIMAL:n},t.sign=function(e){const t=new r.Decimal(0);return e.eq(t)||e.isNaN()?r.Constants.DEFAULT_INTEGER:e>t?1:-1},t.chr=function(e){return e>=0&&e<=65535?String.fromCharCode(e):r.Constants.DEFAULT_TEXT},t.concat=function(e,t){return(e||"")+(t||"")},t.encodeHtml=function(e){return void 0===e?"":function(e){if(void 0===e||""===e)return e;const t=[],n=" ".charCodeAt(0),r="\n".charCodeAt(0);e.charCodeAt(0)===n?t[0]=" ":t[0]=e.charAt(0);for(let o=1;o<e.length-1;++o)e.charCodeAt(o)!==n||e.charCodeAt(o-1)!==r&&e.charCodeAt(o+1)!==n?t[o]=e.charAt(o):t[o]=" ";return 1!==e.length&&(e.charCodeAt(e.length-1)===n?t[e.length-1]=" ":t[e.length-1]=e.charAt(e.length-1)),t.join("")}(function(e){const t=[];for(let n=0;n<e.length;++n){const r=e.charCodeAt(n);60===r?t.push("&lt;"):62===r?t.push("&gt;"):38===r?t.push("&amp;"):34===r?t.push("&quot;"):39===r?t.push("&#39;"):r>=160&&r<=255?t.push("&#"+r+";"):t.push(e.charAt(n))}return t.join("")}(e)).replace(/\r/g,"").replace(/&#13;/g,"").replace(/\n/g,"<br/>").replace(/&#10;/g,"<br/>")},t.encodeJavascript=function(e){return e.replace(/\\/g,"\\x5c").replace(/'/g,"\\x27").replace(/\"/g,"\\x22").replace("&","\\x26").replace("<","\\x3c").replace(/>/g,"\\x3e").replace(/\r/g,"\\r").replace(/\n/g,"\\n")},t.encodeUrl=function(e){return encodeURIComponent(e).replace(/'/g,"%27").replace(/%20/g,"+")};const f=`[${String.fromCharCode(55296)}-${String.fromCharCode(56319)}]`,g=new RegExp(f,"g");function d(e){const t=e.match(g);return e.length-(t?t.length:0)}function D(e,t,n){var o;let i=d(e);if(t>=0&&n>0&&i>=t+1)i=n;else{if(!(t>=0&&n>0&&i>t))return r.Constants.DEFAULT_TEXT;i-=t}const a=e.match(g)?null===(o=e.match(new RegExp("("+f+".|.){"+t+"}(("+f+".|.){"+i+"})")))||void 0===o?void 0:o[2]:e.substr(t,i);return null!=a?a:""}function I(e){const t=new Date(e.getTime());return t.setMinutes(e.getMinutes()-e.getTimezoneOffset()),t.getTime()}function p(e,t,n,r=!1){const o=n<=36e5,i=n<=6e4,a=n<=1e3,u=E(e,o,i,a).toNative(),s=E(t,o,i,a).toNative(),c=Date.UTC(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),0),T=Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),0),l=r?I(s)-I(u):T-c;return Math.floor(l/n)}function E(e,t,n,o){return new r.DateTime(e.year,e.month,e.day,t?e.hours:0,n?e.minutes:0,o?e.seconds:0)}function h(e,t,n){const o=new r.DateTime(1900,1,1,e,t,n);return o.hours===e&&o.minutes===t&&o.seconds===n}function C(e,t,n,o,i,a){const u=new r.DateTime(e,t,n,o,i,a);return u.year===e&&u.month===t&&u.day===n&&u.hours===o&&u.minutes===i&&u.seconds===a}function A(e){return e.gte(r.Constants.MIN_INTEGER_VALUE)&&e.lte(r.Constants.MAX_INTEGER_VALUE)}function x(e){return e.gte(r.Constants.MIN_LONGINTEGER_VALUE.toString())&&e.lte(r.Constants.MAX_LONGINTEGER_VALUE.toString())}function L(e,t){let n=t.getRegExpForDate().test(e);if(n){const e=T(t),o=new r.DateTime(e.year,e.month,e.day);n=o.year===e.year&&o.month===e.month&&o.day===e.day}return n}function y(e,t){if(!L(e,t))return r.DateTime.defaultValue;const n=T(t);return new r.DateTime(n.year,n.month,n.day)}function F(e,t){let n=t.getRegExpForDateTime().test(e);if(n){const e=m(t);n=C(e.year,e.month,e.day,e.hours,e.minutes,e.seconds)}return n}function w(e,t){if(!F(e,t))return r.DateTime.defaultValue;const n=m(t);return new r.DateTime(n.year,n.month,n.day,n.hours,n.minutes,n.seconds)}function U(e){return-1!==e.toUpperCase().indexOf("T")}function b(e){return-1!==e.indexOf(" ")}function N(e){const t=e.toUpperCase().search("T| ");return-1!==t&&(e=e.substring(0,t)),e}function R(e){return!U(e)||!isNaN(Date.parse(e))}function _(e){const t=e.indexOf(" ");return-1!==t&&(e=e.substring(t+1,e.length)),e}function M(e,t=r.Constants.FORMAT.defaultDateTimeFormat){if(U(e))return R(e);b(e)&&(e=_(e));let n=t.getRegExpForTime().test(e);if(n){const e=l(t);n=h(e.hours,e.minutes,e.seconds)}return n}function V(e){if(r.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e)){const t=parseInt(e,10);if(!isNaN(t)&&t>=r.Constants.MIN_INTEGER_VALUE&&t<=r.Constants.MAX_INTEGER_VALUE)return t}return null}function S(e){if(r.Constants.FORMAT.numberFormat.getRegExpForDecimal().test(e)){const t=new r.Decimal(e);if(!t.isNaN()&&t.gte(r.Constants.MIN_DECIMAL_VALUE)&&t.lte(r.Constants.MAX_DECIMAL_VALUE))return t}return null}function O(e){if(!r.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e))return null;const t="-"===e.charAt(0);if(t&&e.length<r.Constants.MIN_LONGINTEGER_VALUE.toString().length||!t&&e.length<r.Constants.MAX_LONGINTEGER_VALUE.toString().length||x(new r.Decimal(e)))try{return r.LongInteger.fromString(e)}catch(e){}return null}function j(e,t,n){if(e instanceof r.DateTime||"[object Date]"===Object.prototype.toString.call(e)){const o=new r.DateTime(e.getTime()),i=t?o.year:1900,a=t?o.month:1,u=t?o.day:1,s=n?o.hours:0,c=n?o.minutes:0,T=n?o.seconds:0;return new r.DateTime(i,a,u,s,c,T)}throw new TypeError("Cannot convert type '"+typeof e+"' to 'DateTime'")}function v(e,t,n,o){return t<0?r.Constants.DEFAULT_TEXT:(n.length>1&&(n=n.substr(0,1)),o.length>1&&(o=o.substr(0,1)),e.toFormat(t,r.Decimal.rounding,{decimalSeparator:n,groupSeparator:o}))}t.index=function(e,t,n,r,o){var i;try{if(0===t.length||n<0||n>d(e))return-1;let a;o&&(e=e.toLocaleLowerCase(),t=t.toLocaleLowerCase()),n&&n>0&&(a=null===(i=e.match(new RegExp("("+f+".|.){"+n+"}")))||void 0===i?void 0:i[0].length);const u=r?e.lastIndexOf(t,a||e.length):e.indexOf(t,a||0);return u<0?-1:d(e.substr(0,u))}catch(e){return-1}},t.length=d,t.replace=function(e,t,n){const r=t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");return e.replace(new RegExp(r,"g"),n)},t.substr=D,t.toLower=function(e){return e.toLowerCase()},t.toUpper=function(e){return e.toUpperCase()},t.trim=function(e){return e.trim()},t.trimStart=function(e){let t=0;for(;" "===e[t];)t++;return e.substr(t)},t.trimEnd=function(e){let t=e.length-1;for(;" "===e[t];)t--;return e.substr(0,t+1)},t.like=function(e,t){if(!t)return!1;const n=t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(`^${n}$`,"gi").test(e)},t.addDays=function(e,t){return e.addDays(t)},t.addHours=function(e,t){return e.addHours(t)},t.addMinutes=function(e,t){return e.addMinutes(t)},t.addSeconds=function(e,t){return e.addSeconds(t)},t.addYears=function(e,t){return e.addYears(t)},t.addMonths=function(e,t){return e.addMonths(t)},t.buildDateTime=function(e,t){return new r.DateTime(e.year,e.month,e.day,t.hours,t.minutes,t.seconds,t.milliseconds)},t.currDate=function(){const e=new r.DateTime(new Date);return new r.DateTime(e.year,e.month,e.day)},t.currDateTime=function(){return new r.DateTime(new Date)},t.currTime=function(){const e=new r.DateTime(new Date);return new r.DateTime(1900,1,1,e.hours,e.minutes,e.seconds)},t.dayOfWeek=function(e){return e.weekDay},t.diffDays=function(e,t){return p(e,t,864e5,!0)},t.diffHours=function(e,t){return p(e,t,36e5)},t.diffMinutes=function(e,t){return p(e,t,6e4)},t.diffSeconds=function(e,t){return p(e,t,1e3)},t.year=function(e){return e.year},t.month=function(e){return e.month},t.day=function(e){return e.day},t.hour=function(e){return e.hours},t.minute=function(e){return e.minutes},t.second=function(e){return e.seconds},t.newDate=function(e,t,n){return C(e,t,n,0,0,0)?new r.DateTime(e,t,n):r.Constants.DEFAULT_DATE},t.newDateTime=function(e,t,n,o,i,a){return C(e,t,n,o,i,a)?new r.DateTime(e,t,n,o,i,a):r.Constants.DEFAULT_DATETIME},t.newTime=function(e,t,n){return h(e,t,n)?new r.DateTime(1900,1,1,e,t,n):r.Constants.DEFAULT_TIME},t.booleanToInteger=function(e){return e?1:0},t.booleanToLongInteger=function(e){return e?r.LongInteger.fromNumber(1):r.LongInteger.fromNumber(0)},t.booleanToDecimal=function(e){return new r.Decimal(e?1:0)},t.booleanToText=function(e){return!0===e?"True":!1===e?"False":r.Constants.DEFAULT_TEXT},t.dateTimeToDate=function(e){return new r.DateTime(e.year,e.month,e.day)},t.dateTimeToTime=function(e){return new r.DateTime(1900,1,1,e.hours,e.minutes,e.seconds)},t.dateTimeToText=function(e){return e.toString(r.Constants.FORMAT.defaultDateTimeFormat.dateTimeFormat)},t.dateToText=function(e){return e.toString(r.Constants.FORMAT.defaultDateTimeFormat.dateFormat)},t.dateToDateTime=function(e){return e},t.decimalToBoolean=function(e){return!e.eq(new r.Decimal(0))},t.decimalToText=function(e){return r.TypeValidations.isValidDecimal(e)?e.toString():r.Constants.DEFAULT_TEXT},t.decimalToIntegerValidate=A,t.decimalToInteger=function(e){return A(e)?e.round().toNumber():r.Constants.DEFAULT_INTEGER},t.decimalToLongIntegerValidate=x,t.decimalToLongInteger=function(e){return x(e)?r.LongInteger.fromString(e.round().toString()):r.Constants.DEFAULT_LONGINTEGER},t.longIntegerToDecimal=function(e){return new r.Decimal(e.toString())},t.longIntegerToIntegerValidate=function(e){return r.TypeValidations.isWithinIntegerRange(e.toNumber())},t.longIntegerToInteger=function(e){const t=e.toNumber();return r.TypeValidations.isWithinIntegerRange(t)?t:r.Constants.DEFAULT_INTEGER},t.longIntegerToIdentifier=function(e){return e},t.longIntegerToText=function(e){return r.TypeValidations.isValidLongInteger(e)?e.toString():r.Constants.DEFAULT_TEXT},t.identifierToInteger=function(e){return e},t.identifierToLongInteger=function(e){return e},t.identifierToText=function(e){return e},t.integerToLongInteger=function(e){return r.LongInteger.fromNumber(e)},t.integerToIdentifier=function(e){return e},t.integerToBoolean=function(e){return 0!==e},t.integerToText=function(e){return r.TypeValidations.isValidInteger(e)?e.toString():r.Constants.DEFAULT_TEXT},t.integerToDecimal=function(e){return new r.Decimal(e)},t.nullIdentifier=function(){return 0},t.nullTextIdentifier=function(){return""},t.nullDate=function(){return r.Constants.DEFAULT_DATE},t.nullObject=function(){return null},t.nullBinary=function(){return r.Constants.DEFAULT_BINARYDATA},t.textToDateValidate=function(e){const t=r.Constants.FORMAT.dateTimeFormats;e=N(e);for(let n=0;n<t.length;++n)if(L(e,t[n]))return!0;return!1},t.textToDate=function(e){const t=r.Constants.FORMAT.dateTimeFormats;e=N(e);for(let n=0;n<t.length;++n){const o=y(e,t[n]);if(!o.eq(r.DateTime.defaultValue))return o}return r.DateTime.defaultValue},t.textToDateTimeValidate=function(e){const t=r.Constants.FORMAT.dateTimeFormats;if(U(e))return R(e);b(e)||(e+=" 00:00:00");for(let n=0;n<t.length;++n)if(F(e,t[n]))return!0;return!1},t.textToDateTime=function(e){const t=r.Constants.FORMAT.dateTimeFormats;if(U(e))return r.DateTime.fromISODateTime(e);b(e)||(e+=" 00:00:00");for(let n=0;n<t.length;++n){const o=w(e,t[n]);if(!o.eq(r.DateTime.defaultValue))return o}return r.DateTime.defaultValue},t.textToTimeValidate=M,t.textToTime=function(e){if(U(e)){const t=r.DateTime.fromISODateTime(e);return new r.DateTime(1900,1,1,t.hours,t.minutes,t.seconds,t.milliseconds)}return b(e)&&(e=_(e)),function(e,t){if(!M(e,t))return r.DateTime.defaultValue;const n=l(t);return new r.DateTime(1900,1,1,n.hours,n.minutes,n.seconds)}(e,r.Constants.FORMAT.defaultDateTimeFormat)},t.timeToText=function(e){return e.toString(r.Constants.FORMAT.defaultDateTimeFormat.timeFormat)},t.textToDecimalValidate=function(e){return null!==S(e)},t.textToDecimal=function(e){return null===S(e)?r.Constants.DEFAULT_DECIMAL:new r.Decimal(e)},t.textToIntegerValidate=function(e){return null!==V(e)},t.textToInteger=function(e){const t=V(e);return null===t?r.Constants.DEFAULT_INTEGER:t},t.textToLongIntegerValidate=function(e){return null!==O(e)},t.textToLongInteger=function(e){const t=O(e);return null===t?r.Constants.DEFAULT_LONGINTEGER:t},t.textToBoolean=function(e){return"true"===e.toLowerCase()},t.textToIdentifier=function(e){return e},t.objectToInteger=function(e){if("number"==typeof e||r.TypeValidations.isLongInteger(e)||r.TypeValidations.isDecimal(e))return new r.Decimal(e.toString()).round().toNumber();throw new TypeError("Cannot convert type '"+typeof e+"' to 'Integer'")},t.objectToLongInteger=function(e){if("number"==typeof e||r.TypeValidations.isLongInteger(e)||r.TypeValidations.isDecimal(e))return r.LongInteger.fromString(new r.Decimal(e.toString()).round().toString());throw new TypeError("Cannot convert type '"+typeof e+"' to 'LongInteger'")},t.objectToBoolean=function(e){if("boolean"==typeof e)return e;throw new TypeError("Cannot convert type '"+typeof e+"' to 'Boolean'")},t.objectToDecimal=function(e){if("number"==typeof e||r.TypeValidations.isLongInteger(e)||r.TypeValidations.isDecimal(e))return new r.Decimal(e.toString());throw new TypeError("Cannot convert type '"+typeof e+"' to 'Decimal'")},t.objectToText=function(e){if("string"==typeof e)return e;throw new TypeError("Cannot convert type '"+typeof e+"' to 'Text'")},t.objectToDate=function(e){return j(e,!0,!1)},t.objectToTime=function(e){return j(e,!1,!0)},t.objectToDateTime=function(e){return j(e,!0,!0)},t.toObject=function(e){return e},t.formatDateTime=function(e,t){return e.toString(t)},t.formatCurrency=function(e,t,n,o,i){const a=v(e,n,o,i);return a===r.Constants.DEFAULT_TEXT?r.Constants.DEFAULT_TEXT:t+a},t.formatDecimal=v,t.formatPercent=function(e,t,n){try{return t<0?"":(n.length>1&&(n=n.substr(0,1)),e.times(100).toFormat(t,r.Decimal.rounding,{decimalSeparator:n,groupSeparator:""})+"%")}catch(e){return""}},t.formatPhoneNumber=function(e,t,n,r,o,i,a){try{return/^\d+$/.test(e)?e.length!==t+n+r?e:o+e.substr(0,t)+i+e.substr(t,n)+a+e.substr(t+n,r):e}catch(e){return""}},t.formatText=function(e,t,n,r,o){try{const i=d(e);if(i<t){o=D(o,0,1);let n=t-i;for(;n-- >0;)r?e=o+e:e+=o;return e}return i>n?D(e,r?i-n:0,n):e}catch(e){return""}};const $="[a-zA-Z0-9.!#$%&'*+\\-/=?^_`{|}~]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*",G="([0-9a-zA-Z\\\\= ]*|=\\?([^?]*)\\?([qQbB])\\?([^?]*)\\?=)",B=new RegExp("^"+$+"$"),X=new RegExp("^"+G+"[ ]*<"+$+">$"),k=new RegExp('^\\"'+G+'\\"[ ]*<'+$+">$");t.emailAddressValidate=function(e){return""===e||!/\.@/.test(e)&&(B.test(e)||X.test(e)||k.test(e))},t.getCurrentLocale=function({localeService:e=a.resolve(u.ServiceNames.LocaleService)}={}){return e?e.getCurrentLocale():r.Constants.DEFAULT_TEXT},t.getUserAgent=function(){return navigator.userAgent},t.getAppName=function(){return n.getApplicationName()},t.getBookmarkableURL=function(){return window.location.href},t.getOwnerURLPath=function(){return s.buildApplicationRelativeUrl()},t.getUserId=function(){const e=i.getUserId();return o.debug(c.ROLES_INFO_MODULE_NAME,"Checking User's ID: "+e),e},t.iif=function(e,t,n){return e?t:n}}));
define("OutSystems/ClientRuntime/modules/Database/DatabaseTypeUtils",["require","exports","../../DataTypes","../../Exceptions","./DBDataType"],(function(e,a,t,T,D){"use strict";function u(e){switch(e){case D.default.TEXT:return t.DataTypes.Text;case D.default.BINARY_DATA:return t.DataTypes.BinaryData;case D.default.BOOLEAN:return t.DataTypes.Boolean;case D.default.DATE:return t.DataTypes.Date;case D.default.DATE_TIME:return t.DataTypes.DateTime;case D.default.TIME:return t.DataTypes.Time;case D.default.DECIMAL:return t.DataTypes.Decimal;case D.default.INTEGER:return t.DataTypes.Integer;case D.default.LONGINTEGER:return t.DataTypes.LongInteger;default:throw new Error(`Missing case for conversion of DB data type '${e}' to a model data type.`)}}function s(e){const a=u(e);return t.DataTypes[a]}Object.defineProperty(a,"__esModule",{value:!0}),a.convertDataTypeToDBDataType=a.typeDisplayName=a.convertToModelDataType=a.typeDefaultValue=a.dataTypeToDBDataType=void 0,a.dataTypeToDBDataType={[t.DataTypes.Integer]:D.default.INTEGER,[t.DataTypes.LongInteger]:D.default.LONGINTEGER,[t.DataTypes.Decimal]:D.default.DECIMAL,[t.DataTypes.Currency]:D.default.DECIMAL,[t.DataTypes.Text]:D.default.TEXT,[t.DataTypes.PhoneNumber]:D.default.TEXT,[t.DataTypes.Email]:D.default.TEXT,[t.DataTypes.Boolean]:D.default.BOOLEAN,[t.DataTypes.Date]:D.default.DATE,[t.DataTypes.DateTime]:D.default.DATE_TIME,[t.DataTypes.Time]:D.default.TIME,[t.DataTypes.Record]:D.default.UNKNOWN,[t.DataTypes.RecordList]:D.default.UNKNOWN,[t.DataTypes.BinaryData]:D.default.BINARY_DATA,[t.DataTypes.Object]:D.default.UNKNOWN},a.typeDefaultValue=function(e){switch(e){case D.default.INTEGER:case D.default.LONGINTEGER:case D.default.DECIMAL:case D.default.TEXT:case D.default.BOOLEAN:case D.default.DATE:case D.default.DATE_TIME:case D.default.TIME:case D.default.BINARY_DATA:return(0,t.defaultForType)(u(e));default:throw new T.Exceptions.DataBaseException("","Unable to determine default value for type "+s(e))}},a.convertToModelDataType=u,a.typeDisplayName=s,a.convertDataTypeToDBDataType=function(e){const t=a.dataTypeToDBDataType[e];return null!=t?t:D.default.UNKNOWN}}));
define("OutSystems/ClientRuntime/DataConversion",["require","exports","./BuiltinFunctions","./DataTypes","./Exceptions","./Interfaces","./modules/Database/DatabaseTypeUtils"],(function(e,t,a,n,i,s,r){"use strict";function o(e){return!!e.isGenericRecordType}function T(e){return!!e.isGenericRecordListType}function l(e){return!!e.isBasicTypeListType}var u,c;Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageConverter=t.JSONConverter=t.JSNodeParamConverter=t.JSConversions=t.ServerDataConverter=void 0,function(e){const t=new Map,i=new Map;function s(e,t){switch(t){case n.DataTypes.Integer:return e;case n.DataTypes.LongInteger:return a.longIntegerToText(e);case n.DataTypes.Decimal:case n.DataTypes.Currency:return a.decimalToText(e);case n.DataTypes.Text:case n.DataTypes.PhoneNumber:case n.DataTypes.Email:return e;case n.DataTypes.Date:return e.toISODate();case n.DataTypes.DateTime:return e.toString();case n.DataTypes.Time:return e.toISOTime();case n.DataTypes.Boolean:return e;case n.DataTypes.Record:case n.DataTypes.RecordList:throw new TypeError("Records and Record lists are not basic types");case n.DataTypes.BinaryData:return"string"==typeof e?e:e.content;case n.DataTypes.Object:default:return e}}function r(e,t){switch(t){case n.DataTypes.Integer:return n.TypeValidations.ensureIntegerInsideBounds(e),0|e;case n.DataTypes.LongInteger:return"string"==typeof e?n.LongInteger.fromString(e):n.LongInteger.fromNumber(e);case n.DataTypes.Decimal:case n.DataTypes.Currency:return new n.Decimal(e||"0");case n.DataTypes.Boolean:return"string"==typeof e?a.textToBoolean(e):e;case n.DataTypes.Text:case n.DataTypes.PhoneNumber:case n.DataTypes.Email:return void 0===e?"":e+"";case n.DataTypes.Date:return e instanceof Date?new n.DateTime(e):n.DateTime.fromISODate(e);case n.DataTypes.DateTime:return e instanceof Date?new n.DateTime(e):n.DateTime.fromISODateTime(e);case n.DataTypes.Time:return e instanceof Date?new n.DateTime(e):n.DateTime.fromISOTime(e);case n.DataTypes.Record:case n.DataTypes.RecordList:throw new TypeError("Records and Record lists are not basic types");case n.DataTypes.BinaryData:return n.TypeValidations.hasBinaryDataInterface(e)?new n.BinaryData(e.content,e.url):new n.BinaryData(e);case n.DataTypes.Object:default:return e}}e.to=function e(a,i=n.DataTypes.Record,r=!1,o=!1){if(null==a)return;let T,l=n.DataTypes.Record;if("number"!=typeof i?(o=!0===r,T=i,l=n.DataTypes.Record):(l=i,"boolean"!=typeof r&&(T=r)),a instanceof n.GenericRecord){const i=a,r=i.constructor;let l=t.get(r);if(!l){const a=i.getAttributes();l=(t,i,r)=>a.reduce((o,T,l)=>(T.ignoreForServer||(T.dataType===n.DataTypes.Record||T.dataType===n.DataTypes.RecordList?o[T.name]=e(t[T.attrName],i,T.optimizeList&&r):T.dataType!==n.DataTypes.Object&&(o[T.name]=s(t[T.attrName],a[l].dataType))),o),{}),t.set(r,l)}return l(a,T,o)}if(a instanceof n.List){const t=a,n=t.constructor.getItemType(),i={List:[]};if(o&&T){if(t.length>0&&T){const s=T.iterationContext.getCurrentRowNumber(a);i.List.push(e(t.getItem(s),n,T,o))}}else for(let a=0;a<t.length;a++)i.List.push(e(t.getItem(a),n));return t.isEmpty&&(i.EmptyListItem=e(t.emptyListItem,n,T,o)),i}return l!==n.DataTypes.Object?s(a,l):void 0},e.from=function e(t,a){if(o(a)){const s=a;let o=i.get(s);if(!o){const t=s.getAttributes();o=a=>{null!=a||(a={});const i=t.reduce((i,s,o)=>(s.dataType===n.DataTypes.Record||s.dataType===n.DataTypes.RecordList?i[s.attrName]=n.GenericRecord.getData(e(a[s.name],t[o].complexType)):s.dataType===n.DataTypes.BinaryData?i[s.attrName]=r({content:a[s.name],url:a[`_${s.name}URL`]},t[o].dataType):i[s.attrName]=r(a[s.name],t[o].dataType),i),{});return new s(new s.RecordClass(i))},i.set(s,o)}return o(t)}if(T(a)||l(a)){if(void 0===a.getItemType()||null===a.getItemType())throw Error("A List can only be deserialized if its ItemType is defined.");const n=new a;return 0===t.List.length?n.emptyListItem=e(t.EmptyListItem,a.getItemType()):n.pushAll(t.List.map(t=>e(t,a.getItemType()))),n}return r(t,a)}}(u=t.ServerDataConverter||(t.ServerDataConverter={})),function(e){function t(e){return!!(n.TypeValidations.isValidJsNumber(e)&&e>=n.Constants.MIN_INTEGER_VALUE&&e<=n.Constants.MAX_INTEGER_VALUE)||(n.TypeValidations.isLongInteger(e)?a.longIntegerToIntegerValidate(e):n.TypeValidations.isDecimal(e)?a.decimalToIntegerValidate(e):n.TypeValidations.isText(e)?a.textToIntegerValidate(e):!!n.TypeValidations.isBoolean(e))}function i(e){return!!n.TypeValidations.isValidJsNumber(e)||(!!n.TypeValidations.isValidLongInteger(e)||(n.TypeValidations.isValidDecimal(e)?a.decimalToLongIntegerValidate(e):n.TypeValidations.isText(e)?a.textToLongIntegerValidate(e):!!n.TypeValidations.isBoolean(e)))}function s(e){return!!n.TypeValidations.isValidJsNumber(e)||(!!(n.TypeValidations.isValidDecimal(e)&&n.Constants.MIN_DECIMAL_VALUE.lte(e)&&n.Constants.MAX_DECIMAL_VALUE.gte(e))||(!!n.TypeValidations.isValidLongInteger(e)||(n.TypeValidations.isText(e)?a.textToDecimalValidate(e):!!n.TypeValidations.isBoolean(e))))}function r(e){return n.TypeValidations.isJsNumber(e)?n.TypeValidations.isValidJsNumber(e):n.TypeValidations.isLongInteger(e)?n.TypeValidations.isValidLongInteger(e):n.TypeValidations.isDecimal(e)?n.TypeValidations.isValidDecimal(e):!!n.TypeValidations.isText(e)||(!!n.TypeValidations.isBoolean(e)||(n.TypeValidations.isDateTime(e)?n.TypeValidations.isValidDateTime(e):!!n.TypeValidations.isJsDate(e)&&n.TypeValidations.isValidJsDate(e)))}function o(e){return r(e)}function T(e){return n.TypeValidations.isJsNumber(e)?n.TypeValidations.isValidJsNumber(e):n.TypeValidations.isLongInteger(e)?n.TypeValidations.isValidLongInteger(e):n.TypeValidations.isDecimal(e)?n.TypeValidations.isValidDecimal(e):n.TypeValidations.isText(e)?/^(true|false)$/gi.test(e):!!n.TypeValidations.isBoolean(e)}function l(e){if(n.TypeValidations.isValidDateTime(e)&&e.gte(n.Constants.MIN_DATE_VALUE)&&e.lte(n.Constants.MAX_DATE_VALUE))return!0;if(n.TypeValidations.isValidJsDate(e)&&new n.DateTime(e).gte(n.Constants.MIN_DATE_VALUE)&&new n.DateTime(e).lte(n.Constants.MAX_DATE_VALUE))return!0;if(n.TypeValidations.isText(e)){if(n.Constants.ISO_DATE_FORMAT_REGEXP.test(e)){const t=new n.DateTime(new Date(e));return t.gte(n.Constants.MIN_DATE_VALUE)&&t.lte(n.Constants.MAX_DATE_VALUE)}if(a.textToDateValidate(e)){const t=a.textToDate(e);return t.gte(n.Constants.MIN_DATE_VALUE)&&t.lte(n.Constants.MAX_DATE_VALUE)}return!1}return!1}function u(e){return!!n.TypeValidations.isValidDateTime(e)||(!!n.TypeValidations.isValidJsDate(e)||!!n.TypeValidations.isText(e)&&(!(!n.Constants.RFC3339_TIMEPART.test(e)&&!n.Constants.ISO_DATE_FORMAT_REGEXP.test(e))||a.textToTimeValidate(e)))}function c(e){if(n.TypeValidations.isValidDateTime(e)&&e.gte(n.Constants.MIN_DATETIME_VALUE)&&e.lte(n.Constants.MAX_DATETIME_VALUE))return!0;if(n.TypeValidations.isValidJsDate(e)&&new n.DateTime(e).gte(n.Constants.MIN_DATETIME_VALUE)&&new n.DateTime(e).lte(n.Constants.MAX_DATETIME_VALUE))return!0;if(n.TypeValidations.isText(e)){if(n.Constants.ISO_DATE_FORMAT_REGEXP.test(e)){const t=new n.DateTime(new Date(e));return t.gte(n.Constants.MIN_DATETIME_VALUE)&&t.lte(n.Constants.MAX_DATETIME_VALUE)}if(a.textToDateTimeValidate(e)){const t=a.textToDateTime(e);return t.gte(n.Constants.MIN_DATETIME_VALUE)&&t.lte(n.Constants.MAX_DATETIME_VALUE)}return!1}return!1}function D(e){if(s(e)){if(n.TypeValidations.isJsNumber(e))return a.objectToDecimal(e);if(n.TypeValidations.isLongInteger(e))return a.objectToDecimal(e);if(n.TypeValidations.isDecimal(e))return a.objectToDecimal(e);if(n.TypeValidations.isText(e)&&""!==e)return a.textToDecimal(e);if(n.TypeValidations.isBoolean(e))return a.booleanToDecimal(e)}return n.Constants.DEFAULT_DECIMAL}function p(e){if(r(e)){if(n.TypeValidations.isJsNumber(e))return n.TypeValidations.isValidInteger(e)?a.integerToText(e):a.decimalToText(new n.Decimal(e));if(n.TypeValidations.isLongInteger(e))return a.longIntegerToText(e);if(n.TypeValidations.isDecimal(e))return a.decimalToText(e);if(n.TypeValidations.isText(e))return e;if(n.TypeValidations.isBoolean(e))return a.booleanToText(e);if(n.TypeValidations.isValidDate(e))return a.dateToText(e);if(n.TypeValidations.isValidTime(e))return a.timeToText(e);if(n.TypeValidations.isDateTime(e))return a.dateTimeToText(e);if(n.TypeValidations.isJsDate(e)){const t=new n.DateTime(e);return n.TypeValidations.isValidDate(t)?a.dateToText(t):n.TypeValidations.isValidTime(t)?a.timeToText(t):a.dateTimeToText(t)}}return n.Constants.DEFAULT_TEXT}e.isConvertibleTo=function(e,a){switch(a){case n.DataTypes.Integer:return t(e);case n.DataTypes.LongInteger:return i(e);case n.DataTypes.Decimal:return s(e);case n.DataTypes.Currency:return function(e){return s(e)}(e);case n.DataTypes.Text:return r(e);case n.DataTypes.PhoneNumber:return function(e){return r(e)}(e);case n.DataTypes.Email:return o(e);case n.DataTypes.Boolean:return T(e);case n.DataTypes.Date:return l(e);case n.DataTypes.Time:return u(e);case n.DataTypes.DateTime:return c(e);case n.DataTypes.BinaryData:return function(e){return n.TypeValidations.isBinaryData(e)}(e);default:return!1}},e.isDefault=function(e){return n.TypeValidations.isValidJsNumber(e)&&e===n.Constants.DEFAULT_INTEGER||n.TypeValidations.isValidLongInteger(e)&&e.equals(n.Constants.DEFAULT_LONGINTEGER)||n.TypeValidations.isValidDecimal(e)&&e.equals(n.Constants.DEFAULT_DECIMAL)||n.TypeValidations.isText(e)&&e===n.Constants.DEFAULT_TEXT||n.TypeValidations.isBoolean(e)&&e===n.Constants.DEFAULT_BOOLEAN||n.TypeValidations.isValidDateTime(e)&&e.equals(n.Constants.DEFAULT_DATETIME)},e.convertTo=function(e,s){switch(s){case n.DataTypes.Integer:return function(e){if(t(e)){if(n.TypeValidations.isJsNumber(e))return a.objectToInteger(e);if(n.TypeValidations.isLongInteger(e))return a.objectToInteger(e);if(n.TypeValidations.isDecimal(e))return a.objectToInteger(e);if(n.TypeValidations.isText(e)&&""!==e)return a.textToInteger(e);if(n.TypeValidations.isBoolean(e))return a.booleanToInteger(e)}return n.Constants.DEFAULT_INTEGER}(e);case n.DataTypes.LongInteger:return function(e){if(i(e)){if(n.TypeValidations.isJsNumber(e))return a.objectToLongInteger(e);if(n.TypeValidations.isLongInteger(e))return a.objectToLongInteger(e);if(n.TypeValidations.isDecimal(e))return a.objectToLongInteger(e);if(n.TypeValidations.isText(e)&&""!==e)return a.textToLongInteger(e);if(n.TypeValidations.isBoolean(e))return a.booleanToLongInteger(e)}return n.Constants.DEFAULT_LONGINTEGER}(e);case n.DataTypes.Decimal:return D(e);case n.DataTypes.Currency:return function(e){return D(e)}(e);case n.DataTypes.Text:return p(e);case n.DataTypes.PhoneNumber:return function(e){return p(e)}(e);case n.DataTypes.Email:return function(e){return o(e)&&n.TypeValidations.isText(e)?e:n.Constants.DEFAULT_EMAIL}(e);case n.DataTypes.Boolean:return function(e){if(T(e)){if(n.TypeValidations.isJsNumber(e))return 0!==e;if(n.TypeValidations.isLongInteger(e))return!e.eq(0);if(n.TypeValidations.isDecimal(e))return!e.eq(0);if(n.TypeValidations.isText(e)&&""!==e)return!/^(false)$/gi.test(e);if(n.TypeValidations.isBoolean(e))return e}return n.Constants.DEFAULT_BOOLEAN}(e);case n.DataTypes.Date:return function(e){if(l(e)){if(n.TypeValidations.isDateTime(e)){const t=e;return new n.DateTime(t.year,t.month,t.day)}if(n.TypeValidations.isJsDate(e)){const t=e;return new n.DateTime(t.getFullYear(),t.getMonth()+1,t.getDate())}if(n.TypeValidations.isText(e)&&""!==e)return n.Constants.RFC3339_DATEPART.test(e)?n.DateTime.fromISODate(e):n.Constants.ISO_DATE_FORMAT_REGEXP.test(e)?a.dateTimeToDate(n.DateTime.fromISODateTime(e)):a.textToDate(e)}return n.Constants.DEFAULT_DATE}(e);case n.DataTypes.Time:return function(e){if(u(e)){if(n.TypeValidations.isDateTime(e)){const t=e;return new n.DateTime(null,null,null,t.hours,t.minutes,t.seconds,t.milliseconds)}if(n.TypeValidations.isJsDate(e)){const t=e;return new n.DateTime(null,null,null,t.getHours(),t.getMinutes(),t.getSeconds())}if(n.TypeValidations.isText(e)&&""!==e)return n.Constants.RFC3339_TIMEPART.test(e)?n.DateTime.fromISOTime(e):n.Constants.ISO_DATE_FORMAT_REGEXP.test(e)?a.dateTimeToTime(n.DateTime.fromISODateTime(e)):a.textToTime(e)}return n.Constants.DEFAULT_TIME}(e);case n.DataTypes.DateTime:return function(e){if(c(e)){if(n.TypeValidations.isDateTime(e)){const t=e;return new n.DateTime(t.year,t.month,t.day,t.hours,t.minutes,t.seconds,t.milliseconds)}if(n.TypeValidations.isJsDate(e)){const t=e;return new n.DateTime(t)}if(n.TypeValidations.isText(e)&&""!==e)return n.Constants.ISO_DATE_FORMAT_REGEXP.test(e)?n.DateTime.fromISODateTime(e):a.textToDateTime(e)}return n.Constants.DEFAULT_DATETIME}(e);case n.DataTypes.BinaryData:return e;default:return null}},e.typeConvertRecord=function(e,t,a){return a(e,t)},e.typeConvertRecordList=function(e,t,a){let n=0;for(;n<e.length;)t.append(a(e.getItem(n),t.newItem())),n++;return t}}(c=t.JSConversions||(t.JSConversions={})),function(e){function t(e){return e-e%1}e.to=function(e,t){return function(e,t){switch(t){case n.DataTypes.Integer:return e;case n.DataTypes.LongInteger:const t=e;return n.TypeValidations.ensureNumberInsideBounds(t),t.toNumber();case n.DataTypes.Decimal:case n.DataTypes.Currency:const a=e;return n.TypeValidations.ensureNumberPrecision(a),n.TypeValidations.ensureNumberInsideBounds(a),a.toNumber();case n.DataTypes.Text:case n.DataTypes.PhoneNumber:case n.DataTypes.Email:return e;case n.DataTypes.Date:case n.DataTypes.DateTime:case n.DataTypes.Time:return e.toNative();case n.DataTypes.Boolean:return e;case n.DataTypes.Record:case n.DataTypes.RecordList:throw new TypeError("Records and Record lists are not basic types");case n.DataTypes.BinaryData:const i=e;return"string"==typeof e?e:i.content;case n.DataTypes.Object:default:return e}}(e,t)},e.from=function(e,s){return function(e,s){switch(s){case n.DataTypes.Integer:if(n.TypeValidations.isValidJsNumber(e))return n.TypeValidations.ensureIntegerInsideBounds(e),t(e);break;case n.DataTypes.LongInteger:if(n.TypeValidations.isValidJsNumber(e))return n.TypeValidations.ensureLongIntegerInsideBounds(e),n.LongInteger.fromNumber(t(e));break;case n.DataTypes.Decimal:case n.DataTypes.Currency:if(n.TypeValidations.isValidJsNumber(e))return n.TypeValidations.ensureDecimalInsideBounds(e),new n.Decimal(e);break;case n.DataTypes.Boolean:if(n.TypeValidations.isBoolean(e))return e;break;case n.DataTypes.Text:case n.DataTypes.PhoneNumber:case n.DataTypes.Email:if(n.TypeValidations.isText(e))return e;if(n.TypeValidations.isValidJsNumber(e))return n.TypeValidations.ensureDecimalInsideBounds(e),a.decimalToText(new n.Decimal(e));if(n.TypeValidations.isBoolean(e))return a.booleanToText(e);break;case n.DataTypes.Date:if(n.TypeValidations.isValidJsDate(e)){const t=e;return new n.DateTime(t.getFullYear(),t.getMonth()+1,t.getDate())}break;case n.DataTypes.DateTime:if(n.TypeValidations.isValidJsDate(e))return new n.DateTime(e);break;case n.DataTypes.Time:if(n.TypeValidations.isValidJsDate(e)){const t=e;return new n.DateTime(null,null,null,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}break;case n.DataTypes.BinaryData:return n.TypeValidations.hasBinaryDataInterface(e)?new n.BinaryData(e.content,e.url):new n.BinaryData(e);case n.DataTypes.Object:return e}throw new i.Exceptions.InvalidJavascriptType(`Cannot assign a JavaScript ${typeof e} with value ${null==e?JSON.stringify(e):e.toString()} to an output parameter of type ${n.DataTypes[s]}`)}(e,s)}}(t.JSNodeParamConverter||(t.JSNodeParamConverter={})),function(e){const t=new Map;function s(e,t,a,i=!0,s,r=!1){if(!1!==i||r||!(0,n.equals)(e,a))switch(t){case n.DataTypes.Time:return e.toISOTime();case n.DataTypes.Date:return e.toISODate();case n.DataTypes.DateTime:return!0===s?""+Math.floor(e.getTime()/1e3):e.toString().replace(/\.\d+/,"");case n.DataTypes.LongInteger:const t=e;return n.TypeValidations.ensureNumberInsideBounds(t),t.toNumber();case n.DataTypes.Decimal:case n.DataTypes.Currency:const a=e;return n.TypeValidations.ensureNumberPrecision(a),n.TypeValidations.ensureNumberInsideBounds(a),a.toNumber();case n.DataTypes.Record:case n.DataTypes.RecordList:throw new TypeError("Records and Record lists are not basic types");case n.DataTypes.BinaryData:const i=e;return"string"==typeof e?e:i.content;default:return e}}function r({value:e,serializeDefaultValues:t=!0,useUnixDateFormat:a=!1,dataType:i=n.DataTypes.Record,defaultValue:o,enforceDefaultValueSerializationAtThisLevel:T=!1}){if(null!=e)return e instanceof n.GenericRecord?function(e,t,a,i=!1){const o=e.getAttributes().reduce((i,o)=>{if(o.dataType===n.DataTypes.Record||o.dataType===n.DataTypes.RecordList){const n=r({value:e[o.attrName],serializeDefaultValues:t,useUnixDateFormat:a});n&&(i[o.nameForJson]=n)}else{const n=s(e[o.attrName],o.dataType,o.defaultValue,t,a);void 0!==n&&(i[o.nameForJson]=n)}return i},{});if(0!==Object.keys(o).length||i)return o}(e,null!=t&&t,null!=a&&a,T):e instanceof n.List?function(e,t,a,n=!1){const i=[],s=e.constructor.getItemType();for(let n=0;n<e.length;n++)i.push(r({value:e.getItem(n),serializeDefaultValues:t,useUnixDateFormat:a,dataType:s,enforceDefaultValueSerializationAtThisLevel:!0}));if(i.length>0||t||n)return i}(e,null!=t&&t,null!=a&&a,T):s(e,i,null!=o?o:(0,n.defaultForType)(i),t,a,T)}function D(e,t,s,r){if(null==e)return s;switch(t){case n.DataTypes.Integer:return function(e){let t;n.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e)?t=new n.Decimal(e):n.Constants.FORMAT.numberFormat.getRegExpForJSNumber().test(e)&&(t=new n.Decimal(+e));if(void 0===t||!t.isInteger()||!a.decimalToIntegerValidate(t))throw new i.Exceptions.Exception("Could not convert '"+e+"' to Integer");return a.decimalToInteger(t)}(e);case n.DataTypes.LongInteger:return function(e){let t;n.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e)?t=new n.Decimal(e):n.Constants.FORMAT.numberFormat.getRegExpForJSNumber().test(e)&&(t=new n.Decimal(+e));if(void 0===t||!t.isInteger()||!a.decimalToLongIntegerValidate(t))throw new i.Exceptions.Exception("Could not convert '"+e+"' to Long Integer");return a.decimalToLongInteger(t)}(e);case n.DataTypes.Currency:case n.DataTypes.Decimal:return function(e){let t;n.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e)?t=new n.Decimal(e):n.Constants.FORMAT.numberFormat.getRegExpForJSNumber().test(e)&&(t=new n.Decimal(+e));if(void 0===t||t.lt(n.Constants.MIN_DECIMAL_VALUE)||t.gt(n.Constants.MAX_DECIMAL_VALUE))throw new i.Exceptions.Exception("Could not convert '"+e+"' to Decimal");return t}(e);case n.DataTypes.DateTime:return function(e,t){if(!t){if(!c.isConvertibleTo(e,n.DataTypes.DateTime))throw new i.Exceptions.Exception("Could not convert '"+e+"' to DateTime");return u.from(e,n.DataTypes.DateTime)}e instanceof Date&&(e=new n.DateTime(e.getTime()));try{return new n.DateTime(1e3*+e)}catch(t){throw new i.Exceptions.Exception("Could not convert '"+e+"' to DateTime")}}(e,r);default:return u.from(e,t)}}e.to=r,e.from=function e(a,i,s,r){if(o(i)){const r=i;let o=t.get(r);if(!o){const a=r.getAttributes();o=(t,s)=>{null!=t||(t={});const r=a.reduce((i,r,o)=>(""!==r.nameForJson&&(r.dataType===n.DataTypes.Record||r.dataType===n.DataTypes.RecordList?i[r.attrName]=n.GenericRecord.getData(e(t[r.nameForJson],a[o].complexType,s)):i[r.attrName]=D(t[r.nameForJson],a[o].dataType,a[o].defaultValue,s)),i),{});return new i(new i.RecordClass(r))},t.set(r,o)}return o(a,s)}if(T(i)||l(i)){if(void 0===i.getItemType()||null===i.getItemType())throw Error("A List can only be deserialized if its ItemType is defined.");let t=a;if(null==t&&(t=[]),t.constructor!==Array)throw new TypeError("Could not convert '"+t+"' to List");const n=new i;return n.pushAll(t.map(t=>e(t,i.getItemType(),s))),n}return D(a,i,void 0===r?(0,n.defaultForType)(i):r,s)}}(t.JSONConverter||(t.JSONConverter={})),function(e){e.typeDefaultValue=r.typeDefaultValue,e.convertToModelDataType=r.convertToModelDataType,e.typeDisplayName=r.typeDisplayName;const t=new Map;function a(e){const t=r.dataTypeToDBDataType[e];return void 0===t?s.ClientDB.DBDataType.UNKNOWN:t}function l(t,n,i,s){return e.deserializeFromDB(t["o"+n],a(s))}function u(t,n,i,s){return e.deserializeFromDB(t[i],a(s))}function c(e,t){const a=t.length,n=e.toString();return t.substr(0,Math.max(0,a-n.length))+n}e.from=function e(a,i,s,r){var c;if(o(i)){const o=a,T=i,c=s;let D=t.get(T);if(!D){const a=T.getAttributes();D=(t,s,r,o)=>{const T={};return o&&o.length>0?(a.forEach(e=>{e.dataType!==n.DataTypes.RecordList&&(T[e.attrName]=null)}),o.forEach(n=>{const i=a.filter(e=>e.attrName===n)[0];i.complexType?T[n]=e(t,i.complexType,s):T[n]=r(t,s.value++,i.name,i.dataType)})):a.forEach((o,l)=>{o.dataType!==n.DataTypes.RecordList&&(o.dataType===n.DataTypes.Record&&i.isAnonymousRecord()?T[o.attrName]=e(t,a[l].complexType,s):T[o.attrName]=r(t,s.value++,a[l].name,a[l].dataType))}),new i.RecordClass(T)},t.set(T,D)}return D(o,c,i.isAnonymousRecord()?u:l,r)}if(T(i)){if(void 0===i.getItemType()||null===i.getItemType())throw Error("A List can only be deserialized if its ItemType is defined.");const e=a,t=i.getItemType(),n=s,r=new i,o=[];for(let a=0;a<e.length;a++)o.push(new t(n(null,e.item(a))));return r.pushAll(o),r}{const e=i;throw new Error("Unable to read data from Local Storage. Unknown type "+(null!==(c=null==e?void 0:e.name)&&void 0!==c?c:e))}},e.serializeToDB=function(t,a){if(a.isEntityReference&&(0,n.equals)(t,e.typeDefaultValue(a.type)))return null;switch(a.type){case s.ClientDB.DBDataType.INTEGER:return t;case s.ClientDB.DBDataType.LONGINTEGER:const e=t;return e?e.toString():null;case s.ClientDB.DBDataType.DECIMAL:const r=t;return a.decimals?r.toFixed(a.decimals):r.toString();case s.ClientDB.DBDataType.TEXT:return t;case s.ClientDB.DBDataType.BOOLEAN:return t?1:0;case s.ClientDB.DBDataType.DATE_TIME:let o=t.toNative();return t.eq(n.DateTime.defaultValue)?"1900-01-01 00:00:00":(o=t.toNative(),c(o.getUTCFullYear(),"0000")+"-"+c(o.getUTCMonth()+1,"00")+"-"+c(o.getUTCDate(),"00")+" "+c(o.getUTCHours(),"00")+":"+c(o.getUTCMinutes(),"00")+":"+c(o.getUTCSeconds(),"00"));case s.ClientDB.DBDataType.DATE:const T=t.toNative();return c(T.getFullYear(),"0000")+"-"+c(T.getMonth()+1,"00")+"-"+c(T.getDate(),"00");case s.ClientDB.DBDataType.TIME:const l=t.toNative();return"1900-01-01 "+c(l.getHours(),"00")+":"+c(l.getMinutes(),"00")+":"+c(l.getSeconds(),"00");case s.ClientDB.DBDataType.BINARY_DATA:const u=t;return void 0===u.content?null:u.content;default:throw new i.Exceptions.DataBaseException("",`Unable to serialize ${t} to a database value.`)}},e.deserializeFromDB=function(t,a){if(null===t)return e.typeDefaultValue(a);switch(a){case s.ClientDB.DBDataType.INTEGER:return t;case s.ClientDB.DBDataType.LONGINTEGER:return n.LongInteger.fromValue(t);case s.ClientDB.DBDataType.DECIMAL:const e=t;return new n.Decimal(e);case s.ClientDB.DBDataType.TEXT:return t;case s.ClientDB.DBDataType.BOOLEAN:return 0!==t;case s.ClientDB.DBDataType.DATE_TIME:case s.ClientDB.DBDataType.DATE:case s.ClientDB.DBDataType.TIME:const r=/^((\d{4})-(\d{2})-(\d{2}))?\s?((\d{2}):(\d{2}):(\d{2}))?$/.exec(t),o=new Date;switch(a){case s.ClientDB.DBDataType.DATE_TIME:if("1900-01-01 00:00:00"===t)return n.DateTime.defaultValue;o.setUTCFullYear(parseInt(r[2],10),parseInt(r[3],10)-1,parseInt(r[4],10)),o.setUTCHours(parseInt(r[6],10)||0,parseInt(r[7],10)||0,parseInt(r[8],10)||0,0);break;case s.ClientDB.DBDataType.DATE:o.setFullYear(parseInt(r[2],10),parseInt(r[3],10)-1,parseInt(r[4],10)),o.setHours(0,0,0,0);break;case s.ClientDB.DBDataType.TIME:o.setFullYear(1900,0,1),o.setHours(parseInt(r[6],10)||0,parseInt(r[7],10)||0,parseInt(r[8],10)||0,0)}return new n.DateTime(o);case s.ClientDB.DBDataType.BINARY_DATA:return new n.BinaryData(t);default:throw new i.Exceptions.DataBaseException("","Unable to deserialize "+t+" to a runtime value.")}},e.deserializeLazyBinaryFromDB=function(e){return new n.BinaryData(void 0,void 0,e)}}(t.LocalStorageConverter||(t.LocalStorageConverter={}))}));
define("OutSystems/ClientRuntime/Entities",["require","exports","./Database","./DataConversion","./DataTypes","./Exceptions","./Interfaces","./Logger","./RegExpHelper"],(function(e,t,a,n,r,o,i,s,l){"use strict";function u(e){}var c,d,T;Object.defineProperty(t,"__esModule",{value:!0}),t.QueryArgumentsList=t.Entity=t.webSQLStorageInstance=t.WebSQLStorage=t.Upgrades=t.PersistentKeyValue=t.BACKUP_TABLE_PREFIX=void 0,t.BACKUP_TABLE_PREFIX="BACKUP_",function(e){e[e.Unchanged=0]="Unchanged",e[e.Deleted=1]="Deleted",e[e.Recreated=2]="Recreated",e[e.New=3]="New"}(c||(c={})),function(e){const t=[{columnName:"Id",options:"INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL"},{columnName:"Key",options:"UNIQUE NOT NULL"},{columnName:"Value"}];e.TABLE_NAME="OSSYS_PERSISTENTKEYVALUE";const a=`"${t.map(e=>e.columnName).join('", "')}"`,n=t.map(e=>"'"+e.columnName+(e.options?"' "+e.options:"'")).join(", ");function r(t){return t.executeNonQuery(`CREATE TABLE IF NOT EXISTS "${e.TABLE_NAME}" (${n})`)}e.initialize=function(t,a){return e.storage=new o(a),r(t)},e.create=r;class o{constructor(e){this.db=e}isReady(){return Promise.resolve(!0)}getValue(t){return this.db.executeTransaction(a=>a.executeScalar(`SELECT VALUE FROM ${e.TABLE_NAME} WHERE Key = ?`,[t]))}setValue(t,n){return this.db.executeTransaction(r=>r.executeNonQuery(`INSERT OR REPLACE INTO ${e.TABLE_NAME} (${a}) VALUES (COALESCE((SELECT Id FROM ${e.TABLE_NAME} WHERE Key = ?), null), ?, ?)`,[t,t,n]))}}e.PersistentKeyValueStorage=o}(t.PersistentKeyValue||(t.PersistentKeyValue={})),function(e){let a;function l(e,t){return!!function(e,t){if(void 0===e)return!0;if(e===t)return!1;switch(e){case i.ClientDB.DBDataType.BOOLEAN:return t!==i.ClientDB.DBDataType.INTEGER&&t!==i.ClientDB.DBDataType.LONGINTEGER;case i.ClientDB.DBDataType.INTEGER:return t!==i.ClientDB.DBDataType.LONGINTEGER&&t!==i.ClientDB.DBDataType.TEXT;case i.ClientDB.DBDataType.LONGINTEGER:return t!==i.ClientDB.DBDataType.TEXT;default:return!0}}(e.type,t.type)||(!e.isEntityReference!=!t.isEntityReference||void 0!==e.length&&void 0!==t.length&&(void 0!==e.decimals&&void 0!==t.decimals?e.length-e.decimals>t.length-t.decimals:e.length>t.length))}function u(t,a,n,r){if(n){const o=function(e,t){const a=e.name.toLowerCase(),n=t.attributes.filter(e=>e.name.toLowerCase()===a);return 0===n.length?null:n[0]}(a,n);if(null!==o){if(r&&(null==o?void 0:o.type)===i.ClientDB.DBDataType.DATE_TIME){const n=r.attrs[a.name.toLowerCase()];if(n)return e.upgradeDbValue(t,n,a)}return e.upgradeDbValue(t,o,a)}}const o=r.attrs[a.name.toLowerCase()];return o?e.upgradeDbValue(t,o,a):t}function c(e,t,a=!1,n=null){let r,o=t;return n&&t.type===i.ClientDB.DBDataType.DATE_TIME&&(o=n),r=e.isPrimaryKey&&o.isPrimaryKey&&a?!!(i.ClientDB.DBDataType.INTEGER!==e.type&&i.ClientDB.DBDataType.LONGINTEGER!==e.type||i.ClientDB.DBDataType.INTEGER!==o.type&&i.ClientDB.DBDataType.LONGINTEGER!==o.type):e.type!==o.type,r||o.type!==i.ClientDB.DBDataType.DECIMAL&&o.length!==e.length||o.type!==i.ClientDB.DBDataType.DECIMAL&&o.decimals!==e.decimals||!o.isEntityReference!=!e.isEntityReference&&!e.isPrimaryKey}!function(e){const a=t.BACKUP_TABLE_PREFIX+"OSSYS_ENTITY",n=[{name:"SS_Key"},{name:"Module_SS_Key"},{name:"Name"},{name:"Physical_Table_name"},{name:"Hash"},{name:"Extra_Info",defaultValue:"'{\"attrs\":{}}'"},{name:"Upgrade_Status",defaultValue:(0).toString()}],r=`"${n.map(e=>e.name).join('", "')}"`;function o(e,t){return e.executeNonQuery(`CREATE TABLE IF NOT EXISTS "${t}" (${r}, UNIQUE (SS_Key, Module_SS_Key))`)}function l(e,t){let a=!0;const r=n.map(e=>`"ent"."${e.name}"`);return e.executeQueryRaw(`SELECT ${r.join(", ")} FROM "${t}" "ent" LIMIT 0`).onError(e=>{a=!1}).andThen(()=>a)}function u(e,t,n){return c(e,"OSSYS_ENTITY",t,n).andThen(e=>c(e,a,t,n))}function c(e,t,a,n){let r=!1;return e.feed(null).andThenAll(()=>[e=>e.executeNonQuery(`SELECT "ent"."${a}" FROM ${t} "ent" LIMIT 0`).onError(e=>{r=!0}),e=>r?e.executeNonQuery(`ALTER TABLE ${t} ADD "${a}"`).andThen(e=>n?e.executeNonQuery(`UPDATE ${t} SET "${a}" = ${n}`):e.feed(null)):e.feed(null)])}function d(e){s.debug("Metamodel",`Extracting metadata for table ${e.tableName} (${e.name})`);const t={v:0,idIsAutoNumber:e.idIsAutoNumber,attrs:{}};for(const a of e.attributes)t.attrs[a.name.toLowerCase()]=T(a);return t}function T(e){const t={type:e.type};return void 0!==e.decimals&&(t.decimals=e.decimals),void 0!==e.length&&(t.length=e.length),e.isPrimaryKey&&(t.isPrimaryKey=e.isPrimaryKey),e.isEntityReference&&(t.isEntityReference=e.isEntityReference),t}e.getDefaultMetaData=function(){return{v:-1,attrs:{}}},e.create=function(e){return o(e,"OSSYS_ENTITY").andThen(e=>o(e,t.BACKUP_TABLE_PREFIX+"OSSYS_ENTITY"))},e.innerCreate=o,e.verifyColumns=function(e){return l(e,"OSSYS_ENTITY").andThen(e=>l(e,a))},e.innerVerifyColumns=l,e.addMissingColumns=function(e){return e.feed(null).andThenAll(e=>n.map(e=>t=>u(t,e.name,e.defaultValue)))},e.addColumnIfNeeded=u,e.copyMetaInfo=function(e,t,n){const o=n?a:"OSSYS_ENTITY",i=n?"OSSYS_ENTITY":a;let s=e.executeNonQuery(`DELETE FROM ${i} WHERE Physical_Table_name = ?`,[t]).andThen(e=>e.executeNonQuery(`INSERT INTO ${i}(${r}) SELECT ${r} FROM ${o} WHERE Physical_Table_name = ?`,[t]));return n&&(s=s.andThen(e=>e.executeNonQuery(`DELETE FROM ${o} WHERE Physical_Table_name = ?`,[t]))),s},e.extractEntityMetadata=d,e.updateEntity=function(e,t,a){const n=d(t);s.debug("Metamodel",`Updating metadata for table ${t.tableName} (${t.name})`);const r=new m;return r.add("Hash",i.ClientDB.DBDataType.TEXT,t.hash),r.add("Name",i.ClientDB.DBDataType.TEXT,t.name),r.add("Physical_Table_name",i.ClientDB.DBDataType.TEXT,t.tableName),r.add("Extra_Info",i.ClientDB.DBDataType.TEXT,JSON.stringify(n)),r.add("Key",i.ClientDB.DBDataType.TEXT,t.key),r.add("ModuleKey",i.ClientDB.DBDataType.TEXT,a),e.executeNonQuery("UPDATE OSSYS_ENTITY SET Hash = ?, Name = ?, Physical_Table_name = ?, Extra_Info = ? WHERE SS_Key = ? AND Module_SS_Key = ?",r.toArray())},e.insertEntity=function(e,t,a){const n=d(t),r=new m;return r.add("Key",i.ClientDB.DBDataType.TEXT,t.key),r.add("ModuleKey",i.ClientDB.DBDataType.TEXT,a),r.add("Name",i.ClientDB.DBDataType.TEXT,t.name),r.add("TableName",i.ClientDB.DBDataType.TEXT,t.tableName),r.add("Hash",i.ClientDB.DBDataType.TEXT,t.hash),r.add("Extra_Info",i.ClientDB.DBDataType.TEXT,JSON.stringify(n)),r.add("Upgrade_Status",i.ClientDB.DBDataType.TEXT,3),e.executeNonQuery("INSERT INTO OSSYS_ENTITY(SS_Key, Module_SS_Key, Name, Physical_Table_name, Hash, Extra_Info, Upgrade_Status) VALUES (?, ?, ?, ?, ?, ?, ?)",r.toArray())}}(a=e.Metamodel||(e.Metamodel={})),e.upgradeDbValue=function(e,t,a){if(l(t,a)){const s=n.LocalStorageConverter.deserializeFromDB(e,t.type),l=n.LocalStorageConverter.convertToModelDataType(a.type),u=function(e,t,a,n){let o=e,s=t;const l=function(e){switch(e){case i.ClientDB.DBDataType.TEXT:return"Text";case i.ClientDB.DBDataType.BINARY_DATA:return"Binary Data";case i.ClientDB.DBDataType.BOOLEAN:return"Boolean";case i.ClientDB.DBDataType.INTEGER:return"Integer";case i.ClientDB.DBDataType.LONGINTEGER:return"Long Integer";case i.ClientDB.DBDataType.DECIMAL:return"Decimal";case i.ClientDB.DBDataType.DATE_TIME:return"DateTime";case i.ClientDB.DBDataType.DATE:return"Date";case i.ClientDB.DBDataType.TIME:return"Time";default:return"Unknown"}}(a),u=r.DataTypes[n];"string"==typeof e&&e&&(o=e.substr(0,50)+` (length:${e.length})`);if(r.TypeValidations.isText(t)){const e=t;s=e.substr(0,50)+` (length:${e.length})`}if(t instanceof r.BinaryData){const e=t.content;s=e.substr(0,50)+` (length:${e.length})`}return`convert databaseValue:'${o}'/deserializedValue:'${s}' from type ${l} to ${u}`}(e,s,t.type,l);if(n.JSConversions.isConvertibleTo(s,l)){const e=n.JSConversions.convertTo(s,l),t=n.LocalStorageConverter.serializeToDB(e,a);return b(t,a,u),t}throw new o.Exceptions.DataBaseException("",`Unable to ${u}.`)}return e},e.upgradeDbRecord=function(e,t,a,r){const i={};for(const t of Object.keys(e))i[t.toLowerCase()]=e[t];!function(e,t){var a;for(const r of t.attributes){const t=r.name.toLowerCase();if(void 0===e[t]){const o=null!==(a=r.default)&&void 0!==a?a:n.LocalStorageConverter.typeDefaultValue(r.type);e[t]=n.LocalStorageConverter.serializeToDB(o,r)}}}(i,t);const s={};for(const e of t.attributes)try{const t=e.name.toLowerCase(),n=i[t];s[t]=u(n,e,a,r)}catch(t){throw new o.Exceptions.DataBaseException("",`Unable to upgrade attribute '${e.name}' data type to '${n.LocalStorageConverter.typeDisplayName(e.type)}':\n${(0,o.getMessage)(t)}`)}return s},e.requiresFullUpgrade=function(e,t,a){let n;return n=t?t.idIsAutoNumber:a.idIsAutoNumber,n!==e.idIsAutoNumber||function(e,t,a){const n={};for(const t of e.attributes){const e=t.name.toLowerCase();n[e]={},n[e].entityAttribute=t}for(const e of Object.keys(a.attrs)){const t=e.toLowerCase();n[t]=n[t]||{},n[t].dbMetaAttribute=a.attrs[e]}if(t)for(const e of t.attributes){const t=null==e?void 0:e.name.toLowerCase();n[t]=n[t]||{},n[t].dbAttribute=e}return Object.keys(n).map(e=>n[e])}(e,t,a).some(e=>!e.entityAttribute||(e.dbAttribute||e.dbMetaAttribute?function(e,t,a,n=!1){if(t){return!(void 0===a||void 0===a.type||a.type===e.type)||c(e,t,n,a)||!t.isPrimaryKey!=!e.isPrimaryKey}return c(e,a,n)||!a.isPrimaryKey!=!e.isPrimaryKey}(e.entityAttribute,e.dbAttribute,e.dbMetaAttribute,n!==i.ClientDB.AutoNumber.No):e.entityAttribute.isPrimaryKey))}}(d=t.Upgrades||(t.Upgrades={})),function(e){e[e.Auto=0]="Auto",e[e.Single=1]="Single",e[e.Bulk=2]="Bulk"}(T||(T={}));const y=new r.BasicTypeKeyedTypeFactory("Id","idOut"),h=new r.ComplexTypeKeyedTypeFactory("Record","recordOut");class p{constructor(){}getDatabase(){return this._db?Promise.resolve(this._db):(this.dbReadyPromise||(this.dbReadyPromise=new Promise(e=>{this.onDbInit=()=>e(this._db)})),this.dbReadyPromise)}initDb(e){s.debug("WebSQLStorage",`Setting platform database to '${e?e.name:"none"}'`),this._db=e,this.onDbInit&&(this.onDbInit(),this.onDbInit=null)}clearDb(){this._db=null}initModule(e,t,a){return this.recoverBackupTables(t,e,a).andThen(t=>0===e.length?t.feed(null):this.dropInconsistentTables(t,e,a)).andThen(t=>this.backupDeletedTables(t,e,a)).andThen(e=>{const t=new m;return t.add("ModuleKey",i.ClientDB.DBDataType.TEXT,a),e.executeQuery("SELECT SS_Key, Hash, Extra_Info FROM OSSYS_ENTITY WHERE Module_SS_Key = ?",e=>({hash:e.Hash,extraInfo:JSON.parse(e.Extra_Info||"{}"),ssKey:e.SS_Key}),t.toArray())}).andThenAll(t=>e.map(e=>{const n=t.filter(t=>t.ssKey===e.key);return t=>this.createOrUpgradeTable(t,e,1===n.length?n[0]:void 0,a)}))}initMetamodel(e){return d.Metamodel.create(e).andThen(e=>d.Metamodel.verifyColumns(e)).andThen((e,t)=>{if(!t)return d.Metamodel.addMissingColumns(e)})}createOrUpgradeTable(e,t,n,r){s.debug("WebSQLStorage",`Checking the status of table ${t.tableName} (${t.name})`),n||(n={hash:null,extraInfo:d.Metamodel.getDefaultMetaData()});const{hash:o,extraInfo:i}=n;return o?o!==t.hash?a.SqlDbIntrospector.introspectTableInfo(e,t.tableName).andThen((e,a)=>d.requiresFullUpgrade(t,a,i)?(s.debug("WebSQLStorage",`Table ${t.tableName} (${t.name}) exists and will be fully upgraded`),this.recreateTable(e,t,a,r,i)):(s.debug(this,`Table ${t.tableName} (${t.name}) exists and will be incrementally upgraded`),this.upgradeTable(e,t,a,r,i))):(s.debug("WebSQLStorage",`Table ${t.tableName} (${t.name}) exists and is up to date`),null):(s.debug("WebSQLStorage",`Table ${t.tableName} (${t.name}) does not exist and will be created`),this.createTable(e,t,r).andThen(e=>d.Metamodel.insertEntity(e,t,r)))}recreateTable(e,t,a,n,r){return e.executeQuery(`SELECT * FROM "${t.tableName}"`,e=>e).onError(e=>{throw s.warning("WebSQLStorage",`Unable to upgrade the definition of entity '${t.name}':\n${(0,o.getMessage)(e)}`),new o.Exceptions.DataBaseException("",`Unable to upgrade the definition of entity '${t.name}':\n${(0,o.getMessage)(e)}`)}).andThen((e,o)=>this.backupTable(e,t.tableName,2).andThen(e=>this.createTable(e,t,n)).andThenAll(()=>o.map(e=>{const n=d.upgradeDbRecord(e,t,a,r),o=new m(!0);for(const e of t.attributes)o.add(e.name,e.type,n[e.name.toLowerCase()]);return e=>e.executeNonQuery(t.insert.sql,o.toArray())}))).andThen(e=>d.Metamodel.updateEntity(e,t,n))}upgradeTable(e,t,a,n,r,o=null){return e.feed(null).andThenAll(()=>{const e=t.attributes.filter(e=>a?!a.attributes.some(t=>e.name===t.name):!Object.keys(r.attrs).some(t=>t===e.name.toLowerCase()));return s.debug(this,`Entity '${t.name}' - newAttributes - ${JSON.stringify(e)} - hash - ${o} - info.hash - ${t.hash}`),e.map(e=>a=>{let n=a.executeNonQuery(e.addColumn.sql);if(void 0!==e.default){const a=new m;a.add("value",e.type,e.default),n=n.andThen(n=>n.executeNonQuery(`UPDATE "${t.tableName}" SET "${e.name}" = ?`,a.toArray()))}return n})}).andThen(e=>d.Metamodel.updateEntity(e,t,n))}switchModule(e,t){return this.dropBackupTables(e,t)}recoverBackupTables(e,t,a){return this.doForEachTable(e,e=>{s.debug("WebSQLStorage","Recovering table "+e);t.filter(t=>t.tableName===e);return t=>this.recoverBackupTable(t,e)},a,"Upgrade_Status <> 0")}dropInconsistentTables(e,t,a){return this.doForEachTable(e,e=>(s.debug(this,`Dropping inconsistent table ${e} (same key, different physical table name)`),t=>this.dropTableIfExists(t,e).andThen(t=>t.executeNonQuery(`DELETE FROM OSSYS_ENTITY WHERE upper(Physical_Table_name) = '${e}'`))),a,"Upgrade_Status = 0"+(0===t.length?"":` AND SS_Key IN (${t.map(e=>"'"+e.key+"'").join(", ")}) AND Physical_Table_name NOT IN (${t.map(e=>"'"+e.tableName+"'").join(", ")})`))}dropBackupTables(e,t){return this.doForEachTable(e,e=>(s.debug("WebSQLStorage","Dropping table "+e),t=>this.dropBackupTable(t,e)),t,"Upgrade_Status <> 0")}backupDeletedTables(e,t,a){return this.doForEachTable(e,e=>(s.debug("WebSQLStorage","Backing up old table "+e),t=>this.backupTable(t,e,1)),a,"Upgrade_Status = 0"+(0===t.length?"":` AND Physical_Table_name NOT IN (${t.map(e=>"'"+e.tableName+"'").join(", ")})`))}doForEachTable(e,t,a,n){let r=`SELECT Physical_Table_name as name FROM OSSYS_ENTITY WHERE Module_SS_Key = '${a}'`;return n&&(r+=" AND "+n),e.executeQuery(r,e=>e.name).andThenAll(e=>{const a=[];return e.forEach(e=>{a.push(t(e))}),a})}dropTableIfExists(e,t){return e.executeNonQuery(`DROP TABLE IF EXISTS "${t}"`)}createTable(e,t,a){return s.debug("WebSQLStorage",`createTable '${t.createTable.sql}'`),e.executeNonQuery(t.createTable.sql)}backupTable(e,t,a){return s.debug("WebSQLStorage",`backupTable '${t}'`),d.Metamodel.copyMetaInfo(e,t,!1).andThen(e=>this.dropTableIfExists(e,this.getBackupTableName(t))).andThen(e=>this.renameTableAndSetStatus(e,t,this.getBackupTableName(t),t,a))}recoverBackupTable(e,t){let a=!0;return this.dropTableIfExists(e,t).andThen(e=>e.executeScalar("SELECT 1 FROM "+this.getBackupTableName(t))).onError(e=>{e&&(a=!1)}).andThen(e=>{if(a)return this.renameTableAndSetStatus(e,this.getBackupTableName(t),t,t,0)}).andThen(e=>d.Metamodel.copyMetaInfo(e,t,!0))}dropBackupTable(e,a){return this.dropTableIfExists(e,this.getBackupTableName(a)).andThen(e=>e.executeScalar(`SELECT Upgrade_Status FROM OSSYS_ENTITY WHERE upper(Physical_Table_name) = '${a}'`)).andThen((e,t)=>e.executeNonQuery(1===t?`DELETE FROM OSSYS_ENTITY WHERE upper(Physical_Table_name) = '${a}'`:`UPDATE OSSYS_ENTITY SET Upgrade_Status = 0 WHERE upper(Physical_Table_name) = '${a}'`)).andThen(e=>e.executeNonQuery(`DELETE FROM ${t.BACKUP_TABLE_PREFIX}OSSYS_ENTITY WHERE Physical_Table_name = ?`,[a]))}renameTableAndSetStatus(e,t,a,n,r){return s.debug("WebSQLStorage",`renameTableAndSetStatus '${n} to ${a}'`),this.renameTable(e,t,a).andThen(e=>this.setTableUpgradeStatus(e,n,r))}renameTable(e,t,a){return e.executeNonQuery(`ALTER TABLE "${t}" RENAME TO "${a}"`)}setTableUpgradeStatus(e,t,a){return e.executeNonQuery(`UPDATE OSSYS_ENTITY SET Upgrade_Status = ${a} WHERE upper(Physical_Table_name) = '${t}'`)}getBackupTableName(e){return t.BACKUP_TABLE_PREFIX+e}executeNonQuery(e,t){return this.getDatabase().then(a=>a.executeTransaction(a=>a.executeNonQuery(e,null==t?void 0:t.toArray())))}executeQuery(e,t,a,r){return this.getDatabase().then(o=>o.executeReadTransaction(o=>o.executeQueryRaw(e,null==r?void 0:r.toArray()).andThen((e,r)=>n.LocalStorageConverter.from(r.rows,t,a))))}rawExecuteQuery(e,t,a){return this.getDatabase().then(n=>n.executeReadTransaction(n=>n.executeQueryRaw(e,null==a?void 0:a.toArray()).andThen((e,a)=>{const n=new Array(a.rows.length);for(let e=0;e<a.rows.length;e++){const r=a.rows.item(e);n[e]=t(r)}return n})))}executeCount(e,t){return this.getDatabase().then(a=>a.executeReadTransaction(a=>a.executeScalar(e,null==t?void 0:t.toArray()).andThen((e,t)=>n.LocalStorageConverter.deserializeFromDB(t,i.ClientDB.DBDataType.LONGINTEGER))))}rawExecuteScalar(e,t){return this.getDatabase().then(a=>a.executeReadTransaction(a=>a.executeQueryRaw(e,null==t?void 0:t.toArray()).andThen((e,t)=>0===t.rows.length?null:function(e){for(const t in e)if(e.hasOwnProperty(t))return e[t];return null}(t.rows.item(0)))))}create(e,t){return E(e,t,"create"),this.getDatabase().then(a=>a.executeTransaction(a=>this.createInner(a,e,t,!0)))}createInner(e,t,a,r){var o,s;const l=null===(s=(o=t.insert).getArguments)||void 0===s?void 0:s.call(o,a);return e.executeQueryRaw(t.insert.sql,null==l?void 0:l.toArray()).andThen((e,o)=>{if(null===t.getIdAttribute())return null;(t.idIsAutoNumber===i.ClientDB.AutoNumber.No||t.idIsAutoNumber===i.ClientDB.AutoNumber.YesIfEmpty&&!t.hasNullId(a))&&(r=!1);const s=t.getIdAttribute().type,l=n.LocalStorageConverter.convertToModelDataType(s),u=new(y.getType(l));let c;return c=r?n.LocalStorageConverter.deserializeFromDB(o.insertId,s):t.getIdFromRecord(a),u.idOut=c,u})}update(e,t){var a,n;E(e,t,"update");const r=null===(n=(a=e.update).getArguments)||void 0===n?void 0:n.call(a,t);return this.executeNonQuery(e.update.sql,r)}createOrUpdate(e,t){return this.getDatabase().then(a=>a.executeTransaction(a=>this.createOrUpdateInner(a,e,t,!0)))}createOrUpdateInner(e,t,a,r){var o,i;if(E(t,a,"create or update"),t.hasNullId(a))return this.createInner(e,t,a,!0);const s=null===(i=(o=t.upsert).getArguments)||void 0===i?void 0:i.call(o,a);return e.executeQueryRaw(t.upsert.sql,null==s?void 0:s.toArray()).andThen((e,r)=>{const o=t.getIdFromRecord(a),i=t.getIdAttribute().type,s=n.LocalStorageConverter.convertToModelDataType(i),l=new(y.getType(s));return l.idOut=o,l})}createOrUpdateAll(e,t){return this.getDatabase().then(a=>a.executeTransaction(a=>p.ForceCreateOrUpdateAllMethod===T.Bulk||p.ForceCreateOrUpdateAllMethod===T.Auto&&0===e.attributes.filter(e=>e.type===i.ClientDB.DBDataType.BINARY_DATA).length?this.createOrUpdateAllBulk(a,e,t):this.createOrUpdateAllSingle(a,e,t)).then(u))}createOrUpdateAllBulk(e,t,a){var n,r,o,i;const s=[],l=(e,t)=>s.push(a=>a.executeQueryRaw(e,t)),u=Math.floor(p.MaxQueryParameters/t.attributes.length);if(0===u)return this.createOrUpdateAllSingle(e,t,a);const c=Math.ceil(a.length/u);for(let e=0;e<c;e++){let s=[],c=0;for(;c<u;){const o=e*u+c;if(o===a.length)break;const i=a.getItem(o);E(t,i,"create or update"),s=s.concat(null===(r=(n=t.upsert).getArguments)||void 0===r?void 0:r.call(n,i).toArray()),c++}l(null===(i=(o=t.upsert).getBulkSql)||void 0===i?void 0:i.call(o,c),s)}return e.feed(null).andThenAll(()=>s)}createOrUpdateAllSingle(e,t,a){const n=[],r=e=>n.push(a=>this.createOrUpdateInner(a,t,e,!1));for(let e=0;e<a.length;e++){r(a.getItem(e))}return e.feed(null).andThenAll(()=>n)}get(e,t){const a=e.getIdAttribute(),n=new m;return n.add(a.name,a.type,t),this.rawExecuteQuery(e.select.sql,e.dbRecordToRecord,n).then(a=>{if(0===a.length)throw new o.Exceptions.DataBaseException("",`${e.name} with id ${t} was not found`);{const e=new(h.getType(a[0].constructor));return e.recordOut=a[0],e}})}delete(e,t){const a=e.getIdAttribute(),n=new m;return n.add(a.name,a.type,t),this.executeNonQuery(e.delete.sql,n)}deleteAll(e){return this.executeNonQuery(e.deleteAll.sql)}getBinary(e,t,a){const r=e.getIdAttribute(),o=r.name,i=r.type,s=`SELECT "${t}" FROM "${e.tableName}" WHERE "${o}" = ?`,l=new m;return l.add(o,i,a),n.LocalStorageConverter.deserializeLazyBinaryFromDB(()=>this.getDatabase().then(e=>e.executeReadTransaction(e=>e.executeScalar(s,l.toArray()))))}replaceEntityReferencesInOrderBy(e,t,a){e=e.trim();let n=l.matches(e,'(^|\\s|\\.)(\\[|"|)(ossys_|osltm_|oslog_|osevt_|osusr_|osext_)',!0);if(n.length>0){const e=n[0];throw new o.Exceptions.DataBaseException("",`'${e.groups[2]+e.groups[3]}' found in 'Order By' parameter is a reserved prefix`)}if(""!==e&&(n=l.matches(e,"((((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)(( )*,( )*(((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)*",!0),1!==n.length||n[0].value!==e))throw new o.Exceptions.DataBaseException("","Invalid syntax in 'Order By' parameter.");let r=l.replace(e,"(\\{\\w+\\}|\\w+\\.)",!1,e=>this.replaceEntityNameInOrderBy(e,t,a));return r=l.replace(r,"(\\[\\w+\\])",!1,e=>this.replaceAttributeName(e)),r}replaceEntityNameInOrderBy(e,t,a){let n="";const r=this.getEntityNameFromMatch(e);let i=!1;for(let e=0;e<t.length;e++)if(t[e].toLowerCase()===r.toLowerCase()){i=!0,n='"'+a[e]+'"';break}if(!i)throw new o.Exceptions.DataBaseException("",`'${r}' found in 'Order By' parameter is an invalid Entity`);return"."===e.value.charAt(e.value.length-1)?n+".":n}replaceAttributeName(e){const t=e.value.substr(1,e.value.length-2);return t?('"'===t.charAt(0)?"":'"')+t+('"'===t.charAt(t.length-1)?"":'"'):""}getEntityNameFromMatch(e){return"."===e.value.charAt(e.value.length-1)?e.value.substr(0,e.value.length-1):e.value.substr(1,e.value.length-2)}getOrderByColumnsWithoutDuplicates(e){return this.filterDuplicateOrderByColumns(e).join(", ")}filterDuplicateOrderByColumns(e){const t=new Array,a={};return e.forEach(e=>{const n=e.trim();if(""!==n){const e=n.replace(new RegExp("\b((ASC)|(DESC))$","im"),"").replace('"',"").replace("[","").replace("]","").trim().toLowerCase();!0!==a[e]&&(t.push(n),a[e]=!0)}}),t}}p.MaxQueryParameters=500,p.ForceCreateOrUpdateAllMethod=T.Auto,t.WebSQLStorage=p,t.webSQLStorageInstance=new p;function E(e,t,a){const n=e.getAllAttributesFromRecord(t).toArray();for(let t=0;t<e.attributes.length;t++){const r=e.attributes[t];b(n[t],r,`${a} '${e.name}.${r.name}'`)}}function b(e,t,a){if(t.type===i.ClientDB.DBDataType.TEXT){if(null===e||void 0===t.length)return;const n=e.length-t.length;if(n>0)throw new o.Exceptions.DataBaseException("",`Unable to ${a} because it exceeds the maximum allowed length by ${n} characters.`)}else if(t.type===i.ClientDB.DBDataType.DECIMAL&&void 0!==t.length&&void 0!==t.decimals){const n=e.split(".")[0].length-(t.length-t.decimals);if(n>0)throw new o.Exceptions.DataBaseException("",`Unable to ${a} because it exceeds the maximum allowed length by ${n} characters.`)}}t.Entity=class{constructor(e,t,a){this.storage=e,this.info=t,this.moduleKey=a,this.getBinary=(e,t,a)=>a.hasContent()?a:this.storage.getBinary(this.info,e,t)}getStorage(){return this.storage}getInfo(){return this.info}create(e){return this.storage.create(this.info,e)}createOrUpdate(e){return this.storage.createOrUpdate(this.info,e)}createOrUpdateAll(e){return this.storage.createOrUpdateAll(this.info,e)}update(e){return this.storage.update(this.info,e)}get(e){return this.storage.get(this.info,e)}delete(e){return this.storage.delete(this.info,e)}deleteAll(){return this.storage.deleteAll(this.info)}};class m{constructor(e){this.skipConversion=e,this.argumentList=[],this.existingArguments={}}add(e,t,a,r,o,i){if(!this.existingArguments[e])if(this.existingArguments[e]=!0,void 0===a)this.argumentList.push(null);else{let e;e=this.skipConversion?a:n.LocalStorageConverter.serializeToDB(a,{type:t,length:r,decimals:o,isEntityReference:i}),this.argumentList.push(e)}}toArray(){return this.argumentList}}t.QueryArgumentsList=m}));
define("OutSystems/ClientRuntime/ErrorHandling",["require","exports","@outsystems/logger-js","./ApplicationInfo","./Exceptions","./Logger","./modules/Auth/Authentication","./Navigation","./StorageProvider"],(function(r,e,o,i,n,t,a,s,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reportRequireJSError=e.isRequireJSError=e.isSpecialHandleErrorResult=e.ignoreError=e.defaultErrorHandler=e.handleError=e.navigateToAppOffline=e.navigateToIncompatibleProducer=e.navigateToErrorPage=e.ErrorHandlingStorage=e.IGNORED_ERROR_RESULT=e.UNHANDLED_ERROR_RESULT=e.ERROR_PAGE_HTML=void 0,e.ERROR_PAGE_HTML="_error.html",e.UNHANDLED_ERROR_RESULT={errorCode:"UNHANDLED"},e.IGNORED_ERROR_RESULT={errorCode:"IGNORED"};function l(r){return r&&"string"==typeof r.requireType}function E(r){var e;let i="OS-CLRT-RJS-00000",n=o.Visibility.Internal;if("timeout"===r.requireType)i="OS-CLRT-RJS-00005";else if("mismatch"===r.requireType)i=-1!==r.message.indexOf("anonymous define()")?"OS-CLRT-RJS-00004":"OS-CLRT-RJS-00003",n=o.Visibility.External;else if("scripterror"===r.requireType){i=/Script error for.*?, needed by:.*/gm.test(r.message)?"OS-CLRT-RJS-00002":"OS-CLRT-RJS-00001",n=o.Visibility.External}t.error("ErrorHandling",null!==(e=r.message)&&void 0!==e?e:"Error loading script by RequireJS",i,r,n)}e.ErrorHandlingStorage={errorPageMessage:new g.StorageObject(g.StorageType.Session,"ErrorPageMessage",""),errorPageExtraMessage:new g.StorageObject(g.StorageType.Session,"ErrorPageExtraMessage",""),errorPageExceptionInfo:new g.StorageObject(g.StorageType.Session,"ErrorPageExceptionInfo")},e.navigateToErrorPage=function(r,i="",a="",g){var R,c;if(!s.hasPendingReload()&&(r&&(l(r)?E(r):t.error(null!==(R=r.category)&&void 0!==R?R:"ErrorHandling",r.message||"Navigating to Error page",null!==(c=r.errorCode)&&void 0!==c?c:"OS-CLRT-00000",r,o.Visibility.External)),s.isValidContext(g))){const o=s.VersionedURL.getVersionedUrl(e.ERROR_PAGE_HTML);e.ErrorHandlingStorage.errorPageMessage.set(i),e.ErrorHandlingStorage.errorPageExtraMessage.set(a),r?e.ErrorHandlingStorage.errorPageExceptionInfo.set(n.getExceptionInfo(r)):e.ErrorHandlingStorage.errorPageExceptionInfo.remove(),s.changeWindowLocation(o)}},e.navigateToIncompatibleProducer=function(r,e){var o;const n=i.getErrorPageConfig(),t=null===(o=null==n?void 0:n.messages)||void 0===o?void 0:o.incompatibleProducer;this.navigateToErrorPage(r,t||r.message,null,e)},e.navigateToAppOffline=function(r){var e;const o=i.getErrorPageConfig(),n=null===(e=null==o?void 0:o.messages)||void 0===e?void 0:e.appOffline;this.navigateToErrorPage(null,n||"This application is temporarily unavailable. Try reloading or contact the administrator.",null,r)},e.handleError=function(r,e){t.debug("ErrorHandling","Error thrown by the application: "+r),n.isApplicationOffline(r)?this.navigateToAppOffline(e):n.isInstanceOf(r,n.Exceptions.IncompatibleProducerException)?this.navigateToIncompatibleProducer(r,e):this.navigateToErrorPage(r,null,null,e)},e.defaultErrorHandler=function(r,o){return n.getMessage(r)&&t.warning("ErrorHandling",n.getMessage(r)),r instanceof n.Exceptions.NotRegisteredException?(a.externalLogin({callbackUrl:i.getBasePath()}),e.UNHANDLED_ERROR_RESULT):this.ignoreError(r,o)?e.IGNORED_ERROR_RESULT:(this.handleError(r,o),e.UNHANDLED_ERROR_RESULT)},e.ignoreError=function(r,e){return!!n.isInstanceOf(r,n.Exceptions.IgnorableSystemException)||!!n.isApplicationOffline(r)&&(this.navigateToAppOffline(e),!0)},e.isSpecialHandleErrorResult=function(r){return r===e.UNHANDLED_ERROR_RESULT||r===e.IGNORED_ERROR_RESULT},e.isRequireJSError=l,e.reportRequireJSError=E}));
define("OutSystems/ClientRuntime/FeedbackMessageService",["require","exports"],(function(e,s){"use strict";let t,c;Object.defineProperty(s,"__esModule",{value:!0}),s.closeFeedbackMessage=s.showFeedbackMessage=s.setEnabled=s.registerFeedbackMessageService=void 0;let n=!0;s.registerFeedbackMessageService=function(e){t=e,c&&(c(),c=null)},s.setEnabled=function(e){n=e},s.showFeedbackMessage=function(e,s,a=!0,i="",r=!0,o){if(!n)return;const u=()=>t.showMessage(e,s,a,i,r,o);t?u():c=u},s.closeFeedbackMessage=function(){if(!n)return;t?t.closeMessage():c=null}}));
define("OutSystems/ClientRuntime/modules/Settings/KnownSettings",["require","exports"],(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_OS_IDP=n.SettingsNames=void 0,function(e){e.AuthNConfigs="AuthNConfigs",e.ForceXhrCommunication="ForceXhrCommunication",e.IndexedDBOffline="IndexedDBOffline",e.CanDisableAutoUpgrade="CanDisableAutoUpgrade",e.LogLevel="LogLevel",e.EnvironmentKey="EnvironmentKey",e.TenantID="TenantID",e.LoggerApiKey="LoggerApiKey",e.LoggerSchedulerTimeInterval="LoggerSchedulerTimeInterval",e.EnableOpenTelemetryTraces="EnableOpenTelemetryTraces",e.EnableSpanAggregation="EnableSpanAggregation"}(n.SettingsNames||(n.SettingsNames={})),n.DEFAULT_OS_IDP="os_default_id"}));
define("OutSystems/ClientRuntime/modules/Auth/AuthConfigsUtils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.swapCurrentConfigs=void 0;t.swapCurrentConfigs=(e,t,s)=>{const i=e.getItem(t);i&&(e.setItem(s,i),e.removeItem(t))}}));
define("OutSystems/ClientRuntime/modules/Auth/AuthConfigsManager",["require","exports","tslib","@outsystems/logger-js","../../ApplicationInfo","../../Logger","../Communication/NetworkStatus","../Injector/Injector","../Injector/KnownServices","../Settings/KnownSettings","./AuthConfigsUtils"],(function(i,e,t,n,o,s,r,a,c,u,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor({httpClient:i=a.default.resolve(c.ServiceNames.UnauthenticatedHttpClient),initialConfigs:e,getBasePath:t=(()=>o.getBasePath()),cacheName:n="os-builtin-authconfigs",cacheStorage:s=localStorage}={}){var r;this.isOnlineListenerRegistered=!1,this.httpClient=i,this.getBasePath=t,this.cacheStorage=s,(0,h.swapCurrentConfigs)(this.cacheStorage,n,"os-runtime-authconfigs"),this.cacheName="os-runtime-authconfigs",this.authConfigs=null!==(r=null!=e?e:this.fetchCachedConfigs())&&void 0!==r?r:[]}cacheConfigs(i){this.cacheStorage.setItem(this.cacheName,JSON.stringify(i))}fetchCachedConfigs(){try{const i=this.cacheStorage.getItem(this.cacheName);if(i)return JSON.parse(i);s.warning("AuthConfigsManager","No auth configs stored in cache")}catch(i){s.error("AuthConfigsManager","Error retrieving auth configs from cache","OS-CLRT-40100",i)}}update(i=r.addOnOnlineEventListener,e=a.default.resolve(c.ServiceNames.Auth)){var n;return t.__awaiter(this,void 0,void 0,(function*(){try{const i=yield this.httpClient.get({url:"configs",baseURL:""});if(!Array.isArray(i.authConfigurations))throw new Error("Did not receive an array of configurations");if(this.authConfigs=i.authConfigurations,this.cacheConfigs(this.authConfigs),!(null===(n=e.getInstance())||void 0===n?void 0:n.isAuthenticated())){const[i]=this.readAuthConfigs(u.DEFAULT_OS_IDP);i&&e.updateConfig(i.configs)}}catch(e){s.error("AuthConfigsManager","Error while fetching auth configs","OS-CLRT-40100",e),this.isOnlineListenerRegistered||(i(()=>t.__awaiter(this,void 0,void 0,(function*(){return this.update()}))),this.isOnlineListenerRegistered=!0)}}))}readAuthConfigs(i){try{i!==u.DEFAULT_OS_IDP||this.authConfigs.find(i=>i.type===u.DEFAULT_OS_IDP)||(s.warning("AuthConfigsManager",u.DEFAULT_OS_IDP+" not available, fallback to cognito"),i="cognito");const e=i?this.authConfigs.filter(e=>e.type===i):this.authConfigs;if(e.length<1){const e=i?` for type "${i}"`:"";return s.warning("/moduleservices/auth/configs",`No identity provider configurations found${e}.`,n.Visibility.External),[]}return e.map(i=>{var e,t,n,o,s,r,a,c,u,h,g,l,d;return{key:i.key,type:i.type,kc_hint:null!==(e=i.kc_hint)&&void 0!==e?e:"cognito",configs:{identityProvider:null!==(t=i.kc_hint)&&void 0!==t?t:i.type,scope:"openid",clientId:null!==(n=i.configs.amplifyClientId)&&void 0!==n?n:i.configs.clientId,poolId:i.configs.poolId,region:i.configs.region,tenantId:i.configs.tenantId,passwordComplexityPolicy:{minimumLength:null!==(s=null===(o=i.configs.passwordPolicy)||void 0===o?void 0:o.minimumLength)&&void 0!==s?s:12,lowerCaseLetterRequired:null===(a=null===(r=i.configs.passwordPolicy)||void 0===r?void 0:r.requireLowercase)||void 0===a||a,upperCaseLetterRequired:null===(u=null===(c=i.configs.passwordPolicy)||void 0===c?void 0:c.requireUppercase)||void 0===u||u,numberRequired:null===(g=null===(h=i.configs.passwordPolicy)||void 0===h?void 0:h.requireNumbers)||void 0===g||g,specialCharacterRequired:null===(d=null===(l=i.configs.passwordPolicy)||void 0===l?void 0:l.requireSymbols)||void 0===d||d}}}})}catch(i){return s.warning("AuthConfigsManager","Couldn't read auth configurations"),[]}}}}));
define("OutSystems/ClientRuntime/modules/PubSub/Publisher",["require","exports","../../Logger"],(function(e,s,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.default=class{constructor(e,s){this.moduleName=e,this.context=s,this.subscribers=[]}subscribe(e){if(!e)throw new Error("Argument 'handler' cannot be null or undefined");for(let s=0;s<this.subscribers.length;s++)if(this.subscribers[s]===e)return!1;return this.subscribers.push(e),r.debug(this.moduleName,"Subscribing handler for "+this.context),!0}unsubscribe(e){if(!e)throw new Error("Argument 'handler' cannot be null or undefined");for(let s=0;s<this.subscribers.length;s++)if(this.subscribers[s]===e)return this.subscribers.splice(s,1),r.debug(this.moduleName,"Unsubscribing handler for "+this.context),!0;return!1}publish(e){for(const s of this.subscribers)s(e);r.debug(this.moduleName,"Notifying subscribers for "+this.context)}}}));
define("OutSystems/ClientRuntime/modules/ClientVariables/LocalStorageSerializer",["require","exports","../../DataTypes"],(function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.deserialize=a.serialize=void 0;function s(e){return`Unsupported data type (${e}) for client variable`}a.serialize=function(e,a){if(null==e)throw new TypeError(`Value ${e} is not a valid value for a client variable.`);if(!function(e,a){switch(a){case t.DataTypes.Integer:return t.TypeValidations.isValidInteger(e);case t.DataTypes.LongInteger:return t.TypeValidations.isValidLongInteger(e);case t.DataTypes.Decimal:case t.DataTypes.Currency:return t.TypeValidations.isValidDecimal(e);case t.DataTypes.Boolean:return t.TypeValidations.isBoolean(e);case t.DataTypes.Text:case t.DataTypes.PhoneNumber:case t.DataTypes.Email:return t.TypeValidations.isText(e);case t.DataTypes.Date:return t.TypeValidations.isValidDate(e);case t.DataTypes.DateTime:return t.TypeValidations.isValidDateTime(e);case t.DataTypes.Time:return t.TypeValidations.isValidTime(e);default:const i=s((0,t.mapDataTypeToName)(a));throw new TypeError(i)}}(e,a)){const s=(0,t.mapDataTypeToName)(a);throw new TypeError(`Value ${e} is not a valid value for a client variable of the specified type (${s}).`)}switch(a){case t.DataTypes.Integer:case t.DataTypes.LongInteger:case t.DataTypes.Decimal:case t.DataTypes.Currency:return e.toString();case t.DataTypes.Boolean:return e?"true":"false";case t.DataTypes.Text:case t.DataTypes.PhoneNumber:case t.DataTypes.Email:return e;case t.DataTypes.Date:return e.toISODate();case t.DataTypes.DateTime:return e.toString();case t.DataTypes.Time:return e.toISOTime();default:throw new TypeError(s(""+a))}},a.deserialize=function(e,a){switch(a){case t.DataTypes.Integer:const a=Number(e);return t.TypeValidations.isValidInteger(a)&&t.TypeValidations.isWithinIntegerRange(a)?a:t.Constants.DEFAULT_INTEGER;case t.DataTypes.LongInteger:if(!e)return t.Constants.DEFAULT_LONGINTEGER;const i=t.LongInteger.fromString(e);return t.TypeValidations.isValidLongInteger(i)?i:t.Constants.DEFAULT_LONGINTEGER;case t.DataTypes.Decimal:if(!e)return t.Constants.DEFAULT_DECIMAL;const n=new t.Decimal(e);return t.TypeValidations.isValidDecimal(n)&&t.TypeValidations.isWithinDecimalRange(n)?n:t.Constants.DEFAULT_DECIMAL;case t.DataTypes.Currency:if(!e)return t.Constants.DEFAULT_CURRENCY;const r=new t.Decimal(e);return t.TypeValidations.isValidDecimal(r)&&t.TypeValidations.isWithinDecimalRange(r)?r:t.Constants.DEFAULT_CURRENCY;case t.DataTypes.Boolean:return"true"===e||"false"!==e&&t.Constants.DEFAULT_BOOLEAN;case t.DataTypes.Text:return t.TypeValidations.isText(e)?e:t.Constants.DEFAULT_TEXT;case t.DataTypes.PhoneNumber:return t.TypeValidations.isText(e)?e:t.Constants.DEFAULT_PHONENUMBER;case t.DataTypes.Email:return t.TypeValidations.isText(e)?e:t.Constants.DEFAULT_EMAIL;case t.DataTypes.Date:const T=t.DateTime.fromISODate(e);return t.TypeValidations.isValidDate(T)?T:t.Constants.DEFAULT_DATE;case t.DataTypes.DateTime:const o=t.DateTime.fromISODateTime(e);return t.TypeValidations.isValidDateTime(o)?o:t.Constants.DEFAULT_DATETIME;case t.DataTypes.Time:const D=t.DateTime.fromISOTime(e);return t.TypeValidations.isValidTime(D)?D:t.Constants.DEFAULT_TIME;case t.DataTypes.Record:throw new TypeError(s("Record"));case t.DataTypes.RecordList:throw new TypeError(s("List"));case t.DataTypes.BinaryData:throw new TypeError(s("Binary Data"));case t.DataTypes.Object:throw new TypeError(s("Object"));default:throw new TypeError(s("Unknown: "+e))}}}));
define("OutSystems/ClientRuntime/modules/ClientVariables/LocalStorageClientVariablesService",["require","exports","../../DataTypes","../../Logger","../../RegExpHelper","../Auth/Authentication","../PubSub/Publisher","../Storage/StorageNaming","./LocalStorageSerializer"],(function(e,t,i,s,r,a,l,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function u(e){return null==e}t.default=class{constructor(e){this.namespace=e,this.publisher=new l.default("Client Variables",e),this.fullKeyMatcher=new RegExp(`^${(0,r.escape)(n.OS_STORAGE_PREFIX)}${(0,r.escape)(this.namespace)}\\$[^$]*\\$ClientVars\\$`),this.checkSessionExpires(),this.innerSetVariable("$SESSION_USER_ID","",i.DataTypes.Text,(0,a.getUserId)())}subscribe(e){return this.publisher.subscribe(e)}unsubscribe(e){return this.publisher.unsubscribe(e)}getFullKey(e,t){return`${n.OS_STORAGE_PREFIX}${this.namespace}$${t}$ClientVars$${e}`}getVariable(e,t,i,s){return this.checkSessionExpires(),this.innerGetVariable(e,t,i,s)}innerGetVariable(e,t,r,a){const l=window.localStorage.getItem(this.getFullKey(e,t));return s.debug("Client Variables",`Reading Client Variable ${e} of module ${t} for ${this.namespace}`),u(l)?u(a)?(0,i.defaultForType)(r):a:(0,o.deserialize)(l,r)}setVariable(e,t,i,s){this.checkSessionExpires(),this.innerSetVariable(e,t,i,s),this.publisher.publish({key:e,module:t,value:s})}innerSetVariable(e,t,i,r){window.localStorage.setItem(this.getFullKey(e,t),(0,o.serialize)(r,i)),s.debug("Client Variables",`Set Client Variable ${e} of module ${t} for ${this.namespace}`)}removeAllVariables(){const e=[];for(let t=0;t<window.localStorage.length;t++){const i=window.localStorage.key(t);i&&this.fullKeyMatcher.test(i)&&e.push(i)}if(e.length>0){for(const t of e)window.localStorage.removeItem(t);this.publisher.publish()}}checkSessionExpires(){const e=this.innerGetVariable("$SESSION_USER_ID","",i.DataTypes.Text);(0,a.getUserId)()!==e&&(""!==e&&(s.debug("Client Variables","Removing all Client Variables for user provider "+this.namespace),this.removeAllVariables()),this.innerSetVariable("$SESSION_USER_ID","",i.DataTypes.Text,(0,a.getUserId)()))}}}));
define("OutSystems/ClientRuntime/modules/Native/NativeHttp",["require","exports","tslib","../Injector/Injector","../Injector/KnownServices","./IOutSystemsNativeHost","./NativeHelper"],(function(t,e,i,n,r,o,u){"use strict";function a(){return i.__awaiter(this,void 0,void 0,(function*(){try{return yield u.ensureNativeReady(),(0,o.isIOutSystemsNativeHost)(window)?window.OutSystemsNative.Http:null}catch(t){return null}}))}Object.defineProperty(e,"__esModule",{value:!0}),e.isNativeHttpPluginAvailable=e.getNativeHttpPlugin=void 0,e.getNativeHttpPlugin=a,e.isNativeHttpPluginAvailable=function(){return i.__awaiter(this,void 0,void 0,(function*(){const t=yield a(),e=n.default.resolve(r.ServiceNames.SettingsManager);return!(null==e?void 0:e.readBool("ForceXhrCommunication"))&&!!t}))}}));
define("OutSystems/ClientRuntime/modules/Communication/HttpTrace",["require","exports","../Injector/Injector","../Injector/KnownServices"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHttpTrace=void 0,t.getHttpTrace=function(){var e;if(!r.default.resolve(n.ServiceNames.SettingsManager).readBool("EnableOpenTelemetryTraces"))return;const t=r.default.resolve(n.ServiceNames.InstrumentationFactory);if(!t)return;const i=t.getActiveSpan();if(!i)return;const o=i.getContext();if(!o)return;const a=Object.keys(null!==(e=o.attributes)&&void 0!==e?e:{}).reduce((e,t)=>{var r;return"function"==typeof(null===(r=o.attributes[t])||void 0===r?void 0:r.toString)&&(e[t]=o.attributes[t].toString()),e},{});return{spanId:o.spanId,traceId:o.traceId,attributes:a,sampled:o.sampled}}}));
define("OutSystems/ClientRuntime/modules/Communication/HttpClientFactory",["require","exports","tslib","@outsystems/communication-js","@outsystems/logger-js","@outsystems/settings-js","../../Logger","../Native/NativeHttp","./HttpTrace"],(function(e,t,a,r,s,l,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{static build({baseUrl:e,headers:t,getAccessToken:c,localeHeader:g,getLocale:u,setLocale:d,logger:p={setActiveSpanAsNonAggregable:()=>n.setActiveSpanAsNonAggregable(),debug:({category:e,message:t})=>n.debug(null!=e?e:"",null!=t?t:""),error:({category:e,message:t,errorCode:a,error:l})=>n.error(null!=e?e:"",null!=t?t:"",null!=a?a:r.ErrorCodes.Communication_Default,l,s.Visibility.Internal),startActiveClientSpan:(e,t)=>n.startActiveSpan(e,t,s.Visibility.Internal,void 0,s.SpanKind.Client)},refreshToken:b,isAccessTokenValid:A,usesNativeHttpPlugin:v=i.isNativeHttpPluginAvailable,getNativeHttpPluginInstance:H=i.getNativeHttpPlugin,loadTrace:T=o.getHttpTrace}={}){return a.__awaiter(this,void 0,void 0,(function*(){if(!l.FeaturesManager.isEnabled(l.FeatureKeys.WebHttpClientForNative)&&(yield v())){const a=yield H();if(!a){const e=new Error("Unable to get native http plugin instance.");throw null==p||p.error({category:"HttpClientFactory",message:e.message,error:e}),e}return new r.NativeHttpClient({baseUrl:e,headers:t,getAccessToken:c,localeHeader:g,getLocale:u,setLocale:d,logger:p,refreshToken:b,isAccessTokenValid:A,httpClientInstance:a,loadTrace:T})}return new r.HttpClient({baseUrl:e,headers:t,withCredentials:!!l.FeaturesManager.isEnabled(l.FeatureKeys.WebHttpClientForNative)||void 0,getAccessToken:c,localeHeader:g,getLocale:u,setLocale:d,logger:p,refreshToken:b,isAccessTokenValid:A,loadTrace:T})}))}static buildWithDebugger({alternateHttpClient:e,appUrl:t,getAccessToken:a,localeHeader:s,getLocale:l,setLocale:i,logger:o={setActiveSpanAsNonAggregable:()=>n.setActiveSpanAsNonAggregable(),debug:({category:e,message:t})=>n.debug(null!=e?e:"",null!=t?t:""),error:({category:e,message:t,error:a})=>n.error(null!=e?e:"",null!=t?t:"","OS-CLRT-00000",a)},refreshToken:c,isAccessTokenValid:g}){return t?new r.DebuggerHttpClient({appUrl:t,getAccessToken:a,localeHeader:s,getLocale:l,setLocale:i,logger:o,refreshToken:c,isAccessTokenValid:g,alternateHttpClientInstance:e}):e}}}));
define("OutSystems/ClientRuntime/modules/Communication/LocaleInfo",["require","exports","../Injector/Injector","../Injector/KnownServices","./Constants"],(function(e,o,t,c,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.setLocaleValue=o.getLocaleValue=o.LocaleHeader=void 0,o.LocaleHeader=n.CUSTOM_HEADER_PREFIX+"locale",o.getLocaleValue=function(){const e=t.resolve(c.ServiceNames.LocaleService);if(e)return e.getCurrentLocale()},o.setLocaleValue=function(e){const o=t.resolve(c.ServiceNames.LocaleService);o&&o.setCurrentLocale(e)}}));
define("OutSystems/ClientRuntime/modules/Database/IDatabase",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.instanceOfIDatabase=void 0,i.instanceOfIDatabase=function(e){return"name"in e&&"registerInitializer"in e&&"initialize"in e&&"initializerCleanup"in e&&"testConnection"in e&&"close"in e&&"executeReadTransaction"in e&&"executeTransaction"in e&&"executeUpgradeTransaction"in e}}));
define("OutSystems/ClientRuntime/modules/Database/Common/Database",["require","exports","tslib","../../../Exceptions"],(function(i,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(i,e){this.databaseName=i,this.databaseEngineName=e,this.isInitialized=!1,this.allInitializers=[],this.initializersToRun=[]}get name(){return this.databaseName}get engineName(){var i;return null!==(i=this.databaseEngineName)&&void 0!==i?i:"Unknown"}registerInitializer(i){if(this.isInitialized)throw new a.Exceptions.DataBaseException("",`Cannot register a database initializer on the already initialized database '${this.name}'`);this.allInitializers.push(i)}initialize(){return t.__awaiter(this,void 0,void 0,(function*(){if(this.isInitialized)throw new a.Exceptions.DataBaseException("",`Cannot initialize the already initialized database '${this.name}'`);this.markInitialized(),yield this.identifyNeededInitializers(),yield this.runNeededInitializers()}))}initializerCleanup(){return t.__awaiter(this,void 0,void 0,(function*(){if(!this.isInitialized)throw new a.Exceptions.DataBaseException("",`Cannot perform database initializer cleanup on the non-initialized database '${this.name}'`);yield this.cleanupNeededInitializers()}))}identifyNeededInitializers(){return t.__awaiter(this,void 0,void 0,(function*(){this.allInitializers&&this.allInitializers.length>0&&(yield this.executeReadTransaction(i=>t.__awaiter(this,void 0,void 0,(function*(){for(const e of this.allInitializers)(yield e.isNeeded(i))&&this.initializersToRun.push(e)})))),this.releaseUnneededInitializers()}))}runNeededInitializers(){return t.__awaiter(this,void 0,void 0,(function*(){this.initializersToRun.length>0&&(yield this.executeUpgradeTransaction(i=>t.__awaiter(this,void 0,void 0,(function*(){for(const e of this.initializersToRun)yield e.run(i)}))))}))}cleanupNeededInitializers(){return t.__awaiter(this,void 0,void 0,(function*(){this.initializersToRun.length>0&&(yield this.executeUpgradeTransaction(i=>t.__awaiter(this,void 0,void 0,(function*(){for(const e of this.initializersToRun)e.cleanup&&(yield e.cleanup(i))}))),this.releaseNeededInitializers())}))}markInitialized(){this.isInitialized=!0}releaseUnneededInitializers(){this.allInitializers=[]}releaseNeededInitializers(){this.initializersToRun=[]}}}));
define("OutSystems/ClientRuntime/JSONUtils",["require","exports","./DataConversion"],(function(e,r,t){"use strict";function n(e,r){if(null!==r)return r}function i(e){const r=e.replace(/(?:"([^\\"]|\\.)*")|(?:'([^\\']|\\.)*')|(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(\w+)\s*:/g,(function(e,r,t,n,i){return n?'"'+n+'"':t?'"'+e.substring(1,e.length-1)+'"':i?'"'+i+'":':e}));return JSON.parse(r)}function o(e,r){if(""===e){if(Array.isArray(r)){let e=r;return e.length>=10&&(e=e.slice(0,9),e.push("(...)")),e}return function(e,r){let t=0,n=!1;const i=Object.keys(e).reduce((function(i,o){return t++,t<=r?i[o]=e[o]:n=!0,i}),{});n&&(i["..."]="(...)");return i}(r,10)}if("string"==typeof r){const e=r;return e.length>25?e.substring(0,19)+" (...)":e}return r}Object.defineProperty(r,"__esModule",{value:!0}),r.serializeObjectForLog=r.mergeJS=r.parseJSON=r.filterJSONValues=r.deserializeFromJSON=r.serializeToJSON=void 0,r.serializeToJSON=function(e,r,i,o){const s=t.JSONConverter.to({value:e,serializeDefaultValues:r,useUnixDateFormat:i,dataType:o,enforceDefaultValueSerializationAtThisLevel:!0});return JSON.stringify(s,n)},r.deserializeFromJSON=function(e,r,n){try{let o;return e&&(o=i(e)),t.JSONConverter.from(o,r,n)}catch(e){throw"Failed to deserialize JSON to "+r.name+": "+e.message}},r.filterJSONValues=n,r.parseJSON=i,r.mergeJS=function e(r,t){let n,i,o,s;for(const u in t){n=r[u],i=t[u];i&&n&&("object"==typeof i||(o=Array.isArray(i)))?(o?(o=!1,s=Array.isArray(n)?n:[]):s="object"==typeof n?n:{},r[u]=e(s,i)):void 0!==i&&(r[u]=i)}return r},r.serializeObjectForLog=function(e,r=3,t,n,i){t=null!=t?t:o,r=isNaN(+r)?1:r;const s=new WeakMap;return JSON.stringify(function e(r,n,o,u,a){var l;return r&&"object"==typeof r?(a=s.has(r),s.set(r,!0),u=Array.isArray(r),a?o=null!==(l=null==i?void 0:i(r))&&void 0!==l?l:null:JSON.stringify(r,(function(i,s){if(u||n>0){if(t&&(s=t(i,s)),!i)return u=Array.isArray(s),r=s;(o=o||(u?[]:{}))[i]=e(s,u?n:n-1)}})),void 0===o?u?[]:"(...)":o):r}(e,r),null,n)}}));
define("OutSystems/ClientRuntime/modules/Database/TableInfoUtils",["require","exports","../../DataTypes"],(function(e,t,n){"use strict";function i(e){var t;return null!==(t=r(e)[0])&&void 0!==t?t:null}function r(e){return e.attributes.filter(e=>null==e?void 0:e.isPrimaryKey)}Object.defineProperty(t,"__esModule",{value:!0}),t.hasNullIdentifier=t.getIdentifierValue=t.getIdentifierAttribute=t.getIdentifierColumnNames=t.getIdentifierColumns=t.getIdentifierColumn=t.getMatchingColumn=t.formatObjectName=t.METADATA_TABLE_NAME=t.BACKUP_TABLE_PREFIX=void 0,t.BACKUP_TABLE_PREFIX="BACKUP_",t.METADATA_TABLE_NAME="OSSYS_ENTITY",t.formatObjectName=function(e){return e?e.toUpperCase():e},t.getMatchingColumn=function(e,t){var n;return null!==(n=e.attributes.filter(e=>(null==e?void 0:e.name)===t.name)[0])&&void 0!==n?n:null},t.getIdentifierColumn=i,t.getIdentifierColumns=r,t.getIdentifierColumnNames=function(e){const t=r(e);return t.length>0?t.map(e=>{var t;return null!==(t=null==e?void 0:e.columnName)&&void 0!==t?t:null}):null},t.getIdentifierAttribute=function(e,t){const n=i(e);return n&&t.getAttributes().filter(e=>e.name===n.name)[0]||null},t.getIdentifierValue=function(e,t){const n=i(e);if(!n)return null;const r=t.getAttributes().filter(e=>e.name===n.name)[0];return r?t[r.attrName]:null},t.hasNullIdentifier=function(e,t){const r=i(e);if(!r)return!0;const u=t.getAttributes().filter(e=>e.name===r.name)[0];return!u||(0,n.equals)(t[u.attrName],(0,n.defaultForType)(u.dataType))}}));
define("OutSystems/ClientRuntime/modules/Database/IndexedDB/IndexedDBTransactionWithoutObjectStores",["require","exports","tslib","../../../Logger","../TableInfoUtils"],(function(t,e,o,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e){this.allowTraces=t,this.database=e,this.allowTraces&&a.debug("IndexedDBTransactionWithoutObjectStores",`Starting transaction ${this.transactionId} over ${e.objectStoreNames.length} store(s)`)}createTable(t){return new Promise(e=>{var o,a,s;this.debug(`Creating table '${t.tableName}'`);const n=r.getIdentifierColumnNames(t),i=this.database.createObjectStore(t.tableName,{autoIncrement:!n,keyPath:n});this.debug(`Creating columns for '${t.tableName}' table`);for(let e=0;e<t.attributes.length;e++)this.debug(`Creating column '${null===(o=t.attributes[e])||void 0===o?void 0:o.name}'`),i.createIndex(null===(a=t.attributes[e])||void 0===a?void 0:a.columnName,null===(s=t.attributes[e])||void 0===s?void 0:s.columnName);e()})}deleteTableIfExists(t){let e;return e="string"==typeof t?t:t.tableName,new Promise((t,o)=>{if(this.debug(`Deleting table '${e}'`),!this.database.objectStoreNames.contains(e))return this.debug(`Table '${e}' does not exist`),t();try{this.database.deleteObjectStore(e),this.debug(`Table '${e}' deleted successfuly`)}catch(t){return this.warning(`Error deleting table '${e}'`,t),o(t)}t()})}existsTable(t){const e="string"==typeof t?t:t.tableName;return Promise.resolve(this.database.objectStoreNames.contains(e))}renameTable(t,e){throw new Error("You can't execute this method on a database without object stores.")}addColumn(t,e){throw new Error("You can't execute this method on a database without object stores.")}existsColumn(t,e){return o.__awaiter(this,void 0,void 0,(function*(){throw new Error("You can't execute this method on a database without object stores.")}))}getRecord(t,e){throw new Error("You can't execute this method on a database without object stores.")}insertRecord(t,e){throw new Error("You can't execute this method on a database without object stores.")}updateRecord(t,e){throw new Error("You can't execute this method on a database without object stores.")}upsertRecord(t,e){throw new Error("You can't execute this method on a database without object stores.")}upsertAllRecords(t,e){throw new Error("You can't execute this method on a database without object stores.")}removeRecord(t,e){throw new Error("You can't execute this method on a database without object stores.")}removeAllRecords(t){throw new Error("You can't execute this method on a database without object stores.")}findRecords(t,e){throw new Error("You can't execute this method on a database without object stores.")}getAllRecords(t){throw new Error("You can't execute this method on a database without object stores.")}debug(t){this.allowTraces&&a.debug("IndexedDBTransactionWithoutObjectStores",`${t} on transaction ${this.transactionId}`)}warning(t,e){a.warning("IndexedDBTransactionWithoutObjectStores",`${t} on transaction ${this.transactionId}${e?": "+e.message:""}`)}}}));
define("OutSystems/ClientRuntime/modules/Database/EntityInfoUtils",["require","exports","../../Exceptions","../../RegExpHelper"],(function(e,t,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDynamicSortList=void 0,t.getDynamicSortList=function(e,t){const s=e.trim();if(""===s)return[];{const e=a.matches(s,"((((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)(( )*,( )*(((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)*",!0);if(1!==e.length||e[0].value!==s)throw new n.Exceptions.DataBaseException("","Invalid syntax in 'Order By' parameter.")}let r=a.replace(s,"(\\{\\w+\\}|\\w+\\.)",!1,e=>function(e,t){const a=function(e){return"."===e.value.charAt(e.value.length-1)?e.value.substr(0,e.value.length-1):e.value.substr(1,e.value.length-2)}(e),s=t.some(e=>e.toLowerCase()===a.toLowerCase())?a:"";if(""===s)throw new n.Exceptions.DataBaseException("",`'${a}' found in 'Order By' parameter is an invalid Entity`);return"."===e.value.charAt(e.value.length-1)?s+".":s}(e,t));return r=a.replace(r,"(\\[\\w+\\])",!1,e=>e.value.substr(1,e.value.length-2)),r.split(/, ?/).map(e=>{const t=e.trim().split(" "),n=2!==t.length||"asc"===t[1].toLowerCase();return{attributeParts:t[0].split("."),isAscending:n}})}}));
define("OutSystems/ClientRuntime/modules/Database/IndexedDB/IndexedDBUtils",["require","exports","tslib","../../../DataTypes","../../../Exceptions","../EntityInfoUtils"],(function(t,e,a,n,i,r){"use strict";function o(t){return a.__awaiter(this,void 0,void 0,(function*(){const e=t.getAttributes().map(e=>a.__awaiter(this,void 0,void 0,(function*(){const a=t[e.attrName];if(e.dataType===n.DataTypes.Record)yield o(a);else if(e.dataType===n.DataTypes.BinaryData){const t=a;yield t.loadContent()}})));yield Promise.all(e)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.getDynamicSortsObjGenerator=e.loadBinaryDataContent=e.markEventAsHandled=void 0,e.markEventAsHandled=function(t){t.stopPropagation(),t.preventDefault()},e.loadBinaryDataContent=function(t){return a.__awaiter(this,void 0,void 0,(function*(){if(t instanceof n.List)for(let e=0;e<t.length;e++){const a=t.getItem(e);yield o(a)}else t instanceof n.GenericRecord&&(yield o(t))}))},e.getDynamicSortsObjGenerator=function(t,e){const a=r.getDynamicSortList(t,e);return t=>a.map(e=>{let a=t;for(let t=0;t<e.attributeParts.length;t++){const r=(n=e.attributeParts[t],n.charAt(0).toLowerCase()+n.substr(1)+"Attr").toLowerCase(),o=a.getAttributes().filter(t=>t.attrName.toLowerCase()===r);if(0===o.length)throw new i.Exceptions.DataBaseException("","Invalid attribute in 'Order By' parameter: "+e.attributeParts.join("."));a=a[o[0].attrName]}var n;return{value:a,isAscending:e.isAscending}})}}));
define("OutSystems/ClientRuntime/modules/Database/IndexedDB/IndexedDBTransaction",["require","exports","tslib","../../../JSONUtils","../../../Logger","../TableInfoUtils","./IndexedDBTransactionWithoutObjectStores","./IndexedDBUtils"],(function(e,t,r,a,n,o,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class l extends s.default{set onComplete(e){this.transaction.oncomplete=()=>(this.allowTraces&&n.debug("IndexedDBTransaction","Committing transaction "+this.transactionId),e())}set onAbort(e){this.transaction.onabort=()=>(n.warning("IndexedDBTransaction",`Aborting transaction ${this.transactionId}: ${this.transaction.error}`),e(this.transaction.error))}executeQuery(e){return e(this.transaction)}constructor(e,t,r){super(e,r),this.transaction=t,l.lastTransactionId=(l.lastTransactionId+1)%1e12,this.transactionId=l.lastTransactionId+1}renameTable(e,t){return r.__awaiter(this,void 0,void 0,(function*(){this.transaction.objectStore(e).name=t}))}getRecord(e,t){return new Promise((r,a)=>{this.debug(`Getting record with keys '${t}' from table '${e.tableName}'`);const n=this.transaction.objectStore(e.tableName).get(l.wrapKeyIfNeeded(t,e));n.onsuccess=()=>{this.debug(`Retrieved record with keys '${t}' from table '${e.tableName}' successfully`),r(n.result||null)},n.onerror=r=>{this.warning(`Error retrieving record with keys '${t}' from table '${e.tableName}'`,this.transaction.error),(0,i.markEventAsHandled)(r),a(this.transaction.error)}})}removeRecord(e,t){return new Promise((r,a)=>{this.debug(`Deleting record with key '${t}' from table '${e.tableName}'`);const n=this.transaction.objectStore(e.tableName).delete(l.wrapKeyIfNeeded(t,e));n.onsuccess=()=>{this.debug(`Deleted record with key '${t}' from table '${e.tableName}' successfully`),r()},n.onerror=r=>{this.warning(`Error deleting record with key '${t}' from table '${e.tableName}'`,n.error),(0,i.markEventAsHandled)(r),a(n.error)}})}removeAllRecords(e){return new Promise((t,r)=>{this.debug(`Deleting all records from table '${e.tableName}'`);const a=this.transaction.objectStore(e.tableName).clear();a.onsuccess=()=>{this.debug(`Deleted all records from table '${e.tableName}' successfully`),t()},a.onerror=t=>{this.warning(`Error deleting all records from table '${e.tableName}'`,a.error),(0,i.markEventAsHandled)(t),r(a.error)}})}insertRecord(e,t){return new Promise((r,a)=>{this.debug(`Inserting record on table '${e.tableName}'`);const n=this.transaction.objectStore(e.tableName).add(t);n.onsuccess=()=>{this.debug(`Inserted record on table '${e.tableName}' successfully`),r(l.unwrapKeyIfNeeded(n))},n.onerror=t=>{this.warning(`Error inserting record on table '${e.tableName}'`,n.error),(0,i.markEventAsHandled)(t),a(n.error)}})}upsertRecord(e,t){return new Promise((r,a)=>{this.debug(`Adding/Updating record on table '${e.tableName}'`);const n=this.transaction.objectStore(e.tableName).put(t);n.onsuccess=()=>{this.debug(`Added/Updated record on table '${e.tableName}' successfully`),r(l.unwrapKeyIfNeeded(n))},n.onerror=t=>{this.warning(`Error adding/updating record on table '${e.tableName}'`,n.error),(0,i.markEventAsHandled)(t),a(n.error)}})}upsertAllRecords(e,t){return r.__awaiter(this,void 0,void 0,(function*(){this.debug(`Adding/updating ${null==t?void 0:t.length} record(s) on table '${e.tableName}'`);try{for(const r of t)yield this.upsertRecord(e,r);this.debug(`Added/updated ${null==t?void 0:t.length} record(s) on table '${e.tableName}' successfully`)}catch(r){throw this.warning(`Error adding/updating ${null==t?void 0:t.length} record(s) on table '${e.tableName}'`,r),r}}))}updateRecord(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return new Promise((r,a)=>{const n=o.getIdentifierColumnNames(e);if(0===(null==n?void 0:n.length)){const t=new Error(`Cannot perform an update on table '${e.tableName}' since it has no primary key column`);return this.warning(t.message),a(t)}this.debug(`Checking if record exists on table '${e.tableName}'`);const s=this.transaction.objectStore(e.tableName).get(null==n?void 0:n.map(e=>t[e]));s.onsuccess=()=>{try{if(!s.result){const t=new Error(`Record to update does not exist on table '${e.tableName}'`);return this.warning(t.message),a(t)}this.debug(`Updating record on table '${e.tableName}'`);const n=this.transaction.objectStore(e.tableName).put(t);n.onsuccess=()=>{this.debug(`Updated record on table '${e.tableName}' successfully`),r()},n.onerror=t=>{this.warning(`Error updating record on table '${e.tableName}'`,n.error),(0,i.markEventAsHandled)(t),a(n.error)}}catch(t){this.warning(`Error updating record on table '${e.tableName}'`,t),a(t)}},s.onerror=t=>{this.warning(`Error checking if record exists on table '${e.tableName}'`,s.error),(0,i.markEventAsHandled)(t),a(s.error)}})}))}addColumn(e,t){return r.__awaiter(this,void 0,void 0,(function*(){yield new Promise((r,n)=>{this.debug(`Adding column '${(0,a.serializeObjectForLog)(t)}' on table '${e.tableName}'`);try{this.transaction.objectStore(e.tableName).createIndex(t.columnName,t.columnName),r()}catch(r){this.warning(`Error adding column '${(0,a.serializeObjectForLog)(t)}' on table '${e.tableName}'`,r),n(r)}});const r=yield this.getAllRecords(e);for(const a of r)a[t.columnName]=t.serializedDefault,yield this.upsertRecord(e,a)}))}existsColumn(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return new Promise((r,a)=>{this.debug(`Checking if column '${t}' exists on table '${e}'`);try{r(this.transaction.objectStoreNames.contains(e)&&this.transaction.objectStore(e).indexNames.contains(t))}catch(r){this.warning(`Error checking if column '${t}' exists on table '${e}'`,r),a(r)}})}))}findRecords(e,t){return new Promise((r,a)=>{this.debug(`Searching for all records on table '${e.tableName}' that match the specified criteria.`);const n=[],s=o.getIdentifierColumns(e).length>0,l=this.transaction.objectStore(e.tableName).openCursor();l.onsuccess=()=>{const a=l.result;if(a){let e=a.value;s||(e=Object.assign(Object.assign({},e),{$KEY:a.primaryKey}));Object.keys(t).reduce((r,a)=>r&&t.hasOwnProperty(a)&&e[o.formatObjectName(a)]===t[a],!0)&&n.push(e),a.continue()}else this.debug(`Search on table '${e.tableName}' found ${n.length} record(s) matching the specified criteria.`),r(n)},l.onerror=t=>{this.warning(`Error searching for records on table '${e.tableName}'`,l.error),(0,i.markEventAsHandled)(t),a(l.error)}})}getAllRecords(e){return new Promise((t,r)=>{this.debug(`Getting all records from table '${e.tableName}'`);const a=this.transaction.objectStore(e.tableName).getAll();a.onsuccess=()=>{this.debug(`Retrieved all the records from table '${e.tableName}'`),t(a.result)},a.onerror=t=>{this.warning(`Error retrieving all the records from table '${e.tableName}'`,a.error),(0,i.markEventAsHandled)(t),r(a.error)}})}static wrapKeyIfNeeded(e,t){return o.getIdentifierColumns(t).length>0?e instanceof Array?e:[e]:e}static unwrapKeyIfNeeded(e){return e.result instanceof Array?e.result[0]:e.result}}l.lastTransactionId=0,t.default=l}));
define("OutSystems/ClientRuntime/modules/Database/IndexedDB/IndexedDBDatabase",["require","exports","tslib","../../../Exceptions","../../../Logger","../../Common/BrowserUtils","../Common/Database","./IndexedDBTransaction","./IndexedDBTransactionWithoutObjectStores","./IndexedDBUtils"],(function(e,t,n,a,s,i,o,r,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class u extends o.default{static asSafeDbName(e){return e||""}static executeTransactionPromiseWithRetry(e,t=3){return n.__awaiter(this,void 0,void 0,(function*(){let n,a=!0,s=0;for(;a;){s++;try{n=yield new Promise(e),a=!1}catch(e){if(!/the transaction is inactive or finished/i.test(e.message)||s>=t)throw e}}return n}))}static open(e,t){return e=this.asSafeDbName(e),new Promise((n,o)=>{if(this.cache[e])n(this.cache[e]);else{if("undefined"==typeof window)return o(new a.Exceptions.SystemException("Database is only available in the browser/web view"));if(!("indexedDB"in window))return s.debug("IndexedDBDatabase","This browser doesn't support IndexedDB"),o(new a.Exceptions.SystemException("This browser doesn't support IndexedDB"));if((0,i.isSafari)(navigator.userAgent)&&(0,i.windowInsideIframe)(window)){const e="Your app requires native access to a Local Storage database that is not available in your browser while using an iframe.\nPlease test your app in your mobile device or use Google Chrome";return alert(e),o(new a.Exceptions.SystemException(e))}s.debug("IndexedDBDatabase",`Opening database '${e}' on IndexedDB`);const r=window.indexedDB.open(e);r.onsuccess=()=>{s.debug("IndexedDBDatabase",`Database '${e}' opened successfully with version '${r.result.version}'`);const a=r.result;this.cache[e]=new u(e,a,t),n(this.cache[e])},r.onerror=()=>{s.warning("IndexedDBDatabase",`Error opening database '${e}'`),o(new a.Exceptions.OpenDatabaseException(`Could not open database '${e}'`))}}})}constructor(e,t,n){super(e,"IndexedDB"),this.databaseImplementation=t,this.onNewDatabaseVersionDetected=n,this.setOnVersionChangeEvent()}setOnVersionChangeEvent(){this.databaseImplementation.onversionchange=()=>{this.databaseImplementation.close(),this.onNewDatabaseVersionDetected&&this.onNewDatabaseVersionDetected()}}close(){return s.debug("IndexedDBDatabase",`Closing database ${this.name} with version '${this.databaseImplementation.version}'`),this.databaseImplementation.close(),delete u.cache[this.name],Promise.resolve()}testConnection(){return Promise.resolve()}executeQuery(e,t=!0,n){return this.executeReadTransaction(t=>t.executeQuery(e),t,n)}executeTransaction(e,t=!0,n){return this.innerExecuteDMLTransaction(e,t,"readwrite",n)}executeReadTransaction(e,t=!0,n){return this.innerExecuteDMLTransaction(e,t,"readonly",n)}innerExecuteDMLTransaction(e,t,n,a){return 0===this.databaseImplementation.objectStoreNames.length?this.innerExecuteIDBTransactionWithoutObjectStores(e,t):this.innerExecuteIDBTransaction(e,t,n,a)}innerExecuteIDBTransaction(e,t,a,s){return u.executeTransactionPromiseWithRetry((i,o)=>n.__awaiter(this,void 0,void 0,(function*(){let d=null,u=null;const l=s?s.map(e=>e.tableName):[];if(0===l.length)for(let e=0;e<this.databaseImplementation.objectStoreNames.length;e++)l.push(this.databaseImplementation.objectStoreNames.item(e));const h=this.databaseImplementation.transaction(l,a),b=new r.default(t,h,this.databaseImplementation);b.onComplete=()=>n.__awaiter(this,void 0,void 0,(function*(){yield(0,c.loadBinaryDataContent)(d),i(d)})),b.onAbort=e=>o(null!=u?u:e);try{d=yield e(b)}catch(e){u=e,null==h||h.abort()}})))}innerExecuteIDBTransactionWithoutObjectStores(e,t){return e(new d.default(t,this.databaseImplementation))}executeUpgradeTransaction(e,t=!0){return n.__awaiter(this,void 0,void 0,(function*(){return new Promise((n,a)=>{let i=null,o=null;const d=this.databaseImplementation.version;this.databaseImplementation.close();const c=window.indexedDB.open(this.name,d+1);c.onsuccess=()=>(this.debug(`Database '${this.name}' opened successfully with version '${d+1}'`,t),this.databaseImplementation=c.result,this.setOnVersionChangeEvent(),n(i)),c.onerror=()=>(s.warning("IndexedDBDatabase",`Error opening '${this.name}' database with version '${d+1}'`),a(null!=o?o:c.error)),c.onupgradeneeded=()=>{this.debug(`Upgrading database '${this.name}' with version '${d+1}'`,t),this.databaseImplementation=c.result;const n=new r.default(t,c.transaction,c.result);n.onAbort=e=>o=null!=o?o:e,e(n).then(e=>i=e).catch(e=>{var t;o=e,null===(t=c.transaction)||void 0===t||t.abort()})}})}))}debug(e,t=!0){t&&s.debug("IndexedDBDatabase",e)}}u.cache={},t.default=u}));
define("OutSystems/ClientRuntime/modules/Database/Metadata/MetadataTableInfo",["require","exports","../AutoNumber","../DBDataType","../TableInfoUtils"],(function(e,a,t,m,u){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const l={tableName:u.METADATA_TABLE_NAME,idIsAutoNumber:t.default.No,attributes:[{name:"Key",columnName:"KEY",type:m.default.TEXT,isPrimaryKey:!0},{name:"ModuleKey",columnName:"MODULEKEY",type:m.default.TEXT,isPrimaryKey:!0},{name:"UpgradeStatus",columnName:"UPGRADESTATUS",type:m.default.INTEGER},{name:"Name",columnName:"NAME",type:m.default.TEXT},{name:"TableName",columnName:"TABLENAME",type:m.default.TEXT},{name:"Hash",columnName:"HASH",type:m.default.TEXT},{name:"ExtraInfo",columnName:"EXTRAINFO",type:m.default.TEXT}]};a.default=l}));
define("OutSystems/ClientRuntime/modules/Database/Metadata/MetadataBackupTableInfo",["require","exports","../TableInfoUtils","./MetadataTableInfo"],(function(e,t,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=Object.assign(Object.assign({},s.default),{tableName:`${a.BACKUP_TABLE_PREFIX}${a.METADATA_TABLE_NAME}`});t.default=n}));
define("OutSystems/ClientRuntime/modules/Database/Metadata/MetadataTableInitializer",["require","exports","tslib","../../../Logger","./MetadataBackupTableInfo","./MetadataTableInfo"],(function(e,a,t,i,l,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const d={isNeeded:e=>t.__awaiter(void 0,void 0,void 0,(function*(){return!(yield e.existsTable(n.default))})),run:e=>t.__awaiter(void 0,void 0,void 0,(function*(){i.debug("MetadataTableInitializer","Running initializer for entity meta info table."),yield e.createTable(n.default),yield e.createTable(l.default),i.debug("MetadataTableInitializer","Initializer for entity meta info table ran successfully.")}))};a.default=d}));
define("OutSystems/ClientRuntime/modules/Database/Metadata/EntityUpgradeStatus",["require","exports"],(function(e,t){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Unchanged=0]="Unchanged",e[e.Deleted=1]="Deleted",e[e.Recreated=2]="Recreated",e[e.New=3]="New"}(a||(a={})),t.default=a}));
define("OutSystems/ClientRuntime/modules/Database/Common/ValueConstraintValidation",["require","exports","../../../Exceptions","../DBDataType","../TableInfoUtils"],(function(e,t,a,n,i){"use strict";function o(e,t,i){if(t.type===n.default.TEXT&&void 0!==t.length){if(!e)return;const n=e.length-t.length;if(n>0)throw new a.Exceptions.DataBaseException("",`Unable to ${i} because it exceeds the maximum allowed length by ${n} characters.`)}else if(t.type===n.default.DECIMAL&&void 0!==t.length&&void 0!==t.decimals){const n=e.trunc().abs().toString().length-(t.length-t.decimals);if(n>0)throw new a.Exceptions.DataBaseException("",`Unable to ${i} because it exceeds the maximum allowed length by ${n} characters.`)}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateValueForCreateOrUpdate=t.validateRecordForCreateOrUpdate=void 0,t.validateRecordForCreateOrUpdate=function(e,t,a){for(const n of t.getAttributes())o(t[n.attrName],i.getMatchingColumn(e,n),`${a} '${e.tableName}.${n.name}'`)},t.validateValueForCreateOrUpdate=o}));
define("OutSystems/ClientRuntime/modules/Database/Common/EntityModelUtils",["require","exports","tslib","../../../DataConversion","../../../DataTypes","../../../Exceptions","../../../Logger","../AutoNumber","../DatabaseTypeUtils","../DBDataType","../Metadata/EntityUpgradeStatus","../Metadata/MetadataBackupTableInfo","../Metadata/MetadataTableInfo","../TableInfoUtils","./ValueConstraintValidation"],(function(e,t,n,i,a,o,r,d,l,u,s,c,f,y,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recreateTable=t.backupDeletedTables=t.dropBackupTables=t.dropInconsistentTables=t.recoverBackupTables=t.createOrUpgradeTable=t.loadStoredMetadata=t.getFirstItem=void 0;function E(e){return e[0]}function m(e,t,i,a){return n.__awaiter(this,void 0,void 0,(function*(){const n=yield e.findRecords(f.default,{MODULEKEY:i});let o=[];if(a)for(const e of n)a(e)&&o.push(e);else o=n;for(const n of o)yield t(n.TABLENAME)(e)}))}function T(e,t,i){return n.__awaiter(this,void 0,void 0,(function*(){return r.debug("EntityModelUtils",`Backing up table '${t}'`),yield D(e,t,!1),yield v(e,A(t)),p(e,t,A(t),t,i)}))}function v(e,t){return e.deleteTableIfExists(t)}function p(e,t,i,a,o){return n.__awaiter(this,void 0,void 0,(function*(){return r.debug("EntityModelUtils",`Renaming table '${t}' to '${i}' and setting status to ${s.default[o]}`),yield function(e,t,n){return e.renameTable(t,n)}(e,t,i),function(e,t,i){return n.__awaiter(this,void 0,void 0,(function*(){const n=E(yield e.findRecords(f.default,{TABLENAME:t}));return n.UPGRADESTATUS=i,e.updateRecord(f.default,n)}))}(e,a,o)}))}function A(e){return`${y.BACKUP_TABLE_PREFIX}${e}`}function g(e,t,i){return n.__awaiter(this,void 0,void 0,(function*(){return r.debug("EntityModelUtils",`Creating table ${t.tableName} (${t.name})`),e.createTable(Object.assign(Object.assign({},t),{attributes:[...t.attributes.map(e=>{var t;return Object.assign(Object.assign({},e),{serializedDefault:i.serialize(null!==(t=e.default)&&void 0!==t?t:(0,l.typeDefaultValue)(e.type),e)})})]}))}))}function U(e,t){return n.__awaiter(this,void 0,void 0,(function*(){r.debug("EntityModelUtils",`Updating metadata for table ${t.tableName} (${t.name})`);const n=yield e.getRecord(f.default,[t.key,t.moduleKey]),i=R(t);i.UPGRADESTATUS=n.UPGRADESTATUS,i.LASTIDENTIFIER=n.LASTIDENTIFIER,yield e.updateRecord(f.default,i)}))}function h(e,t,i,a){return n.__awaiter(this,void 0,void 0,(function*(){try{const n=yield e.getAllRecords(t);yield T(e,t.tableName,s.default.Recreated),yield g(e,t,a);for(const o of n){const n=M(o,t,i,a);yield e.insertRecord(t,n)}yield U(e,t)}catch(e){const n=`Unable to upgrade the definition of entity '${t.name}':\n${(0,o.getMessage)(e)}`;throw r.warning("EntityModelUtils",n),new o.Exceptions.DataBaseException("",n)}}))}function M(e,t,n,i){const a={};for(const r of t.attributes)try{const t=r.columnName,o=e[t];a[t]=N(o,r,n,i)}catch(e){throw new o.Exceptions.DataBaseException("",`Unable to upgrade attribute '${r.name}' data type to '${(0,l.typeDisplayName)(r.type)}':\n${(0,o.getMessage)(e)}`)}return function(e,t,n){var i;for(const a of t.attributes){const t=a.columnName;if(void 0===e[t]){const o=null!==(i=a.default)&&void 0!==i?i:(0,l.typeDefaultValue)(a.type);e[t]=n.serialize(o,a)}}}(a,t,i),a}function N(e,t,n,r){var d;const u=null===(d=n.attrs)||void 0===d?void 0:d[t.columnName];return u?function(e,t,n,r){if(r.isConversionNeeded(t,n)){const d=r.deserialize(e,t),u=(0,l.convertToModelDataType)(n.type),s=function(e,t){const n=a.DataTypes[(0,l.convertToModelDataType)(e.type)],i=a.DataTypes[(0,l.convertToModelDataType)(t.type)];return`convert column '${t.name}' from type ${n} to ${i}`}(t,n);if(i.JSConversions.isConvertibleTo(d,u)){const e=i.JSConversions.convertTo(d,u);(0,b.validateValueForCreateOrUpdate)(e,n,s);return r.serialize(e,n)}throw new o.Exceptions.DataBaseException("",`Unable to ${s}.`)}return e}(e,u,t,r):e}function D(e,t,i){return n.__awaiter(this,void 0,void 0,(function*(){const n=i?c.default:f.default,a=i?f.default:c.default,o=E(yield e.findRecords(a,{TABLENAME:t}));o&&(yield e.removeRecord(a,[o.KEY,o.MODULEKEY]));const r=E(yield e.findRecords(n,{TABLENAME:t}));if(r&&(yield e.insertRecord(a,r)),i){const i=E(yield e.findRecords(n,{TABLENAME:t}));i&&(yield e.removeRecord(n,[i.KEY,i.MODULEKEY]))}}))}function R(e){const t=function(e){const t={};return e.attributes.forEach(e=>{t[e.columnName]={type:e.type,isPrimaryKey:e.isPrimaryKey,length:e.length,decimals:e.decimals,isEntityReference:e.isEntityReference}}),{v:2,idIsAutoNumber:e.idIsAutoNumber,attrs:t}}(e),n=y.getIdentifierColumn(e),i=(null==n?void 0:n.type)===u.default.INTEGER?0:"0";return{KEY:e.key,MODULEKEY:e.moduleKey,UPGRADESTATUS:s.default.Unchanged,NAME:e.name,TABLENAME:e.tableName,HASH:e.hash,LASTIDENTIFIER:n&&e.idIsAutoNumber!==d.default.No?i:void 0,EXTRAINFO:JSON.stringify(t)}}t.getFirstItem=E,t.loadStoredMetadata=function(e,t){return n.__awaiter(this,void 0,void 0,(function*(){return yield e.findRecords(f.default,{MODULEKEY:t})}))},t.createOrUpgradeTable=function(e,t,i,a){var o;return n.__awaiter(this,void 0,void 0,(function*(){let d;r.debug("EntityModelUtils",`Checking the status of table ${t.tableName} (${t.name})`);let u={};if(i&&(d=i.HASH,u=JSON.parse(null!==(o=i.EXTRAINFO)&&void 0!==o?o:"{}")),d){if(d!==t.hash)return function(e,t){if(t.idIsAutoNumber!==e.idIsAutoNumber)return!0;return function(e,t){var n,i;const a={};for(const t of e.attributes){const e=t.columnName;a[e]={},a[e].entityAttr=t}for(const e of Object.keys(null!==(n=t.attrs)&&void 0!==n?n:{}))a[e]=a[e]||{},a[e].metadataAttr=null===(i=t.attrs)||void 0===i?void 0:i[e];return Object.keys(a).map(e=>a[e])}(e,t).some(e=>!e.entityAttr||(e.metadataAttr?function(e,t){return function(e,t){return e.type!==t.type||t.length!==e.length||t.decimals!==e.decimals||!!t.isEntityReference!=!!e.isEntityReference&&!e.isPrimaryKey}(e,t)||!t.isPrimaryKey!=!e.isPrimaryKey}(e.entityAttr,e.metadataAttr):e.entityAttr.isPrimaryKey))}(t,u)?(r.debug("EntityModelUtils",`Table ${t.tableName} (${t.name}) exists and will be fully upgraded`),h(e,t,u,a)):(r.debug("EntityModelUtils",`Table ${t.tableName} (${t.name}) exists and will be incrementally upgraded`),function(e,t,i,a){var o;return n.__awaiter(this,void 0,void 0,(function*(){const n=t.attributes.filter(e=>{var t;return!Object.keys(null!==(t=i.attrs)&&void 0!==t?t:{}).some(t=>t===e.columnName)});r.debug("EntityModelUtils",`Upgrading table ${t.tableName} (${t.name}) with new attributes (${JSON.stringify(n)}) and new hash (${t.hash})`);for(const i of n){const n=a.serialize(null!==(o=i.default)&&void 0!==o?o:(0,l.typeDefaultValue)(i.type),i);yield e.addColumn(t,Object.assign(Object.assign({},i),{serializedDefault:n}))}yield U(e,t)}))}(e,t,u,a));r.debug("EntityModelUtils",`Table ${t.tableName} (${t.name}) exists and is up to date`)}else r.debug("EntityModelUtils",`Table ${t.tableName} (${t.name}) does not exist and will be created`),yield g(e,t,a),yield function(e,t){return n.__awaiter(this,void 0,void 0,(function*(){const n=R(t);n.UPGRADESTATUS=s.default.New,r.debug("EntityModelUtils",`Creating metadata for table ${t.tableName} (${t.name})`),yield e.insertRecord(f.default,n)}))}(e,t)}))},t.recoverBackupTables=function(e,t,i){return n.__awaiter(this,void 0,void 0,(function*(){return m(e,e=>(r.debug("EntityModelUtils",`Recovering table ${e} from backup`),t=>function(e,t){return n.__awaiter(this,void 0,void 0,(function*(){yield v(e,t);(yield e.existsTable(A(t)))&&(yield p(e,A(t),t,t,s.default.Unchanged)),yield D(e,t,!0)}))}(t,e)),i,e=>e.UPGRADESTATUS!==s.default.Unchanged)}))},t.dropInconsistentTables=function(e,t,i){return n.__awaiter(this,void 0,void 0,(function*(){return m(e,e=>(r.debug("EntityModelUtils",`Dropping inconsistent table ${e} (same key, different physical table name)`),t=>function(e,t){return n.__awaiter(this,void 0,void 0,(function*(){yield v(e,t);const n=E(yield e.findRecords(f.default,{TABLENAME:t}));n&&(yield e.removeRecord(f.default,[n.KEY,n.MODULEKEY]))}))}(t,e)),i,e=>{const n=e.UPGRADESTATUS===s.default.Unchanged,i=t.some(t=>t.key===e.KEY),a=!t.some(t=>t.tableName===e.TABLENAME),o=0===t.length||i&&a;return n&&o})}))},t.dropBackupTables=function(e,t){return m(e,e=>(r.debug("EntityModelUtils","Dropping backup table for "+e),t=>function(e,t){return n.__awaiter(this,void 0,void 0,(function*(){yield v(e,A(t));const n=E(yield e.findRecords(f.default,{TABLENAME:t}));n&&(n.UPGRADESTATUS===s.default.Deleted?yield e.removeRecord(f.default,[n.KEY,n.MODULEKEY]):(n.UPGRADESTATUS=s.default.Unchanged,yield e.updateRecord(f.default,n)));const i=E(yield e.findRecords(c.default,{TABLENAME:t}));i&&(yield e.removeRecord(c.default,[i.KEY,i.MODULEKEY]))}))}(t,e)),t,e=>e.UPGRADESTATUS!==s.default.Unchanged)},t.backupDeletedTables=function(e,t,i){return n.__awaiter(this,void 0,void 0,(function*(){return m(e,e=>(r.debug("EntityModelUtils",`Backing up table ${e} before deletion`),t=>T(t,e,s.default.Deleted)),i,e=>e.UPGRADESTATUS===s.default.Unchanged&&!t.some(t=>t.tableName===e.TABLENAME))}))},t.recreateTable=h}));
define("OutSystems/ClientRuntime/modules/Database/Common/EntityModelInitializer",["require","exports","tslib","../../../Logger","../Metadata/EntityUpgradeStatus","../Metadata/MetadataTableInfo","./EntityModelUtils"],(function(t,e,i,n,s,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e){this.entityInfos=t,this.serializer=e}isNeeded(t){return i.__awaiter(this,void 0,void 0,(function*(){if(this.hasEntityInfos()){if(!(yield t.existsTable(o.default)))return!0;const e=r.getFirstItem(this.entityInfos).moduleKey,i=yield r.loadStoredMetadata(t,e);for(const t of this.entityInfos){const e=r.getFirstItem(i.filter(e=>e.KEY===t.key));if(!e||e.HASH!==t.hash||e.UPGRADESTATUS!==s.default.Unchanged||e.TABLENAME!==t.tableName)return!0}for(const t of i)if(!this.entityInfos.some(e=>e.key===t.KEY))return!0}return!1}))}run(t){return i.__awaiter(this,void 0,void 0,(function*(){if(!this.hasEntityInfos())return;const e=r.getFirstItem(this.entityInfos).moduleKey;n.debug("EntityModelInitializer",`Running initializer for entities of module '${e}'.`),yield r.recoverBackupTables(t,this.entityInfos,e),this.entityInfos.length>0&&(yield r.dropInconsistentTables(t,this.entityInfos,e)),yield r.backupDeletedTables(t,this.entityInfos,e);const i=yield r.loadStoredMetadata(t,e);for(const e of this.entityInfos){const n=e,s=r.getFirstItem(i.filter(t=>t.KEY===n.key));yield r.createOrUpgradeTable(t,n,s,this.serializer)}n.debug("EntityModelInitializer",`Initializer for entities of module '${e}' ran successfully.`)}))}cleanup(t){return i.__awaiter(this,void 0,void 0,(function*(){if(!this.hasEntityInfos())return;const e=r.getFirstItem(this.entityInfos).moduleKey;n.debug("EntityModelInitializer",`Running initializer cleanup for entities of module '${e}'.`),yield r.dropBackupTables(t,e),n.debug("EntityModelInitializer",`Initializer cleanup for entities of module '${e}' ran successfully.`)}))}hasEntityInfos(){return this.entityInfos&&this.entityInfos.length>0}}}));
define("OutSystems/ClientRuntime/modules/Database/Common/EntityService",["require","exports","tslib","../../../DataTypes","../../../Exceptions","../../../Logger","../Metadata/MetadataTableInfo","../Metadata/MetadataTableInitializer","../TableInfoUtils","./EntityModelInitializer","./ValueConstraintValidation"],(function(e,t,i,a,r,n,s,o,d,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const u=new a.BasicTypeKeyedTypeFactory("Id","idOut"),h=new a.ComplexTypeKeyedTypeFactory("Record","recordOut");class p{constructor(e){this._serializer=e}get database(){return this._database}get serializer(){return this._serializer}setDatabase(e){n.debug("EntityService","Registering initializer for entity meta info table."),this._database=e,this._database.registerInitializer(o.default)}getDatabase(){return this.databasePromise||(this.databasePromise=new Promise(e=>{this.releaseDatabaseForUse=()=>e(this.database)})),this.databasePromise}registerInitializer(e){if(e&&e.length>0){n.debug("EntityService",`Registering initializer for entities of module '${e[0].moduleKey}'.`);const t=new l.default(e,this.serializer);this.database.registerInitializer(t)}}setReady(){n.debug("EntityService","Releasing the database as ready for use."),this.databasePromise?this.releaseDatabaseForUse():this.databasePromise=Promise.resolve(this.database)}static wrap(e,t){const i=t.getAttributes()[0],a=new t;return a[i.attrName]=e,a}static unwrap(e){const t=e.getAttributes()[0];return e[t.attrName]}static getWrappedType(e){return e.getAttributes()[0].complexType}create(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const i=yield this.getDatabase(),a=p.unwrap(t);let n;(0,c.validateRecordForCreateOrUpdate)(e,a,"create");try{n=yield i.executeTransaction(t=>this.innerCreate(t,e,a),!0,[s.default,e])}catch(e){throw new r.Exceptions.DataBaseException("",e.message,e.stack)}if(null===n)return null;const o=d.getIdentifierAttribute(e,a),l=new(u.getType(o.dataType));return l.idOut=n,l}))}innerCreate(e,t,a){return i.__awaiter(this,void 0,void 0,(function*(){const i=yield e.insertRecord(t,this.serializer.serialize(a,t)),r=d.getIdentifierColumn(t);return r?this.serializer.deserialize(i,r):null}))}update(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const i=yield this.getDatabase(),a=p.unwrap(t);(0,c.validateRecordForCreateOrUpdate)(e,a,"update");try{yield i.executeTransaction(t=>this.innerUpdate(t,e,a),!0,[s.default,e])}catch(e){throw new r.Exceptions.DataBaseException("",e.message,e.stack)}}))}innerUpdate(e,t,a){return i.__awaiter(this,void 0,void 0,(function*(){return e.updateRecord(t,this.serializer.serialize(a,t))}))}createOrUpdate(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const i=yield this.getDatabase(),a=p.unwrap(t);let n;(0,c.validateRecordForCreateOrUpdate)(e,a,"create or update");try{n=yield i.executeTransaction(t=>this.innerCreateOrUpdate(t,e,a),!0,[s.default,e])}catch(e){throw new r.Exceptions.DataBaseException("",e.message,e.stack)}const o=d.getIdentifierAttribute(e,a),l=new(u.getType(o.dataType));return l.idOut=n,l}))}innerCreateOrUpdate(e,t,a){return i.__awaiter(this,void 0,void 0,(function*(){const i=yield e.upsertRecord(t,this.serializer.serialize(a,t)),r=d.getIdentifierColumn(t);return r?this.serializer.deserialize(i,r):null}))}createOrUpdateAll(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const a=yield this.getDatabase(),n=[];for(let i=0;i<t.length;i++){const a=t.getItem(i),r=p.unwrap(a);(0,c.validateRecordForCreateOrUpdate)(e,r,"create or update"),n.push(r)}try{yield a.executeTransaction(t=>i.__awaiter(this,void 0,void 0,(function*(){return this.innerCreateOrUpdateAll(t,e,n)})),!0,[s.default,e])}catch(e){throw new r.Exceptions.DataBaseException("",e.message,e.stack)}}))}innerCreateOrUpdateAll(e,t,a){return i.__awaiter(this,void 0,void 0,(function*(){return e.upsertAllRecords(t,a.map(e=>this.serializer.serialize(e,t)))}))}get(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const a=yield this.getDatabase();let n=null;try{n=yield a.executeReadTransaction(a=>i.__awaiter(this,void 0,void 0,(function*(){return this.innerGet(a,e,t)})),!0,[e])}catch(e){throw new r.Exceptions.DataBaseException("",e.message,e.stack)}if(n){const t=new(h.getType(e.implicitAnonymousType));return t.recordOut=p.wrap(n,e.implicitAnonymousType),t}throw new r.Exceptions.DataBaseException("",`${e.tableName} with id ${t} was not found`)}))}innerGet(e,t,a){return i.__awaiter(this,void 0,void 0,(function*(){const i=d.getIdentifierColumn(t),r=yield e.getRecord(t,this.serializer.serialize(a,i));return r?this.serializer.deserialize(r,t,p.getWrappedType(t.implicitAnonymousType)):null}))}delete(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const i=yield this.getDatabase();try{yield i.executeTransaction(i=>this.innerDelete(i,e,t),!0,[s.default,e])}catch(e){throw new r.Exceptions.DataBaseException("",e.message,e.stack)}}))}innerDelete(e,t,a){return i.__awaiter(this,void 0,void 0,(function*(){const i=d.getIdentifierColumn(t);return e.removeRecord(t,this.serializer.serialize(a,i))}))}deleteAll(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=yield this.getDatabase();try{yield t.executeTransaction(t=>this.innerDeleteAll(t,e),!0,[s.default,e])}catch(e){throw new r.Exceptions.DataBaseException("",e.message,e.stack)}}))}innerDeleteAll(e,t){return i.__awaiter(this,void 0,void 0,(function*(){return e.removeAllRecords(t)}))}}t.default=p}));
define("OutSystems/ClientRuntime/modules/Database/Common/Serializer",["require","exports","../../../DataTypes","../../../Exceptions","../../../Logger","../AutoNumber","../DatabaseTypeUtils","../DBDataType","../TableInfoUtils"],(function(e,i,t,s,r,a,l,n,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class u{static get NULLDATE_IN_DB(){return"1900-01-01 00:00:00"}static maskValue(e,i){const t=i.length,s=e.toString();return i.substr(0,Math.max(0,t-s.length))+s}static maskFourZeroes(e){return u.maskValue(e,"0000")}static maskTwoZeroes(e){return u.maskValue(e,"00")}constructor(){this.serializers=new Map,this.deserializers=new Map,this.serializers.set(n.default.BINARY_DATA,(e,i)=>this.serializeBinaryData(e,i)),this.serializers.set(n.default.BOOLEAN,(e,i)=>this.serializeBoolean(e,i)),this.serializers.set(n.default.DATE,(e,i)=>this.serializeDate(e,i)),this.serializers.set(n.default.DATE_TIME,(e,i)=>this.serializeDateTime(e,i)),this.serializers.set(n.default.DECIMAL,(e,i)=>this.serializeDecimal(e,i)),this.serializers.set(n.default.INTEGER,(e,i)=>this.serializeInteger(e,i)),this.serializers.set(n.default.LONGINTEGER,(e,i)=>this.serializeLongInteger(e,i)),this.serializers.set(n.default.TEXT,(e,i)=>this.serializeText(e,i)),this.serializers.set(n.default.TIME,(e,i)=>this.serializeTime(e,i)),this.deserializers.set(n.default.BINARY_DATA,(e,i)=>this.deserializeBinaryData(e,i)),this.deserializers.set(n.default.BOOLEAN,(e,i)=>this.deserializeBoolean(e,i)),this.deserializers.set(n.default.DATE,(e,i)=>this.deserializeDate(e,i)),this.deserializers.set(n.default.DATE_TIME,(e,i)=>this.deserializeDateTime(e,i)),this.deserializers.set(n.default.DECIMAL,(e,i)=>this.deserializeDecimal(e,i)),this.deserializers.set(n.default.INTEGER,(e,i)=>this.deserializeInteger(e,i)),this.deserializers.set(n.default.LONGINTEGER,(e,i)=>this.deserializeLongInteger(e,i)),this.deserializers.set(n.default.TEXT,(e,i)=>this.deserializeText(e,i)),this.deserializers.set(n.default.TIME,(e,i)=>this.deserializeTime(e,i))}serialize(e,i,s=a.default.No){return e instanceof t.GenericRecord?this.serializeRecord(e,i):this.serializeBasicType(e,i,s)}serializeRecord(e,i){r.debug("Serializer","Starting to serialize a record");const t={};return e.getAttributes().forEach(s=>{const r=o.getMatchingColumn(i,s);t[r.columnName]=this.serializeBasicType(e[s.attrName],r,r.isPrimaryKey?i.idIsAutoNumber:a.default.No)}),r.debug("Serializer","Finished serializing a record"),t}serializeInteger(e,i){return null!=e?e:0}serializeText(e,i){return null!=e?e:""}serializeBoolean(e,i){return e?1:0}serializeLongInteger(e,i){return e?e.toString():"0"}serializeDecimal(e,i){return i.decimals?e.toFixed(i.decimals):e.toString()}serializeDate(e,i){const t=e.toNative();return u.maskFourZeroes(t.getFullYear())+"-"+u.maskTwoZeroes(t.getMonth()+1)+"-"+u.maskTwoZeroes(t.getDate())}serializeTime(e,i){const t=e.toNative();return u.maskTwoZeroes(t.getHours())+":"+u.maskTwoZeroes(t.getMinutes())+":"+u.maskTwoZeroes(t.getSeconds())}serializeDateTime(e,i){if(e.eq(t.DateTime.defaultValue))return"1900-01-01 00:00:00";const s=e.toNative();return u.maskFourZeroes(s.getUTCFullYear())+"-"+u.maskTwoZeroes(s.getUTCMonth()+1)+"-"+u.maskTwoZeroes(s.getUTCDate())+" "+u.maskTwoZeroes(s.getUTCHours())+":"+u.maskTwoZeroes(s.getUTCMinutes())+":"+u.maskTwoZeroes(s.getUTCSeconds())}innerSerializeBasicType(e,i,t){}serializeBasicType(e,i,t){if(r.debug("Serializer","Serializing a value of type "+i.type),!this.serializers.has(i.type))throw new s.Exceptions.DataBaseException("",`Unable to serialize ${i.type} to a database value.`);const a=this.innerSerializeBasicType(e,i,t);if(void 0!==a)return a;return this.serializers.get(i.type)(e,i)}deserialize(e,i,t){return t?this.deserializeRecord(e,i,t):this.deserializeBasicType(e,i)}deserializeRecord(e,i,t){const s=new t;return t.getAttributes().forEach(t=>{const r=o.getMatchingColumn(i,t);s[t.attrName]=this.deserializeBasicType(e[r.columnName],r)}),s}deserializeInteger(e,i){return e}deserializeLongInteger(e,i){return t.LongInteger.fromValue(e)}deserializeDecimal(e,i){return new t.Decimal(e)}deserializeText(e,i){return e}deserializeBoolean(e,i){return 0!==e}deserializeDateTime(e,i){if("1900-01-01 00:00:00"===e)return t.DateTime.defaultValue;const s=/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/.exec(e),r=new Date;return r.setUTCFullYear(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10)),r.setUTCHours(parseInt(s[4],10)||0,parseInt(s[5],10)||0,parseInt(s[6],10)||0,0),new t.DateTime(r)}deserializeDate(e,i){const s=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e),r=new Date;return r.setFullYear(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10)),r.setHours(0,0,0,0),new t.DateTime(r)}deserializeTime(e,i){const s=/^(\d{2}):(\d{2}):(\d{2})$/.exec(e),r=new Date;return r.setFullYear(1900,0,1),r.setHours(parseInt(s[1],10)||0,parseInt(s[2],10)||0,parseInt(s[3],10)||0,0),new t.DateTime(r)}innerDeserializeBasicType(e,i){}deserializeBasicType(e,i){if(!this.deserializers.has(i.type))throw new s.Exceptions.DataBaseException("",`Unable to deserialize ${i} to a runtime value.`);const t=this.innerDeserializeBasicType(e,i);if(void 0!==t)return t;if(null===e)return(0,l.typeDefaultValue)(i.type);return this.deserializers.get(i.type)(e,i)}}i.default=u}));
define("OutSystems/ClientRuntime/modules/Database/IndexedDB/IndexedDBSerializer",["require","exports","../../../DataTypes","../Common/Serializer","../DBDataType"],(function(e,t,n,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends a.default{serializeBinaryData(e,t){return e.toArrayBuffer()||null}deserializeBinaryData(e,t){const a=e instanceof ArrayBuffer?new Blob([e]):e;return new n.BinaryData(a)}isConversionNeeded(e,t){return!!this.isConversionNeededBetweenDBDataTypes(e.type,t.type)||(!!e.isEntityReference!=!!t.isEntityReference||void 0!==e.length&&void 0!==t.length&&(void 0!==e.decimals&&void 0!==t.decimals?e.length-e.decimals>t.length-t.decimals:e.length>t.length))}isConversionNeededBetweenDBDataTypes(e,t){if(void 0===e)return!0;if(e===t)return!1;switch(e){case i.default.BOOLEAN:return t!==i.default.INTEGER;case i.default.LONGINTEGER:return t!==i.default.TEXT;default:return!0}}}t.default=r}));
define("OutSystems/ClientRuntime/modules/Database/IndexedDB/Upgrader/IndexedDBMetadataV2Upgrader",["require","exports","tslib","../../../../Exceptions","../../../../Logger","../../Common/EntityModelUtils","../../DatabaseTypeUtils","../../Metadata/EntityUpgradeStatus","../../Metadata/MetadataTableInfo"],(function(e,t,i,a,n,s,d,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.entityInfos=e,this.serializer=t,this.VERSION=2}isNeeded(e){var t,a;return i.__awaiter(this,void 0,void 0,(function*(){if(this.hasEntityInfos()){if(!(yield e.existsTable(l.default)))return!1;const i=s.getFirstItem(this.entityInfos).moduleKey,n=yield s.loadStoredMetadata(e,i);for(const e of this.entityInfos){const i=s.getFirstItem(n.filter(t=>t.KEY===e.key));if(i&&(null!==(a=JSON.parse(null!==(t=i.EXTRAINFO)&&void 0!==t?t:"{}").v)&&void 0!==a?a:0)<this.VERSION)return!0}}return!1}))}run(e){var t;return i.__awaiter(this,void 0,void 0,(function*(){if(!this.hasEntityInfos())return;const i=s.getFirstItem(this.entityInfos).moduleKey,a=yield s.loadStoredMetadata(e,i);for(const d of this.entityInfos){n.debug("IndexedDBMetadataV2Upgrader",`Running initializer for entities of module '${i}'.`);const l=s.getFirstItem(a.filter(e=>e.KEY===d.key));let o={},u=!0,f=!0;l&&(o=JSON.parse(null!==(t=l.EXTRAINFO)&&void 0!==t?t:"{}"),u=l.UPGRADESTATUS===r.default.Unchanged,f=l.UPGRADESTATUS===r.default.Recreated),u?(n.debug(this,`Table ${d.tableName} (${d.name}) exists and will be fully upgraded`),yield s.recreateTable(e,d,o,this.serializer)):n.debug("IndexedDBMetadataV2Upgrader",`Table ${d.tableName} (${d.name}) exists and will be skipped`),(f||u)&&d.attributes.some(e=>e.isEntityReference)?(n.debug(this,`Table ${d.tableName} (${d.name}) exists and have its defaults upgraded`),yield this.upgradeDefaults(e,d,o,this.serializer)):n.debug("IndexedDBMetadataV2Upgrader",`Table ${d.tableName} (${d.name}) wasn't upgraded`)}}))}cleanup(e){return i.__awaiter(this,void 0,void 0,(function*(){if(!this.hasEntityInfos())return;const t=s.getFirstItem(this.entityInfos).moduleKey;n.debug("IndexedDBMetadataV2Upgrader",`Running initializer cleanup for entities of module '${t}'.`),yield s.dropBackupTables(e,t),n.debug("IndexedDBMetadataV2Upgrader",`Initializer cleanup for entities of module '${t}' ran successfully.`)}))}upgradeDefaults(e,t,s,d){return i.__awaiter(this,void 0,void 0,(function*(){try{const i=yield e.getAllRecords(t);for(const e of i)this.fillWithDefaultsIfNull(e,t,d);yield e.upsertAllRecords(t,i)}catch(e){const i=`Unable to upgrade the definition of entity '${t.name}':\n${(0,a.getMessage)(e)}`;throw n.warning("IndexedDBMetadataV2Upgrader",i),new a.Exceptions.DataBaseException("",i)}}))}fillWithDefaultsIfNull(e,t,i){var a;for(const n of t.attributes){const t=n.columnName;if(n.isEntityReference&&null===e[t]){const s=null!==(a=n.default)&&void 0!==a?a:(0,d.typeDefaultValue)(n.type);e[t]=i.serialize(s,n)}}}hasEntityInfos(){return this.entityInfos&&this.entityInfos.length>0}}}));
define("OutSystems/ClientRuntime/modules/Database/IndexedDB/IndexedDBEntityService",["require","exports","tslib","../../../DataTypes","../../../Exceptions","../../../Logger","../AutoNumber","../Common/EntityService","../Metadata/MetadataTableInfo","../TableInfoUtils","./IndexedDBSerializer","./Upgrader/IndexedDBMetadataV2Upgrader"],(function(e,t,i,r,a,d,n,s,o,l,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class f extends s.default{constructor(){super(new u.default)}executeAggregate(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const i=yield this.getDatabase();try{return yield i.executeQuery(e,!0,t)}catch(e){throw new a.Exceptions.DataBaseException("",e.message,e.stack)}}))}innerCreate(e,t,r){return i.__awaiter(this,void 0,void 0,(function*(){const i=yield this.getMetadataRecord(e,t),a=l.getIdentifierAttribute(t,r),d=r.clone();if(t.idIsAutoNumber===n.default.YesIfEmpty){const n=this.getRecordIdAndUpdateLastIdentifier(i,t,r);yield this.updateMetadataTable(e,i),d[a.attrName]=n}return yield e.insertRecord(t,this.serializer.serialize(d,t)),a?d[a.attrName]:null}))}getRecordIdAndUpdateLastIdentifier(e,t,i){const a=l.getIdentifierColumn(t),d=l.getIdentifierAttribute(t,i);let s=l.getIdentifierValue(t,i);if(t.idIsAutoNumber===n.default.YesIfEmpty){let t=void 0!==e.LASTIDENTIFIER?this.serializer.deserialize(e.LASTIDENTIFIER,a):(0,r.defaultForType)(d.dataType);(0,r.equals)(s,(0,r.defaultForType)(d.dataType))?(t instanceof r.LongInteger?t=t.add(1):"number"==typeof t&&(t+=1),s=t,e.LASTIDENTIFIER=this.serializer.serialize(s,a)):(0,r.compare)(s,t)>0&&(e.LASTIDENTIFIER=this.serializer.serialize(s,a))}return s}innerCreateOrUpdate(e,t,r){return i.__awaiter(this,void 0,void 0,(function*(){const i=r.clone();if(t.idIsAutoNumber===n.default.YesIfEmpty){const a=yield this.getMetadataRecord(e,t),d=this.getRecordIdAndUpdateLastIdentifier(a,t,r);yield this.updateMetadataTable(e,a);i[l.getIdentifierAttribute(t,r).attrName]=d}const a=yield e.upsertRecord(t,this.serializer.serialize(i,t)),d=l.getIdentifierColumn(t);return d?this.serializer.deserialize(a,d):null}))}innerCreateOrUpdateAll(e,t,r){return i.__awaiter(this,void 0,void 0,(function*(){const i=yield this.getMetadataRecord(e,t);let a;const d=r.map(e=>{a=null!=a?a:l.getIdentifierAttribute(t,e);const r=e.clone();if(t.idIsAutoNumber===n.default.YesIfEmpty){const d=this.getRecordIdAndUpdateLastIdentifier(i,t,e);r[a.attrName]=d}return this.serializer.serialize(r,t)});return yield this.updateMetadataTable(e,i),e.upsertAllRecords(t,d)}))}registerInitializer(e){if(super.registerInitializer(e),e&&e.length>0){d.debug("IndexedDBEntityService",`Registering V2 upgrader for entities of module '${e[0].moduleKey}'.`);const t=new c.default(e,this.serializer);this.database.registerInitializer(t)}}getMetadataRecord(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const i=yield e.getRecord(o.default,[t.key,t.moduleKey]);if(!i)throw new Error(`Unable to fetch record with key ${t.key} and moduleKey ${t.moduleKey} from \n                metadata table ${o.default.tableName}.`);return i}))}updateMetadataTable(e,t){return i.__awaiter(this,void 0,void 0,(function*(){if(void 0!==t.LASTIDENTIFIER)return e.updateRecord(o.default,t)}))}}t.default=f}));
define("OutSystems/ClientRuntime/modules/Database/WebSQL/WebSQLTransactionMode",["require","exports"],(function(e,t){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Read=0]="Read",e[e.Write=1]="Write",e[e.Upgrade=2]="Upgrade"}(a||(a={})),t.default=a}));
define("OutSystems/ClientRuntime/modules/Database/WebSQL/WebSQLTransaction",["require","exports","tslib","../../../JSONUtils","../../../Logger","../AutoNumber","../DBDataType","../TableInfoUtils","./WebSQLTransactionMode"],(function(e,t,r,n,a,i,o,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const u=new Map;function d(e){var t;return null!==(t=u.get(e))&&void 0!==t?t:""}u.set(o.default.BINARY_DATA,"BLOB"),u.set(o.default.BOOLEAN,"BOOLEAN"),u.set(o.default.DATE,"DATE"),u.set(o.default.DATE_TIME,"DATETIME"),u.set(o.default.DECIMAL,"REAL"),u.set(o.default.INTEGER,"INTEGER"),u.set(o.default.LONGINTEGER,"BIGINT"),u.set(o.default.TEXT,"TEXT"),u.set(o.default.TIME,"TIME");const c="The database is not running a version change transaction";class m{get transactionId(){return this._transactionId}constructor(e,t,r){this.allowTraces=e,this.transaction=t,this.mode=r,m.lastTransactionId=(m.lastTransactionId+1)%1e12,this._transactionId=m.lastTransactionId+1,this.allowTraces&&a.debug("WebSQLTransaction","Starting transaction "+this.transactionId)}executeQuery(e){return e(this.transaction)}getColumnDeclaration(e,t){let r,n=""+d(t.type);if(t.isPrimaryKey){if(e.idIsAutoNumber===i.default.YesIfEmpty||e.idIsAutoNumber===i.default.Yes)return t.type===o.default.LONGINTEGER&&(n=""+d(o.default.INTEGER)),n+=" PRIMARY KEY AUTOINCREMENT NOT NULL",{declaration:`"${t.columnName}" ${n}`};r=`"${t.columnName}"`}if(t.length&&(n+=`(${t.length}${t.decimals?","+t.decimals:""})`),void 0!==t.serializedDefault){let e=t.serializedDefault;"string"==typeof e&&(e=`'${e.replace("'","''")}'`),n+=" DEFAULT "+e}return{declaration:`"${t.columnName}" ${n}`,primaryKeyDeclaration:r}}createTable(e){return new Promise((t,r)=>{if(this.debug(`Creating table '${e.tableName}'`),this.mode<l.default.Upgrade){const t=new Error(c);return this.warning(`Error creating table '${e.tableName}'`,t),r(t)}const n=e.attributes.map(t=>this.getColumnDeclaration(e,t)),a=n.filter(e=>!!e.primaryKeyDeclaration).map(e=>e.primaryKeyDeclaration),i=n.map(e=>e.declaration);a.length>0&&i.push(`PRIMARY KEY (${a.join(",")})`),this.transaction.executeSql(`CREATE TABLE "${e.tableName}" (${i.join(",")})`,void 0,(r,n)=>{this.debug(`Table '${e.tableName}' created with success`),t()},(t,n)=>{const a=new Error(n.message.toString());return this.warning(`Error creating table '${e.tableName}'`,a),r(a),!1})})}deleteTableIfExists(e){let t;return t="string"==typeof e?e:e.tableName,new Promise((e,r)=>{if(this.debug(`Deleting table '${t}'`),this.mode<l.default.Upgrade){const e=new Error(c);return this.warning(`Error deleting table '${t}'`,e),r(e)}this.transaction.executeSql(`DROP TABLE IF EXISTS "${t}"`,void 0,(r,n)=>{this.debug(`Table '${t}' deleted with success`),e()},(e,n)=>{const a=new Error(n.message.toString());return this.warning(`Error deleting table '${t}'`,a),r(a),!1})})}renameTable(e,t){return new Promise((n,a)=>r.__awaiter(this,void 0,void 0,(function*(){if(this.debug(`Renaming table '${e}'`),this.mode<l.default.Upgrade){const t=new Error(c);return this.warning(`Error renaming table '${e}'`,t),a(t)}this.transaction.executeSql(`ALTER TABLE "${e}" RENAME TO "${t}"`,void 0,(r,a)=>{this.debug(`Table '${e}' renamed to '${t}' with success`),n()},(t,r)=>{const n=new Error(r.message.toString());return this.warning(`Error renaming table '${e}'`,n),a(n),!1})})))}existsTable(e){let t;return t="string"==typeof e?e:e.tableName,new Promise((e,r)=>{this.debug(`Checking if table '${t}' exists`);this.transaction.executeSql(`SELECT * FROM sqlite_master WHERE type = 'table' AND UPPER(name) = UPPER("${t}")`,void 0,(r,n)=>{this.debug(`Table '${t}' checked with success`),e(n.rows.length>0)},(e,n)=>{const a=new Error(n.message.toString());return this.warning(`Error checking if table '${t}' exists`,a),r(a),!1})})}addColumn(e,t){return new Promise((a,i)=>r.__awaiter(this,void 0,void 0,(function*(){const r=(0,n.serializeObjectForLog)(t);if(this.debug(`Adding column '${r}' on table '${e.tableName}'`),this.mode<l.default.Upgrade){const e=new Error(c);return this.warning(`Error adding column '${r}'`,e),i(e)}const o=(e,t)=>{this.debug(`Column '${r}' added with success`),a()},s=(e,t)=>{const n=new Error(t.message.toString());return this.warning(`Error adding column '${r}'`,n),i(n),!1};this.transaction.executeSql(`ALTER TABLE "${e.tableName}" ADD ${this.getColumnDeclaration(e,t).declaration}`,void 0,(r,n)=>{r.executeSql(`UPDATE "${e.tableName}" SET "${t.columnName}" = ?`,[t.serializedDefault],o,s)},s)})))}existsColumn(e,t){return new Promise(r=>{this.debug(`Checking if column '${t}' exists on table '${e}'`);this.transaction.executeSql(`SELECT "${e}"."${t}" FROM "${e}" LIMIT 0`,void 0,()=>{this.debug(`Column '${t}' exists on table '${e}'`),r(!0)},()=>(this.debug(`Column '${t}' does not exist on table '${e}'`),r(!1),!1))})}getRecord(e,t){return new Promise((r,n)=>{this.debug(`Getting record with keys '${t}' from table '${e.tableName}'`);const a=m.wrapKeyIfNeeded(t),i=e.attributes.map(e=>`"${null==e?void 0:e.columnName}"`).join(", "),o=`"${e.tableName}"`,s=[...a],l=e.attributes.filter(e=>null==e?void 0:e.isPrimaryKey).map(e=>`"${null==e?void 0:e.columnName}" = ?`).join(" and ");this.transaction.executeSql(`SELECT ${i} FROM ${o} WHERE ${l}`,s,(n,a)=>{this.debug(`Retrieved record with keys '${t}' from table '${e.tableName}' successfully`);const i=m.convertSQLResultSetToDatabaseRecord(e,a);r(i.length>0?i[0]:null)},(r,a)=>{const i=new Error(a.message.toString());return this.warning(`Error retrieving record with keys '${t}' from table '${e.tableName}'`,i),n(i),!1})})}insertRecord(e,t){return new Promise((r,n)=>{if(this.debug(`Inserting record on table '${e.tableName}'`),this.mode<l.default.Write){const t=new Error("The transaction is read-only");return this.warning(`Error inserting record on table '${e.tableName}'`,t),n(t)}const a=e.attributes.filter(e=>null==e?void 0:e.isPrimaryKey),o=e.attributes.map(e=>`"${null==e?void 0:e.columnName}"`).join(", "),s=m.concatenateMultipleTimes("?",e.attributes.length,", "),u=`"${e.tableName}"`,d=e.attributes.map(e=>void 0===t[null==e?void 0:e.columnName]?null:t[null==e?void 0:e.columnName]);this.transaction.executeSql(`INSERT INTO ${u} (${o}) VALUES (${s})`,d,(n,o)=>{var s,l;let u;this.debug(`Inserted record on table '${e.tableName}' successfully`),u=e.idIsAutoNumber===i.default.No||e.idIsAutoNumber===i.default.YesIfEmpty&&null!==t[null===(s=a[0])||void 0===s?void 0:s.columnName]?t[null===(l=a[0])||void 0===l?void 0:l.columnName]:o.insertId,r(u)},(t,r)=>{const a=new Error(r.message.toString());return this.warning(`Error inserting record on table '${e.tableName}'`,a),n(a),!1})})}updateRecord(e,t){return new Promise((r,n)=>{if(this.debug(`Updating record on table '${e.tableName}'`),this.mode<l.default.Write){const t=new Error("The transaction is read-only");return this.warning(`Error updating record on table '${e.tableName}'`,t),n(t)}const a=e.attributes.filter(e=>!(null==e?void 0:e.isPrimaryKey)),i=e.attributes.filter(e=>null==e?void 0:e.isPrimaryKey),o=a.map(e=>`"${null==e?void 0:e.columnName}" = ?`).join(", "),s=i.map(e=>`"${null==e?void 0:e.columnName}" = ?`).join(" and "),u=`"${e.tableName}"`,d=[];a.forEach(e=>d.push(t[null==e?void 0:e.columnName])),i.forEach(e=>d.push(t[null==e?void 0:e.columnName]));this.transaction.executeSql(`UPDATE ${u} SET ${o} WHERE ${s}`,d,(t,n)=>{0===n.rowsAffected?this.debug(`Record to update does not exist on table '${e.tableName}'`):this.debug(`Updated record on table '${e.tableName}' successfully`),r()},(t,r)=>{const a=new Error(r.message.toString());return this.warning(`Error updating record on table '${e.tableName}'`,a),n(a),!1})})}upsertRecord(e,t){return new Promise((r,n)=>{if(this.debug(`Adding/updating record on table '${e.tableName}'`),this.mode<l.default.Write){const t=new Error("The transaction is read-only");return this.warning(`Error adding/updating record on table '${e.tableName}'`,t),n(t)}const a=e.attributes.filter(e=>null==e?void 0:e.isPrimaryKey),o=e.attributes.map(e=>`"${null==e?void 0:e.columnName}"`).join(", "),s=m.concatenateMultipleTimes("?",e.attributes.length,", "),u=`"${e.tableName}"`,d=e.attributes.map(e=>t[null==e?void 0:e.columnName]);this.transaction.executeSql(`INSERT OR REPLACE INTO ${u} (${o}) VALUES (${s})`,d,(n,o)=>{var s,l;let u;this.debug(`Added/updated record on table '${e.tableName}' successfully`),u=e.idIsAutoNumber===i.default.No||e.idIsAutoNumber===i.default.YesIfEmpty&&null!==t[null===(s=a[0])||void 0===s?void 0:s.columnName]?t[null===(l=a[0])||void 0===l?void 0:l.columnName]:o.insertId,r(u)},(t,r)=>{const a=new Error(r.message.toString());return this.warning(`Error adding/updating record on table '${e.tableName}'`,a),n(a),!1})})}upsertAllRecords(e,t){return r.__awaiter(this,void 0,void 0,(function*(){if(this.debug(`Adding/updating ${null==t?void 0:t.length} record(s) on table '${e.tableName}'`),this.mode<l.default.Write){const t=new Error("The transaction is read-only");throw this.warning(`Error adding/updating records on table '${e.tableName}'`,t),t}try{e.attributes.some(e=>(null==e?void 0:e.type)===o.default.BINARY_DATA)?yield this.innerUpsertAllSingle(e,t):yield this.innerUpsertAllBulk(e,t),this.debug(`Added/updated ${null==t?void 0:t.length} record(s) on table '${e.tableName}' successfully`)}catch(r){throw this.warning(`Error adding/updating ${null==t?void 0:t.length} record(s) on table '${e.tableName}'`,r),r}}))}innerUpsertAllSingle(e,t){return r.__awaiter(this,void 0,void 0,(function*(){this.debug(`Adding/updating ${null==t?void 0:t.length} record(s) on table '${e.tableName}' one by one`);for(const r of t)yield this.upsertRecord(e,r)}))}innerUpsertAllBulk(e,t){return r.__awaiter(this,void 0,void 0,(function*(){const r=Math.floor(m.MaxQueryParameters/e.attributes.length);if(0===r)return this.innerUpsertAllSingle(e,t);const n=[],a=Math.ceil(t.length/r);this.debug(`Adding/updating ${null==t?void 0:t.length} record(s) on table '${e.tableName}' in ${a} chunk(s) of ${r} record(s) each`);for(let i=0;i<a;i++){const a=[];let o=0;for(;o<r;){const n=i*r+o;if(n===t.length)break;const s=t[n];e.attributes.forEach(e=>a.push(s[null==e?void 0:e.columnName])),o++}const s=this.createUpsertBulkQuery(e,o);n.push({query:s,argList:a})}let i=0;for(const t of n)this.debug(`Adding/updating chunk ${++i} of ${a} on table '${e.tableName}'`),yield this.wrapExecuteSqlOnPromise(t,e)}))}wrapExecuteSqlOnPromise(e,t){return new Promise((r,n)=>{this.transaction.executeSql(e.query,e.argList,(e,n)=>{this.debug(`Added/Updated bulk of records on table '${t.tableName}' successfully`),r()},(e,r)=>{const a=new Error(r.message.toString());return this.warning(`Error adding/updating bulk of records on table '${t.tableName}'`,a),n(a),!1})})}createUpsertBulkQuery(e,t){const r=e.attributes.map(e=>`"${null==e?void 0:e.columnName}"`).join(", "),n=`"${e.tableName}"`,a=`(${m.concatenateMultipleTimes("?",e.attributes.length,", ")})`;return`INSERT OR REPLACE INTO ${n} (${r}) VALUES ${m.concatenateMultipleTimes(a,t,", ")}`}removeRecord(e,t){return new Promise((r,n)=>{if(this.debug(`Deleting record with key '${t}' from table '${e.tableName}'`),this.mode<l.default.Write){const t=new Error("The transaction is read-only");return this.warning(`Error deleting record from table '${e.tableName}'`,t),n(t)}const a=m.wrapKeyIfNeeded(t),i=`"${e.tableName}"`,o=[...a],s=e.attributes.filter(e=>null==e?void 0:e.isPrimaryKey).map(e=>`"${null==e?void 0:e.columnName}" = ?`).join(" AND ");this.transaction.executeSql(`DELETE FROM ${i} WHERE ${""===s?"ROWID = ?":s}`,o,(n,a)=>{this.debug(`Deleted record with key '${t}' from table '${e.tableName}' successfully`),r()},(r,a)=>{const i=new Error(a.message.toString());return this.warning(`Error deleting record with key '${t}' from table '${e.tableName}'`,i),n(i),!1})})}removeAllRecords(e){return new Promise((t,r)=>{if(this.debug(`Deleting all records from table '${e.tableName}'`),this.mode<l.default.Write){const t=new Error("The transaction is read-only");return this.warning(`Error deleting all records from table '${e.tableName}'`,t),r(t)}const n=`"${e.tableName}"`;this.transaction.executeSql("DELETE FROM "+n,void 0,(r,n)=>{this.debug(`Deleted all records from table '${e.tableName}' successfully`),t()},(t,n)=>{const a=new Error(n.message.toString());return this.warning(`Error deleting all records from table '${e.tableName}'`,a),r(a),!1})})}findRecords(e,t){return new Promise((r,n)=>{this.debug(`Searching for all records on table '${e.tableName}' that match the specified criteria`);const a=(s.getIdentifierColumns(e).length>0?"":'"rowid" AS "ROWID", ')+e.attributes.map(e=>`"${null==e?void 0:e.columnName}"`).join(", "),i=`"${e.tableName}"`;let o="";const l=[];for(const e in t)if(t.hasOwnProperty(e)){o+=`${o.length>0?" AND ":""}"${s.formatObjectName(e)}" = ?`,l.push(t[e])}this.transaction.executeSql(`SELECT ${a} FROM ${i} WHERE ${o}`,l,(t,n)=>{this.debug(`Search on table '${e.tableName}' found ${n.rows.length} record(s) matching the specified criteria`);const a=m.convertSQLResultSetToDatabaseRecord(e,n);r(a)},(t,r)=>{const a=new Error(r.message.toString());return this.warning(`Error searching for records on table '${e.tableName}'\r\n${a}`,a),n(a),!1})})}getAllRecords(e){return new Promise((t,r)=>{this.debug(`Getting all records on table '${e.tableName}'`);const n=(s.getIdentifierColumns(e).length>0?"":'"rowid" AS "ROWID", ')+e.attributes.map(e=>`"${null==e?void 0:e.columnName}"`).join(", "),a=`"${e.tableName}"`;this.transaction.executeSql(`SELECT ${n} FROM ${a}`,void 0,(r,n)=>{this.debug(`Retrieved all records from table '${e.tableName}' successfully`);const a=m.convertSQLResultSetToDatabaseRecord(e,n);t(a)},(t,n)=>{const a=new Error(n.message.toString());return this.warning(`Error retrieving all records from table '${e.tableName}'`,a),r(a),!1})})}debug(e){this.allowTraces&&a.debug("WebSQLTransaction",`${e} on transaction ${this.transactionId}`)}warning(e,t){a.warning("WebSQLTransaction",`${e} on transaction ${this.transactionId}${t?": "+t.message:""}`)}static wrapKeyIfNeeded(e){return e instanceof Array?e:[e]}static convertSQLResultSetToDatabaseRecord(e,t){const r=s.getIdentifierColumns(e).length>0,n=[];if(t.rows.length>0)for(let a=0;a<t.rows.length;a++){const i=t.rows.item(a),o={};r||(o.$KEY=i.ROWID),e.attributes.forEach(e=>{o[null==e?void 0:e.columnName]=i[null==e?void 0:e.columnName]}),n.push(o)}return n}static concatenateMultipleTimes(e,t,r){return Array.apply(null,new Array(t)).map(()=>e).join(""+r)}}m.MaxQueryParameters=500,m.lastTransactionId=0,t.default=m}));
define("OutSystems/ClientRuntime/modules/Database/WebSQL/WebSQLDatabase",["require","exports","tslib","@outsystems/logger-js","../../../Exceptions","../../../Logger","../../Native/NativeHelper","../Common/Database","./WebSQLTransaction","./WebSQLTransactionMode"],(function(e,t,a,n,i,o,s,r,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class d extends r.default{static open(e){return a.__awaiter(this,void 0,void 0,(function*(){return this.cache[e]||(this.cache[e]=yield d.innerOpen(e)),this.cache[e]}))}static innerOpen(e){return a.__awaiter(this,void 0,void 0,(function*(){if("undefined"==typeof window)throw new i.Exceptions.SystemException("Database is only available in the browser/web view");return s.isRunningOnNative()?d.openPluginDatabase(e):d.isWebSQLSupported()?d.openWebSQLDatabase(e):void d.throwDatabaseRequiredError()}))}static openPluginDatabase(e){return a.__awaiter(this,void 0,void 0,(function*(){yield s.ensureNativeReady();const t=window;if(t.sqlitePlugin)return o.debug(d,`Opening database '${e}'`),new Promise((a,n)=>{try{t.sqlitePlugin.openDatabase({name:e,location:"default"},t=>{t?(o.debug(d,`Database '${e}' opened successfully`),a(new d(e,t))):(o.warning("WebSQLDatabase",`Error opening database '${e}'`),n(new i.Exceptions.OpenDatabaseException(`Could not open database '${e}'`)))},t=>{o.warning("WebSQLDatabase",`Error opening database '${e}' ${t.message}`),n(new i.Exceptions.OpenDatabaseException(`Could not open database '${e}': ${t.message.toString()}`))})}catch(t){n(new i.Exceptions.OpenDatabaseException(`Could not open database '${e}': ${t.message.toString()}`))}});throw new i.Exceptions.OpenDatabaseException("No database driver available")}))}static openWebSQLDatabase(e){const t=window;let a;try{o.debug(d,`Opening database '${e}'`),a=t.openDatabase(e,"1.0",e,5242880)}catch(t){throw new i.Exceptions.OpenDatabaseException(`Could not open database '${e}': ${t.message.toString()}`)}if(a)return o.debug(d,`Database '${e}' opened successfully`),new d(e,a);throw o.warning("WebSQLDatabase",`Error opening database '${e}'`),new i.Exceptions.OpenDatabaseException(`Could not open database '${e}'`)}static isWebSQLSupported(){return!!window.openDatabase}static throwDatabaseRequiredError(){const e="Your app requires native access to a Local Storage database that is not available in your browser.\n\nPlease test your app in your mobile device"+(!!window.chrome?"":", or use Google Chrome web browser")+".";throw alert(e),new i.Exceptions.SystemException(e)}constructor(e,t){super(e,"WebSQL"),this.databaseImplementation=t}testConnection(){return a.__awaiter(this,void 0,void 0,(function*(){let e=0;o.log("WebSQLDatabase","Starting to test on database connections. Performing #5 test queries.",n.Visibility.Internal),yield Promise.all(Array.apply(null,new Array(5)).map(()=>new Promise(t=>a.__awaiter(this,void 0,void 0,(function*(){try{yield this.executeTransaction(e=>e.executeQuery(e=>new Promise((t,a)=>{e.executeSql("SELECT 1",void 0,()=>t(),(e,t)=>(a(new Error(t.message.toString())),!1))})))}catch(t){e++,o.error("WebSQLDatabase","Failed to execute canary query (probably due to zombie transaction)","OS-CLRT-60407",t)}finally{t()}}))))),o.log("WebSQLDatabase",`Finished tests on database connections. #${5-e} out of #5 successfull queries.`,n.Visibility.Internal)}))}close(){return this.databaseImplementation=null,delete d.cache[this.name],Promise.resolve()}executeQuery(e,t=!0){return this.executeReadTransaction(t=>t.executeQuery(e),t)}executeTransaction(e,t=!0,a){return this.innerExecuteTransaction(e,u.default.Write,t,a)}executeReadTransaction(e,t=!0,a){return this.innerExecuteTransaction(e,u.default.Read,t,a)}executeUpgradeTransaction(e,t=!0){return this.innerExecuteTransaction(e,u.default.Upgrade,t)}innerExecuteTransaction(e,t,n=!0,i){return new Promise((i,s)=>{let r,d,l;this.innerExecuteTransactionInMode(t===u.default.Read,i=>a.__awaiter(this,void 0,void 0,(function*(){r=new c.default(n,i,t);try{d=yield e(r)}catch(e){l=e,i.executeSql("ABORT_TRANSACTION",void 0,()=>{},()=>!0)}})),e=>{const t=null!=l?l:new Error(e.message.toString());n&&o.warning("WebSQLDatabase",`Aborting transaction ${null==r?void 0:r.transactionId}: ${t}`),s(t)},()=>{this.debug("Committing transaction "+(null==r?void 0:r.transactionId),n),i(d)})})}innerExecuteTransactionInMode(e,t,a,n){var i,o;e?null===(i=this.databaseImplementation)||void 0===i||i.readTransaction(t,a,n):null===(o=this.databaseImplementation)||void 0===o||o.transaction(t,a,n)}debug(e,t=!0){t&&o.debug("WebSQLDatabase",e)}}d.cache={},t.default=d}));
define("OutSystems/ClientRuntime/modules/Database/WebSQL/Upgrader/V0/MetadataTableInfo",["require","exports","../../../AutoNumber","../../../DBDataType","../../../TableInfoUtils"],(function(e,a,t,u,m){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const l={tableName:m.METADATA_TABLE_NAME,idIsAutoNumber:t.default.No,attributes:[{name:"SS_Key",columnName:"SS_Key",type:u.default.TEXT},{name:"Module_SS_Key",columnName:"Module_SS_Key",type:u.default.TEXT},{name:"Name",columnName:"Name",type:u.default.TEXT},{name:"Physical_Table_name",columnName:"Physical_Table_name",type:u.default.TEXT},{name:"Hash",columnName:"Hash",type:u.default.TEXT},{name:"Extra_Info",columnName:"Extra_Info",type:u.default.TEXT},{name:"Upgrade_Status",columnName:"Upgrade_Status",type:u.default.INTEGER}]};a.default=l}));
define("OutSystems/ClientRuntime/modules/Database/WebSQL/Upgrader/V0/MetadataBackupTableInfo",["require","exports","../../../TableInfoUtils","./MetadataTableInfo"],(function(e,t,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=Object.assign(Object.assign({},s.default),{tableName:`${a.BACKUP_TABLE_PREFIX}${a.METADATA_TABLE_NAME}`});t.default=n}));
define("OutSystems/ClientRuntime/modules/Database/WebSQL/Upgrader/WebSQLMetadataConverter",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertV2ToV0=t.convertV0ToV2=void 0,t.convertV0ToV2=function(e){const t=JSON.parse(e.Extra_Info),r={v:2,idIsAutoNumber:t.idIsAutoNumber,attrs:Object.keys(t.attrs).reduce((e,r)=>(e[r.toUpperCase()]=t.attrs[r],e),{})};return{KEY:e.SS_Key,MODULEKEY:e.Module_SS_Key,UPGRADESTATUS:e.Upgrade_Status,NAME:e.Name,TABLENAME:e.Physical_Table_name,HASH:e.Hash,EXTRAINFO:JSON.stringify(r)}},t.convertV2ToV0=function(e){const t=JSON.parse(e.EXTRAINFO),r={v:0,idIsAutoNumber:t.idIsAutoNumber,attrs:Object.keys(t.attrs).reduce((e,r)=>(e[r.toLowerCase()]=t.attrs[r],e),{})};return{SS_Key:e.KEY,Module_SS_Key:e.MODULEKEY,Name:e.NAME,Physical_Table_name:e.TABLENAME,Hash:e.HASH,Extra_Info:JSON.stringify(r),Upgrade_Status:e.UPGRADESTATUS}}}));
define("OutSystems/ClientRuntime/modules/Database/WebSQL/Upgrader/WebSQLMetadataV2Upgrader",["require","exports","tslib","../../Metadata/MetadataBackupTableInfo","../../Metadata/MetadataTableInfo","./V0/MetadataBackupTableInfo","./V0/MetadataTableInfo","./WebSQLMetadataConverter"],(function(e,a,t,l,d,i,o,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const u={isNeeded:e=>t.__awaiter(void 0,void 0,void 0,(function*(){const a=e;let t=!1;return(yield e.existsTable(o.default))&&(t=yield a.executeQuery(e=>{var a,t,l,d;return t=e,l=o.default.tableName,d=null===(a=o.default.attributes[0])||void 0===a?void 0:a.columnName,new Promise(e=>{t.executeSql(`SELECT "${l}"."${d}" FROM "${l}" LIMIT 1`,void 0,()=>{e(!0)},()=>(e(!1),!1))})})),t})),run:e=>t.__awaiter(void 0,void 0,void 0,(function*(){const a=[{v0TableInfo:o.default,v2TableInfo:d.default},{v0TableInfo:i.default,v2TableInfo:l.default}].map(({v0TableInfo:a,v2TableInfo:l})=>function(e,a,l){return t.__awaiter(this,void 0,void 0,(function*(){const t=(yield e.getAllRecords(a)).map(e=>(0,n.convertV0ToV2)(e));yield e.deleteTableIfExists(a),yield e.createTable(l),yield e.upsertAllRecords(l,t)}))}(e,a,l));yield Promise.all(a)})),cleanup:e=>t.__awaiter(void 0,void 0,void 0,(function*(){yield e.deleteTableIfExists(o.default),yield e.deleteTableIfExists(i.default),yield e.renameTable(d.default.tableName+"_V2",d.default.tableName),yield e.renameTable(l.default.tableName+"_V2",l.default.tableName)}))};a.default=u}));
define("OutSystems/ClientRuntime/modules/Database/WebSQL/Upgrader/WebSQLMetadataV2UpgraderStep2",["require","exports","tslib","../../Metadata/MetadataBackupTableInfo","../../Metadata/MetadataTableInfo","./V0/MetadataBackupTableInfo","./V0/MetadataTableInfo","./WebSQLMetadataConverter","./WebSQLMetadataV2Upgrader"],(function(e,a,t,d,l,r,i,o,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class s{constructor(){s.lastUpgraderRegistered=this}isNeeded(e){return t.__awaiter(this,void 0,void 0,(function*(){let a=!1;return s.lastUpgraderRegistered===this&&(a=yield n.default.isNeeded(e)),a}))}run(e){return t.__awaiter(this,void 0,void 0,(function*(){const a=[{v2TableInfo:l.default,v0TableInfo:i.default},{v2TableInfo:d.default,v0TableInfo:r.default}].map(({v2TableInfo:a,v0TableInfo:t})=>this.migrateToV0(e,a,t));yield Promise.all(a)}))}migrateToV0(e,a,d){return t.__awaiter(this,void 0,void 0,(function*(){const t=(yield e.getAllRecords(a)).map(e=>(0,o.convertV2ToV0)(e));yield e.deleteTableIfExists(a.tableName+"_V2"),yield e.renameTable(a.tableName,a.tableName+"_V2"),yield e.createTable(d),yield e.upsertAllRecords(d,t)}))}cleanup(){return t.__awaiter(this,void 0,void 0,(function*(){s.lastUpgraderRegistered=null}))}}a.default=s}));
define("OutSystems/ClientRuntime/modules/Database/WebSQL/WebSQLSerializer",["require","exports","../../../DataTypes","../../../Logger","../AutoNumber","../Common/Serializer","../DatabaseTypeUtils","../DBDataType"],(function(e,t,a,r,i,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class l extends n.default{constructor(){super(...arguments),this.fromMethodCache=new Map,this.attributeReaderImplementation=(e,t,a,r)=>{const i={type:(0,s.convertDataTypeToDBDataType)(r)};return this.deserialize(e["o"+t],i)},this.namedAttributeReaderImplementation=(e,t,a,r)=>{const i={type:(0,s.convertDataTypeToDBDataType)(r)};return this.deserialize(e[a],i)},this.deserializeAggregate=(e,t,a,r)=>{var i;if(this.isGenericRecordType(t)){const i=e,n=t,s=a;let o=this.fromMethodCache.get(n);if(!o){const e=n.getAttributes();o=this.makeConverterFunction({attributes:e,fromLocalStorage:this.deserializeAggregate,dataType:t}),this.fromMethodCache.set(n,o)}return o(i,s,this.getAttributeReaderImplementation(t),r)}if(this.isGenericRecordListType(t)){const r=new t,i=e,n=a,s=[];for(let e=0;e<i.length;e++)s.push(r.newItem(n(null,i.item(e))));return r.pushAll(s),r}{const e=t;throw new Error("Unable to read data from Local Storage. Unknown type "+(null!==(i=null==e?void 0:e.name)&&void 0!==i?i:e))}}}isGenericRecordType(e){return!!e.isGenericRecordType}isGenericRecordListType(e){return!!e.isGenericRecordListType}getAttributeReaderImplementation(e){return e.isAnonymousRecord()?this.namedAttributeReaderImplementation:this.attributeReaderImplementation}makeAttributesDeclaration(e,t){t.forEach(t=>{t.dataType!==a.DataTypes.RecordList&&(e[t.attrName]=null)})}makeDeserializerForEachAttribute({data:e,attributes:t,dataType:r,row:i,indexRef:n,readerImplementation:s,fromLocalStorage:o}){t.forEach((l,u)=>{l.dataType!==a.DataTypes.RecordList&&(l.dataType===a.DataTypes.Record&&r.isAnonymousRecord()?e[l.attrName]=o(i,l.complexType,n):e[l.attrName]=s(i,n.value++,t[u].name,t[u].dataType))})}makeConverterFunction({attributes:e,fromLocalStorage:t,dataType:a}){return(r,i,n,s)=>{const o={};return s&&s.length>0?(this.makeAttributesDeclaration(o,e),s.forEach(a=>{const s=e.filter((function(e){return e.attrName===a}))[0];s.complexType?o[a]=t(r,s.complexType,i):o[a]=n(r,i.value++,s.name,s.dataType)})):this.makeDeserializerForEachAttribute({data:o,attributes:e,dataType:a,row:r,indexRef:i,readerImplementation:n,fromLocalStorage:t}),new a.RecordClass(o)}}serializeDateTime(e,t){if(e.eq(a.DateTime.defaultValue))return n.default.NULLDATE_IN_DB;const r=e.toNative();return n.default.maskFourZeroes(r.getUTCFullYear())+"-"+n.default.maskTwoZeroes(r.getUTCMonth()+1)+"-"+n.default.maskTwoZeroes(r.getUTCDate())+" "+n.default.maskTwoZeroes(r.getUTCHours())+":"+n.default.maskTwoZeroes(r.getUTCMinutes())+":"+n.default.maskTwoZeroes(r.getUTCSeconds())}serializeBinaryData(e,t){return void 0===e.content?null:e.content}deserializeDateTime(e,t){if(e===n.default.NULLDATE_IN_DB)return a.DateTime.defaultValue;const r=/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/.exec(e),i=new Date;return i.setUTCFullYear(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10)),i.setUTCHours(parseInt(r[4],10)||0,parseInt(r[5],10)||0,parseInt(r[6],10)||0,0),new a.DateTime(i)}deserializeBinaryData(e,t){return new a.BinaryData(e)}isConversionNeeded(e,t){return!!this.isConversionNeededBetweenDBDataTypes(e.type,t.type)||(!!e.isEntityReference!=!!t.isEntityReference||void 0!==e.length&&void 0!==t.length&&(void 0!==e.decimals&&void 0!==t.decimals?e.length-e.decimals>t.length-t.decimals:e.length>t.length))}isConversionNeededBetweenDBDataTypes(e,t){if(void 0===e)return!0;if(e===t)return!1;switch(e){case o.default.BOOLEAN:return t!==o.default.INTEGER&&t!==o.default.LONGINTEGER;case o.default.INTEGER:return t!==o.default.LONGINTEGER&&t!==o.default.TEXT;case o.default.LONGINTEGER:return t!==o.default.TEXT;default:return!0}}innerSerializeBasicType(e,t,n){return r.debug("WebSQLSerializer","WebSQL serializing a value of type "+t.type),t.isPrimaryKey&&n===i.default.YesIfEmpty&&(0,a.equals)(e,(0,s.typeDefaultValue)(t.type))||t.isEntityReference&&(0,a.equals)(e,(0,s.typeDefaultValue)(t.type))?null:void 0}}t.default=l}));
define("OutSystems/ClientRuntime/modules/Database/WebSQL/WebSQLEntityService",["require","exports","tslib","../../../Exceptions","../Common/EntityService","./Upgrader/WebSQLMetadataV2Upgrader","./Upgrader/WebSQLMetadataV2UpgraderStep2","./WebSQLSerializer"],(function(e,t,a,i,r,s,d,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class u extends r.default{constructor(){super(new n.default),this.isMetadataV2UpgraderRegistered=!1}registerInitializer(e){this.isMetadataV2UpgraderRegistered||(this.database.registerInitializer(s.default),this.isMetadataV2UpgraderRegistered=!0),super.registerInitializer(e),this.database.registerInitializer(new d.default)}executeAggregate(e){return a.__awaiter(this,void 0,void 0,(function*(){const t=yield this.getDatabase();try{return yield t.executeQuery(e)}catch(e){throw new i.Exceptions.DataBaseException("",e.message,e.stack)}}))}}t.default=u}));
define("OutSystems/ClientRuntime/modules/Lifecycle/LifecycleEventsManager",["require","exports","tslib","../../Logger"],(function(e,n,i,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=class{constructor({onNewVersionHandler:e}={}){this.onNewVersionHandler=e}setOnNewVersionHandler(e){this.onNewVersionHandler=e}onNewVersion(e,n){return i.__awaiter(this,void 0,void 0,(function*(){this.onNewVersionHandler?this.onNewVersionHandler(e,n):r.warning("LifecycleHandlers","onNewVersion triggered without handler defined.")}))}}}));
define("OutSystems/ClientRuntime/modules/LocaleService/LocaleService",["require","exports","../../ApplicationInfo","../../StorageProvider","../Injector/Injector","../Injector/KnownServices","../PubSub/Publisher"],(function(e,r,t,o,i,l,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const c=/^[A-z]{2,3}([_-]([A-z]{4}|[\d]{3}))?([_-]([A-z]{2}|[\d]{3}))?$/;r.default=class{constructor(e){this.currentLocaleStorage=new o.StorageObject(o.StorageType.Persistent,"CurrentLocale",void 0,t.getUserProviderName),this.publisher=new s.default("Locale Service",e)}subscribe(e){return this.publisher.subscribe(e)}unsubscribe(e){return this.publisher.unsubscribe(e)}getCurrentLocale(){var e,r;return null!==(r=null===(e=this.currentLocaleStorage.get())||void 0===e?void 0:e.localeCode)&&void 0!==r?r:"en-US"}setCurrentLocale(e){const r=i.resolve(l.ServiceNames.TranslationsService);if(r&&r.clear(),!this.isValidLocale(e))throw new Error(`Value '${e}' isn't a valid locale.`);{const r={localeCode:e,isRTL:!1};this.currentLocaleStorage.set(r)}const t=this.getCurrentLocaleFamily();this.publisher.publish({localeCode:e,localeFamily:t})}getCurrentLocaleFamily(){var e;const r=[],t=null!==(e=this.getCurrentLocale())&&void 0!==e?e:"";return t.indexOf("-")>0&&r.push(t.split("-")[0]),r.push(t),r}isValidLocale(e){return c.test(e)}isCurrentLocaleRTL(){var e,r;return null!==(r=null===(e=this.currentLocaleStorage.get())||void 0===e?void 0:e.isRTL)&&void 0!==r&&r}setCurrentLocaleRTL(e){var r;const t=null!==(r=this.currentLocaleStorage.get())&&void 0!==r?r:{localeCode:"en-US",isRTL:!1};t.isRTL=e,this.currentLocaleStorage.set(t)}}}));
define("OutSystems/ClientRuntime/modules/MappingWithDefault/MappingWithDefaultService",["require","exports","../../Logger"],(function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.default=class{constructor(){this.messages={}}getMessage(e,s){t.debug("MappingWithDefaultService",`Getting message for key ${e} with default message ${s}`);const i=this.messages[e];return null!=i?i:s}setMessage(e,s){t.debug("MappingWithDefaultService",`Setting message for key ${e} with value ${s}`),this.messages[e]=s}add(e){if(!e)throw new Error("Messages cannot either null or undefined");const s=Object.keys(e);t.debug("MappingWithDefaultService",`Adding ${s.length} messages`),s.forEach(s=>this.setMessage(s,e[s]))}clear(){t.debug("MappingWithDefaultService","Clearing cached messages"),this.messages={}}}}));
define("OutSystems/ClientRuntime/modules/Settings/storageSettings",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeSettings=void 0;t.mergeSettings=function(e,t){const n=function(e){return Object.entries(e).reduce((e,[t,n])=>(t.startsWith("DEV_")&&"string"==typeof n&&(e[t.replace("DEV_","")]=n),e),{})}(t);return Object.assign(Object.assign({},e),n)}}));
define("OutSystems/ClientRuntime/modules/Settings/SettingsManager",["require","exports","tslib","@outsystems/logger-js","../../ApplicationInfo","../../Logger","../Injector/Injector","../Injector/KnownServices","./storageSettings"],(function(e,t,s,i,n,r,a,g,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const c="SettingsManager",h={Debug:i.LogType.Debug,Information:i.LogType.Info,Warning:i.LogType.Warning,Error:i.LogType.Error};t.default=class{constructor({getBasePath:e,httpClient:t=a.default.resolve(g.ServiceNames.UnauthenticatedHttpClient),getAppKey:s=n.getApplicationKey,initialSettings:i={},settingsHash:r="",overrideStorage:c=sessionStorage,cacheName:h=s()+"-clientsettings",cacheStorage:l=localStorage}={}){this.getBasePath=null!=e?e:()=>n.getBasePath(),this.httpClient=t,this.settingsValue=(0,o.mergeSettings)(i,c),this.settingsHash=r,this.overrideStorage=c,this.cacheName=h,this.cacheStorage=l}update(e){var t;return s.__awaiter(this,void 0,void 0,(function*(){try{if(!e||this.settingsHash!==e){const{clientSettingsHash:e,clientSettings:s}=yield this.httpClient.get({url:"clientsettingsinfo.json",baseURL:""});this.settingsHash=e,this.settingsValue=(0,o.mergeSettings)(s,this.overrideStorage),this.cacheSettings(s)}}catch(e){r.error(c,"Error retrieving settings from endpoint: "+e.message,"OS-CLRT-61001"),this.fetchCachedSettings()}}))}settingExists(e){return Object.keys(this.settingsValue).includes(e)}cacheSettings(e){this.cacheStorage.setItem(this.cacheName,JSON.stringify(e))}fetchCachedSettings(){try{const e=this.cacheStorage.getItem(this.cacheName);if(e){r.debug(c,"Loading client settings from cache");const t=JSON.parse(e);this.settingsValue=(0,o.mergeSettings)(t,this.overrideStorage)}else r.warning(c,"No settings stored in cache, keeping previous values")}catch(e){r.error(c,"Error retrieving settings from cache, keeping previous values","OS-CLRT-61000",e)}}readString(e){var t;return this.settingExists(e)?null!==(t=this.settingsValue[e])&&void 0!==t?t:"":(r.debug(c,`Value for setting ${e} was not found.`),"")}readNumber(e){var t;return this.settingExists(e)?null!==(t=Number(this.settingsValue[e]))&&void 0!==t?t:0:(r.debug(c,`Value for setting ${e} was not found.`),0)}readBool(e){var t,s;return this.settingExists(e)?null!==(s="true"===(null===(t=this.settingsValue[e])||void 0===t?void 0:t.toLowerCase()))&&void 0!==s&&s:(r.debug(c,`Value for setting ${e} was not found.`),!1)}readLogLevel(){const e=this.settingsValue.LogLevel,t=h[e];return null!=t?t:i.LogType.Info}}}));
define("OutSystems/ClientRuntime/Performance",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clear=t.dump=t.end=t.start=void 0;const n="undefined"!=typeof __PERFORMANCE;t.start=function(e){n&&__PERFORMANCE.start(e)},t.end=function(e){n&&__PERFORMANCE.end(e)},t.dump=function(){if(n)return __PERFORMANCE.dump()},t.clear=function(){if(n)return __PERFORMANCE.clear()}}));
define("OutSystems/ClientRuntime/RequireManager",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.configure=i.loadModule=i.setErrorHandler=i.initialize=void 0;function n(){!function(){const e=requirejs.s.contexts;Object.keys(e).forEach(i=>{const n=e[i];if(!n._osNameToUrlPatched){const e=n.nameToUrl;n.nameToUrl=function(i,r,o){return i.indexOf("$")>0&&-1===i.indexOf("?")&&(i=i.split("$",2)[0]),e.apply(n,[i,r,o])},n._osNameToUrlPatched=!0}})}()}i.initialize=function(){n()},i.setErrorHandler=function(e){requirejs.onError=e},i.loadModule=function(e,i,n){requirejs(e,i,n)},i.configure=function(e,i="scripts"){const r={baseUrl:i,paths:{},waitSeconds:30};if(e){for(const i in e)(requirejs.specified(i)||requirejs.defined(i))&&delete e[i];r.paths=e}requirejs.config(r),n()}}));
define("OutSystems/ClientRuntime/ResourceCache",["require","exports","tslib","./ApplicationInfo","./modules/Common/UrlUtils","./modules/Communication/Communication","./modules/Native/NativeHelper"],(function(e,s,t,r,i,n,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.forcePreloaderCacheHandler=s.forceDummyCacheHandler=s.ResourceCache=void 0;class h{constructor(){this.isCaching=!1,this.errorMessages=[],this.onFinishListeners=[],this.onErrorListeners=[],this.onProgressListeners=[]}onFinish(){this.isCaching=!1,this.onFinishListeners.forEach(e=>e()),this.onFinishListeners=[],this.onErrorListeners=[],this.onProgressListeners=[]}onError(e){this.errorMessages.push(e),this.onErrorListeners.forEach(s=>s(e))}onProgress(e,s){this.onProgressListeners.forEach(t=>t(e,s))}listen(e,s,t){this.errorMessages.length>0&&s&&s(this.errorMessages.join("\n")),!this.isCaching&&e&&e(),this.isCaching&&(e&&this.onFinishListeners.push(e),s&&this.onErrorListeners.push(s),t&&this.onProgressListeners.push(t))}start(e){return new Promise((s,t)=>{if(!this.isCaching)try{this.isCaching=!0,this.errorMessages=[],this.innerStart(e)}catch(e){return this.onError(e.message),void t(e.message)}const r={finished:!1};this.listen(()=>{r.finished||(r.finished=!0,s())},e=>{r.finished||(r.finished=!0,t(e))},null)})}switch(e){this.innerSwitch(e)}}class a extends h{constructor(){super(),this.isNativeReady=!1,this.isCacheAvailable=!1,o.ensureNativeReady().then(()=>{this.isNativeReady=!0,this.isCacheAvailable="undefined"!=typeof OSCache,this.isCacheAvailable?(OSCache.addEventListener("onfinish",e=>this.onFinish()),OSCache.addEventListener("onerror",e=>this.onError(e.message)),OSCache.addEventListener("onprogress",e=>this.onProgress(e.loaded,e.total))):console.error("ResourceCache",a.OSCacheNotFoundMessage)},e=>{console.error("ResourceCache","OSCache was not initialized because Cordova was not loaded.",e)})}checkOSCacheAndDeferCall(e,s){return this.isNativeReady?!!this.isCacheAvailable||(e&&this.onError(a.OSCacheNotFoundMessage),!1):(o.ensureNativeReady().then(s),!1)}getCacheName(){return"Native Cache"}innerStart(e){if(!this.checkOSCacheAndDeferCall(!0,()=>this.innerStart(e)))return;const s=(0,r.getBasePath)(),t=`/${(0,r.getHomeModuleName)()}/`,n=[];for(const r of Object.getOwnPropertyNames(e.urlVersions))n.push((0,i.buildURLFromVersionedResource)((0,i.replaceBasePath)(r,t,s),e.urlVersions[r]));OSCache.startCaching(e.versionToken,n,e.urlMappings,e.urlMappingsNoCache)}innerSwitch(e){if(this.checkOSCacheAndDeferCall(!1,()=>this.innerSwitch(e)))try{OSCache.switchToVersion(e)}catch(e){console.error("ResourceCache",e)}}}a.OSCacheNotFoundMessage="OSCache not found (is a native plugin missing?)";class c extends h{constructor(e=n.get){super(),this.requested=0,this.resourceQueue=[],this.count=0,this.total=0,this.getMethod=e}getCacheName(){return"Preloader"}innerStart(e){if(this.isOngoing())return;if(this.count=this.requested=this.total=0,this.resources=e.urlVersions,!this.resources)return;if(this.resourceQueue=Object.getOwnPropertyNames(this.resources),this.total=this.resourceQueue.length,this.resourceQueue.length<=0)return;const s=`/${(0,r.getHomeModuleName)()}/`;for(let e=0;e<c.DefaultWindowSize;++e)this.prefetchNext(s,"")}innerSwitch(e){}isOngoing(){return this.requested>0||this.resourceQueue.length>0}request(e,s,r){return t.__awaiter(this,void 0,void 0,(function*(){try{yield this.getMethod({url:e,timeout:c.DefaultResourceTimeout})}catch(s){this.onError&&this.onError(`Failed to load resource '${e}'.`)}this.onProgress&&this.onProgress(++this.count,this.total),this.requested--,0===this.resourceQueue.length&&0===this.requested?this.onFinish&&this.onFinish():this.resourceQueue.length>0&&this.prefetchNext(s,r)}))}prefetchNext(e,s){const t=this.resourceQueue.pop();if(!t)throw new Error("No resource to fetch next.");const r=(0,i.buildURLFromVersionedResource)((0,i.replaceBasePath)(t,e,s),this.resources[t]);this.request(r,e,s),this.requested++}}c.DefaultWindowSize=2,c.DefaultResourceTimeout=2e4;class u extends h{getCacheName(){return"Dummy"}innerStart(e){this.onFinish()}innerSwitch(e){}}s.ResourceCache="undefined"==typeof document?new u:o.isRunningOnNative()?new a:new c,s.forceDummyCacheHandler=function(){s.ResourceCache=new u},s.forcePreloaderCacheHandler=function(e=n.get){s.ResourceCache=new c(e)}}));
define("OutSystems/ClientRuntime/EventDispatcher",["require","exports"],(function(t,n){"use strict";var e;Object.defineProperty(n,"__esModule",{value:!0}),n.EventDispatcher=n.TransitionEndResult=n.EventType=void 0,function(t){t[t.TransitionStart=0]="TransitionStart",t[t.TransitionEnd=1]="TransitionEnd",t[t.NavigationStart=2]="NavigationStart"}(e=n.EventType||(n.EventType={})),function(t){t[t.Success=0]="Success",t[t.Failure=1]="Failure"}(n.TransitionEndResult||(n.TransitionEndResult={}));let i=0;const r=(()=>{const t=[],n=Object.keys(e).length/2;for(let e=0;e<n;e++)t.push({});return t})();!function(t){function n(t,n,e=!1){const s="_"+i++;return r[t][s]={listenOnce:e,callback:n},{type:t,id:s}}function e(t,n){return delete r[t][n]}t.listen=n,t.listenOnce=function(t,e){return n(t,e,!0)},t.unregister=function(t){return t&&e(t.type,t.id)},t.dispatch=function(t){let n=void 0;const i=r[t.type];for(const r in i){const s=i[r];s.listenOnce&&e(t.type,r);const c=s.callback(t.args);void 0!==c&&(n=c)}return n}}(n.EventDispatcher||(n.EventDispatcher={}))}));
define("OutSystems/ClientRuntime/modules/Error/Errors",["require","exports"],(function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommunicationError=e.ClientRuntimeError=void 0;class o extends Error{constructor({message:r,errorCode:e,category:o}){super(r),this.errorCode=e,this.category=o}}e.ClientRuntimeError=o;e.CommunicationError=class extends o{constructor({message:r,errorCode:e,category:o,response:s}){super({message:r,errorCode:e,category:o}),this.response=null!=s?s:{}}}}));
define("OutSystems/ClientRuntime/modules/Manifest/ManifestLoader",["require","exports","tslib","../../ApplicationInfo","../../Logger","../Communication/Communication","../Injector/Injector","../Injector/KnownServices"],(function(e,t,i,s,n,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManifestLoader=void 0;t.ManifestLoader=class{constructor({getBasePath:e=(()=>s.getBasePath()),getMethod:t=r.get,prefetchedVersion:i}={}){this.getBasePath=null!=e?e:()=>s.getBasePath(),this.getMethod=t,this.prefetchedVersion=i}init(){return i.__awaiter(this,void 0,void 0,(function*(){try{this.prefetchedVersion=yield this.getLatestVersion()}catch(e){n.debug("ManifestLoader","Failed to prefetch latest version. "+e)}}))}getVersionTokenParameter(e){return e?"?"+e:""}getPrefetchedVersion(){return this.prefetchedVersion}getLatestManifest(e,t){return this.getManifest(e,t)}getCachedManifest(e){return this.getManifest("cached",e)}getManifest(e,t=o.default.resolve(a.ServiceNames.UnauthenticatedHttpClient)){const i="moduleinfo.json";return this.getMethod({url:i,timeout:1e4,baseURL:"",httpClient:t})}getLatestVersion(e=(new Date).getTime().toString(),t=o.default.resolve(a.ServiceNames.HttpClient)){const i="moduleversioninfo.json";return this.getMethod({url:i,timeout:1e4,baseURL:"",httpClient:t})}}}));
define("OutSystems/ClientRuntime/modules/Native/Prebundle",["require","exports","tslib","./IOutSystemsNativeHost","./NativeHelper"],(function(e,t,i,n,u){"use strict";function r(){return i.__awaiter(this,void 0,void 0,(function*(){try{return yield u.ensureNativeReady(),(0,n.isIOutSystemsNativeHost)(window)?window.OutSystemsNative.Prebundle:null}catch(e){return null}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.getManifest=t.isPrebundlePluginAvailable=void 0,t.isPrebundlePluginAvailable=function(){return i.__awaiter(this,void 0,void 0,(function*(){return!!(yield r())}))},t.getManifest=function(){return i.__awaiter(this,void 0,void 0,(function*(){const e=yield r();return e?new Promise((t,i)=>{e.getManifest(t,i)}):null}))}}));
define("OutSystems/ClientRuntime/VersionsManager",["require","exports","tslib","@outsystems/logger-js","./ApplicationInfo","./ErrorHandling","./EventDispatcher","./Exceptions","./Flow","./Logger","./modules/Common/UrlUtils","./modules/Database/IDatabase","./modules/Error/Errors","./modules/Injector/Injector","./modules/Injector/KnownServices","./modules/Manifest/ManifestLoader","./modules/Native/NativeHelper","./modules/Native/Prebundle","./Navigation","./Performance","./RequireManager","./ResourceCache","./StorageProvider"],(function(e,t,i,r,n,s,a,o,d,l,u,c,g,h,p,f,m,v,M,V,b,S,I){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VersionsManager=t.getVersionedUrl=t.buildScriptMap=t.VersionsManagerStorage=t.UpgradeStatus=t.UpgradeFailReason=void 0;!function(e){e[e.Generic=0]="Generic",e[e.Resources=1]="Resources",e[e.DataModel=2]="DataModel"}(t.UpgradeFailReason||(t.UpgradeFailReason={})),function(e){e[e.Idle=0]="Idle",e[e.Upgrading=1]="Upgrading",e[e.UpgradeSuccess=2]="UpgradeSuccess",e[e.UpgradeFailed=3]="UpgradeFailed"}(t.UpgradeStatus||(t.UpgradeStatus={})),t.VersionsManagerStorage={applicationInfo:new I.StorageObject(I.StorageType.Persistent,"ApplicationInfo"),upgradeStatus:new I.StorageObject(I.StorageType.Session,"UpgradeStatus",0)};t.buildScriptMap=(e,t,i=n.getHomeModuleName,r=n.getBasePath)=>{const s=`/${i()}/`,a=r();return Object.keys(e).filter(e=>/\.js$/i.test(e)).reduce((t,i)=>{const r=e[i],n=(0,u.replaceBasePath)(i,s,a),o=n.split("/"),d=E(o[o.length-1]);return t.hasOwnProperty(d)||(t[d]=(0,u.buildURLFromVersionedResource)(n,r)),t},{})};const E=e=>{const t=e.indexOf("__");return-1!==t?e.substring(0,t):e.replace(".js","")},U=(e,t)=>`/${t}/${e}`,A=(e,t,i)=>i?i[U(e,t)]:void 0;t.getVersionedUrl=(e,t,i=!1,r=n.getHomeModuleName,s=n.getBasePath)=>{const a=r(),o=s(),d=((e,t,i)=>{const r=(n=e).substring(0,n.lastIndexOf("."));var n;const s=t?Object.keys(t).filter(e=>-1!==e.indexOf(r+"__")):[];if(i&&s.length>0){const e=s[0].lastIndexOf("__"),t=s[0].substring(e);return`${r}${t}`}return e})(e,t,i),l=A(d,a,t);if(l){const e=(0,u.buildURLFromVersionedResource)(U(d,a),null!=l?l:""),t=`/${a}/`;return(0,u.replaceBasePath)(e,t,o)}return d};class w{constructor({manifestLoader:e=new f.ManifestLoader}={}){this._isAutoUpgradeEnabled=!0,this.checkedCachedInfoConsistency=!1,this.manifestLoader=e}get cachedAppInfo(){let e=t.VersionsManagerStorage.applicationInfo.get();if(e&&!this.checkedCachedInfoConsistency){try{w.validateApplicationInfo(e)}catch(i){e=void 0,t.VersionsManagerStorage.applicationInfo.remove()}this.checkedCachedInfoConsistency=!0}return e}set cachedAppInfo(e){t.VersionsManagerStorage.applicationInfo.set(e)}get currentAppInfo(){return this.pendingAppInfo?this.pendingAppInfo:this.cachedAppInfo}get upgradeStatus(){return t.VersionsManagerStorage.upgradeStatus.get()}set upgradeStatus(e){t.VersionsManagerStorage.upgradeStatus.set(e)}initializeManifestLoader(){return this.manifestLoader.init()}initialize(e,s){return i.__awaiter(this,void 0,void 0,(function*(){l.debug("VersionsManager","Initializing VersionsManager"),this.onVersionReady=s.onVersionReady||(()=>{}),this.onUpgradeFinished=s.onUpgradeFinished||(e=>{}),this.onNewVersionDetected=!this.isUpgradeDisabled&&s.onNewVersionDetected||(e=>Promise.resolve());const i=s.onAppInfoReady||(e=>{});this.initialUpgradeStatus=this.upgradeStatus;if(!n.getHomeModuleName())return Promise.reject(Error("Home module not defined!"));this.enableBackgroundCheckForNewVersions();const{manifest:a,isFromPrebundle:o}=yield this.fetchApplicationManifest();if(this.pendingAppInfo=a,i(a),b.configure((0,t.buildScriptMap)(a.manifest.urlVersions,a.manifest.versionToken)),this.isNewVersion(a.manifest,o)){if(!this.isUpgradeDisabled&&this.usingStaleIndex(a))return M.reloadCurrentLocation(!0),l.log("VersionsManager","Reloading application - index.html was changed in the server",r.Visibility.Internal),!1;yield this.upgrade(a,e)}else this.initDataModel(e);return!0}))}initDataModel(e){l.debug("VersionsManager","Initializing data model"),e.then(e=>this.upgradeDataModel(e).then(()=>this.switchDataModel(e)).then(()=>{this.onVersionReady()})).then(()=>this.setUpgradeStatus(0)).catch(e=>this.handleInitError(e))}cacheResourcesInBackground(e){return l.debug("VersionsManager","Caching resources in the background..."),this.fetchApplicationManifest(!1).then(({manifest:t,isFromPrebundle:i})=>{const r=this.usingStaleIndex(t);if(e&&e(r),M.forceReloadOnNextNavigation(r),this.isNewVersion(t.manifest,i))return this.upgradeResources(t)}).catch(e=>l.warning("VersionsManager","Error caching resources for new version in the background: "+e))}getResourceVersionToken(e,t){if(this.currentAppInfo)return A(e,t,this.currentAppInfo.manifest.urlVersions)}isNewVersion(e,t){const i=e.versionToken,r=this.getLastApplicationVersionToken(),n=i!==r;if(this.canDisableNativeAutoUpgrade){const e=this.isAutoUpgradeEnabled,s=n&&(e||t);return l.debug("VersionsManager",()=>n?`Version check found a new version '${i}' from ${t?"prebundle":"server"} with auto-upgrade ${e?"enabled":"disabled"} and decided it is ${s?"":"not "}upgradable. Current version has token '${r}'`:`Version check found the same version '${i}'.`),s}return n}getLastApplicationVersionToken(e=!1){if(e&&this.pendingAppInfo)return this.pendingAppInfo.manifest.versionToken;const t=this.cachedAppInfo;return t?t.manifest.versionToken:""}getVersionToken(e,t){return this.getResourceVersionToken(e,t)}getVersionedUrl(e){var i,r;return(0,t.getVersionedUrl)(e,null===(i=this.currentAppInfo)||void 0===i?void 0:i.manifest.urlVersions,null===(r=this.currentAppInfo)||void 0===r?void 0:r.manifest.cdnUrlVersioning)}static getJSONParseErrorMessage(e=""){return"Error parsing manifest JSON "+(e?`, missing or invalid field: ${e}.`:".")}static validateApplicationInfo(e){if(!e)throw Error(this.getJSONParseErrorMessage());if(!e.manifest)throw Error(this.getJSONParseErrorMessage("manifest"));const t=e.manifest;if(!t.versionToken||"string"!=typeof t.versionToken)throw Error(this.getJSONParseErrorMessage("manifest.versionToken"));if(!t.urlVersions||"object"!=typeof t.urlVersions)throw Error(this.getJSONParseErrorMessage("manifest.urlVersions"));if(!t.urlMappings||"object"!=typeof t.urlMappings)throw Error(this.getJSONParseErrorMessage("manifest.urlMappings"));if(!t.urlMappingsNoCache||"object"!=typeof t.urlMappingsNoCache)throw Error(this.getJSONParseErrorMessage("manifest.urlMappingsNoCache"));if(!e.data)throw Error(this.getJSONParseErrorMessage("data"));const i=e.data;if(!i.modules||"object"!=typeof i.modules)throw Error(this.getJSONParseErrorMessage("data.modules"))}getLatestVersionFromServer(e=!1){var t;return i.__awaiter(this,void 0,void 0,(function*(){const i=yield e&&this.manifestLoader.getPrefetchedVersion()||this.manifestLoader.getLatestVersion();return this.canDisableNativeAutoUpgrade&&(this._isAutoUpgradeEnabled=null!==(t=i.isAutoUpgradeEnabled)&&void 0!==t&&t),i.versionToken||l.error("VersionsManager","Error retrieving version token from module version info.","OS-CLRT-60301"),i}))}checkForNewVersion(){this.isUpgradeDisabled||this.isUpgradingVersion||!t.VersionsManagerStorage.applicationInfo.isDefined()||this.getLatestVersionFromServer(!1).then(e=>{this.getLastApplicationVersionToken()!==e.versionToken&&this.isAutoUpgradeEnabled&&this.onNewVersionDetected(!1,this.isAutoUpgradeEnabled)},e=>{l.warning("VersionsManager","Error checking for new version: "+e)})}upgrade(e,t){return i.__awaiter(this,void 0,void 0,(function*(){l.debug("VersionsManager","New application version detected, starting upgrade..."),this.setUpgradeStatus(1);const i=this.supportsResourceCache().then(t=>t?this.upgradeResources(e).catch(e=>this.handleUpgradeError(e,1,Promise.resolve(void 0))):Promise.resolve()),r=t.then(e=>this.upgradeDataModel(e)).catch(e=>this.handleUpgradeError(e,2,i));yield Promise.all([i,r]).then(()=>{1===this.upgradeStatus&&this.commitNewVersion(e,t).then(e=>{e&&this.onVersionReady()})}).catch(e=>this.handleUpgradeError(e))}))}supportsResourceCache(){var e;return i.__awaiter(this,void 0,void 0,(function*(){if(n.isWebApplication()){const t=!!(null===(e=n.getHomeModuleDefinition())||void 0===e?void 0:e.splashScreenName);return l.debug("VersionsManager","Web app - Resource pre-caching is "+(t?"enabled":"disabled")),t}{const e=yield this.serviceWorkerIsAvailable(),t=m.isRunningOnNative()||!e;return l.debug("VersionsManager","Mobile app - Pre-caching resources with "+(t?"Resource Cache":"Service Worker")),t}}))}serviceWorkerIsAvailable(){return i.__awaiter(this,void 0,void 0,(function*(){try{if(!("serviceWorker"in navigator))return!1;return null!==(yield navigator.serviceWorker.getRegistrations())}catch(e){return!1}}))}commitNewVersion(e,t){return t.then(e=>this.switchDataModel(e)).then(()=>this.switchResourcesVersion(e.manifest.versionToken)).then(()=>{const t=!this.cachedAppInfo;return this.cachedAppInfo=e,this.setUpgradeStatus(t?0:2),!0})}setManifestLoader(e){this.manifestLoader=e}upgradeResources(e){return V.start("VersionsManager upgradeResources"),d.tryFinally(()=>S.ResourceCache.start(e.manifest),()=>V.end("VersionsManager upgradeResources"))}upgradeDataModel(e){return V.start("VersionsManager upgradeDataModel"),(0,c.instanceOfIDatabase)(e)?(l.debug("VersionsManager",`Initializing data model on ${e.engineName} database.`),d.tryFinally(()=>i.__awaiter(this,void 0,void 0,(function*(){const t=yield this.getAllEntityModules(),i=h.default.resolve(p.ServiceNames.EntityService);for(const e of t)i.registerInitializer(e.getEntityInfos());yield e.initialize()})),()=>V.end("VersionsManager upgradeDataModel"))):(l.debug("VersionsManager","Initializing data model on SQLite/WebSQL database."),d.tryFinally(()=>this.doForEachClientEntitiesModule(e,(e,t)=>t.init(e)),()=>V.end("VersionsManager upgradeDataModel")))}getAllEntityModules(){const e=[],t=n.getClientEntitiesModules();if(t)for(const i of t)l.debug("VersionsManager",`Fetching entity module '${i}'.`),e.push(new Promise((e,t)=>{b.loadModule([i],t=>e(t),t)}));return Promise.all(e)}doForEachClientEntitiesModule(e,t){return e.isMock?Promise.resolve():this.getAllEntityModules().then(i=>e.executeTransaction(e=>e.feed(null).andThenAll(()=>i.map(e=>i=>t(i,e)))))}switchResourcesVersion(e){S.ResourceCache.switch(e)}switchDataModel(e){return(0,c.instanceOfIDatabase)(e)?(l.debug("VersionsManager","Finishing initialization of data model on IndexedDB database."),e.initializerCleanup()):(l.debug("VersionsManager","Finishing initialization of data model on SQLite/WebSQL database."),this.doForEachClientEntitiesModule(e,(e,t)=>t.switch(e)))}handleInitError(e){const t=this.isUpgradeDisabled?"Upgrade failed and rollback isn't possible at this time":"Unable to load the data model";l.error("VersionsManager",t,"OS-CLRT-60303",e,r.Visibility.External),s.handleError(e)}handleUpgradeError(e,t=0,i=Promise.resolve(void 0)){return o.isInstanceOf(e,o.Exceptions.OpenDatabaseException)?(l.error("VersionsManager","Upgrade failed - unable to open the database.","OS-CLRT-60302",e),s.handleError(e),Promise.resolve(void 0)):M.hasPendingReload()||3===this.initialUpgradeStatus?3===this.initialUpgradeStatus?(s.handleError(e),Promise.resolve(void 0)):(l.warning("VersionsManager","Upgrade failed - ignoring error due to concurrent navigation."),3!==this.upgradeStatus&&this.setUpgradeStatus(0),Promise.resolve(void 0)):(l.error("VersionsManager","Upgrade failed - rolling back to previous application version.","OS-CLRT-60302",e,r.Visibility.External),this.rollBackApplicationVersion(t,i))}get isUpgradingVersion(){return 1===this.upgradeStatus}setUpgradeStatus(e,t=0){return this.upgradeStatus=e,l.debug("VersionsManager","Upgrade status changed to: "+e),2===e?this.onUpgradeFinished(!0):3===e?this.onUpgradeFinished(!1,t):void 0}rollBackApplicationVersion(e,t){return this.loadCachedManifest().then(({manifest:i})=>{if(this.setUpgradeStatus(3,e),1!==e)return t.then(()=>S.ResourceCache.start(i.manifest))}).then(()=>{M.reloadApplication(!1)}).catch(e=>{s.handleError(e)})}get isUpgradeDisabled(){return 3===this.upgradeStatus}get isAutoUpgradeEnabled(){return this._isAutoUpgradeEnabled}get canDisableNativeAutoUpgrade(){return h.default.resolve(p.ServiceNames.SettingsManager).readBool("CanDisableAutoUpgrade")&&m.isRunningOnNative()&&this.isRunningCachedIndex()}isRunningCachedIndex(){const e=OSManifestLoader.indexVersionToken,t=this.getIndexVersion(this.cachedAppInfo);return!!t&&e===t}usingStaleIndex(e){if(M.currentLocationHasTimestamp())return!1;return(OSManifestLoader.indexVersionToken||this.getIndexVersion(this.cachedAppInfo))!==this.getIndexVersion(e)}getIndexVersion(e){if(!e)return"";const t=A("index.html",n.getHomeModuleName(),e.manifest.urlVersions);return t?t.substr(1):""}loadCachedManifest(){var e;return i.__awaiter(this,void 0,void 0,(function*(){if(this.canDisableNativeAutoUpgrade){const t=this.innerLoadPrebundledManifest(),i=this.innerLoadCachedManifest();let r=null,n=null,s=null;try{r=yield t}catch(t){l.warning("VersionsManager","Error loading prebundled manifest: "+(null!==(e=null==t?void 0:t.message)&&void 0!==e?e:t))}try{n=yield i}catch(e){s=e}try{n=yield this.innerLoadCachedManifest()}catch(e){s=e}if(!(null==r?void 0:r.manifest.versionSequence)){if(n)return{manifest:n,isFromPrebundle:!1};throw s}return n&&n.manifest.versionSequence>=r.manifest.versionSequence?{manifest:n,isFromPrebundle:!1}:{manifest:r,isFromPrebundle:!0}}return{manifest:yield this.innerLoadCachedManifest(),isFromPrebundle:!1}}))}innerLoadCachedManifest(){return i.__awaiter(this,void 0,void 0,(function*(){if(yield this.ensureCachedManifest(),this.cachedAppInfo)return this.cachedAppInfo;{const e=yield this.manifestLoader.getCachedManifest();return w.validateApplicationInfo(e),e}}))}innerLoadPrebundledManifest(){return v.getManifest()}ensureCachedManifest(){if(m.isRunningOnNative()||this.cachedAppInfo)return Promise.resolve(void 0);{this.setUpgradeStatus(0);const e=new g.ClientRuntimeError({message:"No cached manifest found. It's not possible to rollback to a previous version.",errorCode:"OS-CLRT-60304"});return Promise.reject(e)}}getLatestManifestFromServer(e){return this.manifestLoader.getLatestManifest(e).then(e=>(w.validateApplicationInfo(e),{manifest:e,isFromPrebundle:!1}))}fetchApplicationManifest(e=!0){return V.start("VersionsManager fetchApplicationManifest"),this.isUpgradeDisabled?this.loadCachedManifest():this.getLatestVersionFromServer(e).then(e=>this.isNewVersion(e,!1)?this.getLatestManifestFromServer(e.versionToken):this.loadCachedManifest()).catch(()=>this.loadCachedManifest()).then(e=>(V.end("VersionsManager fetchApplicationManifest"),e))}enableBackgroundCheckForNewVersions(){let e=!1;a.EventDispatcher.listen(a.EventType.NavigationStart,()=>e=!0),a.EventDispatcher.listen(a.EventType.TransitionEnd,()=>{e=!1,setTimeout(()=>{e||this.checkForNewVersion()},1e3)})}}t.VersionsManager=w;const y=new w;t.default=y}));
define("OutSystems/ClientRuntime/Public",["require","exports","@outsystems/logger-js","./Application","./ApplicationInfo","./BuiltinFunctions","./Controller","./FeedbackMessageService","./Logger","./modules/Injector/Injector","./modules/Injector/KnownServices","./modules/Native/NativeHelper","./Navigation","./ResourceCache","./ScreenDefinition","./Transitions","./VersionsManager"],(function(e,t,i,n,r,a,o,s,c,l,d,g,u,v,p,m,f){"use strict";function h(e,t){c.log("Public",`'${e}' is deprecated and will be removed on the next version. Consider using '${t}' instead.`)}var w,A;Object.defineProperty(t,"__esModule",{value:!0}),t.Branding=t.ApplicationLoad=t.ApplicationContext=t.View=t.Logger=t.Navigation=t.ApplicationLifecycle=t.Device=t.Validation=t.FeedbackMessage=t.FeedbackMessageType=t.BuiltinFunctions=void 0,t.BuiltinFunctions=a,function(e){e[e.Info=0]="Info",e[e.Success=1]="Success",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(w=t.FeedbackMessageType||(t.FeedbackMessageType={})),function(e){e.showFeedbackMessage=function(e,t,i=!0,n,r=!0,a){return s.showFeedbackMessage(e,function(e){switch(e){case w.Info:return 0;case w.Success:return 1;case w.Warning:return 2;case w.Error:return 3;default:throw new Error("Don't know how to convert "+e)}}(t),i,n,r,a)},e.closeFeedbackMessage=function(){return s.closeFeedbackMessage()}}(t.FeedbackMessage||(t.FeedbackMessage={}));t.Validation=class{constructor(e){this._model=e}setWidgetAsInvalid(e,t){var i;const n=null===(i=this._model)||void 0===i?void 0:i.widgets.get(e);n.validAttr=!1,n.validationMessageAttr=t}setWidgetAsValid(e){var t;const i=null===(t=this._model)||void 0===t?void 0:t.widgets.get(e);i.validAttr=!0,i.validationMessageAttr=""}isWidgetValid(e){var t;return!0===(null===(t=this._model)||void 0===t?void 0:t.widgets.get(e)).validAttr}},function(e){e.whenReady=function(){return(0,g.whenDeviceReady)()}}(t.Device||(t.Device={})),function(e){e.isUpgradingVersion=function(){return f.default.isUpgradingVersion},e.listen=function(e){c.debug("ApplicationLifecycle","Registering listeners for the application load process."),e&&(e.onLoadComplete&&n.default.waitForAppReady().then(()=>{var t;return null===(t=e.onLoadComplete)||void 0===t?void 0:t.call(e)}),e.onUpgradeProgress&&v.ResourceCache.listen(null,null,(t,i)=>{var n;return null===(n=e.onUpgradeProgress)||void 0===n?void 0:n.call(e,t,i)}))}}(A=t.ApplicationLifecycle||(t.ApplicationLifecycle={}));t.Navigation=class{constructor(e){this._context=e}navigateTo(e,t,i){u.navigateTo(e,this.getTransitionObject(t,m.Default),this._context,!1,i)}navigateBack(e){u.navigateBack(this.getTransitionObject(e),this._context,!1)}navigateForward(e){u.navigateForward(this.getTransitionObject(e),this._context,!1)}navigatedFromHistory(){return(o.BaseViewController.activeScreen?o.BaseViewController.activeScreen.modelContext:{viewName:"",navigatedFromHistory:!1,viewWasRestoredFromCache:!1}).navigatedFromHistory}registerBackNavigationHandler(e){return u.registerBackNavigationHandler(e)}unregisterBackNavigationHandler(e){u.unregisterBackNavigationHandler(e)}getTransitionObject(e,t=null){return m.createTransition(e,t)}},function(e){e.log=function(e,t){c.log(e,t,i.Visibility.External)},e.error=function(e,t,n){c.error(e,t,void 0,n,i.Visibility.External)}}(t.Logger||(t.Logger={}));class y{constructor(e){this._model=e}static get ActiveScreenCssClass(){return"active-screen"}getCurrentScreenRootElement(){return document.querySelector("."+y.ActiveScreenCssClass)}render(){return new Promise(e=>{requestAnimationFrame(()=>{setTimeout(e,1)})})}wasCurrentViewRestoredFromCache(){return!!this._model&&this._model.context.viewWasRestoredFromCache}registerDeviceClassGetter(e){return l.register(d.ServiceNames.DeviceHelperClassProvider,()=>e)}}t.View=y;t.ApplicationContext=class{static getCurrentContext(){const e=p.getCurrentScreenDefinition();return{applicationKey:r.getApplicationKey()||"",applicationName:r.getApplicationName()||"",screenKey:e?e.screenKey:"",screenName:e?e.screenName:""}}};class C{static get Instance(){return C}static get isUpgradingVersion(){return h("ApplicationLoad.isUpgradingVersion","ApplicationLifecycle.isUpgradingVersion()"),A.isUpgradingVersion()}static listen(e){h("ApplicationLoad.listen()","ApplicationLifecycle.listen()"),A.listen(e)}}t.ApplicationLoad=C,function(e){e.showOutSystemsWatermark=function(){return r.showWatermark()}}(t.Branding||(t.Branding={}))}));
define("OutSystems/ClientRuntime/PublicApiHelper",["require","exports","./BuiltinFunctions","./Public"],(function(i,t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PublicApiHelper=void 0;t.PublicApiHelper=class{constructor(i,t){this._model=i,this._navigationContext=t}get BuiltinFunctions(){return e}get Validation(){return this._validation||(this._validation=new n.Validation(this._model)),this._validation}get FeedbackMessage(){return n.FeedbackMessage}get Device(){return n.Device}get ApplicationLifecycle(){return n.ApplicationLifecycle}get ApplicationContext(){return n.ApplicationContext}get ApplicationLoad(){return n.ApplicationLoad}get Navigation(){return this._navigation||(this._navigation=new n.Navigation(this._navigationContext)),this._navigation}get Logger(){return n.Logger}get View(){return this._view||(this._view=new n.View(this._model)),this._view}get Branding(){return n.Branding}}}));
define("OutSystems/ClientRuntime/WidgetNaming",["require","exports"],(function(e,t){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetIdService=t.NamespaceKind=void 0,function(e){e[e.Block=0]="Block",e[e.IteratorItem=1]="IteratorItem",e[e.None=2]="None"}(a=t.NamespaceKind||(t.NamespaceKind={}));t.WidgetIdService=class{constructor(e,t="",s=a.None,n=null){switch(this._ownerService=e,s){case a.Block:this._namespace="b";break;case a.IteratorItem:this._namespace="l";break;default:this._namespace=""}if(this._namespace+=t,e){const t=n?n+"-":"";this._namespace=e.namespace+this._namespace+"-"+t}else this._namespace&&(this._namespace=this._namespace+"-")}getId(e){return e?this.namespace+e:null}static nameFromId(e){return e.substring(e.lastIndexOf("-")+1)}get namespace(){return this._namespace}get ownerService(){return this._ownerService}}}));
define("OutSystems/ClientRuntime/Validation",["require","exports","./WidgetNaming"],(function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ValidationResult=e.ValidationService=void 0;e.ValidationService=class{constructor(t,e){this.model=t,this.messagesProvider=e,this.updatingValidations=!1,this.disposed=!1,t.hasValidationWidgets&&(this.widgets={},this.widgetChildren={},this.oldModelWidgets=this.model.widgets,this.model.subscribeWrites(()=>{this.updatingValidations||this.oldModelWidgets===this.model.widgets||this.recalculateAggregatorsState(""),this.oldModelWidgets=this.model.widgets},!0))}getWidgetRecord(t){return this.model.widgets.get(t)}updateWidgetValidationsProperties(t,e,i){const s=this.updatingValidations;this.updatingValidations=!0;try{if(t.isWebBlockInstance){t.valid=e}else{const s=this.getWidgetRecord(t.getId());s.validAttr!==e&&(s.validAttr=e),void 0!==i&&s.validationMessageAttr!==i&&(s.validationMessageAttr=i)}}finally{this.updatingValidations=s}}validateWidget(t){let e=!0;for(const i in this.widgetChildren[t])!0!==this.validateWidget(i)&&(e=!1);const i=this.widgets[t];if(i){let t;i.isValidationAggregator?t=new s(e):i.validate&&(t=i.validate()),t&&(this.updateWidgetValidationsProperties(i,t.valid,t.validationMessage),t.valid||(e=!1))}return e}recalculateAggregatorsState(t){let e=!0;for(const i in this.widgetChildren[t])this.recalculateAggregatorsState(i)||(e=!1);const i=this.widgets[t];if(i){if(i.isWebBlockInstance)return i.valid;if(!i.isValidationAggregator)return this.getWidgetRecord(t).validAttr;this.updateWidgetValidationsProperties(i,e)}return e}register(t){if(this.model.hasValidationWidgets&&t){const e=t.getId();if(e){this.widgets[e]=t;const i=t.validationParentId||"";let s=this.widgetChildren[i];if(s||(s={},this.widgetChildren[i]=s),s[e]=1,!t.isWebBlockInstance){const i=t,s=this.model.widgets.create(e);s.generationNode=i.generationNode,this.model.widgets.add(s)}}}}unregister(t){if(!t||this.disposed||!this.model.hasValidationWidgets)return;const e=this.widgets[t],i=(e?e.validationParentId:null)||"";delete this.widgets[t],delete this.widgetChildren[i][t],e&&this.model.widgets.remove(t)}isRegistered(t){return!!this.widgets&&void 0!==this.widgets[t]}validate(t){if(!this.model.hasValidationWidgets)return!0;let e=this.validateWidget(t||"");return t&&(e=this.recalculateAggregatorsState("")),this.model.flush(),e}getMandatoryValueMessage(){return this.messagesProvider.getMandatoryValueMessage()}getInvalidValueMessage(t){return this.messagesProvider.getInvalidValueMessage(t)}getNameById(t){return i.WidgetIdService.nameFromId(t)}getWidgetChildren(){return this.widgetChildren}dispose(){this.disposed=!0}};class s{constructor(t,e){this.valid=t,this.validationMessage=e}get valid(){return this._valid}set valid(t){this._valid=null==t||t}get validationMessage(){return this._validationMessage}set validationMessage(t){this._validationMessage=t||""}}e.ValidationResult=s}));
define("OutSystems/ClientRuntime/Controller",["require","exports","tslib","@outsystems/logger-js","./ApplicationInfo","./DataConversion","./DataTypes","./ErrorHandling","./Exceptions","./Flow","./Logger","./modules/Auth/Authentication","./modules/Communication/Communication","./modules/Communication/Constants","./modules/Injector/Injector","./modules/Injector/KnownServices","./modules/Native/NativeHelper","./Navigation","./PublicApiHelper","./RequireManager","./Validation","./VersionsManager","./WidgetNaming"],(function(e,t,i,n,r,s,o,a,l,c,u,h,d,p,g,v,m,f,C,S,y,w,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseViewController=t.BaseModuleController=t.BaseController=t.IterationContext=t.CallContext=t.ControllerFactory=void 0;const A=()=>{};class E{constructor(e,t){this.controllerClass=e,this.messagesProvider=t}create(e,t){return new this.controllerClass(e,this.messagesProvider,t)}static executeWithNavigationCallbacks(e,t,i){f.setNavigationCallbacks(t);return c.tryFinally(e,()=>{t.dispose(i),f.removeNavigationCallbacks()})}initialize(e,t,n,r,s,o){return i.__awaiter(this,void 0,void 0,(function*(){const i=D.activeScreen,c=i?i.callContext():n.callContext();try{h.isAuthenticated()&&(yield new Promise(e=>{new C.PublicApiHelper(null,null).ApplicationLifecycle.listen({onLoadComplete:e})}),yield h.getUserProfile()),this.controllerClass.checkPermissions()}catch(e){const t={permissionsOk:!1};return E.executeWithNavigationCallbacks(()=>n.handleError(e,c),r,c).then(()=>t,e=>t)}const u=t.create(e),d=this.create(u,new b.WidgetIdService(null));d.setAsActiveScreen();const p=E.executeWithNavigationCallbacks(()=>d.fireInitialize({rootSpan:o}),s,d.callContext()),g={permissionsOk:!0,controller:d,model:u};return p.then(()=>g,e=>l.isInstanceOf(e,l.Exceptions.UnhandledOrIgnoredErrorInEventException)&&e.handleErrorResult===a.UNHANDLED_ERROR_RESULT?{permissionsOk:!0}:g)}))}get activeScreenController(){return D.activeScreen}}t.ControllerFactory=E;class x{constructor(){this._iterationContext=new I,this._id=++x.currentId}get id(){return this._id}get viewName(){return this._viewName}get timeout(){return this._timeout}get iterationContext(){return this._iterationContext}set iterationContext(e){this._iterationContext=e}withViewName(e){return this._viewName!==e?this.innerClone({_viewName:{value:e}}):this}withTimeout(e){return this._timeout!==e?this.innerClone({_timeout:{value:e}}):this}clone(){const e=this.innerClone();return e._id=++x.currentId,e}innerClone(e){const t=Object.create(this,null!=e?e:{});return t.iterationContext=this.iterationContext.clone(),t}get isOutOfContext(){return!!D.activeScreen&&this.viewName!==D.activeScreen.viewName}}x.currentId=0,t.CallContext=x;class I{getCurrentRowNumber(e){const t=this.getIterator(e);return t?t.currentRowNumber:0}setCurrentRowNumber(e,t){this.getIteratorForSet(e).currentRowNumber=t}isBeingIterated(e){const t=this.getIterator(e);return!!t&&t.isBeingIterated}registerIterationStart(e){const t=this.getIteratorForSet(e);if(t.isBeingIterated)throw new Error("List is already being iterated in this context");t.currentRowNumber=e.length-1,t.isBeingIterated=!0}registerIterationEnd(e){const t=this.getIteratorForSet(e);if(!t.isBeingIterated)throw new Error("List was redefined while being iterated");t.isBeingIterated=!1}getIterator(e){return this.iterators?this.iterators.get(e.modelId):null}getIteratorForSet(e){this.iterators||(this.iterators=new Map);let t=this.getIterator(e);return t||(t={currentRowNumber:0,isBeingIterated:!1},this.iterators.set(e.modelId,t)),t}clone(){const e=new I;return this.iterators&&(e.iterators=function(e,t){const i=new Map;return e.forEach((e,n)=>{const r=t(e);i.set(n,r)}),i}(this.iterators,e=>Object.create(e))),e}}t.IterationContext=I;const N=new o.RecordTypeFactory,R=new o.ComplexTypeKeyedTypeFactory("Data","dataOut"),H=new o.ComplexTypeKeyedTypeFactory("List","listOut",[{name:"Count",attrName:"countOut",mandatory:!0,dataType:o.DataTypes.LongInteger,defaultValue:()=>o.LongInteger.defaultValue}]);class T{constructor(e){if(this.isExecutingJSNode=!1,this.localeChangeHandler=e=>{var t;const i=g.default.resolve(v.ServiceNames.TranslationsService),n=g.default.resolve(v.ServiceNames.LocaleService);if(i){(null!==(t=e.localeFamily)&&void 0!==t?t:[e.localeCode]).forEach(e=>{var t,r;this.translationResources[e]?(u.debug("BaseController",`Adding translations for ${e} locale.`),i.add(null!==(t=this.translationResources[e].translations)&&void 0!==t?t:{}),n.setCurrentLocaleRTL(null!==(r=this.translationResources[e].isRTL)&&void 0!==r&&r)):u.debug("BaseController",`No translations found for ${e} locale.`)})}},this.translationResources=null!=e?e:this.translationResources,this.translationResources){const e=g.default.resolve(v.ServiceNames.LocaleService);if(e){const t=e.getCurrentLocale(),i=e.getCurrentLocaleFamily();this.localeChangeHandler({localeCode:t,localeFamily:i}),u.debug("BaseController","Subscribing handler for locale service."),e.subscribe(this.localeChangeHandler)}}}get publicApiHelper(){return this._publicApiHelper||(this._publicApiHelper=this.createPublicApiHelper()),this._publicApiHelper}getDefaultTimeout(){throw new Error("Controllers must implement getDefaultTimeout")}createPublicApiHelper(){return new C.PublicApiHelper(null,this.callContext())}get default(){return this}get controller(){return this}callContext(e=new x){return e}safeExecuteJSNode(e,t,i,n,r,s,o,a=!1){const c=e=>{const n=`Check the JavaScript node '${t}' of the action '${i}'.`;throw((e=e||new Error(n))instanceof l.Exceptions.NumberOverflowException||e instanceof l.Exceptions.InvalidJavascriptType)&&(e.message=e.message+" "+n),e},u=this.isExecutingJSNode,h=(n?[n]:[]).concat(s,o,this.publicApiHelper);e=e.bind(null,...h);try{if(this.isExecutingJSNode=!0,a)return e().then(()=>r(n)).catch(c);try{return e(),r(n)}catch(e){c(e)}}finally{this.isExecutingJSNode=u}}safeExecuteAsyncJSNode(e,t,i,n,r,s,o){return this.safeExecuteJSNode(e,t,i,n,r,s,o,!0)}executeActionInsideJSNode(e,t,i=A,r=A,s=""){const o=e=>{if(!a.ignoreError(e,t))throw e};try{if(s)try{this.ensureControllerAlive(s)}catch(e){throw u.error("Controller",`Invalid call of action '${s}'`,"OS-CLRT-60801",e,n.Visibility.External),e}const a=e(t);return a instanceof Promise?a.then(e=>(r(),i(e))).catch(e=>{r(),o(e)}):i(a)}catch(e){o(e)}finally{this.isExecutingJSNode||r()}}getInitialPayloadObject(e,t){return{versionInfo:{moduleVersion:w.default.getLastApplicationVersionToken(!0),apiVersion:t},viewName:e.viewName?e.viewName:"*"}}getEffectiveTimeoutForServerCall(e){const t=r.isDebugEnabled()?p.DEFAULT_DEBUG_TIMEOUT:e,i=r.getServerRequestTimeoutOverrideInSeconds();return t||i||this.getDefaultTimeout()}callServerAction(e,t,i,n,r,s,o,a=!1){return this.innerCallServerAction(e,t,i,n,r,s,o,a)}innerCallServerAction(e,t,i,n,r,s,o,a=!1){const c=this.getEffectiveTimeoutForServerCall(r.timeout),h=this.getInitialPayloadObject(r,i);h.inputParameters=n;const p="The timeout of "+c+"s was reached while executing this server action.";return(0,d.post)({url:t,payload:h,timeout:c,timeoutHandler:()=>Promise.resolve((()=>{throw u.warning(e,p),new l.Exceptions.Exception(p,e)})()),responseHandler:T.createPostResponseHandler(o),headers:s,useLocaleInfo:a}).then(e=>e||{}).catch(t=>{throw t.extraStack=e,t})}static checkPermissions(){throw new Error("Screen Controllers must implement checkPermissions")}static handlePostResponse(e){const t=g.default.resolve(v.ServiceNames.ClientVariablesService);t&&t.checkSessionExpires();const i=g.default.resolve(v.ServiceNames.SettingsManager);if(i&&void 0!==e.clientSettingsHash&&null!==e.clientSettingsHash){i.update(e.clientSettingsHash),u.setLogLevel(i.readLogLevel());const t=i.readNumber("LoggerSchedulerTimeInterval");t>0&&u.setSchedulerTimerInterval(t)}}static createPostResponseHandler(e){return({data:t,responseHeaders:i})=>{T.handlePostResponse(t),e&&e(t,i)}}executeClientAggregate(e,t){return c.executeSequence(()=>e()).then(e=>{const i=t();i.listOut=e.list,i.countOut=e.count})}ensureControllerAlive(e){}static getJSONDeserializeOutputType(e){return R.getType(e)}static getAggregateOutputType(e){return H.getType(e)}static registerVariableGroupType(e,t){N.registerTypeDefinition(e,t)}static getVariableGroupType(e){return N.getType(e)}}t.BaseController=T;t.BaseModuleController=class extends T{constructor(){super(...arguments),this.fireApplicationResumeSingletonCallback=this.fireApplicationResume.bind(this)}registerEventHandler(e,t,i){i(()=>new Promise((t,i)=>{S.loadModule([e],t,i)}).then(()=>{const e=this[t],n=()=>Promise.resolve().then(()=>e.call(this));return i(n),n()}))}registerOnApplicationReadyHandler(e,t){this.registerEventHandler(e,t,e=>this.onApplicationReadyHandler=e)}registerOnApplicationResumeHandler(e,t){this.registerEventHandler(e,t,e=>this.onApplicationResumeHandler=e)}fireApplicationReady(){return this.onApplicationReadyHandler?this.onApplicationReadyHandler().then(()=>this.setupOnApplicationResumeListener()):(this.setupOnApplicationResumeListener(),Promise.resolve(void 0))}setupOnApplicationResumeListener(){this.onApplicationResumeHandler&&m.addNativeEventListener("resume",this.fireApplicationResumeSingletonCallback)}fireApplicationResume(){return this.onApplicationResumeHandler?this.onApplicationResumeHandler():Promise.resolve(void 0)}};class D extends T{fireEvent(e){return c.executeSequence(()=>{if(e)return e.call(this,this.callContext())}).then(e=>{if(a.isSpecialHandleErrorResult(e))throw l.Exceptions.UnhandledOrIgnoredErrorInEventException.create(e)})}fireEventAndForget(e){this.fireEvent(e).catch(l.Exceptions.UnhandledOrIgnoredErrorInEventException.ignore)}constructor(e,t,i,n){super(n),this.model=e,this.messagesProvider=t,this._idService=i,this.instanceId=D.globalInstanceId++,this.isDisposed=!1,this.shouldSendClientVarsToDataSources=!1,this.fetchReadySources=e=>{const t=[];(void 0===e?this.dataFetchActionNames:this.dataFetchDependentsGraph[e]).forEach(i=>{e&&this.dataFetchDependencies[i]--,0===this.dataFetchDependencies[i]&&t.push(i)}),t.forEach(e=>{this.remainingFetchesCount++,this.dataFetchDependencies[e]=-1,this.executeDataFetchAction(e).then(()=>this.fetchReadySources(e))})},this.clientVariablesHandler=e=>{this.model.clientVariablesGeneration++,this.model.scheduleFlush()},this.localeDependencyHandler=e=>{this.model.currentLocale=e.localeCode,this.model.scheduleFlush()};const r=g.default.resolve(v.ServiceNames.LocaleService);r&&this.translationResources&&(this.model.currentLocale=r.getCurrentLocale()),this.validationServiceInstance=new y.ValidationService(e,t)}createPublicApiHelper(){return new C.PublicApiHelper(this.model,this.callContext())}static get activeScreen(){return D.activeScreenInstance}setAsActiveScreen(){D.activeScreenInstance=this}callContext(e){return super.callContext(e).withViewName(this.viewName)}get validationService(){return this.validationServiceInstance}get viewName(){var e;return null===(e=this.modelContext)||void 0===e?void 0:e.viewName}fetchData(){let e=!1;u.debug("BaseViewController","Using Improved data fetching with dependencies"),e=this.innerFetchDataWithDependencies(),e&&this.model.flush()}executeDataFetchAction(e){return u.debug("BaseViewController","Fetching "+e),c.executeSequence(()=>this[e]()).then(()=>{this.remainingFetchesCount--,clearTimeout(this.flushTimeoutHandle),u.debug("BaseViewController","Fetched "+e),this.remainingFetchesCount>0?this.flushTimeoutHandle=window.setTimeout(()=>this.model.flush(),50):this.model.flush()},e=>{this.remainingFetchesCount--,this.model.flush(),this.handleError(e)})}innerFetchDataWithDependencies(){return!(!this.dataFetchActionNames||0===this.dataFetchActionNames.length)&&(this.dataFetchDependencies=Object.assign({},this.dataFetchDependenciesOriginal),this.flushTimeoutHandle=0,this.remainingFetchesCount=0,this.fetchReadySources(),!0)}get idService(){return this._idService}fireInitialize({rootSpan:e,startActiveSpan:t=u.startActiveSpan,setAttributeToSpan:r=this.setAttributesToSpan}={}){return i.__awaiter(this,void 0,void 0,(function*(){const s=g.default.resolve(v.ServiceNames.ClientVariablesService);s&&s.subscribe(this.clientVariablesHandler);const o=g.default.resolve(v.ServiceNames.LocaleService);if(o&&o.subscribe(this.localeDependencyHandler),!e)return yield this.fireEvent(this.onInitializeEventHandler),void this.fetchData();const a=e.getContext().attributes;yield t(e.getSpanInformation().name+"__initialize",e=>i.__awaiter(this,void 0,void 0,(function*(){try{r(e,a),yield this.fireEvent(this.onInitializeEventHandler)}finally{null==e||e.end()}this.fetchData()})),n.Visibility.Internal,e)}))}setAttributesToSpan(e,t){var i,n,r;e&&t&&(e.setAttribute("code.function",t["code.function"]),e.setAttribute("outsystems.function.key",null!==(i=t["outsystems.function.key"])&&void 0!==i?i:""),e.setAttribute("outsystems.function.owner.name",null!==(n=t["outsystems.function.owner.name"])&&void 0!==n?n:""),e.setAttribute("outsystems.function.owner.key",null!==(r=t["outsystems.function.owner.key"])&&void 0!==r?r:""),e.setAttribute("outsystems.function.type",t["outsystems.function.type"]),t.screen&&e.setAttribute("outsystems.runtime.screen",t["outsystems.runtime.screen"]))}fireAfterViewReady(){this.fireEvent(this.onReadyEventHandler).then(()=>this.fireEvent(this.onRenderEventHandler)).catch(l.Exceptions.UnhandledOrIgnoredErrorInEventException.ignore)}fireAfterInputsChanged(){this.fireEventAndForget(this.onParametersChangedEventHandler)}fireAfterViewRender(e=!1){if(this.onRenderEventHandler)return this.fireEvent(t=>{if(!e)return this.onRenderEventHandler(t);u.error("View",`Render loop avoided. This is likely due to the model of the screen/block '${this.viewName}' being changed inside its 'On Render' client action. Avoid changes to the model inside 'On Render' client actions.`,"OS-CLRT-60800",void 0,n.Visibility.External)})}fireAfterViewDestroy({clientVariablesService:e=g.default.resolve(v.ServiceNames.ClientVariablesService),localeService:t=g.default.resolve(v.ServiceNames.LocaleService)}={}){e&&e.unsubscribe(this.clientVariablesHandler),t&&t.unsubscribe(this.localeDependencyHandler),this.fireEventAndForget(this.onDestroyEventHandler)}registerClientAction(e,t){this[e]=t}innerCallAggregate(e,t,i,n,r,s,o,a,l,c,h,d,p=!1){const g=this.getEffectiveTimeoutForServerCall(a);return u.debug("BaseViewController",`Calling ${e} aggregate with start index endpoint`),this.callServerDataSource(e,t,i,s,o,e=>{e.inputParameters={StartIndex:r,MaxRecords:n}},g,l,c,h,d,p)}callAggregateWithStartIndexAndClientVars(e,t,i,n,r,s,o,a,l,c,u,h,d=!1){return this.innerCallAggregate(e,t,i,n,r,s,o,a,l,c,u,h,d)}callAggregateWithStartIndex(e,t,i,n,r,s,o,a,l,c,u){return this.innerCallAggregate(e,t,i,n,r,s,o,a,l,c,u)}callAggregate(e,t,i,n,r,s,o,a,l,c){return this.innerCallAggregate(e,t,i,n,0,r,s,o,a,l,c)}callDataAction(e,t,i,n,r,s,o,a,l,c,u=!1){return this.innerCallDataAction(e,t,i,n,r,s,o,a,l,c,u)}innerCallDataAction(e,t,i,n,r,s,o,a,l,c,u=!1){const h=this.getEffectiveTimeoutForServerCall(s);return this.callServerDataSource(e,t,i,n,r,void 0,h,o,a,l,c,u)}callServerDataSource(e,t,i,n,r,o,a=0,h,p,g,v,m=!1){const f=this.getInitialPayloadObject(this.callContext(),i);u.debug("BaseViewController",`Calling ${e} data source with optimized on payload`),f.screenData={variables:s.ServerDataConverter.to(this.model.variables,g,!0)},o&&o(f),this.shouldSendClientVarsToDataSources&&v&&(f.clientVariables=v.serialize()),n(0);return c.promise((i,s)=>(0,d.post)({url:t,payload:f,timeout:a,timeoutHandler:()=>Promise.resolve((()=>{const t=`The timeout of ${a}s was reached while fetching this screen data.`;throw u.warning(e,t),new l.Exceptions.Exception(t)})()),responseHandler:T.createPostResponseHandler(p),headers:h,useLocaleInfo:m}).then(e=>{if(!this.isDisposed)return r(e),n(1),i()}).catch(e=>{if(!this.isDisposed)return l.isInstanceOf(e,l.Exceptions.ViewHasChangedException)||n(2),s(e)}))}handleError(e){throw new Error("@abstract")}safeExecuteAsyncJSNode(e,t,i,n,r,s,o){return this.model.flush(),super.safeExecuteAsyncJSNode(e,t,i,n,r,s,o)}executeActionInsideJSNode(e,t,i=A,n=A,r="UNKNOWN"){return super.executeActionInsideJSNode(e,t,i,()=>{n(),this.model.flush()},r)}dispose(){this.validationService.dispose(),this.isDisposed=!0}ensureControllerAlive(e){if(this.isDisposed){const t=new l.Exceptions.ControllerDisposedException(`Invalid call of the '${e}' client action of the '${this.viewName}' since the latter is not currently active. This is likely due to a platform's client action being used as an event handler or in a setTimeout function. Consider removing this call by using the 'On Destroy' event of the screen/block or moving your logic to a global client action.`);throw u.warning("Controller",t.message),t}}safeExecuteClientAction(e,t,...i){return c.tryCatchFinally(()=>e.apply(this,i.concat(this.callContext(t))),e=>this.handleError(e),()=>this.model.flush())}get modelContext(){return this.model.context}executeScreenClientAggregate(e,t,i){return c.executeSequence(()=>(t().dataFetchStatusAttr=0,e())).then(e=>{if(!this.isDisposed)return t().bulkSet(e.list,1,e.count),c.executeSequence(i)},e=>{if(!this.isDisposed)throw t().dataFetchStatusAttr=2,e})}static downloadBinary(e,t){const i=e.toBlob()||new Blob([]),n=document.createElement("a");n.style.display="none",document.body.appendChild(n),i.type&&(n.type=i.type);const r=window.URL.createObjectURL(i);n.href=r,n.download=t,n.click(),setTimeout(()=>window.URL.revokeObjectURL(r),500),n.remove()}}D.globalInstanceId=0,t.BaseViewController=D}));
define("OutSystems/ClientRuntime/ScreenDefinition",["require","exports","./ApplicationInfo","./Controller"],(function(e,n,r,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getCurrentScreenName=n.getCurrentScreenDefinition=void 0;n.getCurrentScreenDefinition=()=>{const e=t.BaseViewController.activeScreen;if(e){const n=(0,r.getModuleFromKey)((0,r.getHomeModuleKey)());if(n)return(0,r.getScreenDefinitionFromScreenName)(n,e.viewName)}return null};n.getCurrentScreenName=()=>{var e;const r=(0,n.getCurrentScreenDefinition)();return null!==(e=null==r?void 0:r.screenName.split(".").pop())&&void 0!==e?e:""}}));
define("OutSystems/ClientRuntime/ScreenStateCache",["require","exports"],(function(e,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ScreenStateCache=void 0;class t{static addKey(e){this.cache[e]={components:{}},this.cacheKeys.push(e);const c=this.cacheKeys.length-t.MaxCacheSize;if(c>0)for(let e=0;e<c;e++)this.removeKey(this.cacheKeys[e])}static removeKey(e){delete this.cache[e],this.cacheKeys.splice(this.cacheKeys.indexOf(e),1)}static save(e,c,t,s){this.cache[e]||this.addKey(e),this.cache[e].components[c]={state:t,customProperties:s}}static load(e,c){const s=t.loadScreenCache(e);return s?s.components[c]:null}static loadScreenCache(e){return this.cache[e]||void 0}static clear(e){e?this.cache[e]&&this.removeKey(e):(this.cache={},this.cacheKeys=[])}}t.MaxCacheSize=20,t.cache={},t.cacheKeys=[],c.ScreenStateCache=t}));
define("OutSystems/ClientRuntime/ServiceWorkerLogging",["require","exports","@outsystems/logger-js","./Logger"],(function(e,r,i,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.listenToServiceWorkerLogs=void 0;r.listenToServiceWorkerLogs=({serviceWorker:e=navigator.serviceWorker,loggerMethods:r={debug:o.debug,info:o.log,warning:o.warning,error:o.error}}={})=>{e?e.addEventListener("message",e=>{g(e.origin)?s(e.data)&&n({log:e.data,loggerMethods:r}):o.debug("ServiceWorker","The received message is not from a secure Service Worker and will be ignored")}):o.warning("ServiceWorker","Service Worker API is not available")};const s=e=>"log"===e.kind,g=e=>window.location.origin===e,n=({log:e,loggerMethods:r})=>{if("error"===e.severity)r.error("ServiceWorker",e.message,e.errorCode,e.error,i.Visibility.External);else if("info"===e.severity)r.info("ServiceWorker",e.message,i.Visibility.External);else{(0,r[e.severity])("ServiceWorker",e.message)}}}));
define("OutSystems/ClientRuntime/Application",["require","exports","module","tslib","@outsystems/auth-js","@outsystems/logger-js","./ApplicationInfo","./ClientInfo","./CookiesManager","./Database","./DataTypes","./Entities","./ErrorHandling","./Exceptions","./FeedbackMessageService","./Flow","./Logger","./modules/Auth/AuthConfigsManager","./modules/ClientVariables/LocalStorageClientVariablesService","./modules/Communication/HttpClientFactory","./modules/Communication/LocaleInfo","./modules/Communication/NetworkStatus","./modules/Database/IDatabase","./modules/Database/IndexedDB/IndexedDBDatabase","./modules/Database/IndexedDB/IndexedDBEntityService","./modules/Database/WebSQL/WebSQLDatabase","./modules/Database/WebSQL/WebSQLEntityService","./modules/Injector/Injector","./modules/Injector/KnownServices","./modules/Lifecycle/LifecycleEventsManager","./modules/LocaleService/LocaleService","./modules/MappingWithDefault/MappingWithDefaultService","./modules/Native/NativeHelper","./modules/Native/NativeHttp","./modules/Settings/KnownSettings","./modules/Settings/SettingsManager","./Navigation","./Performance","./RequireManager","./ScreenDefinition","./ScreenStateCache","./ServiceWorkerLogging","./StorageProvider","./Transitions","./VersionsManager"],(function(e,i,t,a,n,s,r,o,l,d,c,u,p,g,v,f,h,S,m,b,y,A,N,D,w,R,I,C,M,k,L,U,E,T,V,H,F,P,O,z,x,B,W,_,q){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Application=i.ApplicationStorage=void 0;i.ApplicationStorage={hasRenderedSplashInSession:new W.StorageObject(W.StorageType.Session,"HasRenderedSplashInSession",!1),pendingUpgradeFeedback:new W.StorageObject(W.StorageType.Session,"PendingUpgradeFeedback")};class K{constructor(){this.showingSplashScreen=!1}setApplicationDefinition(e){r.setApplicationDefinition(e),r.setDatabaseName(e.applicationKey)}initializeCookiesManager(){return a.__awaiter(this,void 0,void 0,(function*(){if(yield T.isNativeHttpPluginAvailable()){const e=yield T.getNativeHttpPlugin();l.initialize(e)}}))}registerEntityService(){C.default.resolve(M.ServiceNames.SettingsManager).readBool("IndexedDBOffline")&&!E.isRunningOnNative()?C.default.register(M.ServiceNames.EntityService,()=>new w.default):E.isRunningOnNative()&&C.default.register(M.ServiceNames.EntityService,()=>new I.default)}initialize(e,i=0,t,o,l){let d;return P.start("Application initialize"),f.tryCatchFinally(()=>a.__awaiter(this,void 0,void 0,(function*(){this.setApplicationDefinition(e);const a=yield b.default.build();C.default.register(M.ServiceNames.UnauthenticatedHttpClient,()=>a),C.default.register(M.ServiceNames.SettingsManager,()=>new H.default);const u=C.default.resolve(M.ServiceNames.SettingsManager);C.default.register(M.ServiceNames.AuthConfigsManager,()=>new S.default);const p=C.default.resolve(M.ServiceNames.AuthConfigsManager);(0,W.setDefaultStorageNamespace)(r.getApplicationKey());const v=()=>C.default.resolve(M.ServiceNames.Auth).getInstance(),f=yield b.default.build({baseUrl:r.getBasePath(),refreshToken:()=>{var e;return null===(e=v())||void 0===e?void 0:e.refreshTokens()},getAccessToken:()=>{var e,i;return null!==(i=null===(e=v())||void 0===e?void 0:e.getAccessToken())&&void 0!==i?i:null},isAccessTokenValid:()=>{var e,i;return null!==(i=null===(e=v())||void 0===e?void 0:e.isAccessTokenValid())&&void 0!==i&&i},getLocale:()=>{var e;return null!==(e=(0,y.getLocaleValue)())&&void 0!==e?e:null},setLocale:e=>(0,y.setLocaleValue)(e),localeHeader:y.LocaleHeader});if(C.default.register(M.ServiceNames.HttpClient,()=>f),r.isDebugEnabled()&&r.debugUseWebSockets()){const e=b.default.buildWithDebugger({alternateHttpClient:f,appUrl:r.getAppUrl(),refreshToken:()=>{var e;return null===(e=v())||void 0===e?void 0:e.refreshTokens()},getAccessToken:()=>{var e,i;return null!==(i=null===(e=v())||void 0===e?void 0:e.getAccessToken())&&void 0!==i?i:null},isAccessTokenValid:()=>{var e,i;return null!==(i=null===(e=v())||void 0===e?void 0:e.isAccessTokenValid())&&void 0!==i&&i},getLocale:()=>{var e;return null!==(e=(0,y.getLocaleValue)())&&void 0!==e?e:null},setLocale:e=>(0,y.setLocaleValue)(e),localeHeader:y.LocaleHeader});C.default.register(M.ServiceNames.DebuggerHttpClient,()=>e),C.default.register(M.ServiceNames.NonDebuggerHttpClient,()=>f);const i=C.default.resolve(M.ServiceNames.Debugger);(null==i?void 0:i.isSessionActive())&&C.default.register(M.ServiceNames.HttpClient,()=>C.default.resolve(M.ServiceNames.DebuggerHttpClient))}const[N]=p.readAuthConfigs(V.DEFAULT_OS_IDP);if(C.default.register(M.ServiceNames.Auth,()=>{var e;return new n.AuthFactory({appKey:r.getApplicationKey(),appUrl:r.getBasePath(),region:null==N?void 0:N.configs.region,poolId:null==N?void 0:N.configs.poolId,clientId:null==N?void 0:N.configs.clientId,scope:"openid",identityProvider:null!==(e=null==N?void 0:N.kc_hint)&&void 0!==e?e:null==N?void 0:N.type,passwordComplexityPolicy:null==N?void 0:N.configs.passwordComplexityPolicy,logger:{info:({category:e,message:i})=>h.log(null!=e?e:"",null!=i?i:"",s.Visibility.Internal),error:({category:e,message:i,error:t,code:a,visibility:n})=>{var s;return h.error(null!=e?e:"",null!=i?i:"",null!==(s=a)&&void 0!==s?s:"OS-CLRT-40100",t,n)},warning:({category:e,message:i})=>h.warning(null!=e?e:"",null!=i?i:"")},httpClient:C.default.resolve(M.ServiceNames.UnauthenticatedHttpClient),isOnline:()=>(0,A.isOnline)()})}),yield Promise.all([u.update(),p.update(),q.default.initializeManifestLoader()]),d=this.initializeCookiesManager(),yield h.initialize({applicationName:r.getApplicationName(),applicationKey:r.getApplicationKey(),version:q.default.getLastApplicationVersionToken(),clientRuntimeVersion:r.getClientRuntimeVersion(),buildServiceVersion:r.getBuildServiceVersion(),basePath:r.getBasePath(),isRunningOnNative:E.isRunningOnNative(),getCurrentScreenName:z.getCurrentScreenName}),(0,B.listenToServiceWorkerLogs)(),h.debug("Application","Initializing Application"),C.default.register(M.ServiceNames.LifecycleEventsManager,()=>new k.default({onNewVersionHandler:(e,i)=>this.onNewVersionDetected(e,i)})),O.setErrorHandler(e=>{if(q.default.isUpgradingVersion&&!g.isSystem(e))return h.warning("Application","RequireJS error during upgrade, treating as an upgrade error."),void q.default.handleUpgradeError(e,1);this.handleError(e)}),x.ScreenStateCache.clear(),(0,_.setDefaultTransition)(r.getDefaultTransition()),t&&(c.Constants.FORMAT.dateTimeFormat=t),o&&(c.Constants.FORMAT.numberFormat=o),yield d,C.default.register(M.ServiceNames.ClientVariablesService,()=>new m.default(e.userProviderName)),this.registerEntityService(),C.default.register(M.ServiceNames.TranslationsService,()=>new U.default),C.default.register(M.ServiceNames.LocaleService,()=>new L.default(r.getHomeModuleName())),1===i)return!0;const D=this.initializeDatabase();let w=!1,R=()=>{w=!0};const I=new Promise(e=>{if(w)e();else{const i=R;R=()=>{i(),e()}}}),T=I.then(()=>this.triggerApplicationReadyEvent()),F={onVersionReady:()=>D.then(e=>this.onDatabaseReady(e)).then(()=>I).then(()=>T).then(()=>this.onApplicationReady()),onUpgradeFinished:(e,i)=>this.onUpgradeFinished(e,i),onNewVersionDetected:(e,i)=>this.onNewVersionDetected(e,i),onAppInfoReady:e=>this.onAppInfoReady(e)},P=yield q.default.initialize(D,F);return P&&(l&&(yield l()),R()),P})),e=>f.tryFinally(()=>{},()=>{if(0!==i)throw e;this.handleError(e)}),()=>P.end("Application initialize"))}triggerApplicationReadyEvent(){const e=r.getHomeModuleControllerName();if(e)return h.debug("Application","Calling application ready event handler for "+r.getHomeModuleName()),new Promise((i,t)=>{O.loadModule([e],i,t)}).then(e=>e.default.fireApplicationReady()).catch(e=>{this.handleError(e)})}initializeDatabase(){return a.__awaiter(this,void 0,void 0,(function*(){let e;h.debug("Application","Initializing application database.");const i=r.isWebApplication(),t=E.isRunningOnNative();if(i||"28f21196-030a-4be2-8241-5a4888fb3ca5"===r.getHomeModuleKey())h.debug("Application","Initializing database mock for NativeAppBuilder."),e=d.SqlDbProvider.mockDb(r.getDatabaseName());else{let i;t?(h.debug("Application","Initializing WebSQL database service."),i=R.default.open(r.getDatabaseName())):(h.debug("Application","Initializing IndexDB database service."),i=D.default.open(r.getDatabaseName(),()=>this.onNewVersionDetected(!0))),e=i.then(e=>a.__awaiter(this,void 0,void 0,(function*(){h.debug("Application","Initializing entity service");return C.default.resolve(M.ServiceNames.EntityService).setDatabase(e),e})))}return e}))}onDatabaseReady(e){if((0,N.instanceOfIDatabase)(e)){C.default.resolve(M.ServiceNames.EntityService).setReady()}else u.webSQLStorageInstance.initDb(e);h.debug("Application","Database initialized successfully")}onNewVersionDetected(e,i){const t=(null!=i?i:q.default.isAutoUpgradeEnabled)||!E.isRunningOnNative();h.debug("Application","New version detected, currentViewHasChanged = "+e);let a=!0;if(e&&t){this.disableDocument();const e=()=>F.changeWindowLocation(F.buildApplicationRelativeUrl(),a,!0),i=e=>e.getApplicationUpgradeRequiredMessage(this.canLoseDataInUpgrade());this.showFeedbackMessage(i,2,"upgrade-required",e).then(()=>v.setEnabled(!1))}return t?q.default.cacheResourcesInBackground(e=>{a=e}):Promise.resolve()}onAppInfoReady(e){try{P.start("Application onAppInfoReady"),this.updateServerRequestTimeoutOverrideInSeconds(e),this.updateApplicationInfo(e),this.updateClientInfo()}finally{P.end("Application onAppInfoReady")}}updateServerRequestTimeoutOverrideInSeconds(e){var i;r.setServerRequestTimeoutOverrideInSeconds(null===(i=e.data)||void 0===i?void 0:i.serverRequestTimeoutOverrideInSeconds)}updateApplicationInfo(e){var i,t;r.setModules(null===(i=e.data)||void 0===i?void 0:i.modules),r.setClientEntitiesModules(null===(t=e.data)||void 0===t?void 0:t.entityModuleNames)}updateClientInfo(){E.ensureNativeReady().then(()=>(0,o.setClientInfo)()).catch(e=>h.warning("Application","Client info update failed: "+e))}shouldRenderSplashScreen(){const e=r.getHomeModuleDefinition();return!!((null==e?void 0:e.splashScreenName)&&e.splashScreenName.length>0)&&!i.ApplicationStorage.hasRenderedSplashInSession.get()}disableDocument(){const e=document.createElement("div");e.classList.add("background-backdrop"),document.body.classList.add("disable-scroll"),document.body.appendChild(e)}canLoseDataInUpgrade(){return document.getElementsByTagName("form").length>0}onUpgradeFinished(e,t){e?h.log("Application","Upgrade finished successfully",s.Visibility.Internal):h.warning("Application","Upgrade failed with reason: "+t);const a={success:e,failReason:t};e&&!this.isShowingSplashScreen?this.showUpgradeFeedback(a):i.ApplicationStorage.pendingUpgradeFeedback.set(a)}waitForAppReady(){return this.isReady?Promise.resolve(void 0):(this.appReadyPromise||(this.appReadyPromise=new Promise(e=>{this.onReady=()=>e()})),this.appReadyPromise)}onApplicationReady(){h.debug("Application","Application ready"),P.end("Application ready"),h.flush(),this.isReady=!0,this.onReady&&(this.onReady(),this.onReady=null)}showUpgradeFeedback(e){let i,t,a;if(e.success)t=0,i=e=>e.getApplicationUpgradeCompleteMessage(),a="upgrade-success";else switch(t=2,a="upgrade-error",e.failReason){case 1:i=e=>e.getApplicationUpgradeFailedOnResourcesMessage();break;case 2:i=e=>e.getApplicationUpgradeFailedOnDataModelMessage();break;default:i=e=>e.getApplicationUpgradeFailedUnknownMessage()}this.showFeedbackMessage(i,t,a)}showFeedbackMessage(e,i,t="",a){return new Promise(n=>{const s=r.getHomeModuleLanguageResourcesName();O.loadModule([s],s=>{const r=e(s);r&&v.showFeedbackMessage(r,i,!0,t,!0,a),n()})})}get isShowingSplashScreen(){return this.showingSplashScreen}set isShowingSplashScreen(e){e&&i.ApplicationStorage.hasRenderedSplashInSession.set(!0),this.showingSplashScreen=e}handleError(e,i){p.handleError(e,i)}exit(){return!E.isRunningOnNative()||E.exitApp()}registerDefaultErrorHandler(e){return C.default.register(M.ServiceNames.GlobalExceptionHandler,e)}}i.Application=K;const j=new K;i.default=j,F.VersionedURL.setUrlVersionProvider(q.default.getVersionedUrl.bind(q.default)),j.default=j,j.ApplicationStorage=i.ApplicationStorage,t.exports=j}));
define("OutSystems/ClientRuntime/ErrorScreen",["require","exports","@outsystems/logger-js","./ErrorHandling","./Exceptions","./Logger","./Navigation"],(function(e,r,o,n,t,i,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.initializeErrorPage=void 0;function s(e){var r,o,i;const s=n.ErrorHandlingStorage.errorPageMessage.get(),l=n.ErrorHandlingStorage.errorPageExtraMessage.get(),d=n.ErrorHandlingStorage.errorPageExceptionInfo.get();if(d){let o=d.message;const n=t.getStack(d);if(n&&(o+="\n"+n),console.error(o),"undefined"!=typeof document&&document.querySelector){document.querySelector("#error-screen-exception-message").innerHTML=null!==(r=d.message)&&void 0!==r?r:"";document.querySelector("#error-screen-exception-stack").innerHTML=n;if(document.querySelector("#error-screen-show-detail-button").addEventListener("click",()=>function(){if("undefined"!=typeof document&&document.querySelector){const e=document.querySelector("#error-screen-show-detail-button"),r=document.querySelector("#exception-detail-text");r.hidden?(e.innerHTML="Hide Detail",r.hidden=!1):(e.innerHTML="Show Detail",r.hidden=!0)}}()),null==e?void 0:e.showExceptionStack){document.querySelector("#exception-detail").style.display="block"}}}if("undefined"!=typeof document&&document.querySelector){const r=null===(o=null==e?void 0:e.messages)||void 0===o?void 0:o.defaultMessage,n=null==e?void 0:e.extraMessage;document.querySelector("#error-screen-message-text").innerHTML=s||r||"There was an error processing your request.";document.querySelector("#error-screen-message-text-extra").innerHTML=l||n||"";const t=document.querySelector("#error-screen-message-reload-button");t.innerHTML=null!==(i=null==e?void 0:e.reloadLabel)&&void 0!==i?i:"RELOAD",t.addEventListener("click",()=>function(){if("undefined"!=typeof document&&document.querySelector){document.querySelector("#error-screen-message-reload-button").style.display="none";document.querySelector("#error-screen-spinner").style.display="inline-block"}setTimeout(()=>{c.reloadApplication()},2e3)}())}}r.initializeErrorPage=function(e,r,t=s){return Promise.resolve().then(()=>r.initialize(e,1).then(()=>{var r;t(e.errorPageConfig);try{const e=n.ErrorHandlingStorage.errorPageExceptionInfo.get(),t=e?e.message:n.ErrorHandlingStorage.errorPageMessage.get();i.error("ErrorScreen",""+t,null!==(r=null==e?void 0:e.errorCode)&&void 0!==r?r:"OS-CLRT-00000",void 0,o.Visibility.External)}catch(e){i.error("ErrorScreen","Unable to retrieve error details","OS-CLRT-00000")}i.flush()}).catch(e=>{console.error(e)}))}}));
define("OutSystems/ClientRuntime/LanguageResources",["require","exports","./DataTypes","./Logger","./modules/Injector/Injector","./modules/Injector/KnownServices"],(function(e,a,s,r,t,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.BaseMessagesProvider=a.ModuleMessageKeys=void 0;var l;!function(e){e.MandatoryValue="Validation.Mandatory",e.InvalidValuePrefix="Validation.",e.UpgradeComplete="UpgradeComplete",e.UpgradeRequiredDataLoss="UpgradeRequiredDataLoss",e.UpgradeRequired="UpgradeRequired",e.UpgradeFailedOnResources="AppInitError.Resources",e.UpgradeFailedOnDataModel="AppInitError.DataModel",e.UpgradeFailed="AppInitError.Generic"}(l=a.ModuleMessageKeys||(a.ModuleMessageKeys={}));a.BaseMessagesProvider=class{constructor(e){if(this.messages={},this.localeChangeHandler=e=>{var a;const s=t.default.resolve(i.ServiceNames.TranslationsService),l=t.default.resolve(i.ServiceNames.LocaleService);if(s){(null!==(a=e.localeFamily)&&void 0!==a?a:[e.localeCode]).forEach(e=>{var a,t;this.translationResources[e]?(r.debug("BaseMessagesProvider",`Adding translations for ${e} locale.`),s.add(null!==(a=this.translationResources[e].translations)&&void 0!==a?a:{}),l.setCurrentLocaleRTL(null!==(t=this.translationResources[e].isRTL)&&void 0!==t&&t)):r.debug("BaseMessagesProvider",`No translations found for ${e} locale.`)})}},this.translationResources=null!=e?e:this.translationResources,this.translationResources){const e=t.default.resolve(i.ServiceNames.LocaleService);if(e){const a=e.getCurrentLocale(),s=e.getCurrentLocaleFamily();this.localeChangeHandler({localeCode:a,localeFamily:s}),r.debug("BaseMessagesProvider","Subscribing handler for locale service."),e.subscribe(this.localeChangeHandler)}}}getMandatoryValueMessage(){return this.getMessage(l.MandatoryValue,"Required Value!")}getInvalidValueMessage(e){return this.getMessage(l.InvalidValuePrefix+s.DataTypes[e],"Invalid Value!")}getApplicationUpgradeCompleteMessage(){return this.getMessage(l.UpgradeComplete,"")}getApplicationUpgradeRequiredMessage(e){return e?this.getMessage(l.UpgradeRequiredDataLoss,""):this.getMessage(l.UpgradeRequired,"")}getApplicationUpgradeFailedOnResourcesMessage(){return this.getMessage(l.UpgradeFailedOnResources,"")}getApplicationUpgradeFailedOnDataModelMessage(){return this.getMessage(l.UpgradeFailedOnDataModel,"")}getApplicationUpgradeFailedUnknownMessage(){return this.getMessage(l.UpgradeFailed,"")}getMessage(e,a){var s;const r=null!==(s=this.messages[e])&&void 0!==s?s:a,l=t.default.resolve(i.ServiceNames.TranslationsService);return l?l.getMessage(e,r):r}setMessage(e,a){this.messages[e]=a}}}));
define("OutSystems/ClientRuntime/Model",["require","exports","./DataConversion","./DataTypes","./Logger","./WidgetNaming"],(function(t,e,r,a,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ModelFactory=e.DummyViewModel=e.VariablelessViewModel=e.calculateDataFetchStatus=e.BaseViewModel=e.AggregateRecord=e.DataSourceRecord=e.BaseWidgetRecordMap=e.ValidationWidgetRecord=e.WidgetRecord=e.Variable=void 0;class o{constructor(t,e,r,a){this.type=t,this._value=e,this.setter=r,this.model=a}get value(){return this._value}set value(t){const e=r.JSConversions.convertTo(t,this.type);this.setter(e),this.model.flush()}isAcceptable(t){return r.JSConversions.isConvertibleTo(t,this.type)}fastEquals(t){return t&&this.constructor===t.constructor&&this.value===t.value}equals(t){return t&&this.constructor===t.constructor&&(0,a.equals)(this.value,t.value)}}e.Variable=o;class n extends a.Record{constructor(t){super(t)}get idAttr(){return this.getBasicProperty("idAttr")}set idAttr(t){this.setBasicProperty("idAttr",t,a.DataTypes.Text)}get nameAttr(){return this.getBasicProperty("nameAttr")}set nameAttr(t){this.setBasicProperty("nameAttr",t,a.DataTypes.Text)}get generationNode(){return this.getBasicProperty(n.WidgetGenerationNodeAttributeName)}set generationNode(t){this.setBasicProperty(n.WidgetGenerationNodeAttributeName,t,a.DataTypes.Object)}asReadOnly(){return{idAttr:this.idAttr,nameAttr:this.nameAttr}}refreshGeneration(){this.generationNode&&(this.generationNode.generation=b.currentGeneration)}}n.WidgetGenerationNodeAttributeName="widgetGenerationNode",n.RecordClass=a.Record.defineRecordClass({idAttr:"",nameAttr:"",widgetGenerationNode:null}),e.WidgetRecord=n;class c extends n{constructor(t){super(t)}get validAttr(){return this.getBasicProperty("validAttr")}set validAttr(t){this.setBasicProperty("validAttr",t,a.DataTypes.Boolean)}get validationMessageAttr(){return this.getBasicProperty("validationMessageAttr")}set validationMessageAttr(t){this.setBasicProperty("validationMessageAttr",t,a.DataTypes.Text)}onPropertyValueChanged(t){"validAttr"!==t&&"validationMessageAttr"!==t||this.refreshGeneration()}asReadOnly(){return{idAttr:(t=this.data).get("idAttr"),nameAttr:t.get("nameAttr"),validAttr:t.get("validAttr"),validationMessageAttr:t.get("validationMessageAttr")};var t}}c.RecordClass=(()=>{const t=(new n.RecordClass).toJS();return t.validAttr=!0,t.validationMessageAttr="",a.Record.defineRecordClass(t)})(),e.ValidationWidgetRecord=c;class d extends a.Record{constructor(t){super(t),this.widgetsIdToRecord=this.data.get(d.WidgetRecordsAttribute),this.widgetsIdToRecordDataCache=this.data.get(d.WidgetRecordsDataCacheAttribute)}static createDefaultData(){return new d.RecordClass({records:new Map,recordsCache:new Map})}static getWidgetsType(){return{}}getWidgetsType(){return this.constructor.getWidgetsType()}getWidgetRecordType(t){return this.getWidgetsType()[t]||n}get(t){let e=this.widgetsIdToRecord.get(t);return e||(e=this.create(t),this.add(e),e)}set(t,e){this.widgetsIdToRecord.set(t,e),this.widgetsIdToRecordDataCache.delete(t),this.writePropagate(this.data,null)}internalSet(t,e){this.widgetsIdToRecord.delete(t),this.widgetsIdToRecordDataCache.set(t,e),this.writePropagate(this.data,null)}create(t){const e=i.WidgetIdService.nameFromId(t),r=new(this.getWidgetRecordType(e))(this.widgetsIdToRecordDataCache.get(t));return r.idAttr=t,r.nameAttr=e,r}add(t){d.setPropagationHandler(t,this,t.idAttr,this.internalSet),this.widgetsIdToRecordDataCache.delete(t.idAttr),this.widgetsIdToRecord.set(t.idAttr,t)}remove(t){this.widgetsIdToRecord.delete(t),this.widgetsIdToRecordDataCache.delete(t),this.writePropagate(this.data,null)}}d.WidgetRecordsAttribute="records",d.WidgetRecordsDataCacheAttribute="recordsCache",d.RecordClass=a.Record.defineRecordClass({records:null,recordsCache:null}),e.BaseWidgetRecordMap=d;class u extends a.GenericRecord{get dataFetchStatusAttr(){return this.getBasicProperty(u.DataFetchStatusAttributeName)}set dataFetchStatusAttr(t){this.setBasicProperty(u.DataFetchStatusAttributeName,t,a.DataTypes.Integer)}get isDataFetchedAttr(){return 1===this.dataFetchStatusAttr}get hasFetchErrorAttr(){return 2===this.dataFetchStatusAttr}static attributesToDeclare(){return[a.GenericRecord.attr("DataFetchStatus",u.DataFetchStatusAttributeName,"",!0,!1,a.DataTypes.Integer,()=>0)].concat(super.attributesToDeclare())}replaceWith(t){const e=new this.constructor(a.Record.getData(t));e.dataFetchStatusAttr=this.dataFetchStatusAttr,this.writePropagate(a.Record.getData(e),new a.Cache)}}u.DataFetchStatusAttributeName="dataFetchStatusAttr",e.DataSourceRecord=u;class l extends u{get listOut(){return this.getComplexProperty(l.ListOutAttributeName,this.getRecordListType())}set listOut(t){this.setComplexProperty(l.ListOutAttributeName,t,a.DataTypes.RecordList,this.getRecordListType())}get countOut(){return this.getBasicProperty(l.CountOutAttributeName)}set countOut(t){this.setBasicProperty(l.CountOutAttributeName,t,a.DataTypes.LongInteger)}bulkSet(t,e,r){const a=[{name:l.ListOutAttributeName,value:t,isBasicType:!1},{name:u.DataFetchStatusAttributeName,value:e,isBasicType:!0}];void 0!==r&&a.push({name:l.CountOutAttributeName,value:r,isBasicType:!0}),this.setProperties(a)}getRecordListType(){return this.constructor.RecordListType}static attributesToDeclare(){return[a.GenericRecord.attr("List",l.ListOutAttributeName,"List",!0,!1,a.DataTypes.RecordList,()=>!1,!0,this.RecordListType),a.GenericRecord.attr("Count",l.CountOutAttributeName,"Count",!0,!1,a.DataTypes.LongInteger,()=>a.LongInteger.defaultValue)].concat(super.attributesToDeclare())}static init(){if(!this.RecordListType)throw new TypeError("AggregateRecords must define a RecordListType");super.init()}}l.ListOutAttributeName="listOut",l.CountOutAttributeName="countOut",e.AggregateRecord=l;class h extends a.Record{constructor(t){super(),this._context=t,this.writeSubscriptions=[],this.cachedValues={},this.modified=!1}static createDefaultData(){const t=this.newVariablesRecord(),e=this.newWidgetsRecord();return new h.RecordClass({variables:a.Record.getData(t),widgets:a.Record.getData(e),clientVariablesGeneration:0,currentLocale:null})}onDefaultWritePropagate(t){super.onDefaultWritePropagate(t),this.modified=!0,this.innerFlush(!0)}cloneCache(){return this.cache}get isModified(){return this.modified}scheduleFlush(){this.pendingFlush||(this.pendingFlush=window.setTimeout(()=>this.flush(),0))}flush(){this.pendingFlush&&(clearTimeout(this.pendingFlush),this.pendingFlush=void 0),this.modified&&(this.modified=!1,b.currentGeneration++,this.innerFlush(!1),s.debug("BaseViewModel","Flushing model"))}innerFlush(t){for(let e=0;e<this.writeSubscriptions.length;e++){const r=this.writeSubscriptions[e];r.immediate===t&&r.handler(this)}}subscribeWrites(t,e=!1){return!(!this.hasVariables&&!this.hasValidationWidgets&&null===this.currentLocale&&void 0===this.currentLocale||!t)&&(this.writeSubscriptions.push({handler:t,immediate:e}),!0)}unsubscribeWrites(t){if(t){let e=-1;for(let r=0,a=this.writeSubscriptions.length;r<a;r++)if(this.writeSubscriptions[r].handler===t){e=r;break}if(e>=0)return this.writeSubscriptions.splice(e,1),!0}return!1}clearSubscriptions(){this.writeSubscriptions=[]}static get hasVariables(){return!0}get hasVariables(){return this.constructor.hasVariables}static getVariablesRecordConstructor(){throw new Error("@abstract")}static newVariablesRecord(t){return this.hasVariables?new(this.getVariablesRecordConstructor())(t):void 0}getVariables(){const t=this.constructor;if(this.hasVariables)return this.getComplexProperty(h.VariablesPropertyName,t.getVariablesRecordConstructor());throw new Error("Model does not contain variables")}get variables(){return this.getVariables()}set variables(t){const e=this.constructor;this.setComplexProperty(h.VariablesPropertyName,t,a.DataTypes.Record,e.getVariablesRecordConstructor())}get clientVariablesGeneration(){return this.getBasicProperty(h.ClientVariablesGenerationPropertyName)}set clientVariablesGeneration(t){this.setBasicProperty(h.ClientVariablesGenerationPropertyName,t,a.DataTypes.Integer)}static get hasValidationWidgets(){return!0}get hasValidationWidgets(){return this.constructor.hasValidationWidgets}get currentLocale(){return this.getBasicProperty(h.CurrentLocalePropertyName)}set currentLocale(t){this.currentLocale!==t&&this.clearCachedValues(),this.setBasicProperty(h.CurrentLocalePropertyName,t,a.DataTypes.Text)}static getWidgetsRecordConstructor(){throw new Error("@abstract")}static newWidgetsRecord(t){return this.hasValidationWidgets?new(this.getWidgetsRecordConstructor())(t):void 0}getWidgets(){const t=this.constructor;if(this.hasValidationWidgets)return this.getComplexProperty(h.WidgetsPropertyName,t.getWidgetsRecordConstructor());throw new Error("Model does not contain validation widgets")}get widgets(){return this.getWidgets()}set widgets(t){this.setComplexProperty(h.WidgetsPropertyName,t,a.DataTypes.Object)}hasCachedValue(t){return this.cachedValues.hasOwnProperty(t)}getCachedValue(t,e,...r){let a=this.cachedValues[t];const s=r.map((t,e)=>{try{return t()}catch(t){return h.InvalidValue}});return void 0!==a&&r.length===a.args.length&&s.every((t,e)=>t===a.args[e])||(a={args:s,value:e()},this.cachedValues[t]=a),a.value}clearCachedValues(){this.cachedValues={}}createVariable(t,e,r){return new o(t,e,r,this)}fromOther(t){this.fromImmutableData(t.data)}toImmutableData(){return this.data}fromImmutableData(t){this.data=t,this.writePropagate(this.data,this.cache),this.cache.invalidate()}setInputs(t){throw new Error("@abstract")}get widgetsGenerationsTree(){return this._widgetsGenerationsTree||(this._widgetsGenerationsTree=new b),this._widgetsGenerationsTree}getReadOnlyWidgetRecord(t){return this.widgets.get(t).asReadOnly()}get context(){return this._context}sanitize(t){let e=t;if(this.hasVariables){if(t.constructor!==this.data.constructor)throw new Error("Expected data to be the same type of this model data");const r=this.variables.getNonSerializableAttributes();if(r.length>0){let t=e.get(h.VariablesPropertyName);r.forEach(e=>t=t.set(e,null)),e=e.set(h.VariablesPropertyName,t)}}return e}}h.VariablesPropertyName="variables",h.WidgetsPropertyName="widgets",h.ClientVariablesGenerationPropertyName="clientVariablesGeneration",h.CurrentLocalePropertyName="currentLocale",h.InvalidValue=new Object,h.RecordClass=a.Record.defineRecordClass({variables:null,widgets:null,clientVariablesGeneration:0,currentLocale:null}),e.BaseViewModel=h,e.calculateDataFetchStatus=function(...t){let e=1;for(const r of t)switch(r){case 2:return 2;case 0:e=0}return e};e.VariablelessViewModel=class extends h{static get hasVariables(){return!1}setInputs(){}};class g extends h{static get hasVariables(){return!1}static get hasValidationWidgets(){return!1}setInputs(){}static create(t,e,r){return new g({viewName:t,navigatedFromHistory:e,viewWasRestoredFromCache:r})}}e.DummyViewModel=g;e.ModelFactory=class{constructor(t){this.modelClass=t}create(t){return this.modelClass.hasVariables||this.modelClass.hasValidationWidgets?new this.modelClass(t):new g(t)}get hasValidationWidgets(){return this.modelClass.hasValidationWidgets}};class p{constructor(t){this._parent=t,this._generation=t?t.generation:0}get parent(){return this._parent}get generation(){return this._generation}set generation(t){this.generation<t&&(this._generation=t,this.parent&&(this.parent.generation=t))}addChild(){return new p(this)}}class b{constructor(){this._root=new p(null),this._root.generation=b.currentGeneration,b.currentGeneration++}get root(){return this._root}static get currentGeneration(){return b.generation}static set currentGeneration(t){b.generation=t}}b.generation=0}));
define("OutSystems/ClientRuntime/modules/Database/WebSQL/WebSQLUtils",["require","exports","../../../Exceptions","../../../RegExpHelper"],(function(e,t,r,n){"use strict";function a(e){const t=e.trim().split(" ")[0].split(".");return t[t.length-1].replace(/["]+/g,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.getAttributeFromOrderBy=t.validateQueryOrderBy=t.getOrderByColumnsWithoutDuplicates=t.replaceEntityReferencesInOrderBy=void 0,t.replaceEntityReferencesInOrderBy=function(e,t,a){e=e.trim();let s=n.matches(e,'(^|\\s|\\.)(\\[|"|)(ossys_|osltm_|oslog_|osevt_|osusr_|osext_)',!0);if(s.length>0){const e=s[0];throw new r.Exceptions.DataBaseException("",`'${e.groups[2]+e.groups[3]}' found in 'Order By' parameter is a reserved prefix`)}if(""!==e&&(s=n.matches(e,"((((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)(( )*,( )*(((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)*",!0),1!==s.length||s[0].value!==e))throw new r.Exceptions.DataBaseException("","Invalid syntax in 'Order By' parameter.");let o=n.replace(e,"(\\{\\w+\\}|\\w+\\.)",!1,e=>function(e,t,n){let a="";const s=function(e){return"."===e.value.charAt(e.value.length-1)?e.value.substr(0,e.value.length-1):e.value.substr(1,e.value.length-2)}(e);let o=!1;for(let e=0;e<t.length;e++)if(t[e].toLowerCase()===s.toLowerCase()){o=!0,a='"'+n[e]+'"';break}if(!o)throw new r.Exceptions.DataBaseException("",`'${s}' found in 'Order By' parameter is an invalid Entity`);return"."===e.value.charAt(e.value.length-1)?a+".":a}(e,t,a));return o=n.replace(o,"(\\[\\w+\\])",!1,e=>function(e){const t=e.value.substr(1,e.value.length-2);return t?('"'===t.charAt(0)?"":'"')+t+('"'===t.charAt(t.length-1)?"":'"'):""}(e)),o},t.getOrderByColumnsWithoutDuplicates=function(e){return function(e){const t=[],r={};return e.forEach(e=>{const n=e.trim();if(""!==n){const e=n.replace(new RegExp("\b((ASC)|(DESC))$","im"),"").replace('"',"").replace("[","").replace("]","").trim().toLowerCase();!0!==r[e]&&(t.push(n),r[e]=!0)}}),t}(e).join(", ")},t.validateQueryOrderBy=function(e,t){return t.forEach(t=>{const n=a(t);for(let t=0;t<e.length;t++){if(e[t].attributes.some(e=>e.name.toLowerCase()===n.toLowerCase()))return!0}throw new r.Exceptions.DataBaseException("","Invalid attribute in 'Order By' parameter: "+t)}),!0},t.getAttributeFromOrderBy=a}));
define("OutSystems/ClientRuntime/ObjectExtensions",["require","exports","./DataTypes"],(function(e,t,n){"use strict";function r(...e){return!0}function o(e,t){return e&&t&&!n.TypeValidations.isBasicType(e)?e.fastEquals instanceof Function?e.fastEquals(t):n.equals(e,t):e===t}Object.defineProperty(t,"__esModule",{value:!0}),t.concatenateMultipleTimes=t.roughSizeOf=t.isEmptyObject=t.assign=t.arrayShallowEquals=t.shallowEquals=t.getHashCode=void 0,t.getHashCode=function(e){let t=0;const n=e.length;if(0===n)return t;for(let r=0;r<n;r++){t=(t<<5)-t+e.charCodeAt(r),t|=0}return t},t.shallowEquals=function(e,t,n=r){if(e===t)return!0;if(null===e||null===t||"object"!=typeof e||"object"!=typeof t)return!1;const s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;const i=Object.prototype.hasOwnProperty.bind(t);for(let r=0;r<s.length;r++){const l=s[r];if(n(e,l)){if(!i(l))return!1;if(!o(e[l],t[l]))return!1}}return!0},t.arrayShallowEquals=function(e,t){if(e===t)return!0;if(!(null!==e&&null!==t&&e instanceof Array&&t instanceof Array))return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1;return!0},t.assign=function(e,...t){if(null==e)throw new TypeError("ObjectHelper.assign target cannot be null or undefined");const n=Object(e),r=Object.prototype.hasOwnProperty;for(const e of t){if(null==e)continue;const t=Object(e);for(const e in t)r.call(t,e)&&(n[e]=t[e])}return n},t.isEmptyObject=function(e){return!e||0===Object.keys(e).length},t.roughSizeOf=function(e){const t=[],n=[e];let r=0;for(;n.length;){const e=n.pop();switch(typeof e){case"boolean":r+=4;break;case"number":r+=8;break;case"string":r+=2*e.length;break;case"object":if(-1!==t.indexOf(e))continue;t.push(e),Array.isArray(e)||(r+=2*Object.keys(e).length);for(const t in e){let r=null;try{r=e[t]}catch(e){}r&&n.push(r)}}}return r},t.concatenateMultipleTimes=function(e,t,n){let r=e;for(let e=0;e<n;e++)r+=t;return r}}));
define("OutSystems/ClientRuntime/records/ChangePasswordFailureReasonRec",["require","exports","tslib","../DataTypes"],(function(e,t,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangePasswordFailureReasonRec=void 0;let o=class extends s.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("PasswordComplexityPolicyFailed","passwordComplexityPolicyFailedAttr","passwordComplexityPolicyFailed",!0,!1,s.DataTypes.Boolean,()=>!1),this.attr("InvalidCredentials","invalidCredentialsAttr","invalidCredentials",!0,!1,s.DataTypes.Boolean,()=>!1),this.attr("TooManyFailedAttempts","tooManyFailedAttemptsAttr","tooManyFailedAttempts",!0,!1,s.DataTypes.Boolean,()=>!1)].concat(super.attributesToDeclare())}};o=a.__decorate([(0,s.RecordWithStaticConstructor)()],o),t.ChangePasswordFailureReasonRec=o}));
define("OutSystems/ClientRuntime/records/ChangePasswordResultRec",["require","exports","tslib","../DataTypes","./ChangePasswordFailureReasonRec"],(function(e,s,a,t,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ChangePasswordResultRec=void 0;let o=class extends t.GenericRecord{constructor(e,s){super(e,s)}static attributesToDeclare(){return[this.attr("Success","successAttr","success",!0,!1,t.DataTypes.Boolean,()=>(0,t.defaultForType)(t.DataTypes.Boolean)),this.attr("ChangePasswordFailureReason","changePasswordFailureReasonAttr","changePasswordFailureReason",!0,!1,t.DataTypes.Record,()=>t.ImmutableBase.getData(new r.ChangePasswordFailureReasonRec),r.ChangePasswordFailureReasonRec)].concat(super.attributesToDeclare())}};o=a.__decorate([(0,t.RecordWithStaticConstructor)()],o),s.ChangePasswordResultRec=o}));
define("OutSystems/ClientRuntime/records/FinishUserRegistrationFailureReasonRec",["require","exports","tslib","../DataTypes"],(function(e,i,t,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FinishUserRegistrationFailureReasonRec=void 0;let r=class extends a.GenericRecord{constructor(e,i){super(e,i)}static attributesToDeclare(){return[this.attr("PasswordComplexityPolicyFailed","passwordComplexityPolicyFailedAttr","passwordComplexityPolicyFailed",!0,!1,a.DataTypes.Boolean,()=>!1),this.attr("InvalidVerificationCode","invalidVerificationCodeAttr","invalidVerificationCode",!0,!1,a.DataTypes.Boolean,()=>!1),this.attr("InvalidEmail","invalidEmailAttr","invalidEmail",!0,!1,a.DataTypes.Boolean,()=>!1)].concat(super.attributesToDeclare())}};r=t.__decorate([(0,a.RecordWithStaticConstructor)()],r),i.FinishUserRegistrationFailureReasonRec=r}));
define("OutSystems/ClientRuntime/records/PasswordComplexityPolicyRec",["require","exports","tslib","../DataTypes"],(function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordComplexityPolicyRec=void 0;let o=class extends a.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("MinimumLength","minimumLengthAttr","minimumLength",!0,!1,a.DataTypes.Integer,()=>(0,a.defaultForType)(a.DataTypes.Integer)),this.attr("UpperCaseLetterRequired","upperCaseLetterRequiredAttr","upperCaseLetterRequired",!0,!1,a.DataTypes.Boolean,()=>(0,a.defaultForType)(a.DataTypes.Boolean)),this.attr("LowerCaseLetterRequired","lowerCaseLetterRequiredAttr","lowerCaseLetterRequired",!0,!1,a.DataTypes.Boolean,()=>(0,a.defaultForType)(a.DataTypes.Boolean)),this.attr("NumberRequired","numberRequiredAttr","numberRequired",!0,!1,a.DataTypes.Boolean,()=>(0,a.defaultForType)(a.DataTypes.Boolean)),this.attr("SpecialCharacterRequired","specialCharacterRequiredAttr","specialCharacterRequired",!0,!1,a.DataTypes.Boolean,()=>(0,a.defaultForType)(a.DataTypes.Boolean))].concat(super.attributesToDeclare())}};o=r.__decorate([(0,a.RecordWithStaticConstructor)()],o),t.PasswordComplexityPolicyRec=o}));
define("OutSystems/ClientRuntime/records/PasswordValidationResultRec",["require","exports","tslib","../DataTypes"],(function(e,t,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordValidationResultRec=void 0;let i=class extends s.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("IsValid","isValidAttr","isValid",!0,!1,s.DataTypes.Boolean,()=>(0,s.defaultForType)(s.DataTypes.Boolean)),this.attr("MissingMinimumLength","missingMinimumLengthAttr","missingMinimumLength",!0,!1,s.DataTypes.Boolean,()=>(0,s.defaultForType)(s.DataTypes.Boolean)),this.attr("MissingUpperCaseLetter","missingUpperCaseLetterAttr","missingUpperCaseLetter",!0,!1,s.DataTypes.Boolean,()=>(0,s.defaultForType)(s.DataTypes.Boolean)),this.attr("MissingLowerCaseLetter","missingLowerCaseLetterAttr","missingLowerCaseLetter",!0,!1,s.DataTypes.Boolean,()=>(0,s.defaultForType)(s.DataTypes.Boolean)),this.attr("MissingNumber","missingNumberAttr","missingNumber",!0,!1,s.DataTypes.Boolean,()=>(0,s.defaultForType)(s.DataTypes.Boolean)),this.attr("MissingSpecialCharacter","missingSpecialCharacterAttr","missingSpecialCharacter",!0,!1,s.DataTypes.Boolean,()=>(0,s.defaultForType)(s.DataTypes.Boolean))].concat(super.attributesToDeclare())}};i=a.__decorate([(0,s.RecordWithStaticConstructor)()],i),t.PasswordValidationResultRec=i}));
define("OutSystems/ClientRuntime/records/FinishUserRegistrationResultRec",["require","exports","tslib","../DataTypes","./FinishUserRegistrationFailureReasonRec"],(function(e,t,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FinishUserRegistrationResultRec=void 0;let a=class extends i.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("Success","successAttr","success",!0,!1,i.DataTypes.Boolean,()=>(0,i.defaultForType)(i.DataTypes.Boolean)),this.attr("UserId","userIdAttr","userId",!0,!1,i.DataTypes.Text,()=>(0,i.defaultForType)(i.DataTypes.Text)),this.attr("finishUserRegistrationFailureReason","finishUserRegistrationFailureReasonAttr","finishUserRegistrationFailureReason",!0,!1,i.DataTypes.Record,()=>i.ImmutableBase.getData(new r.FinishUserRegistrationFailureReasonRec),r.FinishUserRegistrationFailureReasonRec)].concat(super.attributesToDeclare())}};a=s.__decorate([(0,i.RecordWithStaticConstructor)()],a),t.FinishUserRegistrationResultRec=a}));
define("OutSystems/ClientRuntime/records/UpdateUserFailureReasonRec",["require","exports","tslib","../DataTypes"],(function(e,t,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateUserFailureReasonRec=void 0;let r=class extends i.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("InvalidCredentials","invalidCredentialsAttr","invalidCredentials",!0,!1,i.DataTypes.Boolean,()=>!1),this.attr("InvalidName","invalidNameAttr","invalidName",!0,!1,i.DataTypes.Boolean,()=>!1),this.attr("InvalidPhotoURL","invalidPhotoURLAttr","invalidPhotoURL",!0,!1,i.DataTypes.Boolean,()=>!1)].concat(super.attributesToDeclare())}};r=a.__decorate([(0,i.RecordWithStaticConstructor)()],r),t.UpdateUserFailureReasonRec=r}));
define("OutSystems/ClientRuntime/records/UpdateUserResultRec",["require","exports","tslib","../DataTypes","./UpdateUserFailureReasonRec"],(function(e,t,s,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateUserResultRec=void 0;let c=class extends a.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("Success","successAttr","success",!0,!1,a.DataTypes.Boolean,()=>(0,a.defaultForType)(a.DataTypes.Boolean)),this.attr("UpdateUserFailureReason","updateUserFailureReasonAttr","updateUserFailureReason",!0,!1,a.DataTypes.Record,()=>a.ImmutableBase.getData(new r.UpdateUserFailureReasonRec),r.UpdateUserFailureReasonRec)].concat(super.attributesToDeclare())}};c=s.__decorate([(0,a.RecordWithStaticConstructor)()],c),t.UpdateUserResultRec=c}));
define("OutSystems/ClientRuntime/records/UserInfoRec",["require","exports","tslib","../DataTypes"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserInfoRec=void 0;let s=class extends r.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("Email","emailAttr","email",!0,!1,r.DataTypes.Email,()=>(0,r.defaultForType)(r.DataTypes.Email)),this.attr("Name","nameAttr","name",!0,!1,r.DataTypes.Text,()=>(0,r.defaultForType)(r.DataTypes.Text)),this.attr("PhotoURL","photoURLAttr","photoURL",!0,!1,r.DataTypes.Text,()=>(0,r.defaultForType)(r.DataTypes.Text))].concat(super.attributesToDeclare())}};s=a.__decorate([(0,r.RecordWithStaticConstructor)()],s),t.UserInfoRec=s}));
define("OutSystems/ClientRuntime/records/UserLoginFailureReasonRec",["require","exports","tslib","../DataTypes"],(function(e,t,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserLoginFailureReasonRec=void 0;let r=class extends i.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("InvalidCredentials","invalidCredentialsAttr","invalidCredentials",!0,!1,i.DataTypes.Boolean,()=>!1),this.attr("TooManyFailedLoginAttempts","tooManyFailedLoginAttemptsAttr","tooManyFailedLoginAttempts",!0,!1,i.DataTypes.Boolean,()=>!1)].concat(super.attributesToDeclare())}};r=a.__decorate([(0,i.RecordWithStaticConstructor)()],r),t.UserLoginFailureReasonRec=r}));
define("OutSystems/ClientRuntime/records/UserLoginResultRec",["require","exports","tslib","../DataTypes","./UserLoginFailureReasonRec"],(function(e,t,r,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserLoginResultRec=void 0;let o=class extends s.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("Success","successAttr","success",!0,!1,s.DataTypes.Boolean,()=>(0,s.defaultForType)(s.DataTypes.Boolean)),this.attr("UserId","userIdAttr","userId",!0,!1,s.DataTypes.Text,()=>(0,s.defaultForType)(s.DataTypes.Text)),this.attr("UserLoginFailureReason","userLoginFailureReasonAttr","userLoginFailureReason",!0,!1,s.DataTypes.Record,()=>s.ImmutableBase.getData(new a.UserLoginFailureReasonRec),a.UserLoginFailureReasonRec),this.attr("retryAfterSeconds","retryAfterSecondsAttr","retryAfterSeconds",!0,!1,s.DataTypes.Integer,()=>(0,s.defaultForType)(s.DataTypes.Integer))].concat(super.attributesToDeclare())}};o=r.__decorate([(0,s.RecordWithStaticConstructor)()],o),t.UserLoginResultRec=o}));
define("OutSystems/ClientRuntime/records/StartUserRegistrationFailureReasonRec",["require","exports","tslib","../DataTypes"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StartUserRegistrationFailureReasonRec=void 0;let s=class extends r.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("InvalidEmail","invalidEmailAttr","invalidEmail",!0,!1,r.DataTypes.Boolean,()=>!1),this.attr("InvalidName","invalidNameAttr","invalidName",!0,!1,r.DataTypes.Boolean,()=>!1),this.attr("UsernameAlreadyExists","usernameAlreadyExistsAttr","usernameAlreadyExists",!0,!1,r.DataTypes.Boolean,()=>!1),this.attr("UserAlreadyRegistered","userAlreadyRegisteredAttr","userAlreadyRegistered",!0,!1,r.DataTypes.Boolean,()=>!1)].concat(super.attributesToDeclare())}};s=a.__decorate([(0,r.RecordWithStaticConstructor)()],s),t.StartUserRegistrationFailureReasonRec=s}));
define("OutSystems/ClientRuntime/records/StartUserRegistrationResultRec",["require","exports","tslib","../DataTypes","./StartUserRegistrationFailureReasonRec"],(function(t,e,r,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StartUserRegistrationResultRec=void 0;let i=class extends a.GenericRecord{constructor(t,e){super(t,e)}static attributesToDeclare(){return[this.attr("Success","successAttr","success",!0,!1,a.DataTypes.Boolean,()=>(0,a.defaultForType)(a.DataTypes.Boolean)),this.attr("StartUserRegistrationFailureReason","startUserRegistrationFailureReasonAttr","startUserRegistrationFailureReason",!0,!1,a.DataTypes.Record,()=>a.ImmutableBase.getData(new s.StartUserRegistrationFailureReasonRec),s.StartUserRegistrationFailureReasonRec),this.attr("TemporaryPassword","temporaryPasswordAttr","temporaryPassword",!0,!1,a.DataTypes.Text,()=>(0,a.defaultForType)(a.DataTypes.Text)),this.attr("UserId","userIdAttr","userId",!0,!1,a.DataTypes.Text,()=>(0,a.defaultForType)(a.DataTypes.Text)),this.attr("VerificationCode","verificationCodeAttr","verificationCode",!0,!1,a.DataTypes.Text,()=>(0,a.defaultForType)(a.DataTypes.Text))].concat(super.attributesToDeclare())}};i=r.__decorate([(0,a.RecordWithStaticConstructor)()],i),e.StartUserRegistrationResultRec=i}));
define("OutSystems/ClientRuntime/records/UserUpdateInfoRec",["require","exports","tslib","../DataTypes"],(function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserUpdateInfoRec=void 0;let s=class extends a.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("Name","nameAttr","name",!0,!1,a.DataTypes.Text,()=>(0,a.defaultForType)(a.DataTypes.Text)),this.attr("PhotoURL","photoURLAttr","photoURL",!0,!1,a.DataTypes.Text,()=>(0,a.defaultForType)(a.DataTypes.Text))].concat(super.attributesToDeclare())}};s=r.__decorate([(0,a.RecordWithStaticConstructor)()],s),t.UserUpdateInfoRec=s}));
define("OutSystems/ClientRuntime/records/HasRoleResultRec",["require","exports","tslib","../DataTypes"],(function(e,t,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HasRoleResultRec=void 0;let a=class extends o.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("HasRole","hasRoleOut","hasRole",!0,!1,o.DataTypes.Boolean,()=>(0,o.defaultForType)(o.DataTypes.Boolean))].concat(super.attributesToDeclare())}};a=s.__decorate([(0,o.RecordWithStaticConstructor)()],a),t.HasRoleResultRec=a}));
define("OutSystems/ClientRuntime/records/FinishResetPasswordFailureReasonRec",["require","exports","tslib","../DataTypes"],(function(e,t,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FinishResetPasswordFailureReasonRec=void 0;let s=class extends a.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("PasswordComplexityPolicyFailed","passwordComplexityPolicyFailedAttr","passwordComplexityPolicyFailed",!0,!1,a.DataTypes.Boolean,()=>!1),this.attr("InvalidVerificationCode","invalidVerificationCodeAttr","invalidVerificationCode",!0,!1,a.DataTypes.Boolean,()=>!1),this.attr("InvalidEmail","invalidEmailAttr","invalidEmail",!0,!1,a.DataTypes.Boolean,()=>!1)].concat(super.attributesToDeclare())}};s=i.__decorate([(0,a.RecordWithStaticConstructor)()],s),t.FinishResetPasswordFailureReasonRec=s}));
define("OutSystems/ClientRuntime/records/FinishResetPasswordResultRec",["require","exports","tslib","../DataTypes","./FinishResetPasswordFailureReasonRec"],(function(e,s,t,a,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.FinishResetPasswordResultRec=void 0;let i=class extends a.GenericRecord{constructor(e,s){super(e,s)}static attributesToDeclare(){return[this.attr("Success","successAttr","success",!0,!1,a.DataTypes.Boolean,()=>(0,a.defaultForType)(a.DataTypes.Boolean)),this.attr("FinishResetPasswordFailureReason","finishResetPasswordFailureReasonAttr","finishResetPasswordFailureReason",!0,!1,a.DataTypes.Record,()=>a.ImmutableBase.getData(new r.FinishResetPasswordFailureReasonRec),r.FinishResetPasswordFailureReasonRec)].concat(super.attributesToDeclare())}};i=t.__decorate([(0,a.RecordWithStaticConstructor)()],i),s.FinishResetPasswordResultRec=i}));
define("OutSystems/ClientRuntime/records/StartResetPasswordResultRec",["require","exports","tslib","../DataTypes"],(function(e,t,s,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StartResetPasswordResultRec=void 0;let a=class extends r.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("Success","successAttr","success",!0,!1,r.DataTypes.Boolean,()=>(0,r.defaultForType)(r.DataTypes.Boolean)),this.attr("VerificationCode","verificationCodeAttr","verificationCode",!0,!1,r.DataTypes.Text,()=>(0,r.defaultForType)(r.DataTypes.Text))].concat(super.attributesToDeclare())}};a=s.__decorate([(0,r.RecordWithStaticConstructor)()],a),t.StartResetPasswordResultRec=a}));
define("OutSystems/ClientRuntime/records/SystemStructures",["require","exports","tslib","../DataTypes","./ChangePasswordFailureReasonRec","./ChangePasswordResultRec","./FinishUserRegistrationFailureReasonRec","./PasswordComplexityPolicyRec","./PasswordValidationResultRec","./FinishUserRegistrationResultRec","./UpdateUserFailureReasonRec","./UpdateUserResultRec","./UserInfoRec","./UserLoginFailureReasonRec","./UserLoginResultRec","./StartUserRegistrationResultRec","./StartUserRegistrationFailureReasonRec","./UserUpdateInfoRec","./HasRoleResultRec","./FinishResetPasswordResultRec","./FinishResetPasswordFailureReasonRec","./StartResetPasswordResultRec"],(function(e,t,r,s,a,n,i,o,R,c,u,l,d,p,f,g,m,U,P,y,F,b){"use strict";var h;Object.defineProperty(t,"__esModule",{value:!0}),t.AttachmentRecordList=t.AttachmentList=t.AttachmentRecord=t.AttachmentRec=t.StartResetPasswordResultRec=t.FinishResetPasswordFailureReasonRec=t.FinishResetPasswordResultRec=t.HasRoleResultRec=t.UserUpdateInfoRec=t.StartUserRegistrationFailureReasonRec=t.StartUserRegistrationResultRec=t.UserLoginResultRec=t.UserLoginFailureReasonRec=t.UserInfoRec=t.UpdateUserResultRec=t.UpdateUserFailureReasonRec=t.FinishUserRegistrationResultRec=t.PasswordValidationResultRec=t.PasswordComplexityPolicyRec=t.FinishUserRegistrationFailureReasonRec=t.ChangePasswordResultRec=t.ChangePasswordFailureReasonRec=void 0,Object.defineProperty(t,"ChangePasswordFailureReasonRec",{enumerable:!0,get:function(){return a.ChangePasswordFailureReasonRec}}),Object.defineProperty(t,"ChangePasswordResultRec",{enumerable:!0,get:function(){return n.ChangePasswordResultRec}}),Object.defineProperty(t,"FinishUserRegistrationFailureReasonRec",{enumerable:!0,get:function(){return i.FinishUserRegistrationFailureReasonRec}}),Object.defineProperty(t,"PasswordComplexityPolicyRec",{enumerable:!0,get:function(){return o.PasswordComplexityPolicyRec}}),Object.defineProperty(t,"PasswordValidationResultRec",{enumerable:!0,get:function(){return R.PasswordValidationResultRec}}),Object.defineProperty(t,"FinishUserRegistrationResultRec",{enumerable:!0,get:function(){return c.FinishUserRegistrationResultRec}}),Object.defineProperty(t,"UpdateUserFailureReasonRec",{enumerable:!0,get:function(){return u.UpdateUserFailureReasonRec}}),Object.defineProperty(t,"UpdateUserResultRec",{enumerable:!0,get:function(){return l.UpdateUserResultRec}}),Object.defineProperty(t,"UserInfoRec",{enumerable:!0,get:function(){return d.UserInfoRec}}),Object.defineProperty(t,"UserLoginFailureReasonRec",{enumerable:!0,get:function(){return p.UserLoginFailureReasonRec}}),Object.defineProperty(t,"UserLoginResultRec",{enumerable:!0,get:function(){return f.UserLoginResultRec}}),Object.defineProperty(t,"StartUserRegistrationResultRec",{enumerable:!0,get:function(){return g.StartUserRegistrationResultRec}}),Object.defineProperty(t,"StartUserRegistrationFailureReasonRec",{enumerable:!0,get:function(){return m.StartUserRegistrationFailureReasonRec}}),Object.defineProperty(t,"UserUpdateInfoRec",{enumerable:!0,get:function(){return U.UserUpdateInfoRec}}),Object.defineProperty(t,"HasRoleResultRec",{enumerable:!0,get:function(){return P.HasRoleResultRec}}),Object.defineProperty(t,"FinishResetPasswordResultRec",{enumerable:!0,get:function(){return y.FinishResetPasswordResultRec}}),Object.defineProperty(t,"FinishResetPasswordFailureReasonRec",{enumerable:!0,get:function(){return F.FinishResetPasswordFailureReasonRec}}),Object.defineProperty(t,"StartResetPasswordResultRec",{enumerable:!0,get:function(){return b.StartResetPasswordResultRec}});let w=class extends s.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("FileName","fileNameAttr","FileName",!1,!1,s.DataTypes.Text,()=>(0,s.defaultForType)(s.DataTypes.Text)),this.attr("FileContent","fileContentAttr","FileContent",!1,!1,s.DataTypes.BinaryData,()=>(0,s.defaultForType)(s.DataTypes.BinaryData)),this.attr("MimeType","mimeTypeAttr","MimeType",!1,!1,s.DataTypes.Text,()=>(0,s.defaultForType)(s.DataTypes.Text))].concat(super.attributesToDeclare())}};w=r.__decorate([(0,s.RecordWithStaticConstructor)()],w),t.AttachmentRec=w;let T=h=class extends s.GenericRecord{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("Attachment","attachmentAttr","Attachment",!1,!1,s.DataTypes.Record,()=>s.ImmutableBase.getData(new w),w)].concat(s.GenericRecord.attributesToDeclare())}};T._isAnonymousRecord=!0,T.fromStructure=function(e){return new h(new h.RecordClass({attachmentAttr:s.ImmutableBase.getData(e)}))},T=h=r.__decorate([(0,s.RecordWithStaticConstructor)()],T),t.AttachmentRecord=T;class O extends s.GenericRecordList{constructor(e){super(e)}}O.itemType=w,t.AttachmentList=O;class j extends s.GenericRecordList{constructor(e){super(e)}}j.itemType=T,t.AttachmentRecordList=j}));
define("OutSystems/ClientRuntime/ScriptsManager",["require","exports","./Logger"],(function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleCustomJsLoading=e.addScript=e.createScriptSpan=e.getScriptName=e.clearScripts=void 0;const i=new Map;let o=!1,r=null;function s(t){var e;return(null===(e=null==t?void 0:t.split("/").pop())||void 0===e?void 0:e.split("__").shift())||t}function u(t,e){const i=s(t),o=n.startSpan(i,void 0,e);null==o||o.setAttribute("code.function",i),null==o||o.setAttribute("outsystems.function.type","REQUIRED_SCRIPT");const r=null==e?void 0:e.getContext().attributes["outsystems.function.key"];r&&(null==o||o.setAttribute("outsystems.function.owner.key",r));const u=null==e?void 0:e.getContext().attributes["code.function"];return u&&(null==o||o.setAttribute("outsystems.function.owner.name",u)),o}function c(t,{parentSpan:e,dom:n=document}={}){d("Adding script",t),function(){if(o)return;o=!0,Object.defineProperty(define,"amd",{get:a.bind(this,define.amd),configurable:!0})}();const s=i.get(t);if(s)return d("Script already added",t),s.promise;const c=u(t,e),l=n.createElement("script");l.async=!1,l.setAttribute("src",t),l.setAttribute("data-os-finished","false");const p=new Promise((e,i)=>{const o=()=>{l.setAttribute("data-os-finished","true"),null==c||c.end()};l.onerror=l.onabort=e=>{o(),i(`Error adding script '${t}' to document '${n.baseURI}'`)},l.onload=n=>{d("Script added",t),o(),e(n)}});return(null==r?void 0:r.domElement.parentNode)?r.domElement.parentNode.insertBefore(l,r.domElement.nextSibling):n.head.appendChild(l),null==c||c.activate(),i.set(t,{promise:p,domElement:l}),r=i.get(t),p}function d(t,e){n.debug("ScriptsManager",`${t} '${e}' : document '${document.baseURI}'`)}function a(t){const e=document.currentScript;if(!(null==e?void 0:e.hasAttribute("data-os-finished")))return t}e.clearScripts=function(){i.clear(),r=null},e.getScriptName=s,e.createScriptSpan=u,e.addScript=c,e.scheduleCustomJsLoading=function(t,e,{parentSpan:n,dom:i=document}={}){return Promise.all(t.map(t=>c(t,{parentSpan:n,dom:i}).catch(e)))}}));
define("OutSystems/ClientRuntime/SystemActions",["require","exports","tslib","@outsystems/auth-js","@outsystems/logger-js","./DataTypes","./Exceptions","./Logger","./modules/Auth/Authentication","./modules/Injector/Injector","./modules/Injector/KnownServices","./Navigation","./records/SystemStructures","./ScriptsManager"],(function(t,e,r,s,i,n,o,a,u,l,c,d,p,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUserProfile=e.changePassword=e.finishUserRegistration=e.isExternalUser=e.finishResetPassword=e.validatePasswordComplexity=e.getPasswordComplexityPolicy=e.getExternalLogoutURL=e.logout=e.login=e.getExternalLoginURL=e.setCurrentLocale=e.logMessage=e.requireScript=e.listIndexOf=e.listSort=e.listFilter=e.listAny=e.listAll=e.listDistinct=e.listDuplicate=e.listAppendAll=e.listRemove=e.listInsert=e.listClear=e.listAppend=void 0;const f=new n.ComplexTypeKeyedTypeFactory("DuplicatedList","duplicatedListOut"),g=new n.ComplexTypeKeyedTypeFactory("FilteredList","filteredListOut"),w=new n.ComplexTypeKeyedTypeFactory("DistinctList","distinctListOut"),R=new n.BasicTypeKeyedTypeFactory("ExternalLoginURL","externalLoginURLOut"),m=new n.ComplexTypeKeyedTypeFactory("UserLoginResult","userLoginResultOut"),h=new n.BasicTypeKeyedTypeFactory("ExternalLogoutURL","externalLogoutURLOut"),L=new n.ComplexTypeKeyedTypeFactory("PasswordComplexityPolicy","passwordComplexityPolicyOut"),A=new n.ComplexTypeKeyedTypeFactory("PasswordValidationResult","passwordValidationResultOut"),b=(new n.ComplexTypeKeyedTypeFactory("ResetPasswordResult","resetPasswordResultOut"),new n.BasicTypeKeyedTypeFactory("IsExternalUser","isExternalUserOut")),C=new n.ComplexTypeKeyedTypeFactory("RegistrationResult","registrationResultOut"),O=new n.ComplexTypeKeyedTypeFactory("ChangePasswordResult","changePasswordResultOut"),v=(new n.ComplexTypeKeyedTypeFactory("UpdateUserResult","updateUserResultOut"),new n.ComplexTypeKeyedTypeFactory("UserInfo","userInfoOut")),x=new n.ComplexTypeKeyedTypeFactory("FinishResetPasswordResult","finishResetPasswordResultOut");class P{constructor(){}getCurrentRowNumber(t){return 0}setCurrentRowNumber(t,e){}isBeingIterated(t){return!1}registerIterationStart(t){}registerIterationEnd(t){}getIterator(t){return null}clone(){return this}}function T(t,e,r){if(e.isBeingIterated(t))throw new Error("List is being iterated: "+r+" is not allowed")}function F(t,e,r,s){T(t,e,r);try{return e.registerIterationStart(t),s()}finally{e.registerIterationEnd(t)}}function U(t){return t?t.iterationContext:new P}e.listAppend=function(t,e,r){return S("ListAppend","aa5b021e-e937-4b80-a2b3-c95b4339a11d",()=>{try{const s=U(r);T(t,s,"append"),t.append(e)}catch(t){throw _(t,"listAppend"),t}})},e.listClear=function(t,e){return S("ListClear","c534e5bd-7032-4d4c-97e1-abbf1dee3fbf",()=>{try{const r=U(e);T(t,r,"clear"),t.clear(),r.setCurrentRowNumber(t,0)}catch(t){throw _(t,"listClear"),t}})},e.listInsert=function(t,e,r,s){return S("ListInsert","6c6663d0-5b99-492d-80a5-284def1ceb8c",()=>{try{const i=U(s);T(t,i,"insert"),t.insert(r,e);const n=i.getCurrentRowNumber(t);t.length>1&&r<=n&&i.setCurrentRowNumber(t,n+1)}catch(t){throw _(t,"listInsert"),t}})},e.listRemove=function(t,e,r){return S("ListRemove","9a0ebe10-cdee-4774-9179-e3c439bb0d3a",()=>{try{const s=U(r);T(t,s,"remove");const i=1===t.length;let n;i&&(n=t.getItem(0)),t.remove(e),i&&(t.emptyListItem=n);const o=s.getCurrentRowNumber(t);e<o?s.setCurrentRowNumber(t,o-1):e===t.length&&s.setCurrentRowNumber(t,Math.max(0,t.length-1))}catch(t){throw _(t,"listRemove"),t}})},e.listAppendAll=function(t,e,r){return S("ListAppendAll","cfed0293-97ed-42f7-8d5a-5a2582ecb1da",()=>{try{const s=U(r);T(t,s,"appendAll"),t.appendAll(e)}catch(t){throw _(t,"listAppendAll"),t}})},e.listDuplicate=function(t,e){return S("ListDuplicate","dbe15950-87da-4517-88b4-14c83bbe7d94",()=>{try{const r=U(e);T(t,r,"duplicate");const s=new(f.getType(t.constructor));return s.duplicatedListOut=t.clone(),s}catch(t){throw _(t,"listDuplicate"),t}})},e.listDistinct=function(t,e){return S("ListDistinct","b54c6849-3ce4-455a-af15-ad7a37c9899f",()=>{try{const r=U(e);return F(t,r,"distinct",()=>{const e=new(w.getType(t.constructor));return e.distinctListOut=t.distinct(),e})}catch(t){throw _(t,"listDistinct"),t}})};class I extends n.GenericRecord{constructor(t,e){super(t,e)}static attributesToDeclare(){return[this.attr("Result","resultOut","resultOut",!0,!0,n.DataTypes.Boolean,()=>{})].concat(super.attributesToDeclare())}}I._constructor=void I.init(),e.listAll=function(t,e,r){return S("ListAll","22f2c626-25d5-4457-bbe7-94261470862e",()=>{try{const s=U(r);return F(t,s,"all",()=>{const r=new I;return r.resultOut=t.all(e),r})}catch(t){throw _(t,"listAll"),t}})},e.listAny=function(t,e,r){return S("ListAny","d562e8a9-e680-48d3-8274-1e7e5437e4f8",()=>{try{const s=U(r);return F(t,s,"any",()=>{const r=new I;return r.resultOut=t.any(e),r})}catch(t){throw _(t,"listAny"),t}})},e.listFilter=function(t,e,r){return S("ListFilter","5137c152-4d59-48f6-b86e-b6b8e7b1e160",()=>{try{const s=U(r);return F(t,s,"filter",()=>{const r=new(g.getType(t.constructor));return r.filteredListOut=t.filter(e),r})}catch(t){throw _(t,"listFilter"),t}})},e.listSort=function(t,e,r,s){return S("ListSort","c7db4ad0-51cc-44e5-aa36-50546face388",()=>{try{const i=U(s);return F(t,i,"sort",()=>{t.sort(e,r)})}catch(t){throw _(t,"listSort"),t}})};class E extends n.GenericRecord{constructor(t,e){super(t,e)}static attributesToDeclare(){return[this.attr("Position","positionOut","positionOut",!0,!0,n.DataTypes.Integer,()=>{})].concat(super.attributesToDeclare())}}function _(t,e,r=!1){const s=t instanceof Error?t.message:t,n=r?i.Visibility.External:i.Visibility.Internal;a.error("SystemAction",`Error in ${e}: ${"string"==typeof s?s:"Unknown error"}`,"OS-CLRT-00000",t instanceof Error?t:void 0,n)}function S(t,e,r){const s=a.startSpan(t,i.Visibility.External);null==s||s.setAttribute("code.function",t),null==s||s.setAttribute("outsystems.function.key",e),null==s||s.setAttribute("outsystems.function.owner.name","(System)"),null==s||s.setAttribute("outsystems.function.owner.key","478870b9-2d60-4f73-9eb3-7cd8b994a737"),null==s||s.setAttribute("outsystems.function.type","CLIENT_SYSTEM_ACTION");try{return r(s)}finally{null==s||s.end()}}E._constructor=void E.init(),e.listIndexOf=function(t,e,r){return S("ListIndexOf","763a5d96-a42e-49b6-8129-b46525912667",()=>{try{const s=U(r);return F(t,s,"indexOf",()=>{const r=new E;return r.positionOut=t.indexOf(e),r})}catch(t){throw _(t,"listIndexOf"),t}})},e.requireScript=function(t,e){return S("RequireScript","388d4655-dd1c-4c5c-8d46-f420d0fe02a1",e=>{try{const r=d.VersionedURL.getVersionedUrl(t);return y.addScript(r,{parentSpan:e})}catch(t){throw _(t,"requireScript"),t}})},e.logMessage=function(t,e,r){return S("LogMessage","8c126211-5b78-442b-8a4d-fc2f72d10ef2",()=>{a.log(e,t)})},e.setCurrentLocale=function(t,e,r=l.default){return S("SetCurrentLocale","f2708145-60c0-49dc-9a1a-8b0f1fae5dce",()=>{try{const e=r.resolve(c.ServiceNames.LocaleService);if(!e){const t=new Error("Undefined locale service: can't set current locale.");throw _(t,"setCurrentLocale"),t}e.setCurrentLocale(t)}catch(t){throw _(t,"setCurrentLocale"),t}})},e.getExternalLoginURL=function(t,e,s,i=u.getExternalLoginUrl,o=l.default.resolve(c.ServiceNames.AuthConfigsManager)){return r.__awaiter(this,void 0,void 0,(function*(){return S("GetExternalLoginURL","da6adf2c-ff63-4d63-a90e-a58819b503eb",()=>r.__awaiter(this,void 0,void 0,(function*(){const r=""===t?void 0:t,s=new(R.getType(n.DataTypes.Text)),[a]=o.readAuthConfigs(e);if(!a){const t=new Error(`The given identity provider '${e}' does not exist.`);throw _(t,"getExternalLoginURL"),t}return s.externalLoginURLOut=yield i({callbackUrl:r,authConfigs:e?Object.assign(Object.assign({},a.configs),{identityProvider:a.kc_hint}):void 0}),s})))}))},e.login=function(t,e,n,l,c=u.builtinLogin){return r.__awaiter(this,void 0,void 0,(function*(){return S("Login","477c9f29-36c5-42a9-b910-3e5d70c7427e",()=>r.__awaiter(this,void 0,void 0,(function*(){const r=new(m.getType(p.UserLoginResultRec));try{r.userLoginResultOut.userIdAttr=yield c({username:t,password:e,persistLogin:n}),r.userLoginResultOut.successAttr=!0}catch(t){const e=t;if(r.userLoginResultOut.userIdAttr="",r.userLoginResultOut.successAttr=!1,r.userLoginResultOut.retryAfterSecondsAttr=10,e.name===s.FailureReasons.InvalidCredentials)r.userLoginResultOut.userLoginFailureReasonAttr.invalidCredentialsAttr=!0;else{if(e.name!==s.FailureReasons.TooManyFailedAttempts)throw function(t){const e=(0,o.getStack)(t);switch(a.error("Login SystemAction",t.message,t.errorCode,t,i.Visibility.Internal),t.errorCode){case"OS-CLRT-40109":return new o.Exceptions.InvalidLoginException("Identity provider configurations missing.",e);case"OS-ID-BIZ-40021":return new o.Exceptions.InvalidLoginException("Error retrieving token from identity provider.",e);default:return new o.Exceptions.InvalidLoginException("Login Failed.",e)}}(e);r.userLoginResultOut.userLoginFailureReasonAttr.tooManyFailedLoginAttemptsAttr=!0}}return r})))}))},e.logout=function(t,e,s=u.logout){return r.__awaiter(this,void 0,void 0,(function*(){return S("Logout","41ac3c1a-dffd-4b4f-acc0-fa439a975601",()=>s({callbackUrl:"string"==typeof t?t:""}))}))},e.getExternalLogoutURL=function(t,e,s=u.getExternalLogoutUrl){return r.__awaiter(this,void 0,void 0,(function*(){return S("GetExternalLogoutURL","c5bd52b6-817c-4268-9d9b-7d2bfe7228fe",()=>r.__awaiter(this,void 0,void 0,(function*(){const e=""===t?void 0:t,r=new(h.getType(n.DataTypes.Text));return r.externalLogoutURLOut=yield s({callbackUrl:e}),r})))}))},e.getPasswordComplexityPolicy=function(t,e=u.getPasswordComplexityPolicy){return S("GetPasswordComplexityPolicy","dc6941b3-7f13-4266-92a7-afc438918f3f",()=>{const t=new(L.getType(p.PasswordComplexityPolicyRec)),r=e();return t.passwordComplexityPolicyOut.minimumLengthAttr=r.minimumLength,t.passwordComplexityPolicyOut.lowerCaseLetterRequiredAttr=r.lowerCaseLetterRequired,t.passwordComplexityPolicyOut.upperCaseLetterRequiredAttr=r.upperCaseLetterRequired,t.passwordComplexityPolicyOut.numberRequiredAttr=r.numberRequired,t.passwordComplexityPolicyOut.specialCharacterRequiredAttr=r.specialCharacterRequired,t})},e.validatePasswordComplexity=function(t,e,r=u.validatePasswordComplexity){return S("ValidatePasswordComplexity","e11739ec-bce8-4f6c-a952-886e102ecac5",()=>{const e=new(A.getType(p.PasswordValidationResultRec)),s=r({password:t});return e.passwordValidationResultOut.isValidAttr=s.isValid,e.passwordValidationResultOut.missingMinimumLengthAttr=s.missingMinimumLength,e.passwordValidationResultOut.missingUpperCaseLetterAttr=s.missingUpperCaseLetter,e.passwordValidationResultOut.missingLowerCaseLetterAttr=s.missingLowerCaseLetter,e.passwordValidationResultOut.missingNumberAttr=s.missingNumber,e.passwordValidationResultOut.missingSpecialCharacterAttr=s.missingSpecialCharacter,e})},e.finishResetPassword=function(t,e,i,n,o=u.finishResetPassword){return r.__awaiter(this,void 0,void 0,(function*(){return S("FinishResetPassword","4c9a2d55-1e48-4a73-b6dd-197773173c84",()=>r.__awaiter(this,void 0,void 0,(function*(){const r=new(x.getType(p.FinishResetPasswordResultRec));if(!e)return r.finishResetPasswordResultOut.successAttr=!1,r.finishResetPasswordResultOut.finishResetPasswordFailureReasonAttr.invalidVerificationCodeAttr=!0,r;if(!t)return r.finishResetPasswordResultOut.successAttr=!1,r.finishResetPasswordResultOut.finishResetPasswordFailureReasonAttr.invalidEmailAttr=!0,r;try{yield o({username:t,resetToken:e,newPassword:i}),r.finishResetPasswordResultOut.successAttr=!0}catch(t){const e=t;r.finishResetPasswordResultOut.successAttr=!1;const i=r.finishResetPasswordResultOut.finishResetPasswordFailureReasonAttr;e.name===s.FailureReasons.PasswordComplexityPolicyFailed?i.passwordComplexityPolicyFailedAttr=!0:e.name===s.FailureReasons.InvalidToken?i.invalidVerificationCodeAttr=!0:e.name===s.FailureReasons.InvalidCredentials&&(i.invalidEmailAttr=!0)}return r})))}))},e.isExternalUser=function(t,e=u.isExternalUser){return S("IsExternalUser","5365bc0e-70f6-4e7f-90bf-6c6e12da81bb",()=>{const t=new(b.getType(n.DataTypes.Boolean));return t.isExternalUserOut=e(),t})},e.finishUserRegistration=function(t,e,i,n,o=u.finishUserRegistration,a=u.getUserId){return r.__awaiter(this,void 0,void 0,(function*(){return S("FinishUserRegistration","44a8850b-2e2d-4f19-9ea4-e5f40a050b5b",()=>r.__awaiter(this,void 0,void 0,(function*(){const r=new(C.getType(p.FinishUserRegistrationResultRec));if(!i)return r.registrationResultOut.successAttr=!1,r.registrationResultOut.finishUserRegistrationFailureReasonAttr.invalidVerificationCodeAttr=!0,r;if(!t)return r.registrationResultOut.successAttr=!1,r.registrationResultOut.finishUserRegistrationFailureReasonAttr.invalidEmailAttr=!0,r;try{yield o({username:t,password:e,temporaryPassword:i}),r.registrationResultOut.successAttr=!0,r.registrationResultOut.userIdAttr=a()}catch(t){const e=t;r.registrationResultOut.successAttr=!1,e.name===s.FailureReasons.PasswordComplexityPolicyFailed?r.registrationResultOut.finishUserRegistrationFailureReasonAttr.passwordComplexityPolicyFailedAttr=!0:e.name===s.FailureReasons.InvalidToken?r.registrationResultOut.finishUserRegistrationFailureReasonAttr.invalidVerificationCodeAttr=!0:e.name===s.FailureReasons.InvalidCredentials&&(r.registrationResultOut.finishUserRegistrationFailureReasonAttr.invalidEmailAttr=!0)}return r})))}))},e.changePassword=function(t,e,i,n,o=u.changePassword){return r.__awaiter(this,void 0,void 0,(function*(){return S("ChangePassword","b17b5077-e564-4145-b640-9fcb359cbb07",()=>r.__awaiter(this,void 0,void 0,(function*(){const r=new(O.getType(p.ChangePasswordResultRec));try{yield o({username:t,oldPassword:i,newPassword:e}),r.changePasswordResultOut.successAttr=!0}catch(t){const e=t;r.changePasswordResultOut.successAttr=!1,e.name===s.FailureReasons.PasswordComplexityPolicyFailed?r.changePasswordResultOut.changePasswordFailureReasonAttr.passwordComplexityPolicyFailedAttr=!0:e.name===s.FailureReasons.InvalidCredentials?r.changePasswordResultOut.changePasswordFailureReasonAttr.invalidCredentialsAttr=!0:e.name===s.FailureReasons.TooManyFailedAttempts&&(r.changePasswordResultOut.changePasswordFailureReasonAttr.tooManyFailedAttemptsAttr=!0)}return r})))}))},e.getUserProfile=function(t,e=u.getUserProfile){return r.__awaiter(this,void 0,void 0,(function*(){return S("GetUserProfile","a4d7f4ef-399a-4294-8ab4-cf1437699fe3",()=>r.__awaiter(this,void 0,void 0,(function*(){const t=new(v.getType(p.UserInfoRec)),r=yield e();return t.userInfoOut.emailAttr=r.username,t.userInfoOut.nameAttr=r.name,t.userInfoOut.photoURLAttr=r.pictureUrl,t})))}))}}));
define("OutSystems/ClientRuntime/Utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtils=void 0;t.StringUtils=class{static safeParseInt(e){let t=e;return e&&!isNaN(Number(e))&&(t=parseInt(e,10)),t}}}));
define("OutSystems/ClientRuntime/Main",["require","exports","./Application","./ApplicationInfo","./BuiltinFunctions","./ClientInfo","./Controller","./CookiesManager","./DataConversion","./DataTypes","./Entities","./ErrorHandling","./ErrorScreen","./EventDispatcher","./Exceptions","./FeedbackMessageService","./Flow","./Format","./Interfaces","./JSONUtils","./LanguageResources","./LightImmutable","./Logger","./Model","./modules/Auth/Authentication","./modules/Auth/Authorization","./modules/Communication/Communication","./modules/Communication/Headers","./modules/Database/IndexedDB/IndexedDBSerializer","./modules/Database/IndexedDB/IndexedDBUtils","./modules/Database/TableInfoUtils","./modules/Database/WebSQL/WebSQLSerializer","./modules/Database/WebSQL/WebSQLUtils","./modules/Injector/Injector","./modules/Injector/KnownServices","./modules/Native/NativeHelper","./Navigation","./ObjectExtensions","./Performance","./Public","./records/SystemStructures","./RegExpHelper","./RequireManager","./ResourceCache","./RolesInfo","./ScreenStateCache","./ScriptsManager","./StorageProvider","./SystemActions","./TransitionAnimation","./Transitions","./Utils","./Validation","./VersionDefinition","./VersionsManager","./WidgetNaming"],(function(e,i,n,t,a,o,r,s,l,c,u,d,m,S,g,p,I,b,D,f,v,C,h,A,E,x,M,L,y,N,T,R,U,P,V,B,F,H,W,j,z,O,Q,k,w,q,J,_,K,G,X,Y,Z,$,ee,ie){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Version=i.Public=i.Internal=void 0,Q.initialize(),function(e){e.Application=n,e.ApplicationInfo=t,e.Authentication=E,e.Authorization=x,e.Flow=I,e.BuiltinFunctions=a,e.JSONUtils=f,e.SystemActions=K,e.SystemStructures=z,e.ResourceCache=k,e.Communication=M,e.Headers=L,e.Controller=r,e.CookiesManager=s,e.DataTypes=c,e.ErrorHandling=d,e.ErrorScreen=m,e.EventDispatcher=S,e.FeedbackMessageService=p,e.Format=b,e.Injector=P.default,e.Interfaces=D,e.LanguageResources=v,e.LightImmutable=C,e.Logger=h,e.ServiceNames=V.ServiceNames,e.Model=A,e.NativeHelper=B,e.Navigation=F,e.ObjectExtensions=H,e.ScriptsManager=J,e.StorageProvider=_,e.TransitionAnimation=G,e.Transitions=X,e.Validation=Z,e.VersionsManager=ee,e.Utils=Y,e.WidgetNaming=ie,e.Entities=u,e.Exceptions=g,e.RegExpHelper=O,e.RolesInfo=w,e.Performance=W,e.ScreenStateCache=q,e.DataConversion=l,e.ClientInfo=o,e.TableInfoUtils=T,e.WebSQLSerializer=R,e.WebSQLUtils=U,e.IndexedDBSerializer=y,e.IndexedDBUtils=N,e.VersionDefinition=$,e.Types=e.DataTypes.DataTypes}(i.Internal||(i.Internal={})),i.Public=j,i.Version="5.95.5",$.registerPackage("client-runtime-core",i.Version)}));
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("es6-promise",e):t.ES6Promise=e()}(this,(function(){"use strict";function t(t){return"function"==typeof t}function e(){var t=setTimeout;return function(){return t(n,1)}}function n(){for(var t=0;t<_;t+=2){(0,E[t])(E[t+1]),E[t]=void 0,E[t+1]=void 0}_=0}function r(t,e){var n=this,r=new this.constructor(i);void 0===r[M]&&v(r);var o=n._state;if(o){var s=arguments[o-1];b((function(){return p(o,r,s,n._result)}))}else l(n,r,t,e);return r}function o(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(i);return u(e,t),e}function i(){}function s(e,n,i){n.constructor===e.constructor&&i===r&&n.constructor.resolve===o?function(t,e){e._state===x?a(t,e._result):e._state===C?f(t,e._result):l(e,void 0,(function(e){return u(t,e)}),(function(e){return f(t,e)}))}(e,n):void 0===i?a(e,n):t(i)?function(t,e,n){b((function(t){var r=!1,o=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,(function(n){r||(r=!0,e!==n?u(t,n):a(t,n))}),(function(e){r||(r=!0,f(t,e))}),t._label);!r&&o&&(r=!0,f(t,o))}),t)}(e,n,i):a(e,n)}function u(t,e){if(t===e)f(t,new TypeError("You cannot resolve a promise with itself"));else if(function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}(e)){var n=void 0;try{n=e.then}catch(e){return void f(t,e)}s(t,e,n)}else a(t,e)}function c(t){t._onerror&&t._onerror(t._result),h(t)}function a(t,e){t._state===P&&(t._result=e,t._state=x,0!==t._subscribers.length&&b(h,t))}function f(t,e){t._state===P&&(t._state=C,t._result=e,b(c,t))}function l(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+x]=n,o[i+C]=r,0===i&&t._state&&b(h,t)}function h(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?p(n,r,o,i):o(i);t._subscribers.length=0}}function p(e,n,r,o){var i=t(r),s=void 0,c=void 0,l=!0;if(i){try{s=r(o)}catch(t){l=!1,c=t}if(n===s)return void f(n,new TypeError("A promises callback cannot return that same promise."))}else s=o;n._state!==P||(i&&l?u(n,s):!1===l?f(n,c):e===x?a(n,s):e===C&&f(n,s))}function v(t){t[M]=O++,t._state=void 0,t._result=void 0,t._subscribers=[]}var d=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_=0,y=void 0,m=void 0,b=function(t,e){E[_]=t,E[_+1]=e,2===(_+=2)&&(m?m(n):T())},w="undefined"!=typeof window?window:void 0,g=w||{},A=g.MutationObserver||g.WebKitMutationObserver,j="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),S="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,E=new Array(1e3),T=void 0;T=j?function(){return process.nextTick(n)}:A?function(){var t=0,e=new A(n),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}():S?function(){var t=new MessageChannel;return t.port1.onmessage=n,function(){return t.port2.postMessage(0)}}():void 0===w&&"function"==typeof require?function(){try{var t=Function("return this")().require("vertx");return void 0!==(y=t.runOnLoop||t.runOnContext)?function(){y(n)}:e()}catch(t){return e()}}():e();var M=Math.random().toString(36).substring(2),P=void 0,x=1,C=2,O=0,F=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(i),this.promise[M]||v(this.promise),d(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?a(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&a(this.promise,this._result))):f(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===P&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,u=n.resolve;if(u===o){var c=void 0,a=void 0,l=!1;try{c=t.then}catch(t){l=!0,a=t}if(c===r&&t._state!==P)this._settledAt(t._state,e,t._result);else if("function"!=typeof c)this._remaining--,this._result[e]=t;else if(n===Y){var h=new n(i);l?f(h,a):s(h,t,c),this._willSettleAt(h,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(u(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===P&&(this._remaining--,t===C?f(r,n):this._result[e]=n),0===this._remaining&&a(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;l(t,void 0,(function(t){return n._settledAt(x,e,t)}),(function(t){return n._settledAt(C,e,t)}))},t}(),Y=function(){function e(t){this[M]=O++,this._result=this._state=void 0,this._subscribers=[],i!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){u(t,e)}),(function(e){f(t,e)}))}catch(e){f(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this,r=n.constructor;return t(e)?n.then((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))})):n.then(e,e)},e}();return Y.prototype.then=r,Y.all=function(t){return new F(this,t).promise},Y.race=function(t){var e=this;return new e(d(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})},Y.resolve=o,Y.reject=function(t){var e=new this(i);return f(e,t),e},Y._setScheduler=function(t){m=t},Y._setAsap=function(t){b=t},Y._asap=b,Y.polyfill=function(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=Y},Y.Promise=Y,Y.polyfill(),Y}));
!function t(e,r,n){function o(s,c){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!c&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var a=r[s]={exports:{}};e[s][0].call(a.exports,(function(t){return o(e[s][1][t]||t)}),a,a.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,r){"use strict";var n,o=t("type/value/is"),i=t("type/value/ensure"),s=t("type/plain-function/ensure"),c=t("es5-ext/object/copy"),u=t("es5-ext/object/normalize-options"),l=t("es5-ext/object/map"),a=Function.prototype.bind,f=Object.defineProperty,p=Object.prototype.hasOwnProperty;n=function(t,e,r){var n,o=i(e)&&s(e.value);return delete(n=c(e)).writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&p.call(this,t)?o:(e.value=a.call(o,r.resolveContext?r.resolveContext(this):this),f(this,t,e),this[t])},n},e.exports=function(t){var e=u(arguments[1]);return o(e.resolveContext)&&s(e.resolveContext),l(t,(function(t,r){return n(r,t,e)}))}},{"es5-ext/object/copy":24,"es5-ext/object/map":32,"es5-ext/object/normalize-options":33,"type/plain-function/ensure":73,"type/value/ensure":77,"type/value/is":78}],2:[function(t,e,r){"use strict";var n=t("type/value/is"),o=t("type/plain-function/is"),i=t("es5-ext/object/assign"),s=t("es5-ext/object/normalize-options"),c=t("es5-ext/string/#/contains");(e.exports=function(t,e){var r,o,u,l,a;return arguments.length<2||"string"!=typeof t?(l=e,e=t,t=null):l=arguments[2],n(t)?(r=c.call(t,"c"),o=c.call(t,"e"),u=c.call(t,"w")):(r=u=!0,o=!1),a={value:e,configurable:r,enumerable:o,writable:u},l?i(s(l),a):a}).gs=function(t,e,r){var u,l,a,f;return"string"!=typeof t?(a=r,r=e,e=t,t=null):a=arguments[3],n(e)?o(e)?n(r)?o(r)||(a=r,r=void 0):r=void 0:(a=e,e=r=void 0):e=void 0,n(t)?(u=c.call(t,"c"),l=c.call(t,"e")):(u=!0,l=!1),f={get:e,set:r,configurable:u,enumerable:l},a?i(s(a),f):f}},{"es5-ext/object/assign":21,"es5-ext/object/normalize-options":33,"es5-ext/string/#/contains":39,"type/plain-function/is":74,"type/value/is":78}],3:[function(t,e,r){"use strict";var n=t("../../object/valid-value");e.exports=function(){return n(this).length=0,this}},{"../../object/valid-value":38}],4:[function(t,e,r){"use strict";var n=t("../../number/is-nan"),o=t("../../number/to-pos-integer"),i=t("../../object/valid-value"),s=Array.prototype.indexOf,c=Object.prototype.hasOwnProperty,u=Math.abs,l=Math.floor;e.exports=function(t){var e,r,a,f;if(!n(t))return s.apply(this,arguments);for(r=o(i(this).length),a=arguments[1],e=a=isNaN(a)?0:a>=0?l(a):o(this.length)-l(u(a));e<r;++e)if(c.call(this,e)&&(f=this[e],n(f)))return e;return-1}},{"../../number/is-nan":15,"../../number/to-pos-integer":19,"../../object/valid-value":38}],5:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Array.from:t("./shim")},{"./is-implemented":6,"./shim":7}],6:[function(t,e,r){"use strict";e.exports=function(){var t,e,r=Array.from;return"function"==typeof r&&(e=r(t=["raz","dwa"]),Boolean(e&&e!==t&&"dwa"===e[1]))}},{}],7:[function(t,e,r){"use strict";var n=t("es6-symbol").iterator,o=t("../../function/is-arguments"),i=t("../../function/is-function"),s=t("../../number/to-pos-integer"),c=t("../../object/valid-callable"),u=t("../../object/valid-value"),l=t("../../object/is-value"),a=t("../../string/is-string"),f=Array.isArray,p=Function.prototype.call,_={configurable:!0,enumerable:!0,writable:!0,value:null},y=Object.defineProperty;e.exports=function(t){var e,r,b,h,v,d,x,g,m,j,O=arguments[1],w=arguments[2];if(t=Object(u(t)),l(O)&&c(O),this&&this!==Array&&i(this))e=this;else{if(!O){if(o(t))return 1!==(v=t.length)?Array.apply(null,t):((h=new Array(1))[0]=t[0],h);if(f(t)){for(h=new Array(v=t.length),r=0;r<v;++r)h[r]=t[r];return h}}h=[]}if(!f(t))if(void 0!==(m=t[n])){for(x=c(m).call(t),e&&(h=new e),g=x.next(),r=0;!g.done;)j=O?p.call(O,w,g.value,r):g.value,e?(_.value=j,y(h,r,_)):h[r]=j,g=x.next(),++r;v=r}else if(a(t)){for(v=t.length,e&&(h=new e),r=0,b=0;r<v;++r)j=t[r],r+1<v&&(d=j.charCodeAt(0))>=55296&&d<=56319&&(j+=t[++r]),j=O?p.call(O,w,j,b):j,e?(_.value=j,y(h,b,_)):h[b]=j,++b;v=b}if(void 0===v)for(v=s(t.length),e&&(h=new e(v)),r=0;r<v;++r)j=O?p.call(O,w,t[r],r):t[r],e?(_.value=j,y(h,r,_)):h[r]=j;return e&&(_.value=null,h.length=v),h}},{"../../function/is-arguments":8,"../../function/is-function":9,"../../number/to-pos-integer":19,"../../object/is-value":28,"../../object/valid-callable":37,"../../object/valid-value":38,"../../string/is-string":42,"es6-symbol":56}],8:[function(t,e,r){"use strict";var n=Object.prototype.toString,o=n.call(function(){return arguments}());e.exports=function(t){return n.call(t)===o}},{}],9:[function(t,e,r){"use strict";var n=Object.prototype.toString,o=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(t){return"function"==typeof t&&o(n.call(t))}},{}],10:[function(t,e,r){"use strict";e.exports=function(){}},{}],11:[function(t,e,r){var n=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},{}],12:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Math.sign:t("./shim")},{"./is-implemented":13,"./shim":14}],13:[function(t,e,r){"use strict";e.exports=function(){var t=Math.sign;return"function"==typeof t&&(1===t(10)&&-1===t(-20))}},{}],14:[function(t,e,r){"use strict";e.exports=function(t){return t=Number(t),isNaN(t)||0===t?t:t>0?1:-1}},{}],15:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Number.isNaN:t("./shim")},{"./is-implemented":16,"./shim":17}],16:[function(t,e,r){"use strict";e.exports=function(){var t=Number.isNaN;return"function"==typeof t&&(!t({})&&t(NaN)&&!t(34))}},{}],17:[function(t,e,r){"use strict";e.exports=function(t){return t!=t}},{}],18:[function(t,e,r){"use strict";var n=t("../math/sign"),o=Math.abs,i=Math.floor;e.exports=function(t){return isNaN(t)?0:0!==(t=Number(t))&&isFinite(t)?n(t)*i(o(t)):t}},{"../math/sign":12}],19:[function(t,e,r){"use strict";var n=t("./to-integer"),o=Math.max;e.exports=function(t){return o(0,n(t))}},{"./to-integer":18}],20:[function(t,e,r){"use strict";var n=t("./valid-callable"),o=t("./valid-value"),i=Function.prototype.bind,s=Function.prototype.call,c=Object.keys,u=Object.prototype.propertyIsEnumerable;e.exports=function(t,e){return function(r,l){var a,f=arguments[2],p=arguments[3];return r=Object(o(r)),n(l),a=c(r),p&&a.sort("function"==typeof p?i.call(p,r):void 0),"function"!=typeof t&&(t=a[t]),s.call(t,a,(function(t,n){return u.call(r,t)?s.call(l,f,r[t],t,r,n):e}))}}},{"./valid-callable":37,"./valid-value":38}],21:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":22,"./shim":23}],22:[function(t,e,r){"use strict";e.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},{}],23:[function(t,e,r){"use strict";var n=t("../keys"),o=t("../valid-value"),i=Math.max;e.exports=function(t,e){var r,s,c,u=i(arguments.length,2);for(t=Object(o(t)),c=function(n){try{t[n]=e[n]}catch(t){r||(r=t)}},s=1;s<u;++s)n(e=arguments[s]).forEach(c);if(void 0!==r)throw r;return t}},{"../keys":29,"../valid-value":38}],24:[function(t,e,r){"use strict";var n=t("../array/from"),o=t("./assign"),i=t("./valid-value");e.exports=function(t){var e=Object(i(t)),r=arguments[1],s=Object(arguments[2]);if(e!==t&&!r)return e;var c={};return r?n(r,(function(e){(s.ensure||e in t)&&(c[e]=t[e])})):o(c,t),c}},{"../array/from":5,"./assign":21,"./valid-value":38}],25:[function(t,e,r){"use strict";var n,o,i,s,c=Object.create;t("./set-prototype-of/is-implemented")()||(n=t("./set-prototype-of/shim")),e.exports=n?1!==n.level?c:(o={},i={},s={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach((function(t){i[t]="__proto__"!==t?s:{configurable:!0,enumerable:!1,writable:!0,value:void 0}})),Object.defineProperties(o,i),Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:o}),function(t,e){return c(null===t?o:t,e)}):c},{"./set-prototype-of/is-implemented":35,"./set-prototype-of/shim":36}],26:[function(t,e,r){"use strict";e.exports=t("./_iterate")("forEach")},{"./_iterate":20}],27:[function(t,e,r){"use strict";var n=t("./is-value"),o={function:!0,object:!0};e.exports=function(t){return n(t)&&o[typeof t]||!1}},{"./is-value":28}],28:[function(t,e,r){"use strict";var n=t("../function/noop")();e.exports=function(t){return t!==n&&null!==t}},{"../function/noop":10}],29:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":30,"./shim":31}],30:[function(t,e,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},{}],31:[function(t,e,r){"use strict";var n=t("../is-value"),o=Object.keys;e.exports=function(t){return o(n(t)?Object(t):t)}},{"../is-value":28}],32:[function(t,e,r){"use strict";var n=t("./valid-callable"),o=t("./for-each"),i=Function.prototype.call;e.exports=function(t,e){var r={},s=arguments[2];return n(e),o(t,(function(t,n,o,c){r[n]=i.call(e,s,t,n,o,c)})),r}},{"./for-each":26,"./valid-callable":37}],33:[function(t,e,r){"use strict";var n=t("./is-value"),o=Array.prototype.forEach,i=Object.create,s=function(t,e){var r;for(r in t)e[r]=t[r]};e.exports=function(t){var e=i(null);return o.call(arguments,(function(t){n(t)&&s(Object(t),e)})),e}},{"./is-value":28}],34:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Object.setPrototypeOf:t("./shim")},{"./is-implemented":35,"./shim":36}],35:[function(t,e,r){"use strict";var n=Object.create,o=Object.getPrototypeOf,i={};e.exports=function(){var t=Object.setPrototypeOf,e=arguments[0]||n;return"function"==typeof t&&o(t(e(null),i))===i}},{}],36:[function(t,e,r){"use strict";var n,o=t("../is-object"),i=t("../valid-value"),s=Object.prototype.isPrototypeOf,c=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0};n=function(t,e){if(i(t),null===e||o(e))return t;throw new TypeError("Prototype must be null or an object")},e.exports=function(t){var e,r;return t?(2===t.level?t.set?(r=t.set,e=function(t,e){return r.call(n(t,e),e),t}):e=function(t,e){return n(t,e).__proto__=e,t}:e=function t(e,r){var o;return n(e,r),(o=s.call(t.nullPolyfill,e))&&delete t.nullPolyfill.__proto__,null===r&&(r=t.nullPolyfill),e.__proto__=r,o&&c(t.nullPolyfill,"__proto__",u),e},Object.defineProperty(e,"level",{configurable:!1,enumerable:!1,writable:!1,value:t.level})):null}(function(){var t,e=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{(t=n.set).call(e,r)}catch(t){}if(Object.getPrototypeOf(e)===r)return{set:t,level:2}}return e.__proto__=r,Object.getPrototypeOf(e)===r?{level:2}:((e={}).__proto__=r,Object.getPrototypeOf(e)===r&&{level:1})}()),t("../create")},{"../create":25,"../is-object":27,"../valid-value":38}],37:[function(t,e,r){"use strict";e.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},{}],38:[function(t,e,r){"use strict";var n=t("./is-value");e.exports=function(t){if(!n(t))throw new TypeError("Cannot use null or undefined");return t}},{"./is-value":28}],39:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":40,"./shim":41}],40:[function(t,e,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))}},{}],41:[function(t,e,r){"use strict";var n=String.prototype.indexOf;e.exports=function(t){return n.call(this,t,arguments[1])>-1}},{}],42:[function(t,e,r){"use strict";var n=Object.prototype.toString,o=n.call("");e.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&(t instanceof String||n.call(t)===o)||!1}},{}],43:[function(t,e,r){"use strict";var n,o=t("es5-ext/object/set-prototype-of"),i=t("es5-ext/string/#/contains"),s=t("d"),c=t("es6-symbol"),u=t("./"),l=Object.defineProperty;n=e.exports=function(t,e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");u.call(this,t),e=e?i.call(e,"key+value")?"key+value":i.call(e,"key")?"key":"value":"value",l(this,"__kind__",s("",e))},o&&o(n,u),delete n.prototype.constructor,n.prototype=Object.create(u.prototype,{_resolve:s((function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t}))}),l(n.prototype,c.toStringTag,s("c","Array Iterator"))},{"./":46,d:2,"es5-ext/object/set-prototype-of":34,"es5-ext/string/#/contains":39,"es6-symbol":56}],44:[function(t,e,r){"use strict";var n=t("es5-ext/function/is-arguments"),o=t("es5-ext/object/valid-callable"),i=t("es5-ext/string/is-string"),s=t("./get"),c=Array.isArray,u=Function.prototype.call,l=Array.prototype.some;e.exports=function(t,e){var r,a,f,p,_,y,b,h,v=arguments[2];if(c(t)||n(t)?r="array":i(t)?r="string":t=s(t),o(e),f=function(){p=!0},"array"!==r)if("string"!==r)for(a=t.next();!a.done;){if(u.call(e,v,a.value,f),p)return;a=t.next()}else for(y=t.length,_=0;_<y&&(b=t[_],_+1<y&&(h=b.charCodeAt(0))>=55296&&h<=56319&&(b+=t[++_]),u.call(e,v,b,f),!p);++_);else l.call(t,(function(t){return u.call(e,v,t,f),p}))}},{"./get":45,"es5-ext/function/is-arguments":8,"es5-ext/object/valid-callable":37,"es5-ext/string/is-string":42}],45:[function(t,e,r){"use strict";var n=t("es5-ext/function/is-arguments"),o=t("es5-ext/string/is-string"),i=t("./array"),s=t("./string"),c=t("./valid-iterable"),u=t("es6-symbol").iterator;e.exports=function(t){return"function"==typeof c(t)[u]?t[u]():n(t)?new i(t):o(t)?new s(t):new i(t)}},{"./array":43,"./string":48,"./valid-iterable":49,"es5-ext/function/is-arguments":8,"es5-ext/string/is-string":42,"es6-symbol":56}],46:[function(t,e,r){"use strict";var n,o=t("es5-ext/array/#/clear"),i=t("es5-ext/object/assign"),s=t("es5-ext/object/valid-callable"),c=t("es5-ext/object/valid-value"),u=t("d"),l=t("d/auto-bind"),a=t("es6-symbol"),f=Object.defineProperty,p=Object.defineProperties;e.exports=n=function(t,e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");p(this,{__list__:u("w",c(t)),__context__:u("w",e),__nextIndex__:u("w",0)}),e&&(s(e.on),e.on("_add",this._onAdd),e.on("_delete",this._onDelete),e.on("_clear",this._onClear))},delete n.prototype.constructor,p(n.prototype,i({_next:u((function(){var t;if(this.__list__)return this.__redo__&&void 0!==(t=this.__redo__.shift())?t:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()})),next:u((function(){return this._createResult(this._next())})),_createResult:u((function(t){return void 0===t?{done:!0,value:void 0}:{done:!1,value:this._resolve(t)}})),_resolve:u((function(t){return this.__list__[t]})),_unBind:u((function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)})),toString:u((function(){return"[object "+(this[a.toStringTag]||"Object")+"]"}))},l({_onAdd:u((function(t){t>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach((function(e,r){e>=t&&(this.__redo__[r]=++e)}),this),this.__redo__.push(t)):f(this,"__redo__",u("c",[t])))})),_onDelete:u((function(t){var e;t>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(e=this.__redo__.indexOf(t))&&this.__redo__.splice(e,1),this.__redo__.forEach((function(e,r){e>t&&(this.__redo__[r]=--e)}),this)))})),_onClear:u((function(){this.__redo__&&o.call(this.__redo__),this.__nextIndex__=0}))}))),f(n.prototype,a.iterator,u((function(){return this})))},{d:2,"d/auto-bind":1,"es5-ext/array/#/clear":3,"es5-ext/object/assign":21,"es5-ext/object/valid-callable":37,"es5-ext/object/valid-value":38,"es6-symbol":56}],47:[function(t,e,r){"use strict";var n=t("es5-ext/function/is-arguments"),o=t("es5-ext/object/is-value"),i=t("es5-ext/string/is-string"),s=t("es6-symbol").iterator,c=Array.isArray;e.exports=function(t){return!!o(t)&&(!!c(t)||(!!i(t)||(!!n(t)||"function"==typeof t[s])))}},{"es5-ext/function/is-arguments":8,"es5-ext/object/is-value":28,"es5-ext/string/is-string":42,"es6-symbol":56}],48:[function(t,e,r){"use strict";var n,o=t("es5-ext/object/set-prototype-of"),i=t("d"),s=t("es6-symbol"),c=t("./"),u=Object.defineProperty;n=e.exports=function(t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");t=String(t),c.call(this,t),u(this,"__length__",i("",t.length))},o&&o(n,c),delete n.prototype.constructor,n.prototype=Object.create(c.prototype,{_next:i((function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()})),_resolve:i((function(t){var e,r=this.__list__[t];return this.__nextIndex__===this.__length__?r:(e=r.charCodeAt(0))>=55296&&e<=56319?r+this.__list__[this.__nextIndex__++]:r}))}),u(n.prototype,s.toStringTag,i("c","String Iterator"))},{"./":46,d:2,"es5-ext/object/set-prototype-of":34,"es6-symbol":56}],49:[function(t,e,r){"use strict";var n=t("./is-iterable");e.exports=function(t){if(!n(t))throw new TypeError(t+" is not iterable");return t}},{"./is-iterable":47}],50:[function(t,e,r){"use strict";t("./is-implemented")()||Object.defineProperty(t("es5-ext/global"),"Set",{value:t("./polyfill"),configurable:!0,enumerable:!1,writable:!0})},{"./is-implemented":51,"./polyfill":55,"es5-ext/global":11}],51:[function(t,e,r){"use strict";e.exports=function(){var t,e;return"function"==typeof Set&&(t=new Set(["raz","dwa","trzy"]),"[object Set]"===String(t)&&(3===t.size&&("function"==typeof t.add&&("function"==typeof t.clear&&("function"==typeof t.delete&&("function"==typeof t.entries&&("function"==typeof t.forEach&&("function"==typeof t.has&&("function"==typeof t.keys&&("function"==typeof t.values&&(!1===(e=t.values().next()).done&&"raz"===e.value)))))))))))}},{}],52:[function(t,e,r){"use strict";e.exports="undefined"!=typeof Set&&"[object Set]"===Object.prototype.toString.call(Set.prototype)},{}],53:[function(t,e,r){"use strict";var n,o=t("es5-ext/object/set-prototype-of"),i=t("es5-ext/string/#/contains"),s=t("d"),c=t("es6-iterator"),u=t("es6-symbol").toStringTag,l=Object.defineProperty;n=e.exports=function(t,e){return this instanceof n?(c.call(this,t.__setData__,t),e=e&&i.call(e,"key+value")?"key+value":"value",l(this,"__kind__",s("",e))):new n(t,e)},o&&o(n,c),n.prototype=Object.create(c.prototype,{constructor:s(n),_resolve:s((function(t){return"value"===this.__kind__?this.__list__[t]:[this.__list__[t],this.__list__[t]]})),toString:s((function(){return"[object Set Iterator]"}))}),l(n.prototype,u,s("c","Set Iterator"))},{d:2,"es5-ext/object/set-prototype-of":34,"es5-ext/string/#/contains":39,"es6-iterator":46,"es6-symbol":56}],54:[function(t,e,r){"use strict";e.exports=function(t){return null!=t}},{}],55:[function(t,e,r){"use strict";var n,o,i,s=t("type/value/is"),c=t("es5-ext/array/#/clear"),u=t("es5-ext/array/#/e-index-of"),l=t("es5-ext/object/set-prototype-of"),a=t("es5-ext/object/valid-callable"),f=t("d"),p=t("event-emitter"),_=t("es6-symbol"),y=t("es6-iterator/valid-iterable"),b=t("es6-iterator/for-of"),h=t("./lib/iterator"),v=t("./is-native-implemented"),d=Function.prototype.call,x=Object.defineProperty,g=Object.getPrototypeOf;v&&(i=Set),e.exports=n=function(){var t,e=arguments[0];if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");return t=v&&l?l(new i,g(this)):this,s(e)&&y(e),x(t,"__setData__",f("c",[])),e?(b(e,(function(t){-1===u.call(this,t)&&this.push(t)}),t.__setData__),t):t},v&&(l&&l(n,i),n.prototype=Object.create(i.prototype,{constructor:f(n)})),p(Object.defineProperties(n.prototype,{add:f((function(t){return this.has(t)||this.emit("_add",this.__setData__.push(t)-1,t),this})),clear:f((function(){this.__setData__.length&&(c.call(this.__setData__),this.emit("_clear"))})),delete:f((function(t){var e=u.call(this.__setData__,t);return-1!==e&&(this.__setData__.splice(e,1),this.emit("_delete",e,t),!0)})),entries:f((function(){return new h(this,"key+value")})),forEach:f((function(t){var e,r,n,o=arguments[1];for(a(t),r=(e=this.values())._next();void 0!==r;)n=e._resolve(r),d.call(t,o,n,n,this),r=e._next()})),has:f((function(t){return-1!==u.call(this.__setData__,t)})),keys:f(o=function(){return this.values()}),size:f.gs((function(){return this.__setData__.length})),values:f((function(){return new h(this)})),toString:f((function(){return"[object Set]"}))})),x(n.prototype,_.iterator,f(o)),x(n.prototype,_.toStringTag,f("c","Set"))},{"./is-native-implemented":52,"./lib/iterator":53,d:2,"es5-ext/array/#/clear":3,"es5-ext/array/#/e-index-of":4,"es5-ext/object/set-prototype-of":34,"es5-ext/object/valid-callable":37,"es6-iterator/for-of":44,"es6-iterator/valid-iterable":49,"es6-symbol":56,"event-emitter":64,"type/value/is":54}],56:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?t("ext/global-this").Symbol:t("./polyfill")},{"./is-implemented":57,"./polyfill":62,"ext/global-this":66}],57:[function(t,e,r){"use strict";var n=t("ext/global-this"),o={object:!0,symbol:!0};e.exports=function(){var t,e=n.Symbol;if("function"!=typeof e)return!1;t=e("test symbol");try{String(t)}catch(t){return!1}return!!o[typeof e.iterator]&&(!!o[typeof e.toPrimitive]&&!!o[typeof e.toStringTag])}},{"ext/global-this":66}],58:[function(t,e,r){"use strict";e.exports=function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&("Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag]))}},{}],59:[function(t,e,r){"use strict";var n=t("d"),o=Object.create,i=Object.defineProperty,s=Object.prototype,c=o(null);e.exports=function(t){for(var e,r,o=0;c[t+(o||"")];)++o;return c[t+=o||""]=!0,i(s,e="@@"+t,n.gs(null,(function(t){r||(r=!0,i(this,e,n(t)),r=!1)}))),e}},{d:2}],60:[function(t,e,r){"use strict";var n=t("d"),o=t("ext/global-this").Symbol;e.exports=function(t){return Object.defineProperties(t,{hasInstance:n("",o&&o.hasInstance||t("hasInstance")),isConcatSpreadable:n("",o&&o.isConcatSpreadable||t("isConcatSpreadable")),iterator:n("",o&&o.iterator||t("iterator")),match:n("",o&&o.match||t("match")),replace:n("",o&&o.replace||t("replace")),search:n("",o&&o.search||t("search")),species:n("",o&&o.species||t("species")),split:n("",o&&o.split||t("split")),toPrimitive:n("",o&&o.toPrimitive||t("toPrimitive")),toStringTag:n("",o&&o.toStringTag||t("toStringTag")),unscopables:n("",o&&o.unscopables||t("unscopables"))})}},{d:2,"ext/global-this":66}],61:[function(t,e,r){"use strict";var n=t("d"),o=t("../../../validate-symbol"),i=Object.create(null);e.exports=function(t){return Object.defineProperties(t,{for:n((function(e){return i[e]?i[e]:i[e]=t(String(e))})),keyFor:n((function(t){var e;for(e in o(t),i)if(i[e]===t)return e}))})}},{"../../../validate-symbol":63,d:2}],62:[function(t,e,r){"use strict";var n,o,i,s=t("d"),c=t("./validate-symbol"),u=t("ext/global-this").Symbol,l=t("./lib/private/generate-name"),a=t("./lib/private/setup/standard-symbols"),f=t("./lib/private/setup/symbol-registry"),p=Object.create,_=Object.defineProperties,y=Object.defineProperty;if("function"==typeof u)try{String(u()),i=!0}catch(t){}else u=null;o=function(t){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return n(t)},e.exports=n=function t(e){var r;if(this instanceof t)throw new TypeError("Symbol is not a constructor");return i?u(e):(r=p(o.prototype),e=void 0===e?"":String(e),_(r,{__description__:s("",e),__name__:s("",l(e))}))},a(n),f(n),_(o.prototype,{constructor:s(n),toString:s("",(function(){return this.__name__}))}),_(n.prototype,{toString:s((function(){return"Symbol ("+c(this).__description__+")"})),valueOf:s((function(){return c(this)}))}),y(n.prototype,n.toPrimitive,s("",(function(){var t=c(this);return"symbol"==typeof t?t:t.toString()}))),y(n.prototype,n.toStringTag,s("c","Symbol")),y(o.prototype,n.toStringTag,s("c",n.prototype[n.toStringTag])),y(o.prototype,n.toPrimitive,s("c",n.prototype[n.toPrimitive]))},{"./lib/private/generate-name":59,"./lib/private/setup/standard-symbols":60,"./lib/private/setup/symbol-registry":61,"./validate-symbol":63,d:2,"ext/global-this":66}],63:[function(t,e,r){"use strict";var n=t("./is-symbol");e.exports=function(t){if(!n(t))throw new TypeError(t+" is not a symbol");return t}},{"./is-symbol":58}],64:[function(t,e,r){"use strict";var n,o,i,s,c,u,l,a=t("d"),f=t("es5-ext/object/valid-callable"),p=Function.prototype.apply,_=Function.prototype.call,y=Object.create,b=Object.defineProperty,h=Object.defineProperties,v=Object.prototype.hasOwnProperty,d={configurable:!0,enumerable:!1,writable:!0};o=function(t,e){var r,o;return f(e),o=this,n.call(this,t,r=function(){i.call(o,t,r),p.call(e,this,arguments)}),r.__eeOnceListener__=e,this},c={on:n=function(t,e){var r;return f(e),v.call(this,"__ee__")?r=this.__ee__:(r=d.value=y(null),b(this,"__ee__",d),d.value=null),r[t]?"object"==typeof r[t]?r[t].push(e):r[t]=[r[t],e]:r[t]=e,this},once:o,off:i=function(t,e){var r,n,o,i;if(f(e),!v.call(this,"__ee__"))return this;if(!(r=this.__ee__)[t])return this;if("object"==typeof(n=r[t]))for(i=0;o=n[i];++i)o!==e&&o.__eeOnceListener__!==e||(2===n.length?r[t]=n[i?0:1]:n.splice(i,1));else n!==e&&n.__eeOnceListener__!==e||delete r[t];return this},emit:s=function(t){var e,r,n,o,i;if(v.call(this,"__ee__")&&(o=this.__ee__[t]))if("object"==typeof o){for(r=arguments.length,i=new Array(r-1),e=1;e<r;++e)i[e-1]=arguments[e];for(o=o.slice(),e=0;n=o[e];++e)p.call(n,this,i)}else switch(arguments.length){case 1:_.call(o,this);break;case 2:_.call(o,this,arguments[1]);break;case 3:_.call(o,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),e=1;e<r;++e)i[e-1]=arguments[e];p.call(o,this,i)}}},u={on:a(n),once:a(o),off:a(i),emit:a(s)},l=h({},u),e.exports=r=function(t){return null==t?y(l):h(Object(t),u)},r.methods=c},{d:2,"es5-ext/object/valid-callable":37}],65:[function(t,e,r){var n=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},{}],66:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?globalThis:t("./implementation")},{"./implementation":65,"./is-implemented":67}],67:[function(t,e,r){"use strict";e.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},{}],68:[function(t,e,r){"use strict";var n=t("../prototype/is");e.exports=function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(t){return!1}return!n(t)}},{"../prototype/is":75}],69:[function(t,e,r){"use strict";var n=t("../value/is"),o=t("../object/is"),i=t("../string/coerce"),s=t("./to-short-string"),c=function(t,e){return t.replace("%v",s(e))};e.exports=function(t,e,r){if(!o(r))throw new TypeError(c(e,t));if(!n(t)){if("default"in r)return r.default;if(r.isOptional)return null}var s=i(r.errorMessage);throw n(s)||(s=e),new TypeError(c(s,t))}},{"../object/is":72,"../string/coerce":76,"../value/is":78,"./to-short-string":71}],70:[function(t,e,r){"use strict";e.exports=function(t){try{return t.toString()}catch(e){try{return String(t)}catch(t){return null}}}},{}],71:[function(t,e,r){"use strict";var n=t("./safe-to-string"),o=/[\n\r\u2028\u2029]/g;e.exports=function(t){var e=n(t);return null===e?"<Non-coercible to string value>":(e.length>100&&(e=e.slice(0,99)+"…"),e=e.replace(o,(function(t){switch(t){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}})))}},{"./safe-to-string":70}],72:[function(t,e,r){"use strict";var n=t("../value/is"),o={object:!0,function:!0,undefined:!0};e.exports=function(t){return!!n(t)&&hasOwnProperty.call(o,typeof t)}},{"../value/is":78}],73:[function(t,e,r){"use strict";var n=t("../lib/resolve-exception"),o=t("./is");e.exports=function(t){return o(t)?t:n(t,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":69,"./is":74}],74:[function(t,e,r){"use strict";var n=t("../function/is"),o=/^\s*class[\s{/}]/,i=Function.prototype.toString;e.exports=function(t){return!!n(t)&&!o.test(i.call(t))}},{"../function/is":68}],75:[function(t,e,r){"use strict";var n=t("../object/is");e.exports=function(t){if(!n(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(t){return!1}}},{"../object/is":72}],76:[function(t,e,r){"use strict";var n=t("../value/is"),o=t("../object/is"),i=Object.prototype.toString;e.exports=function(t){if(!n(t))return null;if(o(t)){var e=t.toString;if("function"!=typeof e)return null;if(e===i)return null}try{return""+t}catch(t){return null}}},{"../object/is":72,"../value/is":78}],77:[function(t,e,r){"use strict";var n=t("../lib/resolve-exception"),o=t("./is");e.exports=function(t){return o(t)?t:n(t,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":69,"./is":78}],78:[function(t,e,r){arguments[4][54][0].apply(r,arguments)},{dup:54}]},{},[50]);
define("es6-set", function(){});

!function t(e,r,n){function o(s,c){if(!r[s]){if(!e[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[s]={exports:{}};e[s][0].call(l.exports,(function(t){return o(e[s][1][t]||t)}),l,l.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,r){"use strict";var n,o=t("type/value/is"),i=t("type/value/ensure"),s=t("type/plain-function/ensure"),c=t("es5-ext/object/copy"),a=t("es5-ext/object/normalize-options"),u=t("es5-ext/object/map"),l=Function.prototype.bind,f=Object.defineProperty,p=Object.prototype.hasOwnProperty;n=function(t,e,r){var n,o=i(e)&&s(e.value);return delete(n=c(e)).writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&p.call(this,t)?o:(e.value=l.call(o,r.resolveContext?r.resolveContext(this):this),f(this,t,e),this[t])},n},e.exports=function(t){var e=a(arguments[1]);return o(e.resolveContext)&&s(e.resolveContext),u(t,(function(t,r){return n(r,t,e)}))}},{"es5-ext/object/copy":24,"es5-ext/object/map":32,"es5-ext/object/normalize-options":33,"type/plain-function/ensure":74,"type/value/ensure":78,"type/value/is":79}],2:[function(t,e,r){"use strict";var n=t("type/value/is"),o=t("type/plain-function/is"),i=t("es5-ext/object/assign"),s=t("es5-ext/object/normalize-options"),c=t("es5-ext/string/#/contains");(e.exports=function(t,e){var r,o,a,u,l;return arguments.length<2||"string"!=typeof t?(u=e,e=t,t=null):u=arguments[2],n(t)?(r=c.call(t,"c"),o=c.call(t,"e"),a=c.call(t,"w")):(r=a=!0,o=!1),l={value:e,configurable:r,enumerable:o,writable:a},u?i(s(u),l):l}).gs=function(t,e,r){var a,u,l,f;return"string"!=typeof t?(l=r,r=e,e=t,t=null):l=arguments[3],n(e)?o(e)?n(r)?o(r)||(l=r,r=void 0):r=void 0:(l=e,e=r=void 0):e=void 0,n(t)?(a=c.call(t,"c"),u=c.call(t,"e")):(a=!0,u=!1),f={get:e,set:r,configurable:a,enumerable:u},l?i(s(l),f):f}},{"es5-ext/object/assign":21,"es5-ext/object/normalize-options":33,"es5-ext/string/#/contains":40,"type/plain-function/is":75,"type/value/is":79}],3:[function(t,e,r){"use strict";var n=t("../../object/valid-value");e.exports=function(){return n(this).length=0,this}},{"../../object/valid-value":39}],4:[function(t,e,r){"use strict";var n=t("../../number/is-nan"),o=t("../../number/to-pos-integer"),i=t("../../object/valid-value"),s=Array.prototype.indexOf,c=Object.prototype.hasOwnProperty,a=Math.abs,u=Math.floor;e.exports=function(t){var e,r,l,f;if(!n(t))return s.apply(this,arguments);for(r=o(i(this).length),l=arguments[1],e=l=isNaN(l)?0:l>=0?u(l):o(this.length)-u(a(l));e<r;++e)if(c.call(this,e)&&(f=this[e],n(f)))return e;return-1}},{"../../number/is-nan":15,"../../number/to-pos-integer":19,"../../object/valid-value":39}],5:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Array.from:t("./shim")},{"./is-implemented":6,"./shim":7}],6:[function(t,e,r){"use strict";e.exports=function(){var t,e,r=Array.from;return"function"==typeof r&&(e=r(t=["raz","dwa"]),Boolean(e&&e!==t&&"dwa"===e[1]))}},{}],7:[function(t,e,r){"use strict";var n=t("es6-symbol").iterator,o=t("../../function/is-arguments"),i=t("../../function/is-function"),s=t("../../number/to-pos-integer"),c=t("../../object/valid-callable"),a=t("../../object/valid-value"),u=t("../../object/is-value"),l=t("../../string/is-string"),f=Array.isArray,p=Function.prototype.call,_={configurable:!0,enumerable:!0,writable:!0,value:null},y=Object.defineProperty;e.exports=function(t){var e,r,b,h,v,d,x,m,g,j,O=arguments[1],w=arguments[2];if(t=Object(a(t)),u(O)&&c(O),this&&this!==Array&&i(this))e=this;else{if(!O){if(o(t))return 1!==(v=t.length)?Array.apply(null,t):((h=new Array(1))[0]=t[0],h);if(f(t)){for(h=new Array(v=t.length),r=0;r<v;++r)h[r]=t[r];return h}}h=[]}if(!f(t))if(void 0!==(g=t[n])){for(x=c(g).call(t),e&&(h=new e),m=x.next(),r=0;!m.done;)j=O?p.call(O,w,m.value,r):m.value,e?(_.value=j,y(h,r,_)):h[r]=j,m=x.next(),++r;v=r}else if(l(t)){for(v=t.length,e&&(h=new e),r=0,b=0;r<v;++r)j=t[r],r+1<v&&(d=j.charCodeAt(0))>=55296&&d<=56319&&(j+=t[++r]),j=O?p.call(O,w,j,b):j,e?(_.value=j,y(h,b,_)):h[b]=j,++b;v=b}if(void 0===v)for(v=s(t.length),e&&(h=new e(v)),r=0;r<v;++r)j=O?p.call(O,w,t[r],r):t[r],e?(_.value=j,y(h,r,_)):h[r]=j;return e&&(_.value=null,h.length=v),h}},{"../../function/is-arguments":8,"../../function/is-function":9,"../../number/to-pos-integer":19,"../../object/is-value":28,"../../object/valid-callable":38,"../../object/valid-value":39,"../../string/is-string":43,"es6-symbol":57}],8:[function(t,e,r){"use strict";var n=Object.prototype.toString,o=n.call(function(){return arguments}());e.exports=function(t){return n.call(t)===o}},{}],9:[function(t,e,r){"use strict";var n=Object.prototype.toString,o=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(t){return"function"==typeof t&&o(n.call(t))}},{}],10:[function(t,e,r){"use strict";e.exports=function(){}},{}],11:[function(t,e,r){var n=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},{}],12:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Math.sign:t("./shim")},{"./is-implemented":13,"./shim":14}],13:[function(t,e,r){"use strict";e.exports=function(){var t=Math.sign;return"function"==typeof t&&(1===t(10)&&-1===t(-20))}},{}],14:[function(t,e,r){"use strict";e.exports=function(t){return t=Number(t),isNaN(t)||0===t?t:t>0?1:-1}},{}],15:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Number.isNaN:t("./shim")},{"./is-implemented":16,"./shim":17}],16:[function(t,e,r){"use strict";e.exports=function(){var t=Number.isNaN;return"function"==typeof t&&(!t({})&&t(NaN)&&!t(34))}},{}],17:[function(t,e,r){"use strict";e.exports=function(t){return t!=t}},{}],18:[function(t,e,r){"use strict";var n=t("../math/sign"),o=Math.abs,i=Math.floor;e.exports=function(t){return isNaN(t)?0:0!==(t=Number(t))&&isFinite(t)?n(t)*i(o(t)):t}},{"../math/sign":12}],19:[function(t,e,r){"use strict";var n=t("./to-integer"),o=Math.max;e.exports=function(t){return o(0,n(t))}},{"./to-integer":18}],20:[function(t,e,r){"use strict";var n=t("./valid-callable"),o=t("./valid-value"),i=Function.prototype.bind,s=Function.prototype.call,c=Object.keys,a=Object.prototype.propertyIsEnumerable;e.exports=function(t,e){return function(r,u){var l,f=arguments[2],p=arguments[3];return r=Object(o(r)),n(u),l=c(r),p&&l.sort("function"==typeof p?i.call(p,r):void 0),"function"!=typeof t&&(t=l[t]),s.call(t,l,(function(t,n){return a.call(r,t)?s.call(u,f,r[t],t,r,n):e}))}}},{"./valid-callable":38,"./valid-value":39}],21:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":22,"./shim":23}],22:[function(t,e,r){"use strict";e.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},{}],23:[function(t,e,r){"use strict";var n=t("../keys"),o=t("../valid-value"),i=Math.max;e.exports=function(t,e){var r,s,c,a=i(arguments.length,2);for(t=Object(o(t)),c=function(n){try{t[n]=e[n]}catch(t){r||(r=t)}},s=1;s<a;++s)n(e=arguments[s]).forEach(c);if(void 0!==r)throw r;return t}},{"../keys":29,"../valid-value":39}],24:[function(t,e,r){"use strict";var n=t("../array/from"),o=t("./assign"),i=t("./valid-value");e.exports=function(t){var e=Object(i(t)),r=arguments[1],s=Object(arguments[2]);if(e!==t&&!r)return e;var c={};return r?n(r,(function(e){(s.ensure||e in t)&&(c[e]=t[e])})):o(c,t),c}},{"../array/from":5,"./assign":21,"./valid-value":39}],25:[function(t,e,r){"use strict";var n,o,i,s,c=Object.create;t("./set-prototype-of/is-implemented")()||(n=t("./set-prototype-of/shim")),e.exports=n?1!==n.level?c:(o={},i={},s={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach((function(t){i[t]="__proto__"!==t?s:{configurable:!0,enumerable:!1,writable:!0,value:void 0}})),Object.defineProperties(o,i),Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:o}),function(t,e){return c(null===t?o:t,e)}):c},{"./set-prototype-of/is-implemented":36,"./set-prototype-of/shim":37}],26:[function(t,e,r){"use strict";e.exports=t("./_iterate")("forEach")},{"./_iterate":20}],27:[function(t,e,r){"use strict";var n=t("./is-value"),o={function:!0,object:!0};e.exports=function(t){return n(t)&&o[typeof t]||!1}},{"./is-value":28}],28:[function(t,e,r){"use strict";var n=t("../function/noop")();e.exports=function(t){return t!==n&&null!==t}},{"../function/noop":10}],29:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":30,"./shim":31}],30:[function(t,e,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},{}],31:[function(t,e,r){"use strict";var n=t("../is-value"),o=Object.keys;e.exports=function(t){return o(n(t)?Object(t):t)}},{"../is-value":28}],32:[function(t,e,r){"use strict";var n=t("./valid-callable"),o=t("./for-each"),i=Function.prototype.call;e.exports=function(t,e){var r={},s=arguments[2];return n(e),o(t,(function(t,n,o,c){r[n]=i.call(e,s,t,n,o,c)})),r}},{"./for-each":26,"./valid-callable":38}],33:[function(t,e,r){"use strict";var n=t("./is-value"),o=Array.prototype.forEach,i=Object.create,s=function(t,e){var r;for(r in t)e[r]=t[r]};e.exports=function(t){var e=i(null);return o.call(arguments,(function(t){n(t)&&s(Object(t),e)})),e}},{"./is-value":28}],34:[function(t,e,r){"use strict";var n=Array.prototype.forEach,o=Object.create;e.exports=function(t){var e=o(null);return n.call(arguments,(function(t){e[t]=!0})),e}},{}],35:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Object.setPrototypeOf:t("./shim")},{"./is-implemented":36,"./shim":37}],36:[function(t,e,r){"use strict";var n=Object.create,o=Object.getPrototypeOf,i={};e.exports=function(){var t=Object.setPrototypeOf,e=arguments[0]||n;return"function"==typeof t&&o(t(e(null),i))===i}},{}],37:[function(t,e,r){"use strict";var n,o=t("../is-object"),i=t("../valid-value"),s=Object.prototype.isPrototypeOf,c=Object.defineProperty,a={configurable:!0,enumerable:!1,writable:!0,value:void 0};n=function(t,e){if(i(t),null===e||o(e))return t;throw new TypeError("Prototype must be null or an object")},e.exports=function(t){var e,r;return t?(2===t.level?t.set?(r=t.set,e=function(t,e){return r.call(n(t,e),e),t}):e=function(t,e){return n(t,e).__proto__=e,t}:e=function t(e,r){var o;return n(e,r),(o=s.call(t.nullPolyfill,e))&&delete t.nullPolyfill.__proto__,null===r&&(r=t.nullPolyfill),e.__proto__=r,o&&c(t.nullPolyfill,"__proto__",a),e},Object.defineProperty(e,"level",{configurable:!1,enumerable:!1,writable:!1,value:t.level})):null}(function(){var t,e=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{(t=n.set).call(e,r)}catch(t){}if(Object.getPrototypeOf(e)===r)return{set:t,level:2}}return e.__proto__=r,Object.getPrototypeOf(e)===r?{level:2}:((e={}).__proto__=r,Object.getPrototypeOf(e)===r&&{level:1})}()),t("../create")},{"../create":25,"../is-object":27,"../valid-value":39}],38:[function(t,e,r){"use strict";e.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},{}],39:[function(t,e,r){"use strict";var n=t("./is-value");e.exports=function(t){if(!n(t))throw new TypeError("Cannot use null or undefined");return t}},{"./is-value":28}],40:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":41,"./shim":42}],41:[function(t,e,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))}},{}],42:[function(t,e,r){"use strict";var n=String.prototype.indexOf;e.exports=function(t){return n.call(this,t,arguments[1])>-1}},{}],43:[function(t,e,r){"use strict";var n=Object.prototype.toString,o=n.call("");e.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&(t instanceof String||n.call(t)===o)||!1}},{}],44:[function(t,e,r){"use strict";var n,o=t("es5-ext/object/set-prototype-of"),i=t("es5-ext/string/#/contains"),s=t("d"),c=t("es6-symbol"),a=t("./"),u=Object.defineProperty;n=e.exports=function(t,e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");a.call(this,t),e=e?i.call(e,"key+value")?"key+value":i.call(e,"key")?"key":"value":"value",u(this,"__kind__",s("",e))},o&&o(n,a),delete n.prototype.constructor,n.prototype=Object.create(a.prototype,{_resolve:s((function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t}))}),u(n.prototype,c.toStringTag,s("c","Array Iterator"))},{"./":47,d:2,"es5-ext/object/set-prototype-of":35,"es5-ext/string/#/contains":40,"es6-symbol":57}],45:[function(t,e,r){"use strict";var n=t("es5-ext/function/is-arguments"),o=t("es5-ext/object/valid-callable"),i=t("es5-ext/string/is-string"),s=t("./get"),c=Array.isArray,a=Function.prototype.call,u=Array.prototype.some;e.exports=function(t,e){var r,l,f,p,_,y,b,h,v=arguments[2];if(c(t)||n(t)?r="array":i(t)?r="string":t=s(t),o(e),f=function(){p=!0},"array"!==r)if("string"!==r)for(l=t.next();!l.done;){if(a.call(e,v,l.value,f),p)return;l=t.next()}else for(y=t.length,_=0;_<y&&(b=t[_],_+1<y&&(h=b.charCodeAt(0))>=55296&&h<=56319&&(b+=t[++_]),a.call(e,v,b,f),!p);++_);else u.call(t,(function(t){return a.call(e,v,t,f),p}))}},{"./get":46,"es5-ext/function/is-arguments":8,"es5-ext/object/valid-callable":38,"es5-ext/string/is-string":43}],46:[function(t,e,r){"use strict";var n=t("es5-ext/function/is-arguments"),o=t("es5-ext/string/is-string"),i=t("./array"),s=t("./string"),c=t("./valid-iterable"),a=t("es6-symbol").iterator;e.exports=function(t){return"function"==typeof c(t)[a]?t[a]():n(t)?new i(t):o(t)?new s(t):new i(t)}},{"./array":44,"./string":49,"./valid-iterable":50,"es5-ext/function/is-arguments":8,"es5-ext/string/is-string":43,"es6-symbol":57}],47:[function(t,e,r){"use strict";var n,o=t("es5-ext/array/#/clear"),i=t("es5-ext/object/assign"),s=t("es5-ext/object/valid-callable"),c=t("es5-ext/object/valid-value"),a=t("d"),u=t("d/auto-bind"),l=t("es6-symbol"),f=Object.defineProperty,p=Object.defineProperties;e.exports=n=function(t,e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");p(this,{__list__:a("w",c(t)),__context__:a("w",e),__nextIndex__:a("w",0)}),e&&(s(e.on),e.on("_add",this._onAdd),e.on("_delete",this._onDelete),e.on("_clear",this._onClear))},delete n.prototype.constructor,p(n.prototype,i({_next:a((function(){var t;if(this.__list__)return this.__redo__&&void 0!==(t=this.__redo__.shift())?t:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()})),next:a((function(){return this._createResult(this._next())})),_createResult:a((function(t){return void 0===t?{done:!0,value:void 0}:{done:!1,value:this._resolve(t)}})),_resolve:a((function(t){return this.__list__[t]})),_unBind:a((function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)})),toString:a((function(){return"[object "+(this[l.toStringTag]||"Object")+"]"}))},u({_onAdd:a((function(t){t>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach((function(e,r){e>=t&&(this.__redo__[r]=++e)}),this),this.__redo__.push(t)):f(this,"__redo__",a("c",[t])))})),_onDelete:a((function(t){var e;t>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(e=this.__redo__.indexOf(t))&&this.__redo__.splice(e,1),this.__redo__.forEach((function(e,r){e>t&&(this.__redo__[r]=--e)}),this)))})),_onClear:a((function(){this.__redo__&&o.call(this.__redo__),this.__nextIndex__=0}))}))),f(n.prototype,l.iterator,a((function(){return this})))},{d:2,"d/auto-bind":1,"es5-ext/array/#/clear":3,"es5-ext/object/assign":21,"es5-ext/object/valid-callable":38,"es5-ext/object/valid-value":39,"es6-symbol":57}],48:[function(t,e,r){"use strict";var n=t("es5-ext/function/is-arguments"),o=t("es5-ext/object/is-value"),i=t("es5-ext/string/is-string"),s=t("es6-symbol").iterator,c=Array.isArray;e.exports=function(t){return!!o(t)&&(!!c(t)||(!!i(t)||(!!n(t)||"function"==typeof t[s])))}},{"es5-ext/function/is-arguments":8,"es5-ext/object/is-value":28,"es5-ext/string/is-string":43,"es6-symbol":57}],49:[function(t,e,r){"use strict";var n,o=t("es5-ext/object/set-prototype-of"),i=t("d"),s=t("es6-symbol"),c=t("./"),a=Object.defineProperty;n=e.exports=function(t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");t=String(t),c.call(this,t),a(this,"__length__",i("",t.length))},o&&o(n,c),delete n.prototype.constructor,n.prototype=Object.create(c.prototype,{_next:i((function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()})),_resolve:i((function(t){var e,r=this.__list__[t];return this.__nextIndex__===this.__length__?r:(e=r.charCodeAt(0))>=55296&&e<=56319?r+this.__list__[this.__nextIndex__++]:r}))}),a(n.prototype,s.toStringTag,i("c","String Iterator"))},{"./":47,d:2,"es5-ext/object/set-prototype-of":35,"es6-symbol":57}],50:[function(t,e,r){"use strict";var n=t("./is-iterable");e.exports=function(t){if(!n(t))throw new TypeError(t+" is not iterable");return t}},{"./is-iterable":48}],51:[function(t,e,r){"use strict";t("./is-implemented")()||Object.defineProperty(t("es5-ext/global"),"Map",{value:t("./polyfill"),configurable:!0,enumerable:!1,writable:!0})},{"./is-implemented":52,"./polyfill":56,"es5-ext/global":11}],52:[function(t,e,r){"use strict";e.exports=function(){var t,e;if("function"!=typeof Map)return!1;try{t=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(t){return!1}return"[object Map]"===String(t)&&(3===t.size&&("function"==typeof t.clear&&("function"==typeof t.delete&&("function"==typeof t.entries&&("function"==typeof t.forEach&&("function"==typeof t.get&&("function"==typeof t.has&&("function"==typeof t.keys&&("function"==typeof t.set&&("function"==typeof t.values&&(!1===(e=t.entries().next()).done&&(!!e.value&&("raz"===e.value[0]&&"one"===e.value[1])))))))))))))}},{}],53:[function(t,e,r){"use strict";e.exports="undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)},{}],54:[function(t,e,r){"use strict";e.exports=t("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":34}],55:[function(t,e,r){"use strict";var n,o=t("es5-ext/object/set-prototype-of"),i=t("d"),s=t("es6-iterator"),c=t("es6-symbol").toStringTag,a=t("./iterator-kinds"),u=Object.defineProperties,l=s.prototype._unBind;n=e.exports=function(t,e){if(!(this instanceof n))return new n(t,e);s.call(this,t.__mapKeysData__,t),e&&a[e]||(e="key+value"),u(this,{__kind__:i("",e),__values__:i("w",t.__mapValuesData__)})},o&&o(n,s),n.prototype=Object.create(s.prototype,{constructor:i(n),_resolve:i((function(t){return"value"===this.__kind__?this.__values__[t]:"key"===this.__kind__?this.__list__[t]:[this.__list__[t],this.__values__[t]]})),_unBind:i((function(){this.__values__=null,l.call(this)})),toString:i((function(){return"[object Map Iterator]"}))}),Object.defineProperty(n.prototype,c,i("c","Map Iterator"))},{"./iterator-kinds":54,d:2,"es5-ext/object/set-prototype-of":35,"es6-iterator":47,"es6-symbol":57}],56:[function(t,e,r){"use strict";var n,o=t("es5-ext/array/#/clear"),i=t("es5-ext/array/#/e-index-of"),s=t("es5-ext/object/set-prototype-of"),c=t("es5-ext/object/valid-callable"),a=t("es5-ext/object/valid-value"),u=t("d"),l=t("event-emitter"),f=t("es6-symbol"),p=t("es6-iterator/valid-iterable"),_=t("es6-iterator/for-of"),y=t("./lib/iterator"),b=t("./is-native-implemented"),h=Function.prototype.call,v=Object.defineProperties,d=Object.getPrototypeOf;e.exports=n=function(){var t,e,r,o=arguments[0];if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");return r=b&&s&&Map!==n?s(new Map,d(this)):this,null!=o&&p(o),v(r,{__mapKeysData__:u("c",t=[]),__mapValuesData__:u("c",e=[])}),o?(_(o,(function(r){var n=a(r)[0];r=r[1],-1===i.call(t,n)&&(t.push(n),e.push(r))}),r),r):r},b&&(s&&s(n,Map),n.prototype=Object.create(Map.prototype,{constructor:u(n)})),l(v(n.prototype,{clear:u((function(){this.__mapKeysData__.length&&(o.call(this.__mapKeysData__),o.call(this.__mapValuesData__),this.emit("_clear"))})),delete:u((function(t){var e=i.call(this.__mapKeysData__,t);return-1!==e&&(this.__mapKeysData__.splice(e,1),this.__mapValuesData__.splice(e,1),this.emit("_delete",e,t),!0)})),entries:u((function(){return new y(this,"key+value")})),forEach:u((function(t){var e,r,n=arguments[1];for(c(t),r=(e=this.entries())._next();void 0!==r;)h.call(t,n,this.__mapValuesData__[r],this.__mapKeysData__[r],this),r=e._next()})),get:u((function(t){var e=i.call(this.__mapKeysData__,t);if(-1!==e)return this.__mapValuesData__[e]})),has:u((function(t){return-1!==i.call(this.__mapKeysData__,t)})),keys:u((function(){return new y(this,"key")})),set:u((function(t,e){var r,n=i.call(this.__mapKeysData__,t);return-1===n&&(n=this.__mapKeysData__.push(t)-1,r=!0),this.__mapValuesData__[n]=e,r&&this.emit("_add",n,t),this})),size:u.gs((function(){return this.__mapKeysData__.length})),values:u((function(){return new y(this,"value")})),toString:u((function(){return"[object Map]"}))})),Object.defineProperty(n.prototype,f.iterator,u((function(){return this.entries()}))),Object.defineProperty(n.prototype,f.toStringTag,u("c","Map"))},{"./is-native-implemented":53,"./lib/iterator":55,d:2,"es5-ext/array/#/clear":3,"es5-ext/array/#/e-index-of":4,"es5-ext/object/set-prototype-of":35,"es5-ext/object/valid-callable":38,"es5-ext/object/valid-value":39,"es6-iterator/for-of":45,"es6-iterator/valid-iterable":50,"es6-symbol":57,"event-emitter":65}],57:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?t("ext/global-this").Symbol:t("./polyfill")},{"./is-implemented":58,"./polyfill":63,"ext/global-this":67}],58:[function(t,e,r){"use strict";var n=t("ext/global-this"),o={object:!0,symbol:!0};e.exports=function(){var t,e=n.Symbol;if("function"!=typeof e)return!1;t=e("test symbol");try{String(t)}catch(t){return!1}return!!o[typeof e.iterator]&&(!!o[typeof e.toPrimitive]&&!!o[typeof e.toStringTag])}},{"ext/global-this":67}],59:[function(t,e,r){"use strict";e.exports=function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&("Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag]))}},{}],60:[function(t,e,r){"use strict";var n=t("d"),o=Object.create,i=Object.defineProperty,s=Object.prototype,c=o(null);e.exports=function(t){for(var e,r,o=0;c[t+(o||"")];)++o;return c[t+=o||""]=!0,i(s,e="@@"+t,n.gs(null,(function(t){r||(r=!0,i(this,e,n(t)),r=!1)}))),e}},{d:2}],61:[function(t,e,r){"use strict";var n=t("d"),o=t("ext/global-this").Symbol;e.exports=function(t){return Object.defineProperties(t,{hasInstance:n("",o&&o.hasInstance||t("hasInstance")),isConcatSpreadable:n("",o&&o.isConcatSpreadable||t("isConcatSpreadable")),iterator:n("",o&&o.iterator||t("iterator")),match:n("",o&&o.match||t("match")),replace:n("",o&&o.replace||t("replace")),search:n("",o&&o.search||t("search")),species:n("",o&&o.species||t("species")),split:n("",o&&o.split||t("split")),toPrimitive:n("",o&&o.toPrimitive||t("toPrimitive")),toStringTag:n("",o&&o.toStringTag||t("toStringTag")),unscopables:n("",o&&o.unscopables||t("unscopables"))})}},{d:2,"ext/global-this":67}],62:[function(t,e,r){"use strict";var n=t("d"),o=t("../../../validate-symbol"),i=Object.create(null);e.exports=function(t){return Object.defineProperties(t,{for:n((function(e){return i[e]?i[e]:i[e]=t(String(e))})),keyFor:n((function(t){var e;for(e in o(t),i)if(i[e]===t)return e}))})}},{"../../../validate-symbol":64,d:2}],63:[function(t,e,r){"use strict";var n,o,i,s=t("d"),c=t("./validate-symbol"),a=t("ext/global-this").Symbol,u=t("./lib/private/generate-name"),l=t("./lib/private/setup/standard-symbols"),f=t("./lib/private/setup/symbol-registry"),p=Object.create,_=Object.defineProperties,y=Object.defineProperty;if("function"==typeof a)try{String(a()),i=!0}catch(t){}else a=null;o=function(t){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return n(t)},e.exports=n=function t(e){var r;if(this instanceof t)throw new TypeError("Symbol is not a constructor");return i?a(e):(r=p(o.prototype),e=void 0===e?"":String(e),_(r,{__description__:s("",e),__name__:s("",u(e))}))},l(n),f(n),_(o.prototype,{constructor:s(n),toString:s("",(function(){return this.__name__}))}),_(n.prototype,{toString:s((function(){return"Symbol ("+c(this).__description__+")"})),valueOf:s((function(){return c(this)}))}),y(n.prototype,n.toPrimitive,s("",(function(){var t=c(this);return"symbol"==typeof t?t:t.toString()}))),y(n.prototype,n.toStringTag,s("c","Symbol")),y(o.prototype,n.toStringTag,s("c",n.prototype[n.toStringTag])),y(o.prototype,n.toPrimitive,s("c",n.prototype[n.toPrimitive]))},{"./lib/private/generate-name":60,"./lib/private/setup/standard-symbols":61,"./lib/private/setup/symbol-registry":62,"./validate-symbol":64,d:2,"ext/global-this":67}],64:[function(t,e,r){"use strict";var n=t("./is-symbol");e.exports=function(t){if(!n(t))throw new TypeError(t+" is not a symbol");return t}},{"./is-symbol":59}],65:[function(t,e,r){"use strict";var n,o,i,s,c,a,u,l=t("d"),f=t("es5-ext/object/valid-callable"),p=Function.prototype.apply,_=Function.prototype.call,y=Object.create,b=Object.defineProperty,h=Object.defineProperties,v=Object.prototype.hasOwnProperty,d={configurable:!0,enumerable:!1,writable:!0};o=function(t,e){var r,o;return f(e),o=this,n.call(this,t,r=function(){i.call(o,t,r),p.call(e,this,arguments)}),r.__eeOnceListener__=e,this},c={on:n=function(t,e){var r;return f(e),v.call(this,"__ee__")?r=this.__ee__:(r=d.value=y(null),b(this,"__ee__",d),d.value=null),r[t]?"object"==typeof r[t]?r[t].push(e):r[t]=[r[t],e]:r[t]=e,this},once:o,off:i=function(t,e){var r,n,o,i;if(f(e),!v.call(this,"__ee__"))return this;if(!(r=this.__ee__)[t])return this;if("object"==typeof(n=r[t]))for(i=0;o=n[i];++i)o!==e&&o.__eeOnceListener__!==e||(2===n.length?r[t]=n[i?0:1]:n.splice(i,1));else n!==e&&n.__eeOnceListener__!==e||delete r[t];return this},emit:s=function(t){var e,r,n,o,i;if(v.call(this,"__ee__")&&(o=this.__ee__[t]))if("object"==typeof o){for(r=arguments.length,i=new Array(r-1),e=1;e<r;++e)i[e-1]=arguments[e];for(o=o.slice(),e=0;n=o[e];++e)p.call(n,this,i)}else switch(arguments.length){case 1:_.call(o,this);break;case 2:_.call(o,this,arguments[1]);break;case 3:_.call(o,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),e=1;e<r;++e)i[e-1]=arguments[e];p.call(o,this,i)}}},a={on:l(n),once:l(o),off:l(i),emit:l(s)},u=h({},a),e.exports=r=function(t){return null==t?y(u):h(Object(t),a)},r.methods=c},{d:2,"es5-ext/object/valid-callable":38}],66:[function(t,e,r){var n=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},{}],67:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?globalThis:t("./implementation")},{"./implementation":66,"./is-implemented":68}],68:[function(t,e,r){"use strict";e.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},{}],69:[function(t,e,r){"use strict";var n=t("../prototype/is");e.exports=function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(t){return!1}return!n(t)}},{"../prototype/is":76}],70:[function(t,e,r){"use strict";var n=t("../value/is"),o=t("../object/is"),i=t("../string/coerce"),s=t("./to-short-string"),c=function(t,e){return t.replace("%v",s(e))};e.exports=function(t,e,r){if(!o(r))throw new TypeError(c(e,t));if(!n(t)){if("default"in r)return r.default;if(r.isOptional)return null}var s=i(r.errorMessage);throw n(s)||(s=e),new TypeError(c(s,t))}},{"../object/is":73,"../string/coerce":77,"../value/is":79,"./to-short-string":72}],71:[function(t,e,r){"use strict";e.exports=function(t){try{return t.toString()}catch(e){try{return String(t)}catch(t){return null}}}},{}],72:[function(t,e,r){"use strict";var n=t("./safe-to-string"),o=/[\n\r\u2028\u2029]/g;e.exports=function(t){var e=n(t);return null===e?"<Non-coercible to string value>":(e.length>100&&(e=e.slice(0,99)+"…"),e=e.replace(o,(function(t){switch(t){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}})))}},{"./safe-to-string":71}],73:[function(t,e,r){"use strict";var n=t("../value/is"),o={object:!0,function:!0,undefined:!0};e.exports=function(t){return!!n(t)&&hasOwnProperty.call(o,typeof t)}},{"../value/is":79}],74:[function(t,e,r){"use strict";var n=t("../lib/resolve-exception"),o=t("./is");e.exports=function(t){return o(t)?t:n(t,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":70,"./is":75}],75:[function(t,e,r){"use strict";var n=t("../function/is"),o=/^\s*class[\s{/}]/,i=Function.prototype.toString;e.exports=function(t){return!!n(t)&&!o.test(i.call(t))}},{"../function/is":69}],76:[function(t,e,r){"use strict";var n=t("../object/is");e.exports=function(t){if(!n(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(t){return!1}}},{"../object/is":73}],77:[function(t,e,r){"use strict";var n=t("../value/is"),o=t("../object/is"),i=Object.prototype.toString;e.exports=function(t){if(!n(t))return null;if(o(t)){var e=t.toString;if("function"!=typeof e)return null;if(e===i)return null}try{return""+t}catch(t){return null}}},{"../object/is":73,"../value/is":79}],78:[function(t,e,r){"use strict";var n=t("../lib/resolve-exception"),o=t("./is");e.exports=function(t){return o(t)?t:n(t,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":70,"./is":79}],79:[function(t,e,r){"use strict";e.exports=function(t){return null!=t}},{}]},{},[51]);
define("es6-map", function(){});

